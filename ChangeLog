commit 69102beed05d7e2eec1d087b74c218f731f4bbd1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-03-01 17:23:25 +0000

    Version 5.7.5

commit ff0847e2dea8848c76d6f965014a1d1869d2d710
Merge: 28c11af 28581cc
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-03-01 16:57:09 +0000

    Merge branch 'master' of git+ssh://git.freedesktop.org/git/telepathy/telepathy-mission-control

commit 28c11afb58a9809e648b6de8fadda6a9c2308773
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-03-01 16:31:21 +0000

    update LIBS for gtk-doc scanner

commit d5d40f83aa1e92cc374b3483259516187997f79f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-03-01 16:31:05 +0000

    update LDADD for mission-control-5

commit bb9e6d06935400dbe599a158cf1d4a6122f5bcc2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-03-01 16:30:44 +0000

    update LDADD for mc-tool

commit 28581cc816dd6082916db86d68200a439d64934a
Merge: 6933fb3 4e69bef
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-03-01 15:45:33 +0000

    Merge branch 'misc'
    
    Reviewed-by: Marco Barisione <marco.barisione@collabora.co.uk>

commit 4e69beff3dd97487a6aff5b934a09c5123b82f22
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-03-01 15:13:04 +0000

    mc-tool: remove support for þe olde profiles

commit 41dec7ea5438f44068318fb4c69f28e5a13fa241
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-24 17:56:35 +0000

    Be more robust against cataclysmic test failures
    
    Previously, if MC never claimed its bus names (because it was crashing
    on startup, for instance), the exception in the test initialization code
    wasn't caught. This means nothing would ever quit the Twisted mainloop,
    and the (failed) test would sit there forever.
    
    This patch ensures that the test exits uncleanly if this happens.

commit 6933fb3526029c61c3078177f8bc3cd3bb9e0358
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-24 20:10:17 +0000

    Checking the wrong struct member before clearing - spurious g_critical

commit 8fa0deffe7d07e2ffb1a19125f2a166c2d5830fc
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-24 14:13:08 +0000

    Bump to 5.7.4+

commit 5339401da8010e205f6688eb1bb74bdf4355fffc
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-23 23:29:41 +0000

    Version 5.7.4

commit b33885b5c94e0f6fc7c3773cc295747709ca61cf
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-23 23:32:56 +0000

    Update telepathy.am to moan about gtk-doc.

commit aa0797f88ca2662d39e865bd85f72b73a891a077
Merge: bb001a6 c3be05c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-23 23:28:42 +0000

    Merge branch 'external-password-storage-34416'
    
    Signed-off-by: Will Thompson <will.thompson@collabora.co.uk>
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=34416>

commit c3be05c7c44f0645ff919f6832dc1f744c4b6c8b
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-23 23:04:38 +0000

    Depend on telepathy-glib 0.13.14.
    
    We need this for emitting and connecting to PropertiesChanged

commit 84aa24868fb5b2fac5d683116006950667dead51
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-23 22:46:55 +0000

    Preserve deleted account while calling Identify
    
    When an account is deleted, we'd expect that the McdAccount object will
    die shortly afterwards. However, we need to ensure that RemoveAccount is
    called on connection managers that implement AccountStorage. Previously,
    the account object was used as the weak_object for the callback to
    IdentifyAccount; this could mean that the callback would never fire, and
    thus we'd never get around to calling RemoveAccount.
    
    So this patch holds a reference for that callback.

commit 78221c62bf02313e76947d3f6872de7e4322a548
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-23 16:47:45 +1100

    Emit PropertiesChanged for PasswordSaved signal

commit 42c90a1d3e230919c10dda20d7d5fdf5e58074cd
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-23 16:40:59 +1100

    Implement PasswordSaved

commit 6eb2ab4e6c23c828db78d0c8d1dd933aa0baea87
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-23 15:47:46 +1100

    Call CM.I.AS.RemoveAccount() when the account is deleted

commit 54fa2a2190c7f8f57d12e63f488e4f425380866b
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-22 15:22:46 +1100

    Implement ForgetPassword()

commit acbf3a967441f1202fb4fa15858ad6a4e71baf04
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-22 15:22:24 +1100

    Build client bindings for CM.I.AS

commit 2e0e96d8a183cb0d18cf2754b94e91751f89d518
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-22 13:56:44 +1100

    Hook up skeleton Acct.I.EPS in McdAccount
    
    Currently activates the interface when the CM.I.AS is present on the CM. Needs
    the methods and properties implemented.

commit 696c6f6ae82cb478247b9921b28a5e3b17579cbf
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-22 13:56:05 +1100

    Add CM.I.AccountStorage.DRAFT from tp-spec

commit 711ab5b25fe5d9108802cdc52ff02fcf8cf3f05f
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-22 13:41:58 +1100

    Add Acct.I.ExternalPasswordStorage.DRAFT from tp-spec

commit 7365dde12d91eade4039fdb28cb79c3e3e14dfa4
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2011-02-22 13:36:29 +1100

    Make it possible to optionally implement interfaces on a MC object
    
    Defining an interface as MCD_IMPLEMENT_OPTIONAL_IFACE() indicates it should
    not be included in an object's Interface property by default. Instead the
    interface is activated by calling mcd_dbus_activate_optional_interface() on
    an individual object instance.
    
    This makes it possible to implement interfaces such as
    Acct.I.ExternalPasswordStorage only on accounts whose Connection Manager
    supports it.

commit bb001a6497ec414594ad5221eaad42a015a478b2
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-21 19:13:07 +0000

    check_one_parameter_unset: fix conditional's indentation

commit 9c8d9765ec0af9f82dbece22b4729a25bb8f320f
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-21 17:25:43 +0000

    UpdateParameters(): allow unsetting nonexistant parameters
    
    I missed the spec's decree that literally anything be permitted in the
    list of parameters to unset, and since there was no test for this nuance
    I made it regress. Here's a fix and a test.
    
    Reviewed-by: Nicolas Dufresne <nicolas.dufresne@collabora.co.uk>

commit a11e1d23c3a292aba89ad8f7863bf3a5d2c14933
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-21 17:16:12 +0000

    Here is some news.

commit a4ca0e65fc908d499ff14582477fc9a99e65eda1
Merge: 5df9ab2 718d297
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-21 16:14:17 +0000

    Merge branch 'fd.o-34316-UpdateParameters-fixes'
    
    Reviewed-by: Danielle Madeley <danielle.madeley@collabora.co.uk>

commit 718d297eabac88364ffc35ad076987b564dd5ef1
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-21 15:52:12 +0000

    UpdateParameters(): clarify releasing memory.
    
    On fd.o#34316, Danni sez:
    
    > It might be nice to have goto finally; and then error: then finally:
    > so that all the memory is released in one location -- since my first
    > question was whether or not the error path free'd @protocol.
    
    She's right, it's not clear. Nicolas suggested this even clearer
    implementation. (It would be even even clearer and shorter if this
    function returned a value rather than calling a callback
    (synchronously), but oh well.)
    
    Reviewed-by: Nicolas Dufresne <nicolas.dufresne@collabora.co.uk>

commit 63c636e2f5f3149c792ce048e380a0ee9f376c22
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-18 17:30:59 +0000

    Update copyright for files touched by this branch

commit 0774476cae8f4f0336dc6913307b3d66871e58c9
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-18 17:23:28 +0000

    UpdateParameters: break apart check_parameter_update()
    
    I had thought that the logic for setting and clearing parameters was
    similar enough that combining them would be a net win, but it seems that
    that was not the case. This patch rearranges check_one_parameter()
    check_parameter_update() into check_one_parameter_update() for parameter
    updates, and check_one_parameter_unset() for unset parameters. There is
    a little duplication, but these are much easier to follow.
    
    Dear reviewer, I'm sorry for the many false starts in this branch. I
    did try to rebase them out of existence, but…

commit 5961487b0ec321b72e58ab9823ccd6f0a0097c95
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-18 16:42:52 +0000

    UpdateParameters: check for setting parameters to their default
    
    A few patches ago, we made MC smarter about unsetting parameters which
    have default values. Here, we make the symmetrical case work: explicitly
    setting a previously-unset parameter to its default value should not
    need a reconnect to take effect.
    
    I really don't like how complicated check_parameter_update() has become,
    but this does actually seem to need to be this complicated to get every
    case right. Perhaps check_one_parameter() should be split into 'set' and
    'unset' cases.

commit 43523d6c224129aaeb64f55ceed3c6719c3e2919
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-18 14:33:40 +0000

    UpdateParameters: consolidate post-validation code

commit bb8a5fdfc607f4d01688884dcd3886fa004cb61b
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-18 13:38:38 +0000

    UpdateParameters: clean up freeing Not_Yet array

commit 6173858addc6fa15072776e780298779972cfa2c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-18 12:58:49 +0000

    UpdateParameters: apply Unset parameters immediately, if possible.
    
    If a parameter in the Unset list was previously set to its default
    value, there's no need to reconnect to apply the change. Also, if its
    default value is different, but it's got the DBus_Property flag, we can
    apply it to the running connection.
    
    Distressingly, fixing this does not actually make this code much
    simpler.
    
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=34316>

commit 0120affac05efd57f5eca2582a925df3ccec3f46
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-18 11:17:33 +0000

    UpdateParameters: keep a{sv} of DBus_Property parameters
    
    This will make it easier to support unsetting DBus_Property parameters
    with the Has_Default flag.

commit c4a4b83959e537a66ca0845e73136d7985e5f29e
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-18 10:18:57 +0000

    UpdateParameters: Extract checking params to a function

commit 192c653f1df8a44a18d3c03895009592dc5ab904
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-17 19:02:42 +0000

    UpdateParameters: expunge SetParametersData completely.
    
    I left some FIXMEs in for places which leak (not a regression!) or don't
    leak but look like they do. Clean-up comes next...

commit af017acef7b4e4a296aa4b1ab3464d040626b75f
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-17 18:47:14 +0000

    UpdateParameters: move things out of SetParametersData
    
    This struct makes it much harder to see which functions actually use
    which data, and I think we leak some of it on some code paths. So I'm
    gonna get rid of it, piece by piece.

commit 152022957ddf4b5bfdfbbd778e84f03b2522db88
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-17 18:27:01 +0000

    UpdateParameters: Use a GQueue for DBus_Properties list
    
    I'm a GQueue addict, I know.

commit 079546c39ca0d994320d415ca6f694afbf693e99
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-17 17:59:01 +0000

    _mcd_account_set_parameters: remove stray 'return'

commit 42c9023fd739142cd19500b7fa95e20f1bf85169
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-17 17:54:56 +0000

    Test UpdateParameters with invalid parameters

commit be6c320406c5574bfb58dc735d2885892539df6e
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-02-17 17:39:50 +0000

    UpdateParameters: linearize setting and unsetting params
    
    I love continuation passing style as much as the next guy, but this
    doesn't add anything.

commit 5df9ab23a8489a0ccd9e8563a4388c54cc677078
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2011-01-20 14:28:29 +0100

    add redispatch-channels.py testing RedispatchChannels()

commit bffe11ea92d8910c689f80a365f4343b5f52cab8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2011-01-20 14:28:07 +0100

    implement ChannelDispatcher.RedispatchChannels() (fdo #33271)

commit 3124576fa649683e61718329d0c5ab3277405db3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2011-01-20 14:27:36 +0100

    expose mcd_connection_find_channel_by_path()

commit 79b67507da3abec9a493f1f5780e2ab1535cfe30
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2011-01-20 12:18:48 +0100

    factor out check_preferred_handler()

commit 8c76ddb3661c73855a43f67da4eb023c2edbad23
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2011-01-19 14:49:40 +0100

    generate ChannelDispatcher.Redispatch_Channels has a DRAFT

commit c5e7ddbc3866fae72bf7a41ffe90fa0787862f13
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2011-01-20 10:01:53 +0100

    mctest: silence the queue if we hit an error
    
    This a backport of the Gabble commit ee177cfb2a13a8374e2f1037e806b7bc58aa708b

commit 1f7e0162173a0db91f7bda37eef45de84279cad9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-15 16:02:53 +0000

    version 5.7.3+

commit 0b7bd4c8bbddd39b72d27423add2ba3adbacab58
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-15 16:02:15 +0000

    'UNRELEASED' checks activated

commit 181b72b62e7c908268d09ae7ed8388c820e28d04
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-15 15:00:34 +0000

    Prepare version 5.7.3

commit 9b5e028ed37d3b7ed6d95ffb02d1a9661ef12564
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-15 14:51:14 +0000

    Update copyright notices, prefer AUTHORS to per-file Contact: entries

commit c0d77221030db1c2959a5f4427d5e1471c1c1a45
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-11 14:53:43 +0000

    Clear the emergency data (and emit a critical warning) when setting
    
    They should always be empty when they are set, but cope if they aren't

commit 3ce692fb7a14eab86021de9b3fa8cf06055dec1a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-08 14:52:04 +0000

    Use predefined dbus property constants instead of rolling our own.

commit a3bf09f24da81e0a2e894c91f23b8bd753cfb881
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-08 14:40:15 +0000

    Missing call to clear the emergency data in parse_services_list

commit 5a78285c5134bb37585a4775388fadabd1693ebe
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-08 14:19:16 +0000

    Rename _set_emergency_* to _take_emergency_* to indicate change of ownership

commit 9d501e530d92ab5b39745fbe7c7eafd51c43b946
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-08 14:07:37 +0000

    Change asserts in emergency data helpers to warnings

commit 73d357732aa4088ff3c9a648d8c054b51a5208f3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-08 14:04:10 +0000

    Added emergency number helper functions should follow same style as file

commit 28ee310ee78e09efea8c47d9085f8f4791729410
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-03 20:06:02 +0000

    Bypass request policy delays for urgent channel requests

commit 87c96d3ea28780955ab78f9feb74c527cc709e40
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-03 20:05:09 +0000

    Cache the request policy plugins the first time we need them

commit 12cb4e4be79067edb7013683856936de45424a8a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-28 04:43:12 +0000

    Use service point data to check if a connection is urgent (eg an emergency call)

commit 1906a3c4228bc7182a89058ef71468612998cfb2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-28 04:37:32 +0000

    Start watching a connection for service point data the first time it becomes connected

commit 0f7484069b3cda5a362353067b0f46fd74a47ee9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-28 04:35:49 +0000

    Support watching for service point/emergency data and updating the connection

commit bcd72e3363d246adc0b9c50e963813c4a0b7b9e0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-28 04:30:53 +0000

    Helper function to set emergency handles data

commit c03b89519ab8522f6c457290e6512d0a88a87025
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-28 04:30:06 +0000

    Helper function to set emergency number data

commit 9e9e3b49987778d7ed3df9757ca302c75cac2d22
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-28 04:29:16 +0000

    helper function to clear current emergency number/handle data

commit e42743b23c38e309c0c2f0c53b610bd596643b2b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-28 04:28:02 +0000

    Add struct entries to hold emergeny number (service point) data and state

commit 485607b16534ed9ea9b9bd643cbbf9fff2672557
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-14 19:02:45 +0000

    Update libtelepathy-glib0 dependency for debug_sender updates

commit 3321165f24740d0d2b5947e3353fc78ddc4e85ab
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-02-14 17:53:11 +0000

    Be parsimonious with printf ops in the mcd_debug path.

commit 52d53425d4dfb2c65ec4e640c42004318f19074f
Author: Marco Barisione <marco@barisione.org>
Date:   2011-01-28 14:56:39 +0000

    McdAccountManager: don't leak if mcd_master_get_default() returns NULL
    
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=33651>

commit 0d69567e4d0d94e6018c10f528b177195c75b958
Author: Marco Barisione <marco@barisione.org>
Date:   2011-01-27 19:02:27 +0000

    Aegis plugin: fix a leak of DBus proxies
    
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=33612>

commit fa4de0d15ea4f2184e76f935ff79708fcee11eb4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-19 17:55:24 +0000

    version 5.7.2+

commit 833f5e87182e5053381bdd1502fe93b49c4cd347
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-19 15:10:38 +0000

    Prepare version 5.7.2

commit c6114d74c265e77944968c46dd7afd0b09839ef7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-19 15:10:21 +0000

    Tests using the debug API must be in the special section to work in distcheck

commit df58b39efd5db4c8cf2ad85a75377fde48191439
Merge: b7b9ffc 730dceb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-18 16:54:29 +0000

    Merge branch 'hidden-for-accounts-glib' of git+ssh://git.collabora.co.uk/git/user/wjt/telepathy-mission-control-wjt

commit b7b9ffc40cd0feadb37d735af97232355d4472dc
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-11 18:54:31 +0000

    Explanation of map had drifted away from same (in terms of location & accuracy)
    
    Updated text to reflect what's actualy going on now, relocated it so it is
    next to the structure it explains.

commit 90f793ae18e049aa93d1cd0a1afc6154ec19ac5c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-11 18:01:05 +0000

    Commit delay now #defined and logged explicitly

commit f698e3371d4dd5fd3922f26c4217d71fd4315ad4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2011-01-11 18:00:09 +0000

    Add comment explaining _commit, remove obsolete FIXME comment

commit d40546d1c6aa6cceae3330e614d95f67492681b2
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2011-01-01 19:12:10 -0800

    Delay actual commit() in sso backend.

commit 730dcebb085d9fc3be97a8a9a240c5f23983de2e
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-11 16:47:01 +0000

    Set a plugin name and description for ag hidden backend

commit a4115f4dc452905c4cfdfbbc5b1b989f79558080
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-11 16:22:38 +0000

    Add a configure flag for hidden accounts-glib backend
    
    This is a pretty niche use case; it's not worth building it unless
    explicitly requested.

commit 744fdc63357fe815c1894a9cd5cfafe75791bfb3
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-08 15:22:30 +0000

    Set Hidden on accounts from hidden accounts-glib backend

commit e929ec07702c77dc00e2e8962ea8e4865d33cc9d
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-11 10:44:27 +0000

    mc-tool: show Service (if present)
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

commit 22f6152262224c5868e24c00200e6af9df4fc5d0
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 20:05:58 +0000

    Add an accounts-glib backend for hidden accounts.
    
    Currently this doesn't hide accounts; it just looks for accounts of a
    different service type. But hey, this is a start.

commit dc3b9deaf8a6f46e40297af555be40cfcee706ba
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-10 18:56:34 +0000

    account-glib: Remove spurious newlines in DEBUG messages

commit 0363a3de3c94a78f5ed9e8df20ca28f05324d5f3
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-08 22:18:38 +0000

    accounts-glib: remove unused list of services.
    
    This was used in an earlier incarnation of this backend, but now is just
    leaked.

commit 60e1c9fe201e0ddca8bb0881f7cdd00bc8f753f6
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-08 14:58:19 +0000

    accounts-glib: expose _get implemenation for subclasses
    
    This is only needed because McpAccountStorageIface is hidden. See
    <https://bugs.freedesktop.org//show_bug.cgi?id=32914>. This is a
    workaround for now.

commit 3373220c555262955684732e02716e688ccfd3b6
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 21:49:08 +0000

    accounts-glib: split up gargantuan _get implementation

commit 43555b2311992a2668441c87f98c20411c34a02f
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 20:03:18 +0000

    Clean up loading account storage plugins.
    
    The duplication of g_list_insert_sorted() was getting me down.

commit 2858bbac87eeaa96814996ead4cc64db3b75c4b8
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 19:57:32 +0000

    Correct MCD_ACCOUNT_MANAGER_SSO_CLASS() macro

commit 508c59b67c7a19cb32108dc562ad9b16b52264a8
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 19:18:06 +0000

    accounts-glib: make service type parametrizable
    
    Rather than hard-coding the "IM" string everywhere, we now call a
    private method which looks up the accounts-glib service type from a
    field in the class structure. The default implementation is of course
    "IM", but this will allow a subclass which looks for a different type of
    accounts.

commit 88df5c5e996b6886d3854a2c643d1f288e2f4f4d
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 18:55:45 +0000

    accounts-glib: List services in constructed, not init
    
    I'm about to replace the hard-coded AG_SERVICE constant with a field in
    the class (so that a subclass can look for other services and set Hidden
    to True for those accounts). However, as we discovered way back in
    f7b7aa8e477abe03c1340c2b200ddcf9c9792c2c, when _init runs for class T,
    G_OBJECT_TYPE() always returns T even if we're constructing a subclass.
    So we're going to need to wait until constructed() to get at the desired
    service name.

commit 972883acdc5f11e247b807477199fd5cf029d4b4
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 17:58:49 +0000

    accounts-glib: declutter class_init

commit 425a2bb4aa78a3184239e4b7e2d9f32c7ea7f9db
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 16:12:15 +0000

    accounts-glib: make null termination clearer

commit 9799ff9a74700115f8eb3c7bd08f71e0b0440971
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-31 00:34:55 +0000

    Add a smoke test for Account[Manager].I.Hidden
    
    This doesn't really test all that much, but it's better than nothing.

commit 183be5735a3f15c2543a0059e234a8c386c49427
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-31 00:32:39 +0000

    Implement AccountManager.Interface.Hidden

commit c2ffc90b046a03942bc137db6b0f33d117763060
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-30 22:39:47 +0000

    Implement Account.Interface.Hidden

commit 02e3aed21485b375fda2d1c632074592b13263a8
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-01 19:47:01 +0000

    Generate code for hidden account interfaces.

commit 8e011b287da8f1b2319c8c947f636e87fda9f5c7
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 14:34:58 +0000

    mctest: improve error messages from post-test cleanup

commit 1eac316750a070612a24249063ba992602acd03a
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-07 15:31:03 +0000

    AM: Remove a stray paren from a debug message

commit f5cef05a9d4b76c78045dcb6642964939e063698
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-06 19:07:05 +0000

    tests: extract common mc-slaying and keyfile-reading code

commit 4c99fea93bcc5a29f642fefad6b32329877117a5
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-06 17:23:47 +0000

    mctest: tidy up create_fakecm_account()
    
    I think it needs a better docstring: I keep forgetting what it returns.
    Plus it's full of unnecessary comments and no-op code. So let's tidy it
    up a bit.

commit e90cfdcf5f8991457f631cecef227e0b0ae0af21
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-06 16:32:57 +0000

    mctest: support passing properties to create_fakecm_account()

commit 081fdd53678d5579f90c1f5d753274284b439063
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-10 19:03:33 +0000

    account_check_parameters: assert callback is non-NULL
    
    This function was already actually assuming this in two of the three
    places it calls the callback, so let's assume it properly.

commit 4c79dba8a2fbdceb5460a6b124ca9a7790fa7731
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-10 18:56:45 +0000

    Log why we're declaring accounts invalid.
    
    If the CM is flat-out missing, then we get debug output to that effect.
    But in the cases where the CM exists but lacks the relevant protocol, or
    the account is missing required parameters, no useful information was
    given.

commit 12be4b8cfc2f4fc9a46a03a3c3a1149f089cbab6
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-06 11:11:26 +0000

    Preliminary news for 5.7.2

commit 50454504ed1036f383deebeafd4b675da741f75f
Merge: 4e08c42 b30dfb1
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-06 11:04:05 +0000

    Merge branch 'misc'
    
    Reviewed-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit b30dfb18026448d25c699ba77a484c0ab11e6451
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-05 18:06:39 +0000

    Simplify mcd_account_set_string_val()
    
    Hey, there's already a function that sets a string and returns TRUE or
    FALSE depending on whether or not it's actually changed.

commit db50713152f6154b0a42c3f8ef23e25ff73987d7
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-05 17:40:47 +0000

    Storage: allow backends to implement only one of commit/commit_one
    
    This mostly reverts 0d914e13cc4a6e84cebb840c0be4d32abaacaddc, except
    that it preserves the fix for the bug which could cause a NULL ->commit
    implementation to be called. I do not believe this interdependency is
    “irrational”: it reduces the boilerplate that backend implementations
    need. Plus, this makes the implementation match the documentation again.
    
    This also improves the debugging messages logged by
    mcp_account_storage_commit() and mcp_account_storage_commit_all().
    
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=32153>

commit 53d38f675dd389f6d04fff5855094362c7e49aac
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2011-01-05 17:27:20 +0000

    Account: ensure updated string properties are committed.
    
    Properties whose setters were implemented using
    mcd_account_set_string_val() were actually not committed to disk
    unless/until some later property whose implementation is correct was
    updated.
    
    I noticed this in passing, not while checking out any particular bug.
    However, I think it may be responsible for the issue where people's
    aliases are re-set to their JID for no apparent reason. I don't really
    have any evidence to back this up. I did tweak one of the storage tests
    to expose this bug, though.
    
    I've checked a whole bunch of other properties, and I think the ones not
    implemented using mcd_account_set_string_val() were all already okay.

commit d80eb01daa3fda0b3153a8ab1fa382c0dc6fd38b
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-31 00:54:49 +0000

    Accounts-GLib backend: fix shadowing warnings
    
    acct() is a function defined in unistd.h, which something winds up
    including in this file.
    
    Sometimes 'acct' was an AgAccount, and other times it was the
    "cm/protocol/foo" identifier. I changed the former to 'account' and the
    latter to 'account_suffix' where needed, as a first step towards
    coherency.

commit e01643fdc290a668e5a532da7f8eccd9bf0856ca
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-30 23:47:02 +0000

    tests: improve assertion when forbidden events occur
    
    This makes the backtraces prettier; it doesn't have any functional
    effect.

commit 2730cf23367fb0d2198b402c2bf4cb98a82cef42
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-30 23:36:37 +0000

    Tests: handle more exceptions during cleanup
    
    Previously, if a non-DBusException was thrown while the test harness
    deletes any accounts left kicking around, the reactor would just hang;
    killing it would make Automake think the test passed!
    
    This does a better job.

commit ec6666d0b0edd70644498773f2cfa83ee21d57d9
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-24 17:37:15 +0000

    tests: simplify holding the name for fakecm

commit 48b13f6fc212b50118a7672b196b14b2bd96298f
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-24 16:03:15 +0000

    mctest: use ProxyWrapper for Account/AM proxies
    
    ProxyWrapper's a nice class that deals better with multiple interfaces
    on a remote object than bare python-dbus proxies do. So this reduces
    some of the boilerplate in mctest.
    
    I didn't go around changing all the tests to use this, because life is
    too short.

commit 4e08c42659381c315feda5f3ba7250925c499869
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-12-22 16:10:40 +0000

    tests: add a tests/README symlink
    
    I always get confused as to how to run the tests as I look for a
    tests/README and it's not there.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit 5b34520e25c014377a27f22d35b958ded994a2dd
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-12-22 15:54:58 +0000

    tests: move from test/ to tests/
    
    So so annoying.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit 1d9f17613ac2ce1dc3928ab0848d7b9b987b6330
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-22 11:04:25 +0000

    create-with-properties: remove unsound signal expectation
    
    When this test creates a new account, it expects four events to occur:
    
    • A.AccountPropertyChanged, to say the new account is valid;
    • AM.AccountValidityChanged, to say the new account is valid;
    • CreateAccount returning successfully;
    • RequestConnection on the fake CM, because ConnectAutomatically was
      set to True and RequestedPresence was set to non-offline in
      CreateAccount.
    
    However, if the account's not yet been announced by
    AccountValidityChanged, MC has no reason to emit AccountPropertyChanged
    on it. It happens that, in some cases, it does; but this depends on
    whether or not MC has already introspected the fake CM by the time the
    account is created. So the test is wrong to expect
    AccountPropertyChanged. Instead, we check that Account.Valid is in sync
    with what AccountValidityChanged said.
    
    This fixes an issue where this test would only pass if it was run after
    account-manager/create-twice, but not if it was run individually.

commit 9ad89fea078ea23178a99608fc18b753bd6f2005
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-22 11:01:31 +0000

    create-twice.py: use a different 'account' parameter
    
    This test runs right before a test which passed or failed depending
    on whether this test was run. The logs were made much harder to read by
    them both creating accounts with very similar names.

commit 4afb8eb6314395eae3e3c4a905062183c2dcc090
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-12-22 10:14:40 +0100

    stop generating Hints interfaces

commit c2f15753fd5d3f874f4ef2d06c43bdcfeb0b492e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-12-22 09:59:16 +0100

    SucceededWithChannel signal is now stable

commit aa56027c9de02c8db28071548f2c96f059ac0fed
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-12-22 09:48:28 +0100

    ChannelRequest's Hints property is now stable

commit 15c262255cbe130ad731358b1182a5e3457d05bd
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-12-21 15:41:32 +0100

    {Create,Ensure}ChannelWithHints is now stable

commit cbffe9b899c1da6e7188685bc3bf5995a49eebce
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-12-21 15:36:23 +0100

    depends on tp-glib having request hints stable API

commit 2401aebf11aaf5cc4478dc80c2b5c958308df5ed
Merge: e33f894 7f16c51
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-21 18:56:39 +0000

    Merge branch 'remove-MinimumPresence'
    
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=29812>
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit e33f8946ac20e0a85a075e837b6318ac2974829e
Merge: 359d1c5 cfe3684
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-21 18:56:03 +0000

    Merge branch 'simplify-getting-parameters'
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=32414>

commit 359d1c553b7135dcceebf5c80d49a81dd3521362
Merge: 4131664 9e4ddfb
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-12-21 14:13:26 +0000

    Merge branch 'test-fixes'

commit 9e4ddfb989f05fb7a4c6c8f5c435e4319c7abd0d
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-12-21 14:06:42 +0000

    create-at-startup: don't expect ObserveChannels calls so close together
    
    Now that preparing the connection takes one more step, it can take
    longer before ObserveChannels is called with the channel that just
    appeared on connecting, so let's allow that to appear earlier.
    
    This only relaxes the test assumptions a little. Although it currently
    fails on 0.13.9 and this fixes it, it'll still work on tp-glib <
    0.13.9.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit 95e56df4a2a0acc89c86fd85eb25ae0e7cdb603d
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-12-21 13:20:41 +0000

    mctest: implement GetContactAttributes and GetAll on Contacts
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit e3e955d792db4328ff026a7c1c48c13dc8028826
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-12-21 13:20:30 +0000

    mctest: implement HoldHandles
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit 41baccd21db1ffc14d694b9d631b3385178894f6
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-12-21 13:19:56 +0000

    mctest: implement GetAll on Connection
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit 7f16c518a48a964f94d6b211bd224e7a29219910
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-01 18:48:15 +0000

    Remove MinimumPresence implementation.
    
    I feel kind of bad doing this, but it turned out not to be needed. I
    think it's better to take dead code out, rather than leaving it kicking
    around to potentially complicate matters later.

commit cfe36847c8afec4277ea042465917fc2d8e9631b
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-03 00:44:44 +0000

    McdDBusProp: remove get_async
    
    The only property that was implemented in an async fashion was
    Account.Parameters. Since that's now synchronous, we can bin this code
    for getting properties asynchronously.

commit 94d62e8d68ec1d657b8af36f467b1520703632e5
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-02 18:21:58 +0000

    Make _mcd_account_dup_parameters() synchronous
    
    This is a really massive patch, and I'm very sorry.
    
    Previously _mcd_account_dup_parameters() took a callback parameter. This
    was because mcd_account_get_parameter() took a callback parameter. The
    latter used to actually be asychronous in the gnome-keyring case, but it
    is not any more, thanks to the harmonious account backend API.
    
    So we can remove a *lot* of unnecessary complexity if we make the latter
    return the parameter's value synchronously, and hence make the former
    return a GHashTable synchronously. In particular, this means we can make
    retrieving the Parameters D-Bus property synchronous, which means we can
    port to TpDBusPropertiesMixin.
    
    I did try to split this patch up, but as you, dear reader, will be able
    to see from what I ended up with, this code was all really entangled
    with itself. This is the best I could do.

commit 8cbdbdb68311f7df76e99b87257d256975fedb5c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-02 15:19:25 +0000

    McdAccount: Remove un-overridden virtual methods
    
    No known subclass of McdAccount overrides get_parameter, set_parameter,
    delete or load these days. People should be, and are, using the new
    pluggable storage backends API. So it's safe to remove these methods
    from the vtable. This will simplify refactoring their (default)
    implementations.

commit 08ba772275f1d5d87041e665afdad3216bf81df7
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-15 14:35:02 +0000

    Account.Service: remove unnecessary explicit fallback.
    
    dbus-glib treats a GValue containing a NULL string as equivalent to a
    GValue containing "", at least in this context. Many other properties
    rely on this behaviour; so let's just rely on it here too.

commit 8bd702c5c15afc24e4ab64847650a512fac37858
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-15 16:51:14 +0000

    Tests: correct name of Conditions.Condition property
    
    The property's actually called Condition, not Conditions. But because
    McdDBusProp returns the same error for “unknown property” and “wrong
    type”, the test passed.

commit f4b1a6175634948e376bf9047d88d81d5b2b2fa4
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-01 19:36:27 +0000

    Remove redundant object path/bus name constants.
    
    These have been in tp-glib approximately forever.

commit baeaade204481e7bd400d419ebc2ccb2084c5fed
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-01 19:19:47 +0000

    Remove long-obsolete mcd-presence-frame.h

commit 413166490899fa583a8193197e2b62310a3e5d37
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-12-10 17:39:47 +0000

    Update telepathy.am from telepathy-glib

commit cdb289c8d0f9cb96d90e287d526d408590b9e145
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-07 17:14:32 +0000

    Start 5.7.2 development

commit 52840f8f8aa13f1d91fe5eaad93cf888e52c1497
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-12-06 18:55:50 +0000

    Prepare version 5.7.1

commit 3a320720d744f6a0d61bc0ae8bc95b5a52bb7a04
Merge: b4bafff 2472223
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-12-06 17:14:46 +0000

    Merge branch 'master' of git+ssh://git.collabora.co.uk/git/telepathy-mission-control

commit 24722235b4a0cf6ebca4a08980afa6514de03c05
Merge: 1164508 3a63c47
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-01 19:01:04 +0000

    Merge branch 'telepathy-mission-control-5.6'

commit 3a63c47fa84a7a3d20e2274cd8c8c94771c02736
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-01 19:00:50 +0000

    NEWS for fd.o #24779.

commit fc8258409337a777b5249d37df5bc6b88573165c
Merge: 4a2f68a 438826e
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-12-01 18:59:57 +0000

    Merge branch 'fd.o-24779-CurrentPresence-incorrect' into telepathy-mission-control-5.6
    
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=24779>
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit 1164508b9633b352440c880ccccda20f904adf3c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-11-30 18:05:29 +0000

    mc-tool: Improve error message for nonexistant accounts.
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit b4bafff4c224fc66c592be844ea9daeba2b4334c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-19 17:25:35 +0000

    Undo the telepathy to mission control error mapping special case: It's Obsolete

commit 7a7837cf62c9350e3a1b6cc714b15acee6d67363
Merge: 555cb06 4d21b5f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-19 17:17:08 +0000

    Merge branch 'master' of git+ssh://git.collabora.co.uk/git/telepathy-mission-control

commit 555cb06119523427c5814bc6e13bcbea2e7011f7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-19 17:06:02 +0000

    Nano version

commit 4d21b5f58a8ce6f5ec4685ec298548c9b83ba37b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-19 13:00:55 +0000

    Update telepathy.am from tp-glib and add make-release-mail.py
    
    Also only ship the changelog since 5.4, which should be plenty.
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit df17fb16b8c26b255ca6fad5a2f6010520b7a7bd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-19 11:15:34 +0000

    Start 5.7.1 development

commit 77826308a3ca7c92d0e71aff77e99ebb45f88516
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-19 11:15:07 +0000

    Retroactively add more NEWS

commit bf40bc1481782d96d85135c58823a8bf414ef89f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-18 18:45:35 +0000

    Header file no longer exists

commit 9fa087c98eb75ec31f71dda787c5661ea3f2110f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-18 17:40:58 +0000

    Prepare for 5.7.0

commit c221ef54e7a3d52f379945304cc2d406dccf1212
Merge: e470073 7a9ee6b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-18 16:20:17 +0000

    Merge branch 'account-interface-addressing'

commit 7a9ee6b457755f93e2273b286cbe51f9ed1e0036
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-18 15:57:39 +0000

    mcd-account-addressing.h contains no API, move from mc-headers to *_la_SOURCES

commit e47007323c3983ef207a3f2f03b78d858e3395d1
Merge: fdd9048 c57e8e1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-18 15:51:45 +0000

    Merge branch 'missing-am-account-removed-signal'

commit fdd9048df1f385c0ccc431422ab7585078a40ee4
Merge: 93d4f79 98d2148
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-18 15:51:32 +0000

    Merge branch 'keep-calm-but-do-not-carry-on'

commit 93d4f79d5d7aac0f80ca53a065c72e9df44e0683
Merge: 37c6ea2 39f8f20
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-17 16:01:04 +0000

    Merge branch 'hints'
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

commit 39f8f20f74252fccbc4e09f3f66a16a9a8bcf3f6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-17 15:00:16 +0000

    Switch from CD.Future, CR.Future to CD.I.Hints, CR.I.Hints from my branch

commit 50a6bb2bbd0343d1c8e849e1efcbb964b4dc4545
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-17 14:48:37 +0000

    src: generate extensions per "class", not per interface, for dispatcher/request

commit bc5c448d4c798146322ed5637eab7c31ad5d7025
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-17 14:47:47 +0000

    mcd-account-requests: remove obsolete inclusion

commit 98d2148d313c928f88a5c588bf0fa60041998e97
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-17 14:07:10 +0000

    abort()'s from inside g_error get trapped as core dumps by test suites
    
    We get a lot of noise in the form of bug reports as a result of these
    three because g_error ends in an abort() - we exit(1) anyway, so
    hopefully downgrading the error to a warning will calm things down.

commit 37c6ea25e0dcbfa7ec50a04f3929011d698e8461
Merge: 0e41f32 4a2f68a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-17 13:18:39 +0000

    Merge branch 'telepathy-mission-control-5.6'
    
    Conflicts:
    	NEWS
    	configure.ac

commit 4a2f68a1b2c84940b844652566710ca2706cfc63
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-17 13:16:59 +0000

    Nano version

commit c57e8e157c255735c5b1434b278d04919be0b381
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-17 12:29:15 +0000

    Missing AM.AccountRemoved signal when a storage plugin removes an account
    
    Only affects the disabled-in-5.6 SSO plugin which is why the tests didn't
    pick it up.

commit 7df3310b088a0187b60c8ba1992ceac4a93026b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-17 11:45:17 +0000

    Version 5.6.1

commit 03937b7ef60e12468e3f661af943edb24ce8eecc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-17 10:56:51 +0000

    Update NEWS

commit 0e41f320e6644951a0a22428cab22f0e4adcd90e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-10 14:23:30 +0000

    Update PowerSaving to the stable spec that will be in 0.21.5
    
    Reviewed-by: Eitan Isaacson <eitan.isaacson@collabora.co.uk>

commit cd1886ad0ecfef4bdb3d5c3c7c76f2876a7562a7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-10 15:09:41 +0000

    Undraft Account.Interface.Addressing

commit e89e4769683d51970e17854660592dce06c6de5d
Merge: 3cf24b0 01c4a86
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-11-10 14:15:40 +0000

    Merge branch 'handler-request-props'
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30000

commit 36112f9e9b9d5be41318ca2e61b37c7e9deb4a1e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-10 13:53:21 +0000

    Unnecessary calls to set() in tests removed

commit cac5fb9a3bb460ac4456d2f5322c51af769937ea
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-10 13:50:12 +0000

    Spec change: Acccount.I.Addressing method no longer has a return value

commit 6919f27a0fcd052c9a2c9061a954f9b055a4fddd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-05 17:21:57 +0000

    Test tidy proposed by wjt (cf gabble tests)

commit 7027006f2ec8f559b7e9432d9faf0c7ab644a26e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-11-05 17:01:15 +0000

    old_association and association are booleans, don't need to cast with !!

commit 3cf24b0b4feb57ed42fc1894996e42de7cd87732
Merge: d3a2692 60403c9
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-03 11:15:31 -0700

    Merge branch 'power-save'

commit 60403c991191511b1840882a64f629bf12aadbdf
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-03 11:14:29 -0700

    Maked device idle test a seperate test.
    We need the MCE service available from the start.

commit b1d9b8d2048d8bbe254c5ad7236c42a8950df169
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-03 08:59:23 -0700

    Report error if inactivity retrieval failed.

commit d3a2692288e1494f48cbcb1085f69c4fa799a87d
Merge: bdb2572 40834b2
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-03 08:05:14 -0700

    Merge branch 'build-fixes'

commit 9ba931f1ded9aadffc6e69000d402424fc25b621
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-02 22:37:20 -0700

    Make device idle test conditional on no native MCE.

commit fdc7058497096d15874a466fae35f5670942b029
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-02 21:27:26 -0700

    New device idle power saving test.

commit 649a41e1d81ab1f481f33eca1615577e54db2d15
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-01 11:22:32 -0700

    Integrated McdSlacker into McdConnection.

commit fc882c78ab5bbf35201048941d13fabc1dff1ae4
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-01 11:22:32 -0700

    Moved GabbleSlacker to MissionControl as McdSlacker.

commit 73f5d61f2e9bfd7003c54dc3df28e89f7aa2c7dc
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-01 18:23:49 -0700

    Added Conn.I.PowerSaving as extension.

commit 40834b2e9281c0fe3273d6a0368ebd132bd6014f
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-11-01 11:46:35 -0700

    Purge Account_Manager_Interface_SSO.*

commit 0b9464ee78eb063e1ee8bf7b833a6bd378f1fa90
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-27 16:18:51 +0100

    Use the new AG_SERVICE macro instead of hardiwring "IM" everywhere.

commit 1798389710ce878298598c9ffc4b156abc708e00
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-27 16:18:13 +0100

    Register for the IM service type specifically: no wakeups for non-IM changes

commit 1b1908504a2127ee4e60ec6a0eda851cc817e48f
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-25 18:34:50 +0100

    Simplify SetURISchemeAssociation.

commit 28382eae7df8725a69d437a9a6a5f9b64ae581a9
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-25 18:33:50 +0100

    Add mcd_storage_set_strv
    
    This is more convenient than requiring callers to box up their strvs
    manually.

commit 2078e4cf3fee9d9dafe60e3403e61d043d9daa86
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-25 16:34:11 +0100

    Silence a warning

commit cf6fa689d74aac0a177425e66d64f8a0864a9913
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-25 16:33:57 +0100

    Tests need to use .DRAFT

commit 2f059cc44bc6d05730d486a97f9a72c5d1922b49
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-25 16:33:34 +0100

    Sync with spec branch

commit 0d7d20201eab3f04d860bbfaaa00dfc36500974d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-22 17:54:50 +0100

    Test the Accounts.I.Addressing interface

commit 6edb77db1e8cb11cae196b24ea855580e641e208
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-22 17:54:50 +0100

    Pull Account.I.Addressing into the mcd-account implementation

commit c8b31e2ca7a8433293a0d604eb068a69326888a3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-22 17:54:50 +0100

    Implement Account.I.Addressing

commit 23bcffad520e6c5356dc9df8f894006393cd3e71
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-22 17:54:49 +0100

    Introduce new interface Account.Interface.Addressing

commit bdb25723743291ca50b1b8cbdeb2dab051554066
Merge: 2e71d81 cfaa5ff
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-12 17:35:14 +0100

    Merge branch 'mcd-account-get-cm'
    
    Reviewed-by: Senko Rašić <senko.rasic@collabora.co.uk>

commit cfaa5ffdcee7069d92d882791882311e44d97e15
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-08 18:22:59 +0100

    Add TpConnectionManager accessor to McdAccount

commit 420325c1e1261c37c02f0790030a1f316c6bb128
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-12 11:14:57 +0100

    Tweak .gitignore

commit 782aa7c3bdd580c3e9ab4a0bde366815c2919f95
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-12 11:11:32 +0100

    Remove obsolete AM.Interface.SSO
    
    This is superseded by Account.Interface.Storage.

commit a710cd0f9abe2b756864928c65ba798e556198b0
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-11 14:55:06 +0100

    Delete mcd_master_add_connection_parameter()
    
    This is not used anywhere, which is good, because it doesn't work.

commit 41aeef1c314c60b12d394403d1552ed7bd964203
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 15:38:48 +0100

    Implement the "list" operation in the libaccounts backend

commit d8179b677aeeee0394840f330275bb956a459e84
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 15:38:12 +0100

    Obsolete functions no longer used by the libaccounts get/set implementations

commit 4f43ef635decd263783bcde5db7ac56e6e9a4297
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 15:37:03 +0100

    Update the libaccounts "set" implementation to use the new helpers

commit 3cd7559e500d1b5ac7b442ce61eef72337014feb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 15:36:34 +0100

    Update libaccounts "get" implementation to use the new helper functions

commit 3c1fefe21ebc9603bc0a0b4ff56cae9a369d59ef
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 15:35:10 +0100

    Helper function to save settings in the SSO

commit 08e39a3aa4003b2a31c6a548610cf5fa32bf3b9d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 15:33:58 +0100

    Helper functions to map the enabled flag to the enabled tri-state in SSO

commit 8f2a2ccc5fd7e860581ffcbe2709f975cbc90856
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 15:27:10 +0100

    Implement the same AG <-> MC setting mapping functions as the SSO storage plugin

commit 6d6ab7387c99df31b071b7cce8d617ff46d87cf8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 15:24:40 +0100

    Fix up g_log related helpers so they build (bad comparison, bad func signature)

commit 4c9c8f48f1b3b86ea46c46055d4c2e5ef926cb5a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 14:19:06 +0100

    Implement the "list" operation in the default account store tool backend

commit deb56f64ff9dc03f682e09561dfaad14bd3083d4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 14:18:35 +0100

    Implement the "list" operation in tha account store tool

commit 2fc6e063fc591f2eba6dc51678ad5c527d9d2e4c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-12 13:31:56 +0100

    Missing includes

commit 2e71d81b3f9d04fc4f2a856d9de19cd1e6a92b12
Merge: 6b6156f 068185b
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-10-12 14:19:03 +0200

    Merge branch 'bypass-observer'

commit 068185bd5be0f113c1785a07e9da029ecd8e7cf0
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-31 14:50:01 +0200

    updated copyrights

commit bddeef350dba5d90023f1f21d7d7664c46059ada
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-31 14:48:40 +0200

    add dispatcher/bypass-observers.py test

commit b6ea54b2cc93b3547d647e9ab4ceda58440c995b
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-31 14:43:56 +0200

    mctest.SimulatedClient: optionally support BypassObservers

commit 201d5af64004c1542c09b446c3046c6f1ad38425
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-31 14:42:17 +0200

    McdDispatcher: when respawning observers, skip notifying them about unobservable channels

commit 8d8db2ffa52049d0ee39da7d7b75dfadac1bda34
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-31 11:59:00 +0200

    McdDispatchOperation: bypass observers if first channel handler requests it

commit a892185dfbea0897b7b3ea1d541501fe8da9053a
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-31 11:58:10 +0200

    McdClient: add BypassObservers boolean flag

commit 01c4a86570f6772809c02b947c04822bf8ed57e8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-10-11 18:45:27 +0100

    while we're using GObject-Introspection notation for docs, get it fully right

commit 16d4d59d32b4acd6d35d28fafc1cf4899d2fa27c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-10-11 14:27:51 +0100

    Let ag parameters/account shadow the ag 'username'/mc 'param-account' mapping
    
    New convention introduced to meet the requirements of a libaccounts platform:
    Normally the account parameter is mapped from the global 'username' setting.

commit bd6ee840804ed95fea2511565932fdff84640e5e
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-08 18:07:53 +0100

    Remove unused mcd_manager_get_parameters()

commit 6b6156f6ea921e50ef8b9bb15d7c2ba289ec2e66
Merge: a7b17cd fb5ea01
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-07 16:34:01 +0100

    Merge branch 'telepathy-mission-control-5.6'

commit fb5ea0159ec8a5d96a266530b401f788c0e293ca
Merge: f03e38c 144d6e1
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-10-07 16:33:17 +0100

    Merge branch 'mc-tool-types' into telepathy-mission-control-5.6
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 144d6e15d9cd5bd8a8c17ffc50a0ba5078319d98
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-08-03 18:09:42 +0100

    mc-tool: support object path parameters

commit fcc72fea419a1eb5abb4fcb173a0a57dbaeee87e
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-08-03 17:02:16 +0100

    mc-tool: make help consistent about supported types
    
    Also, make it a bit more readable, and avoid the lines wrapping.

commit a7b17cd87d76038a8448a515a4a9f2e439faff3b
Merge: 750932c ea4d52a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-10-06 15:20:56 +0100

    Merge branch 'requests-30092'
    
    Conflicts:
    	src/mcd-account-requests.c

commit 750932c509c39e887b3be40d98593a0d9a5ebd9d
Merge: 22e2a9f f03e38c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-10-06 15:17:19 +0100

    Merge branch 'telepathy-mission-control-5.6'

commit f03e38c057a3d38537bc585dabc78ed0dc8cda24
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-29 11:10:16 +0100

    fd.o #30448: make type of mcp_account_storage_get_restrictions consistent with the header
    
    It seems we changed the implementation but not the header, and Solaris CC
    is stricter about this than gcc. Since the header defines our API, it
    seems better to fix this in the implementation for the moment.
    
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30448
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 22e2a9f61969a96a54d3f7aba1b550219fa4efac
Merge: 02eff78 793cc90
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-29 10:57:14 +0100

    Merge branch 'telepathy-mission-control-5.6'
    
    Conflicts:
    	NEWS
    	configure.ac

commit 793cc900f08c0cc1efacc33d997c943fa1893086
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-29 10:55:37 +0100

    mcd-manager.c: don't define _POSIX_C_SOURCE for strtok_r, which we don't use

commit 5e8d727e37c31f487bce840c755f66d66fa259d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-29 10:55:18 +0100

    fd.o #30447: don't use "return x()", where x returns void, in void functions
    
    Solaris CC doesn't allow this.
    
    [In fact, neither does ISO C99 --smcv]
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30447

commit 760fe45393bda94cebc9192595e34eed906a3d89
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-20 13:46:12 +0100

    Must include config.h when using AC_DEFINE'd macros

commit 02eff78a581f84ee9174a112df854c57026fda17
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-20 13:46:12 +0100

    Must include config.h when using AC_DEFINE'd macros

commit 438826eb7970d706a8bcb6c6ed79590a885ff761
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-09-16 18:48:55 +0100

    Clean up SimplePresence-building code.

commit 1e93089a8d05c2a60da177d0025dec1f031d3dbe
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-09-16 18:23:05 +0100

    Set CurrentPresence to Unset if online without SimplePresence
    
    The spec says:
    
        If the connection is online but does not support the SimplePresence
        interface, this should be (Connection_Presence_Type_Unset, "", "").
    
    But previously we only updated CurrentPresence in response to
    PresencesChanged being emitted for our self handle, which it obviously
    never is by connections which don't implement SimplePresence.
    
    (Actually, this was right by accident until my previous commit, because
    CurrentPresence was initialized to (0, NULL, NULL).)
    
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=24779>

commit f02defd4f8053c62aafc867954474b4c97bae178
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-09-16 18:21:32 +0100

    Correctly initialize Account.CurrentPresence
    
    The spec says that CurrentPresence being 'Unset' (which is value 0,
    hence the default if we don't change it) means that the connection is
    online, but doesn't support SimplePresence.

commit 1cdaa58630098d66e0f76dcc06ce2cc0c3633597
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-16 17:34:06 +0100

    Nano version for master

commit 62eba1c3202bcf165a3e975c9469c373dcad30cc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-16 17:33:23 +0100

    Revert "Don't warn about deprecated declarations"
    
    This reverts commit 50f936b83a8a5970f981bbe2a6b318b3d51adebe.

commit 6cf2e11f2019cdbf0c2068362444e23663d55132
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-16 17:33:13 +0100

    Nano version 5.6.0+

commit 02023109462143bba05b169ecc1c690038c357c9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-16 16:51:22 +0100

    Prepare MC 5.6.0

commit 50f936b83a8a5970f981bbe2a6b318b3d51adebe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-16 16:49:57 +0100

    Don't warn about deprecated declarations
    
    This is about to be a stable branch, so we're not going to fix any
    uses of newly-deprecated functions in future.
    
    (To be reverted in master after branching for 5.6.)

commit 3433a7b4ae90f0f61d4fef130631e88f066fd26a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-16 16:30:56 +0100

    Update NEWS

commit be83db16e4cba060da074a1c4e2db22596310d37
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-16 15:52:46 +0100

    If keyring support is off, we define stubroutines, we dn't #if them out
    
    The unused definition warning -> error will bite us if we both define
    a noop stubroutine _and_ #if the use of that name out as well.

commit 51b5efe07c8c14f5d54183561aed95c2cb7926ee
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-16 15:28:13 +0100

    Superfluous include

commit 9c8eb6ae0a8ed6809d944f534e21a5740702c558
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-16 15:27:56 +0100

    Install mcd-storage.h [needed by mcd-account-manager.h]

commit d563ead8cff191753d95d19bb0655db254e77c6e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-15 13:12:42 +0100

    test/account-store: fix one more build warning
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

commit 9c5a4e350ae324316297db4ca3af175cbc32a702
Author: Vincent Untz <vuntz@gnome.org>
Date:   2010-09-15 13:08:19 +0100

    Fix various build warnings
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit db4960f191d5b1d091dd76537d50194ae579e773
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 19:11:05 +0100

    Nano version

commit 4c2b540e103cd87b296190ac4bdc72cfb40a3900
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 18:25:10 +0100

    Prepare version 5.5.4

commit 4f67eab634aa4d91d4841b3f3bdfa6d7ee52b2f0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 18:06:54 +0100

    test/Makefile.am: simplify CFLAGS

commit 3790a84acb18bf61d85a5a79b4ea4a30b1649986
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 17:58:58 +0100

    Knock out the account-storage/libaccounts-sso-storage test for 5.6
    
    I'm unable to test it and it looks unfinished.

commit c68547b12b3371eb1c67e2640e7d0f270f5890ef
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 17:28:59 +0100

    Run account storage tests in their own session, and not in installcheck
    
    The gnome-keyring test assumes that it's talking to a MC instance
    configured to use the temporary keyring, which won't be true unless we
    run it in its own instance; the diverted-storage test makes assumptions
    about account naming that aren't necessarily true in a non-new MC
    instance.
    
    Similarly, these tests use Abort() which isn't in the real MC.

commit 0bf6ed698102011576327856e16161cd19e1034d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 17:37:40 +0100

    Move keyfile_read() to mctest, fixing distcheck in a simple way
    
    There seems little point in separating out such a small utility function.

commit a478b211eab9224f84a471bfbc1cf80d8ad2f094
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 17:25:02 +0100

    Add keyring-manipulation stuff to .gitignore

commit 2b9f4f1aad25a77710d0a53c80e72c6ccca520bc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 17:24:20 +0100

    Compile test/. before test/twisted
    
    Otherwise, 'make check' in a clean tree won't work: account-store and
    keyring-command won't have been compiled yet when test/twisted is entered.

commit 85e35b0b8e4501ac4eb35fb2fc210eedf0282e3d
Merge: 3116079 9ac2c09
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-14 16:00:12 +0100

    Merge branch 'master' into storage-tests

commit 9ac2c09945c69c32ca4a6e15a30048c58add2782
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-14 14:52:52 +0100

    Generate a GError in the "unsupported type" case of the dup_value method

commit 631e2cafc2e45e89ee3cfc9f47dd0582c14c40bf
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-14 14:46:08 +0100

    Tidy up the GError logic in dup_value, and document the value+error behaviour

commit 84adc5d2a14b19f42c06cabbe4cb807ba7a0e274
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-14 14:31:57 +0100

    Make sure the type of the passed in value matches the type from McdStorage

commit d79c76c46d7c88b31ad865c2c25109a87f5591c5
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-14 14:24:01 +0100

    Unused struct type declaration deleted

commit 38bf72ea3dc67cbe9aadf72de61bbbb8ec0c06d1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-14 14:23:19 +0100

    Use typed key file set helpers in store_value McdStorage method implementation

commit 50d0d448c136987956c73a86269faba22d0fa9b0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-14 13:57:30 +0100

    Reverse the decision about which layer does escaping/unescaping
    
    We now do the escaping/unescaping in the plugin-account layer
    (McdStorage interface), while the storage plugins just accept
    whatever they're given.

commit 3116079d37cd389b10525a0f9d799e7fadb16e60
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:29:12 +0200

    add SSO storage backend test

commit 320c153d13869fd3e5531948095fa18803e4ad1d
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:26:34 +0200

    added default/keyring and diverted storage tests

commit 58e7725455b8724d0eaab1c8da89b00d521a9e35
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:24:44 +0200

    test diversion storage plugin: have an exception for a special account
    
    So we can use that account to test default storage

commit cf5af66a60fa318e4233d73a9f1c286dca4ec3b8
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:23:26 +0200

    set proper environment flags when testing with gnome-keyring

commit 23320b621c85ed0984cfa0a628cfaf34c1ebf206
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:21:38 +0200

    mc-debug-server.c: use temporary keyring from env, don't create one

commit 9cf19f452d0a068c9f4a96a86fa5bb3378b1709c
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:20:54 +0200

    added tests/keyring-command helper for creating/destroying test keyring

commit 2adf4f67d6503a44bca106baf5e8a0a32c90a70a
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:18:02 +0200

    account-store.c: take temporary keyring name from environment

commit 23d0a837431d1f7fc4e8f385a7777f8a8f6d3fbf
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:14:39 +0200

    mctest.py: refactored code into new get_fakecm_account() and connect_to_mc() methods

commit e67044de0f3a5468d56d8e491e37251737608bba
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-06-21 11:13:12 +0200

    mc-debug-server.c: added org.freedesktop.Telepathy.MissionControl5.RegressionTests.Abort

commit 4caef8e9a00ea506809934aaf21095f985381b9d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 16:45:08 +0100

    return success on writing a param, only flush to store if we did so

commit 94c683f4feb9010a8521e2f97f2fab90dd416368
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 16:44:29 +0100

    Remove old debugging

commit 61c753769cedc2bc0311f0d7417d61b0dcaf2e81
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 16:44:14 +0100

    Don't call into libaccounts until we've muted its chatty debug output

commit 9b04e4bf6149f5b51a1616e695b59689d1d4136f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 16:43:29 +0100

    Suppress AG debug for ag_manager creation

commit 39b95c9374b05af851d869ac0b1001ceb7a94aa4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 16:42:44 +0100

    g_type_init called, some backends need it

commit f03cd76003142ca231d8cb2278a4ed61eda51d70
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 15:39:38 +0100

    Fix delete method for dafault storage backend

commit 162ed592fa8ff57c9a263b4bee02219baf919927
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 15:39:15 +0100

    Whitespace trivia.

commit 6249b7cc13d8f201f08a9ef8fa346486d00ca5ad
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 15:38:56 +0100

    Update usage/dcstrings.

commit 68b240c151953179bebc0e02598e53bf255e0a4b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 15:38:10 +0100

    Modify op name for account removal.

commit ad7b90913ad23c37697dc8d0b60555a468212c49
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-03 15:37:31 +0100

    Remove some old debugging

commit 0c3f075b1a4b00c3467855ce51efbd6f61b26ffc
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-02 19:57:39 +0100

    account storage inspectors for default (keyfile + keyring) & libaccounts (SSO)

commit 54404bcf80722c6a875cdeabc851ade29d59ef80
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-14 13:03:31 +0100

    Documentation fix (misnamed funciton in docstring)

commit f447f4004c915208b9f9e1434564e684d8d79ed2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:31:06 +0100

    Use McdStorage instead of direct private structure access in mcd-account-compat

commit 84dea39154f663bac8d81fd30736d30f7cbca5c8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:29:41 +0100

    Use the McdStorage interface in the soon-to-be-deleted conditions code

commit ff641a8dcb117f63fccff66bb2f8d5e83106bcf9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:28:44 +0100

    Use McdStorage instead of private structures in match_account_parameter

commit 0f5556352746303cbe3ee7f923120526f9a68c29
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:27:43 +0100

    DBus daemon is directly available via the account now, account manager is not

commit 42f48a6d53390dd7ef798b637ff7ef5af9c13a65
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:26:44 +0100

    The McdStorage layer uses get/set _value, the actual plugins need to use _string
    
    This way the layer closest to actual storage in a real actually-on-disc
    keyfile make sure escaping is handled, while all layers above them can
    simply treat the values as "data" without caring how or where they
    are stored.

commit 18504cb01f8403ffcc904773d77a2731eb32b895
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:24:42 +0100

    Make sure the sso-services property is cached when we load the account
    
    Doing this means we don't need to special-case sso-services in generic
    code later.

commit e17c526c56ce5fe72ddd4ab3501d1779e564fbb6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:23:29 +0100

    Use the McdStorage interface to find the plugin claiming ownership of an account

commit 3aae65a96489779109dcff2df48c3d261420d3c8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:22:52 +0100

    Stray debug message

commit 49004b163bcd79225fb7fe6bb638526279622e4e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:22:40 +0100

    No longer have direct access to account manager: use helper to store connections

commit 6b53756ded5bbee92d0cafd6d0f50c78664cf252
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:21:45 +0100

    mcd_account_get_alias update to use McdStorage

commit 99424caa96dfe653098584dea550f12eeb0db961
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:20:53 +0100

    get/set avatar methods update to use McdStorage interface

commit b0d1c020c8115f8449082ebb308288f4ef07398d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:20:01 +0100

    get/set avatar token updated to McdStorage interface

commit 1f0cf66f58724f6c302bf1bb5f2cb2ea6cce6a47
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:19:24 +0100

    get/set normalised name functions updated to McdStorage interface

commit ce33ae1f42d6929ca92464ce5731ed7c9de55cc4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:18:13 +0100

    update_parameters_dup_params_cb updated to McdStorage interface

commit 0ea08db42ff6d8171cc8e812dc4a1fe11784c672
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:17:13 +0100

    clear_register_dup_params_cb updated to McdStorage interface

commit ad1d2de0fd0e0c3efc599e325dee5bbc9c3f17f6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:16:20 +0100

    has_been_online updated to use McdStorage interface

commit a2fbe50aba07795db0fd775d3b6119c5cd73a991
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:14:51 +0100

    set_connect_automatically updated to use McdStorage interface

commit f1f618d6fee47e7d46f4422b70c86f2d65b92ff6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:14:22 +0100

    set_automatic_presence updated to use McdStorage interface

commit f9ae977dfb5b7479343fadb4f6a3b9dc59b11e0e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:09:53 +0100

    _mcd_account_set_enabled upated to use McdStorage interface

commit 8ab75eab9ffcffd9948391765d01c18b96115948
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:08:51 +0100

    mcd_account_get_string_val updated to new McdStorage interface

commit 7e862140fe946241a840cfab16f3c6ac050c9358
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:08:20 +0100

    mcd_account_set_string_val updated to new McdStorage interface

commit 3fd92771734ad5ad3820972e6dcb36c0d9c13c7b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:05:39 +0100

    Delete account method updated to use new McdStorage interface

commit efe36be000112b7d72b216e0946bec9fde6c5ff1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:04:45 +0100

    get/set parameter internal functions updated to use McdStorage interface

commit 0f5a38efb6e1764da6123495519f7493b52fc8f9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 21:03:46 +0100

    keyfile_get_value and keyfile_set_value no longer exist (no more keyfile)

commit d6fba82ec292e0c5a9cc94fdf05ed8a05479f3e7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:51:03 +0100

    McdAccount no longer holds an account manager
    
    It has a McdStorage object and a DBus daemon instead - updated
    constructors/destructors/accessors to reflect this change

commit 0046407863d5f61ea1102e78d05d9aae5cc007d3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:36:45 +0100

    Implement method to find the McpAccountStorage plugin holding an account

commit 01a0a82fce092b598370bac4d02c7db0f0cda076
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:35:57 +0100

    Typo, missing return signature

commit b594c4f37ea7e7be392683b27cc158c1148ebf77
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:35:36 +0100

    Hook up the actual McdStorage method implmentations to the interface

commit 76f68b35e71a35856ad2aec7206727fb0b8e7346
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:34:56 +0100

    Implement setting store values from GValues

commit 1d0ed399604c64ddf506eb5026b8b04da5c8681d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:33:46 +0100

    Implement getting integers from the store

commit 4a1ef90e2016b631dd606facb12096b7b8b9dec0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:31:04 +0100

    Implement getting booleans from the store

commit 01fd9a07d6aaccaabeac572584858e489f1506bc
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:30:42 +0100

    Implement fetching GValues from the store

commit 5667b21d7659b89bf2fb5e4e6787e90653230270
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:29:03 +0100

    Implement the has_value method of the storage interface

commit b29db1c3a2d7e9f0b72f178f2844a1938a430715
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:28:03 +0100

    Make the McdStorage interface object available vie the account manager.

commit 2e9de4ecf03a042ca75bbefac32be6674003c042
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:21:41 +0100

    Unused 'update one account' operation removed
    
    Since _all_ operations now know the account involved, this operation
    sort of drops out of the logic.

commit afc6b1cdaa1b8a133e6e49f3a46fd26029d83e62
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:17:42 +0100

    Move commit operation (flushing to long term storage) into plugin-account

commit d1ff9303f0501a65c9f18afb4d0418b506434c8f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:14:42 +0100

    Move account creation and get/set value ops needed by same into plugin-account

commit 33cc0a6a4d7df42b924e5b6bb66c0da7015768c0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:07:31 +0100

    Move account deletion (from storage) into plugin-account

commit 5942a7827a3fe8719e8258aa14b34a17f7af78c3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:04:54 +0100

    Comments - we no longer have direct access to (or knowledge of) any keyfiles

commit 3d5b5e7a248d29a7fce28604e03aba60c816a5ba
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 20:01:36 +0100

    Move account load + initialisation into plugin-account

commit 991789066584f8be0afd1be4de1692b71d16f0ab
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 19:42:57 +0100

    Begin moving the storage plugin cache & management into plugin-account.c

commit a925bdb89cd69a1f20374dde7887c01a2138473f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-09-13 17:33:16 +0100

    New McdStorage interface for storing/retrieving account settings + params
    
    The McpAccountStorage interface used to communicate with the storage plugins
    
    The McdStorage interface is what MC in general should use to store/inspect/
    update/whatever account details, and is responsible for managing the storage
    plugins. It replaces the old method of stealing the account manager's
    internal data structures via the McdAccount and changing them behind
    the account manager's back.

commit 5906616c918a0206fb128590359c349895a27987
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 14:38:51 +0100

    Test request-properties in HandleChannels calls

commit 6bae7bdbb2472dac2b280a675e9e06ac6af809f1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 14:28:11 +0100

    mcd_dispatch_operation_handle_channels: include request-properties

commit 2fca4d99a30fa4b4bac670806068cee2741ef40b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 14:23:45 +0100

    collect_satisfied_requests: go straight from channels to D-Bus info

commit c36969dc58f99bbe35c2802b39729cc21c536d11
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 14:06:43 +0100

    _mcd_dispatcher_reinvoke_handler: include request-properties in Handler_Info

commit ea4d52a990863cfe94662f92137406e7fe4f579c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 18:27:45 +0100

    _mcd_channel_new_request: take a pre-constructed McdRequest

commit 58d1913c86b3b26017b2bb1efb68e43bd37fc567
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 18:21:50 +0100

    _mcd_request_predict_handler: take responsibility for guessing the handler

commit e562ec8eda0b3116111998be60f7f51b7b0fe87a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 13:45:29 +0100

    Give each McdRequest a ref to the client registry

commit a093c3c86b4978a6353dad70c8eaadc6f7c832a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 18:11:29 +0100

    _mcd_dispatcher_get_client_registry: add

commit 015c2290185b610a9cf5fab205c6ba8094d9fe35
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 18:09:58 +0100

    _mcd_client_registry_get_dbus_daemon: add

commit 8e9adf673d62abaf4e915ec00387c384fe956530
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 18:06:08 +0100

    McdClientRegistry: choose handlers in terms of properties, not McdRequest
    
    This means McdRequest can have a McdClientRegistry without circular
    dependencies.

commit 3d9854432bacc5491f1e73b61dfa54d29a457827
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 16:07:13 +0100

    McdClientRegistry: re-indent recently moved code in Telepathy style

commit 466bd0f2b380ca940f3bfeac3919c79311c1e85e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 16:04:28 +0100

    Move listing possible handlers from McdDispatcher to McdClientRegistry

commit 60ca5963c9c13106ba52abc59844795fc3d6751b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 16:03:59 +0100

    McdChannel: remove disused implementations of the ChannelRequest API
    
    Space for a TpDBusPropertiesMixinClass is still reserved in the
    McdChannelClass, since subclasses might exist.

commit 04f5815c5bd52ec5504b5cd81d6dfca700c84b1d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 15:51:24 +0100

    mcd-account-requests: call _mcd_request_proceed instead of a thin wrapper

commit 0785e1d6235dd6c9ddc2803432f7f3df23ee3ca6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 15:49:56 +0100

    Export McdRequest, not McdChannel, on D-Bus

commit ec129a7446887e77bed82ad12b1e0d0aef105b5c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 13:13:27 +0100

    Inline _mcd_account_proceed_with_request() into its caller, and simplify

commit 3808e0b8a9ce61b7fd80addfa44a1f71df9378d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 13:10:46 +0100

    McdRequest: take on responsibility for calling into Client.I.Requests

commit 0a519167dd1f9c69a6a74951ff14040bb87171ec
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 15:03:50 +0100

    McdRequest: implement the early stages of Proceed()
    
    For the moment it calls into mcd-account-requests for the next bit.

commit 98a613e28a4b146b2df7b7a3b58365a013e5f327
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 15:00:46 +0100

    _mcd_channel_request_proceed: don't allow for absent accounts
    
    In earlier versions, this could possibly have happened if the code was
    tangled enough. However, McdRequest holds a reference to the account,
    so there's no way a McdRequest can not have an account.

commit 40af99632c8c30e11468335bef6f12352bb2b25a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 13:08:47 +0100

    _mcd_account_proceed_with_request: remove dependence on McdChannel

commit a2d0ea012a69cda374214cbe19a094045832e75b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 14:48:56 +0100

    mcd-account-requests: connect to ready-to-request earlier
    
    It can't actually be emitted until Proceed() is called, but if we connect
    to it ahead of time, _mcd_account_proceed_with_request doesn't actually
    need the McdChannel.

commit 4204b3d2f8405e2b625abdbaf122980647d648a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 13:53:05 +0100

    mcd-account-requests: defer Proceed() until the dispatcher has been told
    
    This matches the order of events in the modern API, and means that the
    implementation of Proceed() can safely assume that the dispatcher knows
    about the channel request.
    
    This does break the expectations of the old-API tests: previously, we
    incorrectly asserted that AddRequest happened after calling CreateChannel
    on the connection manager, but either order would be valid, and in fact
    the new order makes more sense.

commit f3a153356399ce2f8bcd3a231d13eba60bb262e4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 13:22:42 +0100

    Move a stub version of Cancel() to McdRequest

commit a6fbb7f242c49d722f6ee41e555e7e46d849f224
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 12:38:42 +0100

    Remove the concept of creating a channel request that is already proceeding
    
    Instead, in the Account.ChannelRequests code paths, just create one and
    then tell it to proceed.

commit d2591a6eab3c08f01187b9835f3ddb5e2388cb89
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 18:40:34 +0100

    McdRequest: remove the "completed" signal

commit 207eff860950fdeb263381952b11cc9aa66785a4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 18:39:40 +0100

    Listen for McdRequest:succeeded[-with-channel] and McdRequest:failed

commit d574ad8e275d2843de5441164b75763974ddedbb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 18:12:41 +0100

    McdRequest: emit succeeded, succeeded-with-channel and failed
    
    For now, these signals do nothing. They'll soon supersede completed, and
    when McdRequest is exported on D-Bus, they'll be mirrored onto D-Bus too.

commit 669b0d56c8f7ed497ce27f75ed37cdb8fc035461
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 16:39:49 +0100

    _mcd_channel_get_request_user_action_time: remove, unused

commit fce9d2674a549fa1a95c421ad5aa56e8b9367033
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 16:37:13 +0100

    McdDispatcher: work out possible handlers from McdRequest and/or TpChannels
    
    This avoids ambiguities caused by McdChannel being a (request or channel
    or both).
    
    As a bonus, assume_requested can go away, since it's inferred from the
    presence or absence of @request.
    
    This relies on some previously implicit assumptions, which are now
    assertions:
    - the McdChannel in _mcd_dispatcher_reinvoke_handler has both a McdRequest
      and a TpChannel
    - each McdChannel in _mcd_dispatcher_take_channels has a TpChannel

commit 78fb02770ed53fbec5ef943a156d5f422aec61be
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:46:11 +0100

    _mcd_channel_get_request_path: remove

commit 2b76b5f06305696b80ee084e9ce44979344d577e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:44:34 +0100

    _mcd_account_create_request: return the McdRequest as well as the McdChannel

commit 037c5dfccd2c37729be7193601d6a8856a496e92
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:37:44 +0100

    _mcd_channel_dup_request_properties: remove

commit 19d30ad814181f99621eb8a72d53e11d9ccbe03e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:37:15 +0100

    mcd-account-requests: use McdRequest in easy cases

commit 8ba71d6e31d5a1b867d0d1c042f6336d78413832
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:27:14 +0100

    McdChannel: track satisfied requests as a list of McdRequest, not McdChannel

commit 263c83db750a71d8630853a55e7d0fb56bd6853e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:17:28 +0100

    _mcd_dispatcher_add_request: work in terms of the McdRequest

commit 15792b20a88ae5a0ea35d178b8a4498a8ef54b24
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:09:40 +0100

    Make mcd_channel_new_request internal
    
    We already broke its API, and nobody outside MC should be calling it.

commit 8e48fcec643c6a40f944902e133d8413780c0853
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:05:11 +0100

    _mcd_request_set_success: take a TpChannel, currently unused

commit 04096146c5bf983430d519e116e89380f71bed5a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:04:49 +0100

    mcd_channel_status_changed: assert that we do/don't have a channel

commit 4b905986fba354b0fff08c3bfdbd3b60bdeb3f16
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 15:05:52 +0100

    Check all references to user action time and update for current telepathy-spec
    
    This requires telepathy-glib 0.11.13 for the constants, but does not cause
    any functional changes.

commit 584676015d63d14478388e2715730edfae69aa66
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 14:35:54 +0100

    McdRequest: implement the interfaces and properties of a ChannelRequest
    
    The methods are not yet implemented, the signals are not emitted, and the
    object isn't actually exported on D-Bus.

commit 13aa404a2061f74d43d2c7f85067c9f18dea29eb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 14:19:18 +0100

    McdRequest: add Requests and Interfaces properties
    
    These will be exported from here when responsibility for exporting a
    ChannelRequest moves from McdChannel to McdRequest.

commit 220fd673b7788fd3a986668a5e8ac3ddf034b7e3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 12:47:51 +0100

    _mcd_dispatch_operation_run_observers: don't leak the request properties twice
    
    observer_info didn't have a value destructor, but the value inserted into
    it was copied with tp_asv_set_boxed; in addition, the original value
    wasn't freed either.
    
    Reviewed-by: Senko Rasic <senko.rasic@collabora.co.uk>

commit 39c99f03d6a99b52e884d46a009d8137f74a755b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 12:18:23 +0100

    Update NEWS

commit 619d9d92ada8da156e00bc2a43ef34346050a060
Merge: 0995628 7f1635c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 12:32:58 +0100

    Merge branch 'clear-pointers'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 7f1635c1f92752e68f68282d3092256705bac4d9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 11:59:04 +0100

    various shared classes: use tp_clear_object, tp_clear_pointer

commit a9a63aa9db1ab49fc9b1f204ca4c24a81bc92bed
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 11:58:02 +0100

    various dispatch-related classes: use tp_clear_object, tp_clear_pointer

commit 49011e5e13fd24d20037a7ae41d873caaa5854bf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 11:56:09 +0100

    various account-related classes: use tp_clear_object, tp_clear_pointer

commit f121342b30aff60a601d25f3ce836ee88c4c5bf3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 11:54:22 +0100

    server, test, util: use tp_clear_object

commit 023fdb490cb9d323b416f3f88fbb346c7b9f8e79
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 11:53:56 +0100

    mcp: use tp_clear_object, tp_clear_pointer

commit 09956287fa1cb9a9b179010ea8324bc896aa9df6
Merge: a926c6a 9a5ecad
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 11:48:30 +0100

    Merge branch 'just-what-are-refs'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 9a5ecadeea057bded61f52cc8abeb621d5807a46
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 10:32:48 +0100

    _mcd_account_proceed_with_request: don't leak the McpRequest
    
    This resulted in leaking the McdRequest, and hence compensated for the bug
    fixed in the previous commit. However, because the McpRequest is created
    lazily, it didn't prevent the crash when used without new-style request
    plugins.

commit a635ef53eaa6ecd2925d413baf36a0de1c0af917
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-09 10:31:46 +0100

    McdRequest: take one extra ref when constructed, to match the Proceed() delay
    
    This caused crashes when MC master was run without a new-style plugin,
    but did not crash the regression tests due to a compensating error (a
    reference leak whenever there are new-style request plugins).

commit a926c6a01b819c5b6cfb4dd138227fe2520a1f90
Merge: 65cc5ec 2a7602a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 14:52:21 +0100

    Merge branch 'easy'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 2a7602a8c3aeb7fdead8635e6401ab972c261f9f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-24 12:39:29 +0100

    McdChannel: remove unused DEPRECATED_PROPERTY_WARNING macro

commit 5d602d4aa7b1697a2a454ba639b2ae450776cd08
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-08 12:19:13 +0100

    channel_request_proceed: don't crash if already proceeding

commit 65cc5ecf8dfa1dc922dfbf6720aefa5ccbf1f814
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-31 19:09:00 +0100

    Skip new accounts created after startup that are completely invalid

commit 758adac959bbeac537efd980e483e5dae86dd3e3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-31 19:08:38 +0100

    Skip pre-existing accounts which are completely invalid (no manager/protocol)

commit b09749b7f8c5cb7c2f5e40cfcce915316d4aeb01
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-31 19:07:07 +0100

    NULL out the pointers when finalising an McdAccount

commit 2ae2cdfe81f31d42c2be42a45cfb5566ce90711a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 12:57:05 +0100

    Delete missioncontrol.log, as well as missioncontrol-*.log, in clean

commit a477f91c212c8b9516ef2e4665a92fe3fb8503f9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 12:56:44 +0100

    Re-auto-generate mcd-channel.sgml

commit 2482316729a6a0a4b2074988e312721d7df6d8e1
Merge: adb9504 bf9d7f9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-07 12:52:07 +0100

    Merge branch 'hints-30000'
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

commit bf9d7f9db952d432ceda6bf3ca8bf2d5901ecf6e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-06 17:20:58 +0100

    exec-with-log.sh.in: keep a copy of the last log under a predictable name
    
    This is convenient if you keep it open in an editor between test runs :-)

commit 3fa584f64014c92f93bcc0ac00bb5b184d686d59
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-06 17:19:58 +0100

    dispatcher/ensure-rapidly.py: test with all possible event orders
    
    Before tracking down the bug fixed by the previous commit, I thought it
    was caused by subtleties of event ordering; it wasn't, but the extra
    coverage is good to have anyway.

commit af5207af0ab7578765f24fff9f1cbe40f3f22d08
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-06 17:18:05 +0100

    Copy the TpChannel to a proxy McdChannel when setting it up
    
    This fixes an assertion failure when emitting SucceededWithChannel for a
    proxy (secondary) representation of a channel (i.e. the second and
    subsequent EnsureChannel requests that returned a particular channel).
    
    To do this without putting a non-primary representation of a channel
    into the dispatching machinery (which breaks tracking which requests
    where satisfied) it's necessary to add _mcd_channel_is_primary_for_path;
    see that function's doc-comment for the definition of "primary" and
    "proxy" in this context.

commit 6ba590895025f9fffda2511f43df2fdbaaacc616
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-06 15:27:04 +0100

    Move SucceededWithChannel and Hints into .FUTURE pseudo-interfaces
    
    Also rename RequestMetadata to Hints as per the spec draft that was
    merged.

commit 21dac454cfb16ca927012ab980ab4978167e68c4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-06 15:24:07 +0100

    Update xml/generic-types.xml for Object_Immutable_Properties_Map

commit d7185b434e1bb44ce9bce11dd3a4087a550f7ef1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-06 15:22:50 +0100

    Generate src/_gen/interfaces.h

commit 7176e558e7b34c558432022ccb6372ee99f02a58
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-09-01 11:55:39 +0200

    no need for free_req_properties

commit e796d8b8546b58671132633ed9af0e863b73eb3c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-09-01 11:53:13 +0200

    rename _mcd_channel_dup_properties to _mcd_channel_dup_request_properties

commit cc8cd72bb2af3f82c39b449f5bd9ff333ee23c2a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-20 14:41:31 +0200

    add 'request-properties' key to Observer_Info

commit 8bb446b3efb3a8c7bde6310b3afdc39b5d1afbe2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-20 14:23:25 +0200

    collect_satisfied_requests: return an hash table

commit a082fbd99ee0259296dae232cf4d8f6b7b9779d8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-20 14:11:42 +0200

    _mcd_channel_get_satisfied_requests: return an hash table mapping the path to the channel request

commit 70a344b08828833c22d5d85428f745cfd0a499e7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-20 11:54:33 +0200

    mcd-channel: store the channel request object in satisfied_requests instead of just its path

commit 6ad21f0931ff901c215528cef134771889dc9a0d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-20 11:47:33 +0200

    _mcd_channel_dup_properties: add TP_PROP_CHANNEL_REQUEST_REQUEST_METADATA

commit 47c33ecfd5343ff9697b9c5aa5a72a33934d8d38
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-19 16:14:04 +0200

    factor out _mcd_channel_dup_properties

commit b20bd391295e48faec2556b5c2fc27af338a12bf
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-19 16:03:53 +0200

    _mcd_dispatcher_add_request: use tp_asv_new()

commit 246685f9b1ff6b484e3370a9e718cadbd5122273
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-19 15:10:38 +0200

    test {Create,Ensure}ChannelWithMetadata

commit 653f4236330d254195e2ca2a371f2f0c7eba8aac
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-19 15:10:14 +0200

    Implement {Create,Ensure}ChannelWithMetadata

commit c706103d81437bf5ecb7e43aaaa6dd2b71d7c4e7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-19 15:09:54 +0200

    add API to set the metadata from the dispatcher

commit dc32b6cd2d99f00a081736717f745fa1e47ff401
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-19 15:07:04 +0200

    ChannelRequest: add RequestMetadata D-Bus property

commit 96503c4f984141695b0cfb235f7b7a060c7f3a4d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-19 12:55:51 +0200

    test SucceededWithChannel

commit 6b7e006feff927815984996ea59f3975ae5d3e03
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-08-19 12:55:37 +0200

    implement SucceededWithChannel

commit adb9504b2944b60eba79e2a73a70186bfb5d4283
Merge: 85d7396 1aed923
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-09-01 15:31:05 +0100

    Merge branch 'requests'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 85d739665ef17fcb9f5accd733792520593d90ae
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-26 21:18:12 +0200

    add Account_Interface_Minimum_Presence.xml to SPECS

commit a582ad14a29c20c007d01197d8dd08d3afdc8dab
Merge: 341e252 70702c3
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-26 15:29:23 +0200

    Merge branch 'minimum-presence'
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=29812>

commit 70702c31f1d667a4a2f925f220b8e732bc779826
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-26 15:26:13 +0200

    use slice allocator for McdAccountPresencePriv

commit b7ee51406a0d4645aa6f8b83c462af53c839ac24
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-26 10:55:41 +0200

    mcd-account-presence: stop watching for any remaining clients when we get disposed

commit ab23622bde22556bc4cd691dc630914457278bc3
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-26 10:47:02 +0200

    mcd-account-presence.c: simplify presence setting

commit ad4ebd4fb41462a1ae1632e40e496f46560648db
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-26 10:41:28 +0200

    cancel MinimumPresence requests for clients that fall off the bus

commit d82e70ce063ccad0f72ff5af7994dcc28538df25
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-26 10:17:21 +0200

    moved internal minimum presence data to McdAccountPresencePrivate

commit 7c58468d80f344996c8d9bf02a83a282dbef6e66
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-26 09:28:44 +0200

    corrected copyrights

commit eade94fdf9affc055efdc7be44b1bdf6ba7cac6c
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-25 12:57:49 +0200

    add account/minimum-presence.py test

commit 67b3060de8e98a1f07a6a8b4d742bdd68255c927
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-25 12:57:14 +0200

    SimulatedConnection: optionally support "hidden" presence

commit 7a6b1d91104ec79f47d920d5241a3a6749d4da36
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-25 12:56:50 +0200

    updated copyrights

commit 91448bb75a0e58a2622f52d364b438ae48a99aa0
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-25 12:56:10 +0200

    combine RequestedPresence and MinimumPresence

commit 53d46b1a1dd6f14e1aeda03c9d249078694f8ec0
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-25 12:53:49 +0200

    implement Account.Interface.MinimumPresence in mcd-account-presence.[ch]

commit 8d0698bb98b5b087fa80bbeb722d5e151c10093c
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-25 12:50:16 +0200

    make (_mcd_account_)presence_type_is_settable into internally-visible method

commit 0d421a714551f2a336f895a9b1073b0cf5206840
Author: Senko Rasic <senko.rasic@collabora.co.uk>
Date:   2010-08-25 11:49:18 +0200

    add Account_Interface_Minimum_Presence.xml

commit 1aed923e59e5a3c7d11c2a4529f9b13daadadb80
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-24 12:16:36 +0100

    Fix some typos that Vivek noticed

commit a3f611843e1c27d6a838d1dbbb49e655c7839519
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-24 12:14:28 +0100

    Update copyright dates for files touched by the requests branch

commit b80cc1470a1833049bbac99dc7c11838a17baff2
Merge: 989e204 341e252
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-24 12:11:47 +0100

    Merge branch 'master' into requests

commit 341e252241769f8e55eba57661e9e12814526870
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-24 12:02:19 +0100

    mcd_account_manager_get_storage_plugin: don't shadow acct(2) from unistd.h
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit fc1609946119e4c08c75b8a19c7c5222c4dd1ed5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-24 12:05:12 +0100

    Bump version to 5.5.3+ to enable -Werror again

commit 9b2aa99a6ff54538dcf6296e6df97254dd395b60
Merge: 0d914e1 ab8dbf1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-19 14:55:13 +0100

    Merge branch 'telepathy-mission-control-5.4' of git+ssh://git.collabora.co.uk/git/telepathy-mission-control

commit ab8dbf1d6d5527a79bef37316cb7f895870d62e7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-19 13:41:49 +0100

    Drop the McdConnection probation timer when the TpConnection is released
    
    Also: Check that we haven't accidentally called the timer callback after
    releasing the TpConnection, as this avoids a SEGV (and g_warn if we find
    ourselves in this situation)

commit 0d914e13cc4a6e84cebb840c0be4d32abaacaddc
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-16 15:57:42 +0100

    Irrational co-dependency of commit and commit_one eliminated.
    
    There's no point calling commit_one from commit if commit isn't
    implemented, as commit can only solve this by trying to call commit.
    Also fixes a logic-loophole which allowed a NULL commit implementation
    to be deref'd and called.

commit 92c5bbdcd9cedbc876f8f6a06c6ff3fc179ec210
Merge: 92c4501 0fc5bed
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-19 13:25:23 +0100

    Merge branch 'telepathy-mission-control-5.4' of git+ssh://git.collabora.co.uk/git/telepathy-mission-control

commit 0fc5bed249202727b7eb034ab37502e4a024afb1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-19 13:10:12 +0100

    More checks on built strings (from coverity report)

commit b4463ae864beab551262778868c60104da572216
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-19 13:08:18 +0100

    Unused variable

commit 92c4501acdc358a63df43420c871152b01332d41
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-08-18 19:09:54 +0100

    McdAccount: Correctly chain up to constructed
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 7a9bd3f12197c5d85ad3c2741d1481f0303cafee
Merge: 4e75c43 f44d79e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-11 16:27:52 +0100

    Merge branch 'trivia'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit f44d79edc8be2a35f133f29a557cd0e652fc877b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-11 16:19:38 +0100

    Delete old examples
    
    These are no longer exemplary; people should use telepathy-glib or
    telepathy-qt4 instead of libmcclient.

commit fb865d918fa135d03451ccc56cd7bc6ea127c639
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-08-11 16:17:09 +0100

    server, util: fix CPPFLAGS/LDADD for recent ld versions
    
    - use AM_CPPFLAGS instead of the deprecated equivalent INCLUDES
    - use GLIB_CFLAGS but not DBUS_CFLAGS (mc-server.c doesn't actually use
      any dbus-glib functionality directly; neither do the utils)
    - put our own include directories first, then everything else in stack
      order, lowest first
    - explicitly link against telepathy-glib and GLib, since we use their
      symbols (fixes linking with gold(1))

commit 4e75c43eca3737f2501e46bda0b74e9478637ac5
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-09 18:48:04 +0100

    Only honour scheduled saves when we have actual differences to commit.

commit dce04726ee40004fc0688d7ccc52ab4ef3833382
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-09 18:48:04 +0100

    Don't flush unchanged settings to SSO

commit 600c5c17cf040bcc3d17a8f9ef776b070d270b4a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-08-09 18:48:03 +0100

    Don't flush the enabled state if the SSO state is functionally equivalent
    The state is a pair of booleans in SSO, but a single flag in MC, so we
    lose information if we unconditionally write to SSO - only flush the
    state to SSO if their configuration would result in a different status
    from the one we require.

commit 8e70faef11543709c24db9d4bea4d1512072aeb8
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-08-04 12:11:16 -0700

    Make McpStoragePlugin retrieval in McdAccount safer.
    
    Don't do a g_return_if_fail, instead return empty results in external storage API calls.

commit b23cd067fce751f820ae70a03c39613ca0180795
Merge: c48e35e 8c0b868
Author: Eitan Isaacson <eitan.isaacson@collabora.co.uk>
Date:   2010-08-04 10:02:52 -0700

    Merge branch 'account-storage'

commit 8c0b868f5ee65bd3e120186071f8e9aa250b94b6
Author: Eitan Isaacson <eitan.isaacson@collabora.co.uk>
Date:   2010-08-02 17:09:30 -0700

    Retrieve the account storage plugin lazily.
    
    Apparently mcd_account_manager_get_storage_plugin can be called too early when
    the account is created, before it is written to the storage plugin.
    
    This patch makes it reference the account storage plugin lazily when needed,
    and to fail when it can't retrieve it.
    
    I tried to have it retrieve the storage plugin consistently at a later stage,
    but there is no way of knowing when the account is written to the storage
    plugin since there are multiple code paths. So this seemed like the safest
    choice.

commit 49e5b5fd70eb7bcd110171b8562697ce99bb7cd3
Author: Eitan Isaacson <eitan.isaacson@collabora.co.uk>
Date:   2010-07-18 22:52:21 -0700

    Remove references to McSvcAccountInterfaceStorage

commit d7569ccc7fa071790afa2de54fb34605b857963e
Author: Eitan Isaacson <eitan.isaacson@collabora.co.uk>
Date:   2010-07-05 12:05:26 -0700

    Added maemo accounts support for Account.Storage API.

commit a15d2973a136b81c4268e0f2463507d9b6bbb7d6
Author: Eitan Isaacson <eitan.isaacson@collabora.co.uk>
Date:   2010-06-15 14:55:02 -0700

    Implented default Account.Storage API.

commit 39faeb93baf6c3d5cd0c23ab086621a4169af928
Author: Eitan Isaacson <eitan.isaacson@collabora.co.uk>
Date:   2010-06-08 10:40:20 -0700

    Remove warnings.

commit c48e35ea2c9ae79f36884123f93344bd15ea0adb
Merge: bfd0469 929dc97
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-30 13:17:15 +0100

    Merge branch 'telepathy-mission-control-5.4'

commit 929dc974509a172d9a0ad6c3bd9931171e75ba9d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-27 20:01:35 +0100

    Can't use the AvatarRetrieved signal to find out if an avatar has been removed
    
    The signal only fired for those contacts that had an avatar, so if the
    connection signals that the avatar has been updated, and we then try to
    fetch the avatar via this signal, we simply never receive any data and
    the avatar we have never gets erased.

commit ced3e32094b11970653227e78dbe7c3bd8515c8f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-29 17:11:07 +0100

    Implement a test for a remote client unsetting our avatar

commit bfd0469b8f260dd23070ebbd2420197380c13331
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-22 16:19:00 +0100

    ABI has been added, update configure.ac variables

commit 37c810c38c3d65f559c3b8a4654c913cfca4e5e9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-22 16:01:10 +0100

    Prepare NEWS and configure.ac for a release

commit decbf7cd61cf44d8134c02aa55a7c74b0e9fcf91
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-22 14:10:49 +0100

    freed GStrv may not be set, so should be initialised to NULL

commit a1e401dc5e0fcb48022a53e0603ccdeb38927b61
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-21 16:56:31 +0100

    SSO plugin should claim all setting for accounts it knows about

commit 97bf09dd1dcfc6923288c4d54cad37b24bc795a0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-21 16:56:31 +0100

    Make the debugging of account storage plugins in the AM clearer

commit 027a1ce8e7b2b2840941acc8e54c0b01020e5db7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-19 12:43:39 +0100

    Update NEWS

commit 27120189211ad52fba7d9870f6eed6d39cb28d7a
Merge: d57126d 479174b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-19 12:33:17 +0100

    Merge branch 'rescue-mission'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 479174b603f1ac2cd871a07125fd18dbc0eeabf8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-19 10:54:55 +0100

    Fix over-zealous search/replace in ensure-and-redispatch.py

commit 97a0efa95f0e80b6658a9a38021f7765f7d67d28
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-19 10:53:13 +0100

    plugin-account: unique_name: move g_free into the loop to avoid leaking
    
    We now allocate once per loop, so we need to free once per loop.
    
    Also narrow the scope of some local variables to make their usage clearer.

commit 0360f89686f4f52fe2f2aea674e71f4897f88b34
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 13:06:35 +0100

    dispatcher/ensure-and-redispatch.py: test fd.o #24645

commit 70e1416243ed8bd88353e0e052aa9f8b241b9af0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 13:05:39 +0100

    fd.o #24645: _mcd_dispatcher_reinvoke_handler: try to use the same Handler
    
    If a process has Handler well-known names A and B, and a channel
    that was already passed to A's HandleChannels implementation is returned
    by EnsureChannels, we want to call HandleChannels on A if it still exists,
    or failing that, B if its filter matches the channel.
    
    This is particularly useful if A was a PreferredHandler with an empty
    list of filters, as used by the proposed
    tp_account_create_channel_and_handle_async().

commit 88106ea7b1557c453fc9af3083505de5e98d4157
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 13:01:51 +0100

    McdHandlerMap: remember which Handler well-known name is responsible for each channel

commit 0ebc29a5c62be843090f09f488876ec6ca8bd521
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 12:09:42 +0100

    dispatcher/ensure-and-redispatch.py: give the better handler a valid filter
    
    The channel's immutable properties contain Interfaces, an 'as', which isn't
    valid in a filter.

commit 4631b0a4f1878a0d8b8f542319f6b99c96abcdc0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 12:04:16 +0100

    mcp-dbus-caller-permission: don't shadow link(2)

commit ad4312f564cfd5adbec9e73eee3c92c69b9750fb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 12:00:51 +0100

    mcd-account-manager-default: don't shadow acct(3)
    
    Also rename a GHashTableIter from account to iter, for least-astonishment.

commit 286307447f8977a4fddf3dbee0b7374b88c3e57d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 11:57:42 +0100

    plugin-account: avoid sprintf, and remove limit of 1024 colliding accounts
    
    Re-using the same buffer saves one g_malloc per colliding account. Given
    that colliding accounts are a highly unusual case, it's just not worth it;
    let's have clearer and less error-prone code instead.

commit fbf163fb378a10a439b48cbb25a628a364c2fbf1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 11:54:46 +0100

    plugin-account.c: unique_name(): don't crash if 'account' is not a string

commit 47541d798fc98ce4d2fd974a4e307bd61c56f9b8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-07-16 11:48:15 +0100

    Don't shadow BSD acct(3) from unistd.h

commit d57126d74cdf12f231575199cfea0ff8e9c7f3a9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-15 13:47:04 +0100

    Typo in comment.

commit 1fcef50dd654ec93a021b430c0f32af496ae89bb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-15 13:43:15 +0100

    Typo in header guard #define symbol name

commit 650aaccdfa1f388909593f429b54cb3599ecb0c0
Merge: 7f1a3f0 99a0c91
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-15 12:57:07 +0100

    Merge branch 'libcreds-demo'

commit 7f1a3f00afefd38d9b86127ceeee2c009a5814ee
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-07-07 17:55:42 +0100

    Document mc-tool service in the manpage.

commit 68424b9c018c4b61d260589bcc122e3c37f52711
Merge: a4f8545 f0c43a2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-07 15:45:56 +0100

    Merge branch 'sso-updates+service-property'

commit f0c43a27d926ffbabc3594bd93f22018f7716ae9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-05 18:48:19 +0100

    Fix braino in comment

commit cde89a1ea59cbb3e5eca5b2a46cafbf4f5a5d73c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-07-04 11:41:22 +0100

    Add 'service' support to mc-tool
    
    mc-tool still can't create accounts with a particular service up-front,
    but it can (try to) set it on existing accounts.
    
    (We need to bump the tp-glib dependency to get
    tp_account_set_service_async().)

commit a1f7cc8ab56c4f3158ff4ad914f27c33342c6d32
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-02 18:47:01 +0100

    Implement Service property for SSO accounts

commit 3eebea2b5e1141e6710158b25619f949fd7d1608
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-02 18:46:44 +0100

    Implement new Service property on account interface

commit 0a04ccfc2b93210f79d53288012e7f606956e217
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-02 18:45:26 +0100

    Tests for new Service account property

commit b0368acc4ba16a83cbc70183caf1a53952a50808
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-07 14:53:40 +0100

    clear_setting_data() should always be called on a Setting * from setting_data()

commit 12aebc76aa8ddacf08905bf02357a13b2e893735
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-07 14:38:50 +0100

    Explain what's going on with the new internal-property-changed method+callbacks

commit 73f16c5844184fa6a88dd3cc858a436bfbfdcace
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-07 14:11:06 +0100

    Can't remove the watch hash entry until the individual watches have been removed

commit 143885cfa7d023800551820fb3253649469697bf
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-02 12:59:12 +0100

    Haul all the parameter name mapping/global/service/etc logic into one place.
    
    The handling of settings between MC and AG (which each have their own
    naming conventions and semantics) had grown organically and empirically
    and needed to be re-worked (now that we have a better idea of what needs
    to be done to get it right).

commit a4f8545516b5e7dedc1d9b05d2ec34e584e651a5
Merge: d51a8ae 66680da
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-07-02 11:16:04 +0100

    Merge branch 'telepathy-mission-control-5.4'

commit 66680dac767c5ae06abe306ce4e000041c105751
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-07-02 10:36:22 +0100

    Treat calls ended locally with No_Answer as missed
    
    If the actor is the self handle, and the reason is No_Answer, then
    something on our side (either the CM or some client) decided we weren't
    going to answer and gave up. From the user's PoV, these calls are
    missed, so mark them as such.

commit b9efeff6d131946b18f50584ad69341c01d7a5d9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-07-01 20:57:40 +0100

    property_changed_cb now only passed as a callback once, fix signature & warnings

commit 8560edb3620021e4e69a9e03d26e6753bed13db0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-30 12:36:06 +0100

    Handle the single changed property signal from storage backends

commit 746ad961203ee9d4ddeccf50d80b8a1f96739153
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-30 12:30:54 +0100

    Method to let the AM notify the account that an account property has changed

commit 8a5413806eaacbda841563180f21608ef15a4001
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-30 12:36:47 +0100

    Emit the single changed property signal instead of the whole-account one

commit 3e7daa0d6c52c1fde1b5f17486f02d25adbd4759
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-30 12:35:35 +0100

    New signal - flags a single changed property from a backend to the AM

commit 1bfdbd5b2310682852a6c264929a299da7e2ab96
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-25 16:31:14 +0100

    Signal emitted on wrong object

commit fdaead7365cc3b39606417970278da25df543650
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-25 16:30:54 +0100

    Filter some keys from the watch list (immutable or monitored elsewhere)

commit b3c4d999d3bfc3f0a744fbf3cf5a70f0da8f408a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-25 14:14:37 +0100

    Watch SSO keys for updates originating from other processes

commit d51a8aec93a05d8e8d66f96a50be993481494cd0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-29 12:17:50 +0100

    Disable deleted accounts so we don't leave connections holding refs to them
    
    This resulted in accounts that were online when deleted silently vanishing
    from the store without the account removal signals and so forth happening,
    leaving an online account in an orphaned CM.

commit 2956b90df826ed716d99ea8589b33355b1fa7f14
Merge: 5dd81e2 386accf
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-06-16 16:23:55 +0100

    Merge branch 'telepathy-mission-control-5.4'

commit 386accfd4645ede0743dc5500fe09a350d3dff68
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-06-16 15:59:50 +0100

    Reduce INITIAL_RECONNECTION_TIME to 3 seconds
    
    This gives us pretty much the same progression, but with the first
    reconnection happening fast enough for the test suite.

commit b84bb07cc573169028224c3d9958750f20acfa73
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-06-16 15:44:13 +0100

    Add a #define for the reconnect interval cap

commit 0884d14b2be3dc6b2c992bd63bdfd76c3d6fcca1
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-06-16 15:38:48 +0100

    Attempt to reconnect less frequently.
    
    The previous constants made MC really keen. Trying again after 1 second
    is fine if the CM crashed, but the normal situation is that the server
    fell over, or the network is broken, in which case 10 seconds, 30
    seconds, 1½ minutes, 4½ minutes, 13½ minutes, then every half hour seems
    a lot more reasonable.

commit 0692f156df434142231f53f37dd03d87eab38ff1
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-06-16 15:36:34 +0100

    Include reconnection time in debug message

commit 1e7a95255453b727079e68f7077b311cb40fc570
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-06-16 15:35:59 +0100

    Add a #define for reconnection timeout multiplier

commit 5dd81e2d0cbd3523704e71d6ad679c5d18c07c73
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 15:10:09 +0100

    Nano version

commit b02718b8d943a65b16e7fea1cbdafceb6574a5bb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 14:32:00 +0100

    Prepare version 5.5.2

commit 2776ff74b764ac348260aa8d42a4cfdafad6cc50
Merge: c786e7c a14a431
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 13:59:02 +0100

    Merge branch 'telepathy-mission-control-5.4'

commit a14a43178eddc5e199abecc1d665a41e45bf772f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 13:54:47 +0100

    Nano version

commit 3aa2164dc85d66bde3033bdc3e77bf399260214f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 12:23:39 +0100

    Prepare version 5.4.3

commit 92fc828a2f64900cb427869dc42210cae8d9b1b9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:44:23 +0100

    Enable ERROR_CFLAGS in every Makefile.am that compiles C

commit f30c6e3cb84fb67b097e3fc84761078ede4c090e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:43:07 +0100

    configure.ac: remove alleged AM_CFLAGS that were never actually used for anything

commit 66e75a56da3ef41eae076104e149687f704d7a7c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 13:08:11 +0100

    Remove obsolete datadir_expanded check from configure.ac
    
    We use g_get_system_data_dirs() etc. now.

commit 4719e9a639e53f96699ccbd475f08b1d9d7c5e38
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 12:01:40 +0100

    Add code to a couple of existing tests to verify that serialization in key files is as intended
    
    (Backported from master to not expect account storage to be diverted)

commit d398ad3a7468d8e9950374735411ac9e7f49c532
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 19:01:26 +0100

    _mcd_account_dup_parameters: if unable, explain why

commit bc1b5f1ceea27dbe713217d2dd3e159ad0445b4d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 18:29:36 +0100

    McdAccount: clear_register_dup_params_cb: survive if params is NULL
    
    It can be NULL in crash-recovery.py, apparently. Unfortunately, the
    async implementation doesn't tell us why it failed, only that it did.

commit 42555e448cfdd8b191ccbe952ff1e91b6994341b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 18:01:52 +0100

    account-manager/recover-from-disconnect.py: comment why register=True

commit 704f30899161c124e16ef084289794e51cc85d37
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 17:52:54 +0100

    Remove duplicate call to _mcd_account_set_parameter()

commit 549147aadbabcd86464e9cf924c95d8433f6ef34
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 19:37:39 +0100

    fd.o #28118: clear the 'register' flag when an account goes to CONNECTED

commit c786e7caf31fe178d9c8252857068deb3bb3c81c
Merge: b5ba07f cac2333
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 11:57:11 +0100

    Merge branch 'unregister'
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

commit b5ba07f2e899ca1263a3f9f20371a57eaaa65467
Merge: 54c1c8f 3a3389f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 11:40:12 +0100

    Merge branch 'only-flush-changed-accounts'
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit 54c1c8f6d4f3daac868197b807fe64041486cbe1
Merge: 5d52cfe cdd0f4f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 11:15:11 +0100

    Merge branch 'backslash'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 3a3389f92858c6b0870f5593202c1d14237d8a30
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 11:13:15 +0100

    mcd_account_manager_write_conf_async: pass the intended account to update_one_account

commit bd37e72ef995e023522fcd94a2265bf61028a608
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 11:12:56 +0100

    McdAccountManager: update_one_account: document that @account may be NULL

commit 110206d8fb4ad86f5b89811ae38080a21c06d505
Merge: 5d52cfe b1569da
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-16 11:03:57 +0100

    Merge branch 'only-flush-changed-accounts'
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit cdd0f4fe73d5e593e7d3806983ad47296777976f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 19:54:18 +0100

    Add code to a couple of existing tests to verify that serialization in key files is as intended

commit dd4f741a4b1ddd9152173336fc9360ad25d26407
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 19:53:50 +0100

    default and diversion plugins: don't escape values from MC as strings again
    
    MC gives us a string that has been serialized into something .desktop
    compatible. If we escape it again, we'll double the number of backslashes
    compared with MC < 5.4.

commit 84a3808905f2e87ffca975db8a055d8d3b33d405
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 19:52:30 +0100

    fd.o #28557: McdPluginAccountManager: use g_key_file_set_value when receiving a value from plugins
    
    When we give plugins something to store, it comes from
    g_key_file_get_value, so it's already been escaped according to .desktop
    syntax. When we get it back from the plugin, if we escape it again, we'll
    double the number of backslashes every time.

commit cac2333a7956cc97a5acab8cfd3d30187e46a98c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 19:01:26 +0100

    _mcd_account_dup_parameters: if unable, explain why

commit f4de0b512bef298c16079b08f3e83b112294d63c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 18:29:36 +0100

    McdAccount: clear_register_dup_params_cb: survive if params is NULL
    
    It can be NULL in crash-recovery.py, apparently. Unfortunately, the
    async implementation doesn't tell us why it failed, only that it did.

commit 92b715d217e5a5bcf2718cb910958168b6f182b9
Merge: e261ac0 5d52cfe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 18:05:02 +0100

    Merge branch 'master' into unregister
    
    Conflicts:
    	src/mcd-account.c
    	test/twisted/account-manager/recover-from-disconnect.py

commit e261ac07a489f68a45d82fc73a082dcde1c4efc1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 18:01:52 +0100

    account-manager/recover-from-disconnect.py: comment why register=True

commit d60519d0da47b422cfcd0e1fa3df05cb1179b96c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 17:52:54 +0100

    Remove duplicate call to _mcd_account_set_parameter()

commit 5d52cfe22b8643959d0dd64d8ef5c715a437639b
Merge: b4b6725 a2b55cb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 17:40:25 +0100

    Merge branch 'connection-error'
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

commit b1569da8b42049f67bb00bc8377b9cfa05821865
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-15 17:36:22 +0100

    Revert AccountStorage commit() method to commit all accounts, and add optional-to-implement commit_one()
    
    We don't need to break API straight away to get this bug fixed.

commit a2b55cb75d0bf5865effdfd62b7b12204a45a023
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-14 16:48:44 +0100

    Check that the ConnectionError[Details] properties work

commit 3988709dcc9022c254f4cf3f276ff8b3a88eab3f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-14 16:48:29 +0100

    Implement ConnectionError, ConnectionErrorDetails properties fully
    
    This requires telepathy-glib 0.11.7, so require that in configure.ac.

commit aaaa6e1277ff5f2407855cdca526af8681fdeb93
Merge: c47409a b4b6725
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-14 16:43:11 +0100

    Merge branch 'master' into connection-error

commit b4b672525723f1555aab1a31f84ef19c52cf1bee
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-11 16:24:09 +0100

    Unused/shadowed variable declaration

commit b83b65230d45f4c3caf38ce908fad45fec161f6e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-11 16:17:40 +0100

    Global enabled flag must be turned on when the local one is
    
    If we don't do this, any account ettempting to make the transition from
    disabled → enabled will simply bounce back to disabled immediately.

commit 3a0f11b7b93ead7e187ca6b820389302dd5a7d82
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-10 16:43:23 +0100

    Don't call tp_svc_account_emit_removed, gets handled by McdAccount disposal

commit 2d31eaeb1d96841a2d8d1fc6323fbb85366fa1e3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 19:11:44 +0100

    The label key (name, DisplayName) must be flagged as global so it gets fetched

commit bc59fcb18c9c46e850de3b5b8243b114420374c4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 18:27:41 +0100

    The global service has no type: we are always interested in its enabled flag

commit 70b2dff9c505381cd979320615d4ee5594c236e3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 16:39:47 +0100

    Warnings promoted to errors after rebase to master, misc tweaks to fix same

commit 526277cb2e0aa9a01855170c903427872aae1d7f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 16:38:25 +0100

    Remove temporarily disabled callback, unused definitions forbidden after rebase

commit bc4d0f4adc65c0325e0231bea825c394d12fdd10
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 16:37:16 +0100

    Missing header included

commit 4f0bfe3e7397cbf37df7ee6dc15dd032d2ceab45
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:41:21 +0100

    Implement account-updated signal handler (not connected up yet)
    
    Seems to do the right thing when connected, but the signal itself is not
    firing when I expect it to (this may be a bug in libaccounts or a
    misunderstanding on my part): Have disabled the code that connects the
    signal for now for this reason.

commit 481e610ae31ff356210da10b70074443a5b0561a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:36:32 +0100

    Hook up the account enabled/disabled signal when we cach an SSO account

commit bdf7c5110df10a790df5f6ff9f8897ff6954bad4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:33:49 +0100

    The SSO "name" key maps to the MC "DisplayName" key

commit 4a70382a58f7b3b7a7fa75600aba8216e5f1c226
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:32:38 +0100

    Use the new helper functions to get/set the enabled state in SSO

commit 0d86aeed97c00d9e3a8351f0a4552c2a8785849e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:28:37 +0100

    Helper functions to get/set the enabled state of SSO accounts
    
    SSO accounts have a global enabled flag (the master enabled flag)
    as well as per service enabled flags: Both flags must be true to
    enable an SSO account, but either being off disables it.

commit 7e556e7b4fac1b6dbaca933593edd4a2573ddf8e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:17:45 +0100

    Fix data transmitted with deleted signal (name was prematurely freed before)

commit 855d672de1469eacc96223b1f2feac7585871807
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:10:07 +0100

    Callback chain to handle account-altered signals from backends

commit cef2bb472058c36fd5a47cd6b9b3793bf6f01ba9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:05:00 +0100

    Tidy up debugging for backend account enabled/disabled signal handler

commit e3de2cb8b3272d8d346749b59f824e6ef3d5342b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 15:04:04 +0100

    Finish handling account deletion events from backends
    
    Cleanup refs to account, emit Tp signals.

commit 3c277cf94f1466aeadb7e4445df30dd528040f21
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 14:55:52 +0100

    Implement new list_keys method in shim object for account manager/plugins

commit db2c574585ef2d2ec7e0dda982b57efa40005681
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-06-09 14:55:28 +0100

    new account manager/plugin shim object method - list_keys

commit 2b9b455c97949741edabacfa897f1adb245d6fbf
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-06-09 12:53:13 +0100

    Only flush changed account details to disk.
    
    Previously every time any property of any account changed, every account
    was flushed to storage. This is really, really bad if you use
    gnome-keyring, because it meant a pair of calls to Unlock()/CreateItem()
    for each secret on each account, every time anything changes. On my
    machine, signing in 6 accounts entailed 384 pairs of calls — 64 per
    account! Furthermore,
    it seems that the implementation of CreateItem() calls fsync(), so my
    hard disk would thrash for about thirty seconds.
    
    This patch adds an optional argument to
    mcd_account_manager_write_conf_async() and mcp_account_storage_commit(),
    indicating which account changed. If NULL, everything is flushed; if
    non-NULL, only that account is flushed. In my testing this reduced
    logging in to 9 Unlock()/CreateItem() pairs, which is still more than
    zero, but stops the disk thrashing quite so badly.
    
    Removing accounts doesn't cause the secrets to be removed from the
    keyring... but that's not a new bug. Everything else seems to work as
    expected.
    
    I didn't update the libaccounts-glib backend to benefit from this, but
    given that all it does is iterate across all accounts and call two
    methods on each, it should be easy enough.
    
    Mitigates: http://bugs.freedesktop.org/show_bug.cgi?id=28390

commit 23342ff5da50650e8336aace80b545f5cc001331
Merge: 82662db 92f8ba0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 19:47:46 +0100

    Merge branch 'trivia'

commit 92f8ba0c6472696d906340407854470e24fbce44
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 19:43:27 +0100

    Make AM_CFLAGS matter in src/ again
    
    Setting libmcd_convenience_la_CFLAGS to any value, ever, disables use
    of AM_CFLAGS for those source files. INCLUDES is what we want here.

commit e12b12bb7b442f21ef5e5e76277dc2db3b6bf6b4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 19:43:23 +0100

    Fix an assortment of compiler warnings

commit 1a60034da6845195948d720dbb9481b2373fd35b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 19:37:39 +0100

    fd.o #28118: clear the 'register' flag when an account goes to CONNECTED

commit c47409a249a59c980f87f4e320217f0045758589
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 18:38:32 +0100

    recover-from-disconnect.py: test detailed D-Bus errors

commit a0f67dee25d9a97220c736467297393415ae6637
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 18:33:43 +0100

    mctest: add the ability to emit ConnectionError

commit 96f555be20529cd91a1d0f4c50a52fd61570f3e4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 19:02:41 +0100

    account-manager/auto-connect.py: test connection details being emitted together

commit d05e9d029244e1e789b5e77d9f9f9e031dc7579f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 18:07:34 +0100

    McdAccount: keep track of ConnectionError[Details], and emit them in signals
    
    telepathy-glib support will be needed to have them as properties too.

commit ac9d2eaffc1cc0ddf7dfa2d68181646abf50734a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 17:52:07 +0100

    _mcd_account_set_connection_status: emit change notifications for all related properties
    
    If the ConnectionStatus changes, we should put the Connection in the
    signal too, even if its value hasn't actually changed - it makes the
    signal easier to interpret.

commit 4788d069be838ecc290114d098c394f3275b28e4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 18:33:33 +0100

    account-manager tests: don't assume the next ConnectionStatus change will be to CONNECTED
    
    This is about to become untrue.

commit 4a3304105563bbe8ff27f54fffa2232625738599
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 17:48:10 +0100

    _mcd_account_set_connection_status: only emit a change to Connection if something changed

commit 50043605991025a0359233a61346e621b988388f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 17:46:03 +0100

    _mcd_account_set_connection_status: take a detailed error

commit 7fe075cae4a60580e54091423561e413cfd1774e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 17:45:25 +0100

    McdConnection: emit TpConnection in CONNECTION_STATUS_CHANGED even when invalidated
    
    It's still referenced at this point, and emitting it here will let the
    McdAccount interrogate it to get the detailed connection error.

commit 3f0403f0a871d1991098c0b8d50ca13d30dcdebe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-06-07 17:44:24 +0100

    _mcd_account_set_connection_status: only save the TpConnection if it's trying to connect

commit d879726fea2fe55c33057ecf87901c48f8d180d2
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-06-06 16:57:13 +0100

    Remove deprecated-and-unused mcd_account_manager_write_conf()

commit 82662dbe3347109d2621c15a15a02dd4855f869b
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-06-03 22:24:51 +1000

    Nano version

commit 9e2634a1cc47a9cc52c8bdf62cac2691a0d9ee43
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-06-03 22:15:32 +1000

    Prepare release 5.5.1

commit 8674090dffeae2a9a6dc029afd133fdda2eed860
Merge: 5c3568a e509346
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-06-03 22:07:23 +1000

    Merge remote branch 'smcv/plugin-doc'

commit 5c3568a2a91420a27120612ef0730ec968dfc6a6
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-05-28 12:59:53 +1000

    Implement ::toggled for McpAccountStorage plugins
    
    This allows an McpAccountStorage plugin to enable/disable an account.

commit be025b57f399050908e228cc05828d82f66dbc34
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-05-27 20:54:04 +1000

    Change startswith() to strip_prefix() to be clearer about what it does
    
    Make it return const, because it doesn't allocate a string.
    
    Change prefix() to ensure_prefix()
    Change strip() to skip_prefix() and make it return const

commit e990954870d791e2623a927f85cc120d3a51a51d
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-05-27 15:45:35 +1000

    Update copyright for mc-tool

commit 57cf63d319353fe860df91dfe9886d39ac1d9b3d
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-05-27 14:40:05 +1000

    Port from McAccount to TpAccount - Part 2
    
    This reenables NormalizedName and AutomaticPresence by requesting those
    properties directly from the Account Manager, since they are not exposed
    via TpAccount.

commit c54b2ee9384a902ff1488ce3f4027484439fc115
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-05-27 14:13:36 +1000

    Port from McAccount to TpAccount - Part 1
    
    This ports all features that use TpAccount and disables features that are
    not available through TpAccount (AutomaticPresence and NormalizedName).

commit 062d2ea9dc1a1cd8dcd478d4243473f26354feaf
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-05-27 12:32:33 +1000

    Port from McAccountManager to TpAccountManager

commit 58b12e4a39f8bd1c6c77e41b75d038c73db572d3
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-05-27 12:12:44 +1000

    Replace account_prefix with TP_ACCOUNT_OBJECT_PATH_BASE

commit fe2d061111a346f6c730286f8a8b7be620bd135d
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:   2010-05-27 11:59:01 +1000

    Change names of variables that shadow global functions
    
    Allows compilation with -Wshadow
    
    Changes:
      'acct' -> 'account'
      'daemon' -> 'dbus'

commit 0398ea62880803d2ec68b088e6a4e0ec21f41c78
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 19:25:03 +0100

    Nano version

commit 57ef8f9c6762ab0fc1d15991a15781e52ddff68d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 19:04:43 +0100

    Prepare release 5.5.0

commit 69d44b7e012282fe8a0d54c9828edd87c41a0304
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:50:24 +0100

    Update NEWS

commit 65d3d66a1e739b1670997b1d91ad0c62e4d67916
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:44:23 +0100

    Enable ERROR_CFLAGS in every Makefile.am that compiles C

commit eba54b4d4bfdb2132a224c3ce6b5c9aa594022f4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:44:08 +0100

    Include "plugin-loader.h" where needed

commit 9104ba032d388ef036aa3dc8eeb40bcbc1b5823b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:43:57 +0100

    McdAccountManager: delete unused variable

commit 902be44973e3a03ebaf54ae193faa1c9cca7b597
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:43:40 +0100

    libmcclient/mc-dispatch-operation.c: add missing header for tp_g_hash_table_update

commit a882183f60dea827efe6add35567379de5c6257d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:43:07 +0100

    configure.ac: remove alleged AM_CFLAGS that were never actually used for anything

commit 00c1c83ccc1516eb08908657cba5d950f08cfdc1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:39:44 +0100

    Now that GModule is mandatory, just include it in GLIB_LIBS

commit 079136b04ad5dbb680272a681c73a435eca6da13
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 18:19:41 +0100

    Only install libmcclient.pc if we'll be installing libmcclient

commit e53abee95629697235e2abd55583814b8936891c
Merge: 72e3925 c7d292c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:56:54 +0100

    Merge branch 'plugin-doc-minimal'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 72e392545e630ef8bd4b8cda0766162b053f1335
Merge: b4a1727 f120b06
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:56:26 +0100

    Merge branch 'will-this-release-ever-happen'
    
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit f120b06cf7b81739b27984bbbad7a27650c8a81f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:53:00 +0100

    McProfile: don't dereference a NULL pointer and crash on malformed profiles

commit 960369ba77533f8f1d0c351a94593b62735c4c0a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:52:33 +0100

    Make it more obvious that g_key_file_get_keys() returning NULL is handled

commit 183bd3ba76ab9ba9e661ffa85b85e5db4c725556
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:51:24 +0100

    mcp-account-diversion demo plugin: also guard against an error return here
    
    See previous commit.

commit 917cd7469b3cda60e1b0844267965e735c0f1c3f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:50:13 +0100

    Default account storage plugin: guard against g_key_file_get_keys returning NULL
    
    If the group in question doesn't exist in the keyfile (typically because
    an account didn't exist in the GNOME keyring, in the last patch band),
    the @length argument isn't initialized.
    
    We could initialize @length to 0, but that's not very obvious.

commit 989e2048934cc5822488524d3813e0d230dc4c5a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-18 11:00:15 +0000

    McdChannel: when cancelling requests we no longer need to abort REQUEST-state channels
    
    Also explicitly close the TpChannel, if we have one.

commit 393cb6e272d8178162d38f945069aa0dfe6fe687
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-18 10:58:47 +0000

    mcd_connection_request_channel: if the channel (request) has failed or been cancelled already, close and discard it

commit c95ec5c7c16139fa264ea775ff39a81aa45b74fc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 19:48:32 +0000

    McdRequest: track whether we can safely be cancelled

commit a21aa22763cb5e15cb88fb11fba46d00b68a9bed
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 19:35:05 +0000

    McdDispatcher, mcd-account-requests: let the McdRequest tell us its status

commit 3545baa31aeed9067cc7ad1de3ab65b3a1fc15b3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 19:24:14 +0000

    McdRequest: signal completion

commit dcbdea0f4555dac463f3fc39d217a3857aaafcb9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 19:20:42 +0000

    McdChannel: propagate our own status to our request, if any

commit a75673f34add70162e2fd41f5ddf6d17323e5017
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 19:20:30 +0000

    McdRequest: add a concept of having finished

commit 3fff4f5496223e0e1042114f308a77022cbcdc61
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 19:05:35 +0000

    McdRequest: rename denial to failure
    
    We can use this as a more general indication of failure.

commit 26cb82a134b9e182f162effc9ebb5a171e76cdf0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 18:47:21 +0000

    mcd_channel_init: make it explicit that the initial status is UNDISPATCHED

commit fe85f2dea2a78574e02ebde71fc4ff056df52d01
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 17:44:00 +0000

    Add a regression test for delaying channel creation in a plugin

commit 7aaa5b54ca27ab51de3e2b8bd322a31cab7b2318
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 17:43:08 +0000

    McdRequest: support delaying requests while waiting for a plugin

commit 6171032b1d982e07662d977a6d56c402d275d940
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 15:08:05 +0100

    McdPluginRequest: implement in terms of McdRequest, not McdChannel

commit cf977ecc4a4bf83d199cb0e8864259865d85fb90
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 16:22:58 +0000

    McdChannel, McdPluginRequest: add stub support for delaying requests

commit 6d8a535d13e96a68c8ed329dccdbf66c7cd9ba14
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 15:06:50 +0100

    mission-control-plugins: add support for delaying requests

commit 7f1fbd6c841ffdcbc685fd19748ce284a09dad9a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 14:19:15 +0000

    McdRequest: store the request's properties

commit 92a1b4297b71b136f55f1dd2a797cd2426ee3b04
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 14:03:44 +0000

    mcd_channel_get_channel_type: reimplement in terms of mcd_channel_get_channel_type_quark
    
    This prevents any string-lifetime concerns.

commit bc7c22cc62c220f0a8aad334fea2bb9d8a0e2aa7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 13:58:56 +0000

    McdRequest: store the proceeding flag

commit 7392a143fdad5499d50c80bda6f4b22ee5b41bcd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 13:52:52 +0000

    McdRequest: store use_existing

commit eda1c51c0552e540cfaf2f65e59962b1439abe0f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 13:47:20 +0000

    McdRequest: store the object path

commit 91d8f19f7895cf3f738c62b4efea89cc8e300d10
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 13:45:52 +0000

    McdRequest: store the preferred handler

commit 109ad4f0414b081d18189aa52f2670cc2cef0c30
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 15:06:12 +0100

    _mcd_channel_get_target_id: remove
    
    Nothing called this method, and misleadingly, it only worked on channels
    that were requests.

commit 60e37da24c70f0961d0a2281ffa490dc0811243e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 13:28:03 +0000

    McdChannel: use the McdRequest for the account and user-time
    
    There's no longer any need to weak-ref the account, since the request
    strongly references it.

commit adcf6df535ca3b31bd8fdcb3afcfc8730e525f05
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-16 13:27:06 +0000

    McdRequest: add properties for the account path and the user action time

commit e2178d20dc34101acdf3bf53e3b537aaf44745b4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-18 14:13:45 +0000

    McdChannel: have an McdRequest if this channel is, in fact, a request

commit 1dd4d15647e2e5989bac5c2d11ff625aae49f7af
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-16 16:38:32 +0000

    Add stub McdRequest class

commit b36093176f5165f5df8d91401cce9787bfdf8e36
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-15 17:47:25 +0000

    McdAccount: make the default implementation of check_request just be "let it through"
    
    If a specialized version of MC (like OMC) wants to reject channel creation
    on low memory, it can do that by overriding this method, or by using the
    new, smaller plugin API.

commit e5093465d4fd96973d4b1ee59716db1b8e75a076
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-01-21 20:25:03 +0000

    Document the API provided to plugins for dispatch operations

commit 3c48d5ddb33e057fe0016b107aede03f5e19569e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-01-21 20:24:44 +0000

    Document how to be a dispatch operation policy plugin

commit ad536935616e515e5ac181e83b88862cb01bd1a7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-01-21 20:24:29 +0000

    Add stub documentation for McpRequest
    
    I'm not documenting this class until the smcv/requests branch lands, since
    its API gets more capable in that branch.

commit a85d7dabe7c88df9bb50c591b241b145c586b367
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-01-21 20:23:54 +0000

    Document how to be a request policy
    
    Not all of this is strictly true until the smcv/requests branch, which
    makes request policy plugins able to delay dispatching, is merged.

commit efac58c9a03aecb120db3cc25fb1137e383fe35a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-01-21 20:22:48 +0000

    Document global functions for plugins

commit c7d292c87b26e5ec9cbf0f9559049ec2ebc75876
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:02:13 +0100

    Makefile.am: when doing `make maintainer-upload-release`, upload MCP docs

commit cf57e89de87b1e8fcc14671a5d191c7a51d2d8e0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-01-21 20:22:26 +0000

    Move MCP_PLUGIN_REF_NTH_OBJECT_SYMBOL, mcp_plugin_ref_nth_object to loader.h
    
    This will mean all the loader.h stuff gets documented together in gtk-doc.

commit 1b5d0af55ede724f9e5bff7e2e8bf98b22eeb6da
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:27:20 +0100

    Add infrastructure for documentation completeness checking, but leave it disabled

commit 0285cf42d28d2af0aa727ed11cbfdb57eb50faed
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 17:26:54 +0100

    Add gtk-doc infrastructure for mission-control-plugins

commit 61b7a526279b205476bb649cd47be85feb83b661
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-01-21 20:20:16 +0000

    mission-control-plugins: use an internal macro that won't confuse gtk-doc

commit b4a17274e0bf622deb710b87206a15e7322dded9
Merge: 447a225 f00511e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:58:22 +0100

    Merge branch 'telepathy-mission-control-5.4'
    
    Conflicts:
    	NEWS
    	configure.ac

commit f00511ef405f7bccd18029576bf3f65e53504e70
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:57:05 +0100

    Nano version

commit 00d01ea64a02ccbc2c13d58e4f7d7e85e5b73367
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:36:03 +0100

    Prepare version 5.4.2

commit d708686824f2ba70cf7c867752e9e52cb95f461b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-20 15:43:15 +0100

        Coverity 7707 REVERSE_INULL two gchar ** deref'd w/o check in set_param
    
        Also gchar ** strv_type_key potentially leaked in the 'clear' and 'unset' cases
    (cherry picked from commit c4b90bf71b14da5a6c11bd7ef1898cd2734ffbab)

commit cd48b089e962c9842c97545ad3cb91336a4be675
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-20 15:43:15 +0100

        Coverity 21106 RESOURCE_LEAK in dispatch_operation_claim
    (cherry picked from commit 07599a7ab74d654d50bc4dd8493f6f4cef5459df)

commit c773108d1729d00ed832d93c2246e14cb81ec12a
Merge: 6cf8ed2 80b75c3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:22:04 +0100

    Merge branch '54-unsafe-param-reuse' into telepathy-mission-control-5.4
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

commit 447a22525c59429d910cf68061649295e6f4ce1f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:17:30 +0100

    Remove protocol-copying code that was duplicated from telepathy-glib
    
    The stable branch needed this, but in this branch we can just depend on
    a good enough telepathy-glib.

commit ec8e84c00493aa9e46b8e4513a005c8d079405a9
Merge: bf1963a 80b75c3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:15:33 +0100

    Merge branch '54-unsafe-param-reuse' into unsafe-param-reuse
    
    Conflicts:
    	src/mcd-account.c

commit 80b75c38c6147eee494e8bf0d63309f4555d8d03
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:09:06 +0100

    _mcd_account_dup_parameters: don't assume that borrowed parameters remain valid

commit 603f1fb47b08fc329868d6284022e9e397fd73d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:08:32 +0100

    _mcd_account_set_parameters: don't assume that borrowed parameters remain valid

commit d408af59e2e5066ee87a6ef9c718500b335f704c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:08:10 +0100

    mcd_account_check_parameters: don't assume that borrowed parameters remain valid

commit fd0180aeca1b266bf4212ce63ca01c36bd151762
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:07:33 +0100

    _mcd_account_migrate_secrets: don't assume that a borrowed string remains valid

commit e183be2acb77ebd9117723ff3eb8da874aa8ab16
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 16:06:45 +0100

    _mcd_manager_dup_protocol, _mcd_manager_protocol_free: add
    
    Copied from telepathy-glib 0.11.6 to avoid a dependency on that version
    in this stable branch; in git master, they should be replaced by calls
    to the newer telepathy-glib API.

commit bf1963ae9d03b9de9f20cfc41c5c42fe22d93682
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-19 19:38:30 +0100

    Remove the independent keyring plugin

commit 68f540a5e4f64bac4fe5eabeac1118eb05824b89
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-19 19:38:08 +0100

    Remove references to/use of keyring plugin from account manager

commit 76ae29581db982feea0069151c4f3baedbff8d1f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-19 15:31:14 +0100

    Move keyring support from independent plugin to keyfile plugin.

commit c4b90bf71b14da5a6c11bd7ef1898cd2734ffbab
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-20 15:43:15 +0100

        Coverity 7707 REVERSE_INULL two gchar ** deref'd w/o check in set_param
    
        Also gchar ** strv_type_key potentially leaked in the 'clear' and 'unset' cases

commit 5e6f1c7c8722a660eced18fe88fcd1626ca1d5ef
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-20 15:43:15 +0100

        Coverity 11054 UNUSED_VALUE DBusConnection pointer in register_dbus_service

commit e1ce16433e74c775d81589a6bd6fe28425343dde
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-20 15:43:15 +0100

        Coverity 11729 DEADCODE - message cannot be NULL after g_return_if_fail check

commit b26ccfced1d7d6caf7e513f89d208784899bc795
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-20 15:43:15 +0100

        Coverity 21104 REVERSE_INULL make mc_param_type consume NULL safely

commit 07599a7ab74d654d50bc4dd8493f6f4cef5459df
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-20 15:43:15 +0100

        Coverity 21106 RESOURCE_LEAK in dispatch_operation_claim

commit e7af1f7b919cad4443588ab7d1d710768aa923dc
Merge: 5d4bc3c fc8c19b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 14:05:54 +0100

    Merge branch 'build'
    
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

commit fc8c19bac53368a36170ae5a2501da566dab1c56
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 13:25:11 +0100

    Only install documentation for the old libraries if plugins are enabled

commit 7958edf73362b03362e551c7a48ddbe0484ad32d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 13:12:07 +0100

    Always check for GModule, which we need for the new plugin API too

commit 17bf9dce72ab82f08fd9e4b1ea493df5e4520a17
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 13:10:39 +0100

    Always build examples: they're not installed, and cheap to compile

commit c7f56da57ed50073ed8604ec5f635a1b3830ed89
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 13:10:02 +0100

    Always build tests; remove --disable-tests option

commit 0441d12aa7256747af7d510b288231dac31ddb15
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 13:08:11 +0100

    Remove obsolete datadir_expanded check from configure.ac
    
    We use g_get_system_data_dirs() etc. now.

commit a8085fc622c922362f7c27ec6ecef59522688edf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 13:05:15 +0100

    fd.o #26634: remove obsolete utility for migration from Mission Control 4

commit 152fc26baec675dd72a685ce0c76616da7705081
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 12:57:59 +0100

    Explicitly disable MCD plugins when doing distcheck
    
    This helps to verify that the configuration we'll be using in
    distributions (static libmcclient and libmissioncontrol-server, and
    shared libmission-control-plugins) works correctly.

commit d13fa422bdfdda5d6c040fd63f5b5fcb187b0857
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 12:55:08 +0100

    Update README

commit 795ce3b4c1d3fecdad026edc4a8dc3999c7cdfa7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 12:27:12 +0100

    libmcclient: only build as a shared library and install headers if MCD plugins are enabled
    
    Only Maemo, and MC tools like mc-tool, use this library; the latter can
    safely be statically linked to it, and the former already enables MCD
    plugins.

commit 3efc0b2e69fda63390a03aebfa18a20b8379bcbc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-26 12:04:09 +0100

    src: re-namespace marshallers to avoid clashing with libmcclient if it's static

commit 95a3e0e6d44e6c4178fa6b506be44f9d1180f5cd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 19:56:59 +0100

    Use a more obvious API version for the plugin headers

commit a069613261c7c27fd4f4dbb844ab3081df07f1a5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 19:49:03 +0100

    Distribute Account_Manager_Interface_SSO

commit d5a34a06d764a72da1f7b5c845506f775d06802d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 19:48:57 +0100

    Remove stale reference to Creation interface, which no longer exists

commit 5d4bc3cd9a3775f41a92850a8a1ba69e9d6a2e9d
Merge: 02b3518 6cf8ed2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 19:44:19 +0100

    Merge branch 'telepathy-mission-control-5.4'
    
    Conflicts:
    	NEWS
    	configure.ac
            src/mcd-connection.c

commit 02b3518c046921abe98e0027b870a1fccc5be8e8
Merge: 8474ddf 6698e40
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 19:40:46 +0100

    Merge branch 'trivia'
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit 6698e407c41f78ed7a40cd578d599849ec161500
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 18:51:31 +0100

    biggest NEWS ever?

commit 6cf8ed2299d4e473550c1f828ac9af596c607721
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 19:38:36 +0100

    Nano version

commit 91bb48a26e0dc7a9abab8d36b46e887c988a6279
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 19:16:05 +0100

    Prepare version 5.4.1

commit 7a24d56cd283cfeea0d29cab157f2498453a24a9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 18:55:08 +0100

    update NEWS

commit 5574043e9291e983e52848ab1b4c89d9a1bb44cd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 18:29:09 +0100

    Revert "fd.o #24875: reimplement g_error_new_valist to avoid a GLib 2.22 dependency"
    
    This reverts commit 29abb230abaf890d33751d5da232b9a69434f0e5.

commit e4e4775f29576e5cf5b0e13b531c1ae2f73cb827
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 18:28:53 +0100

    Depend on sane versions of GLib, D-Bus and dbus-glib

commit dc20989d8526005004a9825faa5fc9c2fa506b56
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 17:06:13 +0100

    Add a regression test for fd.o #25684

commit 73181507d5320d1f53bf79724f48e355d5e70c5a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 17:05:09 +0100

    fd.o #25684: fix detection of accounts that already exist
    
    Based on a patch from Jani Monoses <jani@ubuntu.com>.

commit 39ce98e1be9739a4cd1b2139725a57e84a7eeb8f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 16:39:37 +0100

    fd.o #27129: update and simplify test/twisted/README
    
    Based on a patch from Tomeu Vizoso.

commit 4e713cc04ca8a59ecef6fc0c055594456ff95220
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 16:36:34 +0100

    Add silent rules support

commit 0edd9f9222bf7706a749fd3563dfab1a752108e4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-04-15 19:58:25 +0100

    Update servicetest from Gabble to display better diagnostics

commit 8474ddfa4435a53a13abe5103cd8828aa4431bfa
Merge: 90a613b aedf811
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 18:25:32 +0100

    Merge remote branch 'cassidy/handle-time'

commit 90a613bdb97f751dcf5d33dd3e156002ff817a7f
Merge: cc5ddd9 7ecb1e6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 18:24:41 +0100

    Merge remote branch 'andrunko/account-changing-presence'
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit cc5ddd9d50e7469d88d45a59360789013d4bde35
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 18:23:16 +0100

    Depend on telepathy-glib 0.11.6 for ChangingPresence, HandleWithTime

commit 1dedb276b857276562ec4b007387e856ee8d5bfc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 17:53:49 +0100

    Don't cache whether we have the requests interface
    
    One use of the caching (in _mcd_connection_request_channel) was subtly
    incorrect: before using the cached variable we checked whether the
    TpConnection was ready, but that's not the same thing as checking whether
    our on_connection_ready() callback (which caches it) has actually been
    called yet.
    
    This fixes a regression in dispatcher/connect-for-request.py.

commit fcfe135a45329d25cd8886b3861f68ee736e672e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-05-25 17:06:13 +0100

    Add a regression test for fd.o #25684
    
    This turns out to be a regression in the 5.5 branch, but adding a test
    in the stable branch seems a good way to avoid introducing this bug.

commit aedf81146c7a36c3f7f876b97aac845e9490913e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-05-25 13:53:15 +0200

    implement Approver.HandleWithTime()

commit 99a0c91b2e2d455eb3ac2001b132ff731843d12a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-24 17:54:36 +0100

    Correct some comments.

commit 0dd2f6fcb551e41a05b00d1aecbf94f6951d4c1e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-24 17:46:41 +0100

    Aegis/libcreds based DBus caller ACL plugin

commit f1696f20cd1442942283a0aba0a18136ec998da3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-24 17:45:51 +0100

    Wrap dispatcher ensure and create channel calls in DBus caller ACL checks

commit be1d2579a4141d66324cdc5c1b9020dd6c4498cc
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-24 17:44:46 +0100

    Implement demo DBus caller permission ACL plugin (not used yet)

commit 8a2752bf7a9af0dca7c8cfecd012d67438fa401b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-24 17:43:38 +0100

    Provide ACL wrapped DBus property get/set/get_all helpers

commit 5fbaaa0c09fe1fda85f2e48e5ee035e991ede62a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-24 17:42:10 +0100

    DBus caller ACL plugin interface + docs added

commit 194b14e3e614ccf8fff2c3087cc528285daf8b06
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-24 17:40:11 +0100

    Improved debugging when g_module_open fails to load a plugin

commit a6d16a6a0fdd7971406d935490a578f93bb7a70b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-24 17:39:48 +0100

    Improved debug for malformed (missing manager) accounts

commit f64a3c798ce77a5b67f54f6a03b22f28c58241d1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-19 15:44:05 +0100

    Signature of mcd_manager_call_when_ready callback wants a const before GError *

commit 6131c21e87ea4ba1601012c58e9acedf8b725426
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-18 19:10:51 +0100

    Drop support for unused create parameter from get_ag_account()

commit ffeaeb5b6e7618d9926d19defe1e21279634370e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-18 18:43:18 +0100

    Dead code removed.

commit 33077472f156d3658354f13fea48b7c78d71b892
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-18 18:43:07 +0100

    Dangerous call to g_free dropped

commit 014994d7128e43e996a0533bcec58e0ae8eeb383
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-18 18:42:24 +0100

    Minor comment.

commit b308d60d6ddb3d0a94e69dd361e575bc7a4b76b0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-18 18:42:00 +0100

    Account verification calls shouldn't happen until after the manager is ready.
    
    This meant that the first account for any given manager might not have been
    announced over dbus depending on a race between the CM becoming ready and
    the account verification callback being invoked (for accounts created by
    storage backends like libaccounts-glib/SSO at any rate).

commit faac87f2b3dff316b4cf65b6c7afacb495cbd2db
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-18 18:39:24 +0100

    Typo in debug message (valid/invalid switched).

commit d66e10badab7b6e777b5722d446eff25982ad679
Merge: 575e003 b864a27
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-05-19 15:37:46 +0200

    Merge branch 'telepathy-mission-control-5.4'

commit b864a277d76c54a803e9259cd65abe1dfdc624d3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-05-19 14:45:29 +0200

    set '0' as UserActionTime when HandleWith() is called
    
    '0' means 'no user action' which is the safer choice to prevent focus
    stealing. User should use a futur variant of HandleWith() allowing him to pass
    a UserActionTime when needed.

commit 575e003ecd88ed5ed07612b1f54cc4cb5698d7fe
Merge: dfdc4d8 506f164
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-05-19 15:35:05 +0200

    Merge branch 'telepathy-mission-control-5.4'

commit 506f164532b3a2fc5b8b232b42414e7bc79c17b4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-05-19 15:33:43 +0200

    account-manager/presence.py: GetInterfaces can be called twice

commit c758ce6dd21a56641b78b36137274a13d8270488
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   2010-05-19 15:23:10 +0200

    mctest.py: no need to import 'sha'

commit dfdc4d82c654dad67c89b8a37951f5a079b37a8b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-10 14:15:48 +0100

    Document likely error of an SSO ID account -> MC account dbus call.

commit 56e186485d768b66190d6f1802e6178e7e50a8b0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-26 14:50:14 +0100

    xmlns typo

commit 45a415ec7ae312a86d848d5cd2215e1300324032
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-26 14:04:12 +0100

    Tweak the SSO ID comparison based on review

commit 9d487bab8db34c2e117062178cd9342648a0120d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-26 14:03:41 +0100

    Class, method and variable renaming from review.

commit a676a8ef98b69eb3f62b1467dd776fad75bf9346
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-26 14:00:41 +0100

    Remove account interface (dropped from requirements)

commit 0357b99db643b1e7e30a9f7487468f880af1e3ba
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-19 13:57:08 +0100

    Implement the new SSO related utility methods.

commit c78decfb9156e20fe423e0121ca3ae2400d82005
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-19 13:55:17 +0100

    Generate headers and code for the new SSO properties interface.

commit fde2102e92081645bcb71a88ae0d4aaee061e47b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-19 13:54:08 +0100

    SSO accounts can have multiple services, but this is not exposed as a property.
    
    Instead, expose it as a special property which is not covered by the standard
    iterator but will be returned if you ask for it.
    
    Also, exclude the property from being saved, since the list of services can
    change and should not be cached in the SSO storage for the account itself.

commit 3773279f3f783646aefa23978bff102358823399
Merge: c9ca4ea 156a6b7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-10 13:27:11 +0100

    Merge branch 'sso-tmc-uid-is-service-specific'

commit c9ca4ea5f5fdb4cd735aeef816cc53694a518ddb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-10 12:59:02 +0100

    mcd_account_check_validity after async account creation to prepare/announce it

commit 156a6b76770aed18fc8c39af430f10dcf9e90219
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-07 16:03:25 +0100

    MC_IDENTITY_KEY wasn't treated as a service local value everywhere, fixed

commit 2d4a8c7ccfd56ceefe254db813b1b8348f6bc2c1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-07 14:19:36 +0100

    More explanatory comments.

commit 8843d84ca628c928647bc10fbdaefe46dd5b9707
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-07 14:19:22 +0100

    SSO values (as opposed to params) can now be local (they were all global before)

commit e0ff2d813712bf5655f1899391e0b765516d674a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-07 13:47:44 +0100

    Explanatory comment

commit c83e332c1738e08dc28f818dfc9e006d81971d3a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-07 13:47:30 +0100

    Change name of get_mc_key to indicate it deals with MC parameters, add comments

commit 00f6eae530a14e2f99cb3896816af43f06f136cd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-07 13:41:00 +0100

    Update implementors-note comment to be both true and more useful

commit 7ecb1e63ca5e93449b5669a81fb80f0889514c09
Author: Andre Moreira Magalhaes (andrunko) <andre.magalhaes@collabora.co.uk>
Date:   2010-04-29 03:49:46 -0300

    Added test case for Account.ChangingPresence.

commit e5f0b40c879c92b2a59944decada5c2c4b1720fb
Author: Andre Moreira Magalhaes (andrunko) <andre.magalhaes@collabora.co.uk>
Date:   2010-04-29 03:49:11 -0300

    Proper emit AccountPropertyChanged(ChangingPresence) when the presence is changing.

commit 282064d6b7758ad83815c8b63ff4cc6d9cf5b806
Author: Andre Moreira Magalhaes (andrunko) <andre.magalhaes@collabora.co.uk>
Date:   2010-04-29 03:48:41 -0300

    Added Account.ChangingPresence property definition.

commit 5dcd6cd2011e9b0477493cc7618388f4317cd341
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-07 13:40:24 +0100

    Rename get_ag_key to indicate it applies to params specifically.

commit d06aa5990e57b55ee03d5ea0d25f0f6895a094b5
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-05 18:18:52 +0100

    Variable moved to a more localised scope

commit 377f5cc874d5e784c6295d3220f4adfdc6092f8c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-05 18:18:32 +0100

    Unused account name removed

commit 36a87b5cd1377f820326d85320879e3dd6b7f2ea
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-05 18:18:11 +0100

    Unnecessary GList removed

commit d96203693dbb764ccfe93e0f0f6dc307f62ce5fe
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-05 16:22:18 +0100

    Extra debugging to help diagnose a reported but as-yet unverified new-account bug

commit b1105ba4a7c5fdd225a2b3b9d0938970db1599fc
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-05-05 16:21:02 +0100

    Revisit the SSO account storage plugin now we have some concrete examples
    
    The following points are addressed:
    
    * The hardwired SSO service selection is gone
    * We now very carefully pick an IM service where necessary
    * We un-set the service where necessary to get global settings
    * We are careful to leave the selected service in the same state
      on function exit as it was on entry.

commit c8a3f6a72e84e876154b44b595ae2f6ce03b0f74
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-30 17:55:48 +0100

    Don't try to register the account-manager's dbus name again.
    
    This was triggered by asynchronous back-end account creation, which is
    a new code path required by SSO.

commit 3465fec353fe5af219039da520d56409ac150a60
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-04-15 20:59:14 +0100

    The next release from this branch will be 5.5

commit c8db874b6bf27dead411d6f83c504f2bb40fd1fd
Merge: 0901a0a c4bb262
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-04-15 20:57:50 +0100

    Merge branch 'telepathy-mission-control-5.4'
    
    Conflicts:
    	src/mcd-account-manager.c

commit c4bb262c3209c172bf0ab2455a1cc4f8a14a1583
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-04-15 20:54:43 +0100

    Start 5.4.1 development

commit 0901a0a6c90e24621e35ac35e5cd88fa20c2a205
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-04-14 13:58:28 +0100

    Set the right environment variable to run tests with a temporary version of ~/.cache

commit 65f032693ee065ea6353fe8d18b77d84ccde61ab
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-04-07 16:06:29 +0100

    Gnome keyring code reintroduced at old location by a merge resolution, removed.

commit 0a31a457851ca7c88d106e4379bcf5b96561e92f
Merge: 4dc67bf 412a7a9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-04-06 19:47:21 +0100

    Merge branch 'account-atomicity'
    
    Conflicts:
    	src/mcd-account.c
    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

commit 4dc67bf5422609dc6c054e5373a083a4f311feb4
Author: Tomeu Vizoso <tomeu@sugarlabs.org>
Date:   2010-03-26 11:12:40 +0100

    Fix error propagation in CreateAccount
    
    Fixes fdo#27021

commit 9ce5ed091566fac76159f22bd0bb09d8be297dfd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-24 18:02:01 +0000

    Move the plugin loader init in the master to its _init function

commit dfef1220b713bbbfdda4ae1d0e8c973afd1ed880
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-24 17:56:18 +0000

    Make another belt-and-braces plugin loader initialisation call.

commit acdadc00a8919115ceb63b2cd0c786b0fbabc00d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-24 17:10:55 +0000

    Make sure the plugin loader has been initialised in libmissioncontrol-server.

commit 4161863e9f376790c850ef67d27b4afcb9abe69b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-24 17:10:22 +0000

    Make _mcd_plugin_loader_init idempotent.

commit b1d43671069402ccca45e388a2d1d57c9c29b027
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-24 15:36:07 +0000

    Incomplete accounts resulted in account manager load locks never being released.
    
    This meant that the account manager's dbus name was never claimed, as it
    sat around forever waiting for the account's manager to become ready,
    (or fail) but this could never happen as the incomplete account didn't
    have a manager at all.

commit cebd5b7cce4011f8ea231162b6c10cdbee338905
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-15 16:11:22 +0000

    Don't poke the keyring plugin into the list if it is disabled.
    (cherry picked from commit 3767b4a3df5a736857fec2b7852f71e695bafc75)

commit aa441c4150ac472d264a6142d3265ebe55c46c20
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-18 20:35:56 +0000

    Consider NULL self to _mcd_plugin_request_dup_denial to be an error.
    (cherry picked from commit f74dc67f0dd7547c8d60127ac4c823de1865592b)

commit 23e1c6ceec44bd0002db04a7624d0ca0dc57d00d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-23 17:21:17 +0000

    Explain why we don't invoke the plugin_api shim ahen there are no plugins.
    (cherry picked from commit e6caebf7c4332145f99a0f70f73596c0c61fa754)

commit 679e396a9e30a32abea5d87ace227591d6021047
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-03-16 11:52:28 +0000

    Avoid unsetting uninitialized GValues
    
    The 'cleanup' block calls g_value_unset(&protocol); if we 'goto
    cleanup;' before initializing it, we'll critical.
    (cherry picked from commit e2bf8cb962db707e146db611a09000e1fe5e349d)

commit f87936da0484f2b2c20c70884cd44b2cfdcbab1b
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-15 13:55:41 +0000

    Don't save the manager and protocol keys, they're magic immutables.
    (cherry picked from commit 1cb84576b8d0ac20282d8062c6359858321186c6)

commit c3665f28230481e8827dcb329e13840fa1766589
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-15 13:37:54 +0000

    Correctly handle global settings vs service settings, in a uniform manner.
    (cherry picked from commit 1aca87caf2e83dcaccd0007046f66299fa10a7df)

commit b9c9b0f3bc9795466f20f1fc63d7d1d873b4bec5
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-13 18:40:05 +0000

    Some settings were found in the global rather than the service section. Cope.
    
    It's not clear that they should be in the global section, the tests
    seem to put them into the service section, but as we don't have a
    working a-ui at this end, look in both places when fetching, service
    section first, falling balc to global.
    (cherry picked from commit 3f0c6915c660171d9dd1b38988e5ce90adc8ee06)

commit 449db2c78d4a79e8f30ca7e76300a651d2f5e3ae
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-13 16:34:58 +0000

    _provider_get_service isn't working reliably: hardwire the service for now
    
    We know we only need to support 1 service for now, google-talk - hard wire
    it as the account to select for now, as we need this for the demo, we can
    figure out what's wrong witrh it later when we're not hard up against a
    deadline.
    (cherry picked from commit edccb1b9846f504d0b621543512b8877acbe868f)

commit 9f0dca248a3212dcb825bdbb013d5064449a88a5
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-13 14:45:21 +0000

    MC param-account, param-password map to AG bare settings username, password.
    
    These were mapped to the parameters/ namespace in AG, but that's not
    where the maemo UI code seems to put them.
    (cherry picked from commit 805544ba366ab4067de645f415010fff7b6560e6)

commit bd537555a2f1d41af7604c5fa3a7b5aec70f2273
Merge: 0829627 5e21813
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-03-17 11:32:48 -0700

    Merge branch 'dispatch-early'
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit 5e21813877d46912424a7abff5e21a023ce860ca
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-03-17 11:23:31 -0700

    Expect Connect from mc instead of StatusChanged from SimulatedConnection.

commit 082962702c1db6e08038920916b0c612b65c2d4c
Merge: 148c720 d09690f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-03-15 14:00:00 +0000

    Merge remote branch 'tomeu/MC_LOGFILE'
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit 148c7209a55cd196f063e6d43f23fcbfc85ae4f6
Merge: 31e4e22 27a15d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-03-15 13:59:49 +0000

    Merge remote branch 'tomeu/bug-27038'
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit 31e4e22855aa5d0bddc8268b23ec426d9be1cd61
Merge: 5e8f91c f028fbe
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-03-13 12:45:30 +0000

    Merge branch 'account-storage-plugins'
    
    Conflicts:
    	src/mcd-account-manager.c

commit f028fbed67bb92088a10b2474839f3b9e426bf5b
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-13 11:47:11 +0000

    Removed stray debug message.

commit e92541b13d1093b36377b3b03858aa0e5848607c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-03-13 11:24:40 +0000

    Don't re-create objects for accounts we already have
    
    It seems that accounts from the accounts-glib loader pop up twice, once
    from the GKeyFile and once from the 'created' signal. Until we figure
    out why it's happening, let's add a cheesy hack that prevents the
    instance from the GKeyFile being created.
    
    Also add extra debugging to add_account() so we can see when accounts
    are added and where they've come from.

commit 50ace3c347dfb1692d684f266a4248463208d534
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-13 03:13:09 +0000

    Flush new async-created accounts to the SSO store to save new+derived settings.

commit f77ddc8d02ca3a867a6127da8377edc1c20850d8
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-03-12 22:12:01 +0000

    Uncork storage plugins after reading from GKeyFile

commit ad08f3b4468a5d05f3e0451d10947affa7ee856b
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-03-12 21:33:26 +0000

    Add a FIXME for plugin_account_manager_set_dbus_daemon()

commit a606766773c3945240628d3a508b3423022a8cf7
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-03-12 21:29:10 +0000

    Uncork account stores when master calls _setup()
    
    This ensures that the McdMaster actually exists before we start creating
    accounts all over the place, and prevents a loop where instantiating an
    McdAccountManager instantiates an McdAccount which instantiates an
    McdMaster which instantiates an McdAccountManager...

commit e260cc94562a992b20196efc3347f06ed2456ce6
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-03-12 21:23:06 +0000

    Correctly retrieve CM and protocol from libaccounts
    
    You need to initialize GValues before you hand them to
    ag_account_get_value(). Also, 'c' was unused.

commit f7b7aa8e477abe03c1340c2b200ddcf9c9792c2c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-03-12 21:03:22 +0000

    AM: initialize D-Bus property interfaces in _init()
    
    It turns out that it is unsafe to do this at any later point, due to a
    series of surprising facts:
    
    • mcd_dbus_init_interfaces_instances (obj) is implemented in terms of
      g_type_get_qdata (G_OBJECT_TYPE (obj), ...).
    
    • osso-mission-control subclasses McdAccountManager.
    
    • This code:
    
        GType s, t; // s is a subtype of t;
    
        g_type_set_qdata (t, FOO, BAR);
    
        gpointer data = g_type_get_qdata (s, FOO);
    
      sets data to NULL because g_type_get_qdata() does not consider
      superclasses.
    
    • Remarkably, calling mcd_dbus_init_interfaces_instances() from the
      _init() function works because the code that runs each instance_init()
      function in the hierarchy in turn sets the object under construction's
      GTypeClass to be the particular type whose init() is running, rather
      than the final type of the object!
    
    This was a fun debugging session.

commit 20bcefab890201dce263d21833dfbfeacc88c8b4
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-12 19:31:36 +0000

    Put a fake create signal on the queue when new accounts are found during init.

commit 632889e639e44f76745dc96eac5f70782e825f61
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-12 15:24:39 +0000

    Log + hook up signals for _all_ plugins, pseudo and real.

commit f1b4a26c5cc8b31c0b208b4629f1eed0b76ebea9
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-12 13:52:51 +0000

    Move some setup to _constructed so that properties are available to the code.

commit 6558c7a0f902ef0539e96f0eaf3eea4c3c66a0bb
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-12 13:41:42 +0000

    The dbus daemon isn't available at the point we need to construct the shim.
    
    Make the dbus-daemon a non-construct-only property, and provide a convenience
    method for setting it.
    
    Re-order the class_init so glib/gobject actually accepts the property.
    Implement property getter and setter for same reason.

commit 27a15d80e090d4b84ff67d95c9bf283de7b97888
Author: Tomeu Vizoso <tomeu@sugarlabs.org>
Date:   2010-03-12 10:13:55 +0100

    Don't try to propagate a denial if there are no plugins installed.
    
    Fixes fdo#27038

commit 236b156892b3b31f2331b62489150485045d8468
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 19:28:07 +0000

    Forward declaration of prototype to keep the compiler happy.

commit 15924b732c89cbb5bd5c5965b40e139e33349136
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 19:27:45 +0000

    Only iterate over parameters, they're the only oones we want.

commit a8dd436c66b42ab8c78c915da2a343887df10d10
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 19:27:12 +0000

    More type errors.

commit 3fe0325fe95272bb73b0b4508aac3f8d08df30cd
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 19:26:44 +0000

    Type error.

commit 532291a3d299dd970b8774fbc045567c75af048c
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 19:26:18 +0000

    Type, 3 param function called w 2 params.

commit 5be4467bcd28189cc4d8ef76269956f356fdc8fe
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 19:25:50 +0000

    Stash the McpAccountManager for use in signal handlers when _ready is called.
    
    Tweak the calling of signal handlers for delayed signals + handler data free
    operation to be correct (wrong type errors, param reordering typo)

commit 4b8b72c968b8928386189a5709debb8d1b04d580
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 19:22:33 +0000

    Typo.

commit 8b6c50917d4c7b8294bec21402537a99a4b5ae7c
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 17:53:36 +0000

    Initialise the list of libaccounts services.

commit 32edda37b998906ed33dbbccc829bb9cef591157
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 17:45:56 +0000

    Accounts not created via libaccounts are not claimed by the sso plugin anymore.

commit 359ca41ed4cc362d589f76aae4e5b1e404cbecb5
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 17:32:29 +0000

    Doc typo fixes.

commit 5b7e023a99002962eca9420b86ebbcd3adc29cbc
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 17:32:17 +0000

    Delay account creation signals until ready, use the new unique-name interface.

commit 79054f1e316edc61394281af7401829214d6d8a9
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 17:30:22 +0000

    Drop the old copy of the unique-name code and use it via the shim interface.

commit 2cc024fafe82f61264d829c289d8d8326721335d
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 17:29:08 +0000

    Copy the unique-name logic into the plugin shim interface and expose it there.

commit 660edddc2530e797b7d92cf512a162ac2e0610d6
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 17:27:04 +0000

    Define interface to allow plugins to get the unique account name via the shim.

commit b221338fbbd712e4105a38e5a7407d02898b525b
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-11 17:24:40 +0000

    Define interface to allow plugins to be told that aync account ops are now valid
    
    In other words, we're done with basic startup and listing of accounts that
    we had seen before, new accounts can now be created, and async notifications
    from the plugin backend may now be transmitted onwards by the standard
    signals defined in the interface.

commit d09690f086ee4ba4edf4cbd6aa34fa088681d2e8
Author: Tomeu Vizoso <tomeu@sugarlabs.org>
Date:   2010-03-11 16:50:48 +0100

    Add support for MC_LOGFILE

commit 5e8f91cc75916c8768a05130b15f062dded11f4c
Merge: 34eabb1 1abaae5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2010-03-11 15:41:42 +0000

    Merge remote branch 'tomeu/bug-27015'
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit 1abaae519d56caf2478a7af24e5084d2c2476871
Author: Tomeu Vizoso <tomeu@sugarlabs.org>
Date:   2010-03-11 12:29:50 +0100

    Remove misleading reference to GConf

commit 2e6d574ef1faf1f88fa0e9e18a86ca1114ffefd9
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 19:19:41 +0000

    Remove generated marshaller file(s) when a clean target is invoked.

commit 901159ab234d78e24c00f98a76ea71363cfc3b42
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 18:26:56 +0000

    Dropped noop dispose instance vtable entry.

commit 9ce38fa3d5deead66d5185e95459feda033fe75e
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 18:07:47 +0000

    Replace strcmp et al with g_str_equal instead in boolean contexts.

commit c5b2f19a62091752295a3fa36b00d0bc8d8bf06a
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 18:01:36 +0000

    g_int_equal was a braino - should have been g_direct_equal

commit 34de0a64fba030a8a11905093137910faaa2ad1f
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 17:46:33 +0000

    Style trivia.

commit 0a897ae7e9aedbf8d758b5acedeecacf7b7fa0f6
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 17:41:26 +0000

    Move the ref/unref of the user data pointer completely out of write_conf.

commit e71beba432935d3f06c9f2547f06a67bf7302fb0
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 17:12:09 +0000

    Drop implementation of noop instance method for set_property.

commit ed51ecb1ccf94ed89cf730358920fdfc77801a81
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 16:53:30 +0000

    Free up the keyfiles in the finalisation stage, not the disposal.

commit 8888f7f1f1955f5cdc765dc2990b1cbdcac21928
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 16:35:11 +0000

    Makefile dependency/nodist fix.

commit ca9a4fe535cf71a8e0ef3176c0c952c32d73c0b0
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-09 16:20:18 +0000

    Use g_cclosure_marshal_VOID__STRING instead of _mcp_marshal_VOID__STRING.

commit 88e1c55d37c7f3b993e7a1c335b3a718e65acd9b
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-08 19:19:49 +0000

    Implement and connect up handlers for SSO 3rd party account creation/deletion.

commit 3e995b79683c92b74bbc0084da0e63e2e03e8060
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-08 19:19:10 +0000

    Explanatory comment.

commit 09f74c6a547574818a5029f5ac098819e7d9c0b7
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-08 19:18:52 +0000

    Callback for mcd_account_delete in the account manager.

commit d363fa0c54eb58aae790f1c3d969b2168c56a115
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-08 19:17:48 +0000

    Type typo fix and explanatory comments for plugin account deleted callback.

commit 7e443f93903574f8d0b37721fe60be8041c6c8cf
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-08 19:15:18 +0000

    "Enabled" setting is a special case in SSO, handle it as such.

commit dee3cf66397c8d43ab8c0ae2658d7a6ce7653cf0
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-08 19:14:06 +0000

    Forward declarations to keep compiler happy when we add the sso callbacks.

commit 29ca669296c8f2afd6858e2452e098c6ea05dd67
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-08 16:02:24 +0000

    Remember the ag id -> mc name mapping for use in deletion.
    
    Also forget the name and drop our ref to the ag account object when deleting.

commit 7c6a00ac2ed87e354832f014e9c698ccf88c276b
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-08 15:00:20 +0000

    Remove old debug code.

commit 283961d700fbc95ecc6cba314d2b62325feba356
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-05 19:18:16 +0000

    Make the libaccounts-support conditional on the current config.

commit 19e889489b6047cb743f79f660ea9057e6823aed
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-05 19:17:38 +0000

    Make libaccounts support optional via configure, update Makefile.am accordingly.

commit 56bb654c974b42f936e79eaabb7730937a44f258
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-05 19:16:42 +0000

    hash-include fixes

commit 03dbe99b13454ab2c41200f2a49294e800c30bee
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-05 19:15:15 +0000

    libaccounts-glib pseudo-plugin for accounts storage.

commit e75bd719fbb50cbaf955f01c5ba325fa2126479e
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-05 14:48:02 +0000

    Dependency to make sure the mcp marshaller(s) are generated in time.

commit 9b84e17c141fbfe96c7ace4885307ae42ca07964
Author: Vivek Dasmohapatra <vivek@noise.cbg.collabora.co.uk>
Date:   2010-03-05 14:47:29 +0000

    debug message emitted when signals we don't process (yet) are received.

commit b5cdf7cf5e502bd9c57991a91a9185acadec2764
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-03 03:52:44 +0000

    Handle setting deletion in McdPluginAccountManager.

commit 25bc3a8fe7d2d6635a4f71d0ae6cc83a4bb6186a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-03 03:51:44 +0000

    refs/unrefs of the McdPluginAccountManager instance were unbalanced.

commit 1049d59b4c87928a0726424b718ea979c1b7e6c8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-02 18:44:34 +0000

    Set the loaded flag after a successful keyring read.

commit 985c5076811073159e8a4f5d9beaa09d7b73b583
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-02 18:44:13 +0000

    Style trivia.

commit 494aa78683273a89761ff65584a6f9962415ddf4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-02 18:38:48 +0000

    Style trivia.

commit 257b1761ff7e1275347695f4d2c9ed68a6f6d40d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 21:08:30 +0000

    Style trivia.

commit 785429022cacc75ba5750fd2631fff4dc32cd40b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 21:07:26 +0000

    Use g_get_user_cache_dir to locate the target for the account dicersion plugin.

commit b5b9d676b96294987a2c82a81201ed4d9080f6cd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 20:53:15 +0000

    Rename plugin prio #defines and provide  _NORMAL and _READONLY constants.

commit 1c3500945ad2549a96743d51cc5e8d17eaf875ba
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 20:52:23 +0000

    Allow low priority (readonly) account storage plugins to be sorted correctly.

commit ac9da0ef2e6508849d3d293c4540e355aa903ff3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 20:29:08 +0000

    Remove old debug instrumentation.

commit df78e0e4f8a7305fbc950bddd194fbff87f390d0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 20:27:48 +0000

    Change transplanted code from existing style to preferred style.

commit 543e9080b214c04b72b7d5e4733b19b711be1e4e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 20:25:04 +0000

    Use same #defined noop code as elsewhere.

commit 97b805d6e5d5cb909d165fb99d39a4c9dc7ac256
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 20:24:35 +0000

    Style trivia.

commit bf3c12f3d79774225582207fe66cbf8bc7502ca1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 20:24:07 +0000

    Style trivia.

commit 3496d2bf29688b3e2d5d88abe33e7b0491fdef19
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 20:13:26 +0000

    Plugin priority is signed.

commit 4e2ce3fd358c29e201fe29b88454ff7180106712
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 19:45:18 +0000

    Unnecessary include removed.

commit 06a57ed5d2f149949dd8de470b09287041ef03b0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 19:11:46 +0000

    Minor style issues (variable renaming) and explanatory comments.

commit 53cbba20640f28ae9275f8b29725d6916cc68a85
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 18:48:27 +0000

    Rename account storage plugin comparison function.

commit 91e6af087af9e57aa4d3424e2cb48a956ba137c4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 18:43:46 +0000

    Document the McpAccountManager interface.

commit 54fb5116e33f5c3e6ba472e5348884eef50d8249
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 18:43:31 +0000

    Document the McpAccountStorage interface.

commit 70cbc38802864e4859ebc64f4d7f516c5a2bdc06
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 17:17:16 +0000

    Don't include glib subheaders, only the main glib header.
    
    Note: This was existing code transplanted from elsewhere. There are lots
    of other subheader includes in the codebase but I have not addressed those
    cases here.

commit c45a55d151decc332294adfd443c72ae4acb3170
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-03-01 17:12:22 +0000

    Don't rely on mcd-debug in the plugin interface implementation.

commit fbcd0cb4df51529f039d884fabcef4f4d1ac7163
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-26 19:26:27 +0000

    Keep one long lived McdPluginAccountManager around and use its keyfile etc.

commit 5558750baac59696fd9045a4b5280362d392b4f4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-26 19:25:31 +0000

    Make the McdPluginAccountManager the owner of the keyfile and secrets GKeyFiles.

commit d095c537198a619ce26eeb0b0622cabce208aedd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-26 18:34:27 +0000

    Class rename McdPluginAccount -> McdPluginAccountManager

commit e02509b21e7757ba188dc652aea3c44b1f264441
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-26 18:26:57 +0000

    Class/Interface rename - McpAccount[Iface] -> McpAccountManager[Iface]

commit c67c292dbc22b90d64b9acee221cd8811cc79478
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-26 18:02:16 +0000

    Typo: dead variable no longer used.

commit 950c800befd43fcb2745d29908b3a5d16bf675db
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-26 18:02:00 +0000

    Use the plugin marshallers instead of sharing the core marshallers.

commit 7103b41e9a578aa3ce14b3c9d25497706d594d02
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-26 18:01:32 +0000

    Generate signal marshallers for plugins separately from the core marshallers.

commit 2b009c68dc8d7b60b335d17369c9259c0ae7b38a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 19:13:33 +0000

    Add a dependency and rule for the marshallers header from the src/ directory.

commit 3fb1b91b97128411ca7a2df1849d16327398023a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 19:12:52 +0000

    Load and use the account storage plugins, with two pseudo-plugins by default.
    
    The pseudo-plugins are the keyfile plugin (an oject that implements the
    relevant plugin interface, even though it isn't loaded as a plugin) and
    the gnome keyring plugin (ditto) which are loaded at advertised priorities.
    
    When no other plugins are loaded, the keyring plugin should transparently
    steal all secret parameters from accounts in the mcd-account-manager,
    provided that the keyring daemon is accessible.

commit b855e67b2b250fb745f38b5e27dff9fb259aae11
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 19:07:37 +0000

    Include the new account shim interface header in the main plugins header.

commit 42a6831e4d47a343dca858c573e2013da0e1ddcb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 18:55:51 +0000

    Implement the gnome keyring and gkeyfile storage plugins
    
    These two plugins will always be loaded at known (and exposed) priorities,
    this allows plugins that want to steal secrets (eg passwords) to slot
    themselves in at a higher priority than the keyring plugin, and those
    that should not receive passwords to slot themselves in between the
    keyring and keyfile plugins.

commit e061231b0c83ca4537a6c174485cd1cb5bb96dc5
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 18:45:35 +0000

    New marshallers for account storage plugins.

commit d3e7cb461a22b24e64d58c725015fad997fd44cb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 18:44:35 +0000

    Header defining the interface for the account storage shim interface.

commit 52c82684e6e1a55e095d0886701bcd4054e87369
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 18:43:46 +0000

    Define +implement interface by which account plugins can get/set parameters
    
    The shim interface, and the object implementing it, that get passed to
    account storage plugins to allow them to get/set parameters and to check
    to see whether they are secret (or flag them as secret).

commit 6431ea7b698c43e9fa28864398000cea1e93e09c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 18:41:05 +0000

    Update the account storage plugin interface to the new API
    
    The previous implementation was granular at the account level, new API allows
    plugins to grab individual account.key pairs, which means we can relocate
    the gnome-keyring support to the account storage layer instead of having it
    sit above in the mcd-account object.

commit 95b79aff8de71b22502df6c9fec7910945302a49
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 18:37:45 +0000

    Expose whether a parmater is secret (for use by account storage plugins).

commit 6ead3d4396347ec3ae0682809a70ac9daf276ca7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-25 18:37:04 +0000

    Remove keyring support from mcd-account (will be moved to a plugin shortly)

commit a43f6684c21099210debcdcc736ca2aac1efad74
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-14 23:53:06 +0000

    Initialise the storage in the class initialiser, not the instance.

commit aaaa63b99f64774a2f00a4c0ceb65220242bbb89
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-10 19:04:02 +0000

    Sample implementation of account storage plugin, for use in tests later.

commit 5b49274b33c6a46b06c8ad1422f8fce3e850bf9f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-10 19:03:29 +0000

    New plugin class for account storage.

commit 2fa79a09af19abc64d1d63ae12a76a097c43d93c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   2010-02-10 19:02:30 +0000

    Load plugins before any other components are initialised.

commit 34eabb1752fbe705a73339eb0d959f140a63d9cf
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   2010-03-01 13:58:58 +0000

    Only time out channel requests after many hours
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit 24f58efd43b10ad51757be5b2168d49045d0faa2
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-02-26 08:39:19 -0800

    Changed indentation.

commit f05e39e125ebecb04e868c87c237bff3f5e49644
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-02-26 08:38:54 -0800

    Remove redundant assertion in test script.

commit ece1f5b90e9cf6ff33327f4911532b89bbcbdaea
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-02-25 14:30:17 -0800

    Request unrequested channels when connection is ready.
    
    Fixes dispatcher/connect-for-request.py.

commit 348a68e677c34cc8221e994f7b4a0e8f504229cb
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-02-25 14:05:34 -0800

    Move _mcd_dispatcher_add_connection to mcd_connection_done_task_before_connect
    from mcd_connection_early_get_interfaces_cb. This guarantees the caps iface has
    been retrieved for UpdateCapabilities.

commit a0ae71ebf164b59ba4761d4edf4bb9d738343448
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-02-24 17:45:19 -0800

    Regression test adjustments for new connection/dispatcher order.
    
    * mctest.py: Reorder expected GetAll method on requests iface in harness.
    * account-manager/reconnect.py:
    * account-manager/recover-from-disconnect.py:
    * account-manager/request-online.py:
    * account-manager/update-parameters.py:
    * dispatcher/recover-from-disconnect.py: Expect GetAll on request iface
      before connected.
    * capabilities/contact-caps.py: Remove UpdateCapabilities expectation after
      connection.

commit 1ffce339da1e367104ef6c697c3eb7540dd3e14f
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-02-24 16:30:39 -0800

    Added regression test for pre-connected channel dispatching.

commit b47991610a4a9947f262b33e7cc94c923a44897c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2010-02-24 14:38:02 +0000

    mc-tool: don't crash on invalid account names
    
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit bee3d1e1c7be2058bfa4eeab9b52477975d577d5
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-02-17 11:59:34 -0800

    Move _mcd_dispatcher_add_connection to an earlier stage.
    
    https://bugs.freedesktop.org/show_bug.cgi?id=26583

commit e4d54ce9b9e51291f8c281aa39b28bdf38fb7822
Author: Eitan Isaacson <eitan@monotonous.org>
Date:   2010-02-16 17:34:46 -0800

    Use telepathy debug interface
    
    Fixes: fd.o#26597
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit 0d7f1f23dd54fb0cd19e93cfe90aa8b82c9d5396
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-02-18 15:59:57 +0000

    mc-wait-for-name: link to GLib properly
    
    See Debian bug #556488 for more info.
    
    Fixes: fd.o#25122
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit 3601f10e676b424c113b4f7ea061d405e93fc4c2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-15 17:31:20 +0000

    mcd-debug: hook up plugins' debug level

commit eef58e645111a18372e69af067cb113ce4e0bc42
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-15 17:30:59 +0000

    mission-control-plugins: add debug support

commit a59e1b8e992ae77d45e77ba1221498220a8a7dc5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-15 17:08:53 +0000

    Only load plugins that match mcp-*.so (or mcp-*.dll, etc. as appropriate)

commit 782ffa5a6337ff48b81aaf779d510305b6e7f8bd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-12-15 17:07:43 +0000

    Add most of the plugin loader to the mission-control-plugins library

commit 1671391d4984ae5387f1e042a07b01c001bd58e6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 22:56:10 +0000

    dispatcher/create-rejected-by-mini-plugin.py: new test for McpRequestPolicy

commit d87dd4d5913410edc9537e623f3ef223284950dc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 22:55:07 +0000

    McdAccount: lazily create a McdPluginRequest and pass it to all McpRequestPolicy objects

commit 969199a78c867cefc5ed33fae740f67bab9531d7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 22:54:32 +0000

    McdPluginRequest: add an implementation of McpRequest

commit 684616798642c8c50db326e9c09bfa9bf2d5a94b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 22:53:52 +0000

    McdChannel: return from Proceed before possibly signalling Failed

commit 2b11293d9d1e9a5e54a8b8124744c3de007b3d8f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 16:30:12 +0000

    mission-control-plugins: add API for noticing and/or denying requests

commit be415f0f05fe4c7fdee8a78a50f760d2ac36bd79
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 21:02:02 +0000

    dispatcher/dispatch-rejected-by-mini-plugin.py: regression test for immediate and deferred rejection by plugins

commit f86a0c4d613dd5ce587d88a27d569b5af35e378a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 12:50:43 +0000

    McdDispatchOperation: don't run Approvers early if a plugin has already decided to terminate the channels after observers finish

commit 3fe828a9518f7ede54350052cf2ae53c431609c3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 12:26:40 +0000

    dispatcher/dispatch-delayed-by-mini-plugin.py: regression test for mini plugin API

commit 5290fb2e24d050d89a137fe8b39d3c14f3c80c71
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 20:50:19 +0000

    Port the "delayed acceptance" plugin from the old API to the new

commit 6d98902e0e46e95330ed4a5a3630345ff300fccf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 12:26:10 +0000

    McdDispatchOperation: have a McdPluginDispatchOperation and use it to call mcp_dispatch_operation_policy_check()

commit e81fab05393db2b89ee37f4bd3559c0fad6f53b0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 20:46:53 +0000

    Link MC against libmission-control-plugins.la and implement McpDispatchOperation

commit 4e6d97a4eaad3029d402afa8ea9271870d62f56d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 20:44:34 +0000

    Add a simple loader for plugins using mission-control-plugins

commit 58c340fb4c6610690dc996e08c02b5e1943d56a0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 19:44:00 +0000

    Rename --enable-plugins (etc.) to --enable-mcd-plugins (etc.)

commit 4935d23ca73f36efa0940c7de2f22311b9fedad2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 19:42:28 +0000

    Add an interface for plugins to implement in order to filter dispatch operations

commit c2b9b191c9e456a4bc4585e4052f9aa3046593dc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 19:40:25 +0000

    Remove mission-control-plugins/dummy.c

commit 0d89a4eac0929241e1a5641476c7447e0b323af7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 19:39:28 +0000

    Add an object to represent dispatch operations for plugins

commit e35c90c145db61e7975ea92c2a30dcdfd53cc8cf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-03 16:35:18 +0000

    Add a skeletal library to contain a minimal plugin API

commit eb5665a6a0104188342b4faa7c566066f3185704
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-02 17:11:28 +0000

    _mcd_dispatch_operation_check_client_locks: run Approvers from here, not from _mcd_dispatch_operation_run_clients
    
    When plugins become able to delay dispatching, we want to delay running
    Approvers until all plugins have stopped delaying.

commit cd76b68053aacb23e952e5ef48242589a8b7759d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-10-29 18:05:39 +0000

    McdDispatchOperation: add API for plugins to delay dispatching

commit 55d72be29151eeb716f48ca28c770c0c18fc45e0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-10-29 18:04:35 +0000

    McdDispatchOperation: add easy API for various dispatch operation attributes
    
    Plugins will need these.

commit 914b45b46a14e298bb9db75034351570ba74749b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-10-29 17:47:49 +0000

    McdDispatchOperation: add API to close, destroy, leave, forget channels

commit 5867ae9ba1a7e2a0292d9e84a96487f64d542b86
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   2010-01-22 13:57:49 +0000

    mc-server: give NULL to the new default log handler now that tp-glib has been fixed
    
    fd.o#23843 was fixed in telepathy-glib 0.7.37. MC already depends on
    0.7.37, so this is just a matter of replacing the user_data workaround
    smcv added with the correct value of NULL.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

commit 412a7a9858bccff14ec8b7c068fea52f0e7152ac
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 19:42:42 +0000

    McdAccount: update TpConnection in _mcd_account_set_connection_status
    
    When we receive a new TpConnection, that function is called when it's
    ready, which is more useful than having a connection that isn't ready.

commit fdbeb7cf8d8aee7b45f2577f5e49b6fb6ee39924
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 18:20:08 +0000

    Correct a slightly misleading debug message

commit 97abf3047e383872e1c7fdfab12937303a1dfe1a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 18:19:18 +0000

    McdAccount: keep a reference to the TpConnection ourselves

commit 6b25231989685a616b3584bde513ce2e63d70794
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 17:06:59 +0000

    McdConnection: pass TpConnection to McdAccount in the same signal as the connection status change

commit 0df9c9f7a7992ba75542800b161d295822585b88
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 17:03:26 +0000

    McdAccount: guarantee to emit ConnectionStatus and ConnectionStatusReason in the same signal
    
    Previously, we relied on the 10ms delay hack to get them to be in the
    same signal, but this way seems better.
    
    This requires a small expectation change in
    account-manager/auto-connect.py: previously we were relying on the 10ms
    delay hack delaying the emission of
    { ConnectionStatusChanged => CONNECTING } until after Connect() was
    called, which doesn't really seem right in any case (conceptually, we're
    trying to connect even before we call RequestConnection).
    
    Similarly, avatar-persist and avatar-refresh encode the same faulty
    assumption. Since that code is adequately tested in auto-connect.py,
    and isn't really the point of the avatar tests, I've just removed the
    faulty expectation from them.

commit bed5596778b31ce7ec733943718c12a6d8de1e35
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 15:33:10 +0000

    McdAccount: emit_property_changed: don't emit empty signals

commit 31f25cadb091b490630d60068c453a8ce336d77c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 15:30:10 +0000

    McdAccount: preallocate priv->changed_properties in init
    
    In practice, we'll basically always change a property, so there's no point
    in delaying this.

commit a0bdfadc35c1f6571a8c01b02a50c72b17489274
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 15:26:01 +0000

    McdAccount: remove support for emitting property changes instantly
    
    There's no point in this being configurable.

commit 880110051b779be8435ef99124ef6e97dca8da27
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-11-20 16:37:34 +0000

    mcd_account_changed_property: ref account while waiting for a deferred AccountPropertiesChanged
    
    Otherwise there's a possible use-after-free (someone changes a property
    then deletes the account within 10ms).
