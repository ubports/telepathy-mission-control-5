commit 05f9b2510a67db7d8cd660d7764404e0e3101847
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 18:19:36 +0100

    Prepare stable release 5.2.2

 NEWS         |   28 ++++++++++++++++++++++++++++
 configure.ac |    2 +-
 2 files changed, 29 insertions(+), 1 deletions(-)

commit d5dc73bd8ccbbb6e8b0f19b8ff21939bd948422e
Merge: 7cc10f8 82bc885
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 18:07:45 +0100

    Merge branches '52-permissions' and '52-tubes' into telepathy-mission-control-5.2
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit 7cc10f837f3e5d18fac9c6bd12b0a54dd80c7485
Merge: 3b8dd46 294bcaa
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 17:39:36 +0100

    Merge branch '52-pre-presence' into telepathy-mission-control-5.2
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 82bc885c03aec790413fae8fbdf732426b914887
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 17:23:50 +0100

    Factor out identical "should I close it?" logic from _mcd_channel_close, _mcd_channel_undispatchable

 src/mcd-channel.c |   56 ++++++++++++++++++++++------------------------------
 1 files changed, 24 insertions(+), 32 deletions(-)

commit 60e0d8fdaadcfae731f6e86cbd725646597253dc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 15:25:48 +0100

    _mcd_channel_close: don't close old Tubes channels

 src/mcd-channel.c |   12 ++++++++++--
 1 files changed, 10 insertions(+), 2 deletions(-)

commit 17ffc6b3c5643f1bdd1bd6a1b3e118b2db44fd45
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 14:13:07 +0100

    Don't close Tubes channels if undispatchable
    
    This implicitly closes every Tube in the channel too, which isn't useful.

 src/mcd-channel.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit e5c70d5e3a845d4fd6cbf02b5be0aced9097c0b3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 14:12:07 +0100

    McdChannel: improve debug when not closing an undispatchable channel

 src/mcd-channel.c |   23 +++++++++++++++++------
 1 files changed, 17 insertions(+), 6 deletions(-)

commit 3558c3b2fe488ce66ebb11e7b9b0c6f7b7c9a630
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 16:59:03 +0100

    fd.o#23778: fix permissions of any existing account storage with _mcd_chmod_private, and don't use 0777 permissions to start with

 src/mcd-account-manager.c |    4 +++-
 src/mcd-account.c         |    3 ++-
 2 files changed, 5 insertions(+), 2 deletions(-)

commit c16f40ec0dd163a7ab761eedeeb6dd4fd0e74167
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 16:56:18 +0100

    mcd-misc: add _mcd_chmod_private()

 src/mcd-misc.c |   31 +++++++++++++++++++++++++++++++
 src/mcd-misc.h |    2 ++
 2 files changed, 33 insertions(+), 0 deletions(-)

commit 2a42ac03118011c093f0e7409a893656604c8d72
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 16:55:55 +0100

    McdMaster: if umask is available, create dirs/files with 0700/0600 permissions

 src/mcd-master.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit 16c556251b8396d3f0fdbe0c497979a65617c4c6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-07 16:55:26 +0100

    configure.ac: check for umask and its headers

 configure.ac |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 294bcaac27f19e567204d2462e3791d602d9f8cc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-03 19:32:20 +0100

    auto-connect: be less strict about ordering of events
    
    Now that we "pre-load" presence, CurrentPresence can change sooner; so,
    don't expect the signal (it can happen at basically any time), but just
    do a Get for the property at the end.

 test/twisted/account-manager/auto-connect.py |   11 +++++------
 1 files changed, 5 insertions(+), 6 deletions(-)

commit cadffcde5dc8a32ca2a3291c87ecdd5617b9935c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-03 19:25:37 +0100

    dispatcher/already-has-*.py: succeed despite early GetInterfaces call
    
    These tests make assumptions about the order of method calls in order to
    set up unusual situations, so the early call to GetInterfaces made them
    deadlock.
    
    Also take the opportunity to exercise the code path in which
    GetInterfaces fails before the connection goes CONNECTED, emulating a
    telepathy-glib 0.7.35 (or older) CM.

 test/twisted/constants.py                       |    1 +
 test/twisted/dispatcher/already-has-channel.py  |    6 ++++++
 test/twisted/dispatcher/already-has-obsolete.py |    5 +++++
 3 files changed, 12 insertions(+), 0 deletions(-)

commit 9323bd7eb5aa1d4b15ce47cddccb79eba6d9538b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-03 19:05:17 +0100

    account-manager/presence.py: assert that we try to set presence before Connect()

 test/twisted/account-manager/presence.py |   48 ++++++++++++++++++++++++-----
 1 files changed, 39 insertions(+), 9 deletions(-)

commit e3d796f2aa6373734b0f92815c42e0d7a622bdb1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-03 19:04:22 +0100

    mctest: allow expecting events before Connect()

 test/twisted/mctest.py |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit 2218bb016548bab6ccd6d1be2184c5c0d00a24b4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-03 19:04:08 +0100

    mctest: simulate SimplePresence more accurately

 test/twisted/mctest.py |   25 ++++++++++++++++++-------
 1 files changed, 18 insertions(+), 7 deletions(-)

commit 90b82f03ddafd68de73d0aa9a776c0bb32e58010
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-03 19:03:27 +0100

    McdConnection: before calling Connect, try to set initial presence
    
    If this fails, it's no big deal - we'll set it again later anyway.
    
    The infrastructure I've set up is fairly generic, so we can re-use it for
    anything else that we want to try to set up before going online (to
    include ContactCapabilities in 5.3, and perhaps Avatars and Aliasing
    later).

 src/mcd-connection.c |  134 ++++++++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 129 insertions(+), 5 deletions(-)

commit 3b8dd4652f69764bb3c7e270d73df4fee83f0147
Author: Jonh Wendell <jwendell@gnome.org>
Date:   2009-08-20 15:42:50 -0300

    Replaced deprecated g_strcasecmp by g_ascii_strcasecmp.
    
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

 util/mc-tool.c |   44 ++++++++++++++++++++++----------------------
 1 files changed, 22 insertions(+), 22 deletions(-)

commit 67136cb48edf7886d269cf011964b172a244f9e2
Merge: 8be3241 2003e2d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-03 13:52:43 +0100

    Merge branch '52-always-on' into telepathy-mission-control-5.2
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 8be324191f058b703b1bf2a0d19df6e526eab2e4
Merge: 05a1197 57ca26f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-03 13:52:20 +0100

    Merge branch '52-more-debug' into telepathy-mission-control-5.2
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 2003e2d124a715c370007e949957b50af53ea5f7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-02 17:44:31 +0100

    Add the concept of always-on accounts
    
    This has the following effects:
    
    * the account is Enabled, and can't be disabled
    * the account always connects automatically
    * an offline presence can't be requested on this account
    * the conditions for this account can't be changed

 src/mcd-account-conditions.c |   11 +++++-
 src/mcd-account-priv.h       |    2 +
 src/mcd-account.c            |   78 ++++++++++++++++++++++++++++++++++++++----
 3 files changed, 83 insertions(+), 8 deletions(-)

commit 57ca26fa2944da2ef6aaacd5d78fc22a4b7e7ac2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-02 12:21:13 +0100

    Debug when dispatch operations emit Finished and when they reply to Claim

 src/mcd-dispatch-operation.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 41148cb98b748fed8e4cff827e972a24d7b32b5f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-02 12:20:35 +0100

    Debug when ObserveChannels succeeds, as well as when it fails

 src/mcd-dispatcher.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 43686335cbbda5663ce68cb8a0d822215b528ac5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-02 12:27:11 +0100

    mcd_debug_init: log the telepathy-mission-control version
    
    It's easier to interpret MC logs if they mention the version number
    up-front.

 src/mcd-debug.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 05a11975f45ded09428206dc8e3746f4064dce09
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-09-02 11:46:26 +0100

    Post-release version bump

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8bd643c8d5547aa5e147fcfa12cb6166c2fb3857
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-26 14:41:59 +0100

    Alter tests to catch up with mardy's ConnectionStatusReason change
    
    Because CSR is initially REQUESTED now, there is no change when we start
    CONNECTING, so it's omitted from the signal.

 test/twisted/account-manager/auto-connect.py   |    4 ++--
 test/twisted/account-manager/avatar-persist.py |    2 --
 test/twisted/account-manager/avatar-refresh.py |    2 --
 3 files changed, 2 insertions(+), 6 deletions(-)

commit d73be4c5bc1037aa42eca92573864a66c833e03a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-26 14:30:25 +0100

    Prepare stable version 5.2.1

 NEWS         |   28 ++++++++++++++++++++++++++++
 configure.ac |    2 +-
 2 files changed, 29 insertions(+), 1 deletions(-)

commit d907e218035c046812dccd151d7d60b51c73c54e
Merge: e127546 e0960a0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-26 14:16:23 +0100

    Merge branch '52-unwanted-connections' into telepathy-mission-control-5.2
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit e12754647acd3ccaac552a6129398feeda02d70b
Merge: a45a778 ffbab24
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-26 14:15:59 +0100

    Merge branch '52-claim-delay' into telepathy-mission-control-5.2
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit a45a7788bb0c92866e0fd6f1406d731cf9d17974
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-26 15:37:36 +0300

    Set initial connection reason to Requested
    
    None_Specified is really a synonim of "generic error", but we have no error
    here.

 src/mcd-account.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e0960a061a601609be9c10be99b4668eac9ae0e2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-26 13:08:41 +0100

    McdConnection: if the connection is stopped by transport plugins while still waiting for RequestConnection, kill off the Connection when it turns up
    
    Otherwise, we'll have a Connection floating around uselessly in
    pre-Connect state, which gets in the way of making another Connection to
    the same account.
    
    This can happen when transport plugins go offline and online rapidly.

 src/mcd-connection.c |   94 +++++++++++++++++++++++++++++++++++++++++++++-----
 1 files changed, 85 insertions(+), 9 deletions(-)

commit ffbab24092805954a496058662f2629f9591fb81
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-25 17:24:35 +0100

    McdDispatcher: block dispatch operations from finishing until all observers have replied
    
    In particular, this means that if an observer or approver calls Claim,
    it won't get a reply until all other observers have had a chance to start.
    This is necessary if the observer/approver will be acknowledging Text
    messages, which a logger observer would miss as a result.

 src/mcd-dispatcher.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit d5d83bc35763b6f80266a1e0e4210261edf6012b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-25 17:23:10 +0100

    McdDispatchOperation: don't allow Claim() to return successfully until we're allowed to finish
    
    In particular, if some approvers haven't returned yet, don't allow the
    dispatch operation to be claimed from under them.

 src/mcd-dispatch-operation.c |   21 ++++++++++++++++++---
 1 files changed, 18 insertions(+), 3 deletions(-)

commit 6204840f2757acbf6871dc461ba3d07614d23767
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-20 16:13:31 +0300

    Add mcd_account_connection_proceed_with_reason
    
    Use _mcd_account_set_connection_status to set the connection status reason.

 src/mcd-account-connection.c |   21 +++++++++++++--------
 src/mcd-connection-plugin.h  |    4 ++++
 2 files changed, 17 insertions(+), 8 deletions(-)

commit 414b1872f00872dcbf9ae8db09ec2a2bb2cd689b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-20 16:12:38 +0300

    Add _mcd_connection_set_status()

 src/mcd-account-priv.h |    3 +++
 src/mcd-account.c      |    8 ++++++++
 2 files changed, 11 insertions(+), 0 deletions(-)

commit dcdd24519ba1025a065cf3b8fdf1815e452dfebc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-20 16:10:37 +0300

    Always process online requests.
    
    The transition DISCONNECTED -> DISCONNECTED should also trigger the completion
    of online requests.

 src/mcd-account.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 0c8144be32206246a91ff892a073fed0eb45d1fe
Merge: 063f515 1193f79
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-21 11:39:53 +0100

    Merge branch '52-virtual-check-request' into telepathy-mission-control-5.2
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 1193f79b5c4526a6043da6d3902a9071ac25252b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-21 11:02:43 +0100

    McdAccount: turn the lowmem check for requests into an overridable virtual method

 src/mcd-account-priv.h     |    5 ++++-
 src/mcd-account-requests.c |   34 ++++++++++++++++++++++++++++++++--
 src/mcd-account.c          |    1 +
 src/mcd-account.h          |    6 +++++-
 4 files changed, 42 insertions(+), 4 deletions(-)

commit 063f515dd919c6988ed63c52d7b49d8ff5ad7e10
Author: Naveen Verma <naveen.verma@nokia.com>
Date:   2009-08-19 16:25:51 +0300

    Detect missed calls correctly
    
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

 src/mcd-channel.c |   24 ++++++++++++++++--------
 1 files changed, 16 insertions(+), 8 deletions(-)

commit 781e360f0734363275144331831be67f95820244
Merge: c155811 c30e6ed
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-17 12:08:56 +0100

    Merge branch '52-transports' into telepathy-mission-control-5.2
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit c30e6edeebc9eae8a2579c5d1133261b20531633
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-13 16:48:47 +0100

    Rename _mcd_master_account_conditions_satisfied to _mcd_master_account_replace_transport
    
    It has the startling side-effect of binding the account to the selected
    transport, so the old name was rather misleading.

 src/mcd-account.c     |    2 +-
 src/mcd-master-priv.h |    4 ++--
 src/mcd-master.c      |    6 +++---
 3 files changed, 6 insertions(+), 6 deletions(-)

commit 9bf68a46beee4e2dba68c3f2174c43a2da0c4c89
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-08-13 16:41:38 +0100

    McdAccount: don't allow transition from one transport to another
    
    A Telepathy Connection "almost always" represents a TCP socket or
    something similar, which has a source address that is fixed at the time
    the socket is created. TCP sockets cannot migrate between source
    addresses, so we would be wrong to suggest that Telepathy Connections can.
    
    Accordingly, allow the transitions none -> anything and anything -> none,
    but silently suppress attempts to go t1 -> t2 for t1, t2 different
    transports.
    
    The bug that this fixes:
    
    * we have a transport T1 with source address 1.1.1.1
    * a transport T2 comes up with source address 2.2.2.2
    * a Connection C1 to an account A whose server is 9.9.9.9
      (its TCP socket is 1.1.1.1:11111 <-> 9.9.9.9:9999) is still CONNECTING
    * as a result of T2 coming up while C1 is not yet CONNECTED, McdMaster
      tells C1 (again) to connect [1]
    * transport T1 drops
    
    Desired result:
    * because C1 is bound to T1, it is disconnected
    * McdMaster looks for another transport usable by A, finds T2, and
      creates a new connection C2; C2's underlying TCP stream is now
      something like 2.2.2.2:22222 <-> 9.9.9.9:9999
    
    Buggy result:
    * at [1], McdMaster re-binds C1 to T2
    * because C1 is not bound to T1, it is not disconnected
    * the TCP stream (1.1.1.1:11111 <-> 9.9.9.9:9999) still exists, even
      though it cannot possibly work, until keepalives (or similar)
      cause the CM to notice that the connection has gone down

 src/mcd-account.c |   25 ++++++++++++++++++++++++-
 1 files changed, 24 insertions(+), 1 deletions(-)

commit c15581125a7da9ea3864af54189bf225ac65606a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-11 16:13:27 +0300

    Setup property monitoring
    
    This will update the local preoperties when MC daemon emits the
    CompatPropertyChanged signal.

 libmcclient/mc-account-compat.c |   33 ++++++++++++++++++++++++++++++---
 1 files changed, 30 insertions(+), 3 deletions(-)

commit 196d85898b4d436001e38530c25b519bab3c9467
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-11 16:12:35 +0300

    Move casting around
    
    Conflicts:

 libmcclient/mc-account-compat.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

commit 6561d2a2899dd570ea2f1ffe22fe8aea871e1c2f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-11 16:11:28 +0300

    Update the Compat interface code
    
    Use the new internal APIs to update the properties.

 libmcclient/mc-account-compat.c |   57 ++++++++++++++++++++++++---------------
 1 files changed, 35 insertions(+), 22 deletions(-)

commit cc37784f1e70a4ab078653dc4d0bf36a0b4b1a16
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-11 11:18:16 +0300

    Use GSlice

 libmcclient/mc-account-compat.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 08da8866f0d99b1662ecb11656d425312ef249cd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-11 11:16:20 +0300

    Emit the CompatPropertyChanged signal

 src/mcd-account-compat.c |   16 ++++++++++++++++
 1 files changed, 16 insertions(+), 0 deletions(-)

commit 858a0eac90a79ec3729ee3175e8e1cd531e16476
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-08-11 11:15:42 +0300

    Add change notification to Compat interface definition

 xml/Account_Interface_Compat.xml |   17 +++++++++++++++++
 1 files changed, 17 insertions(+), 0 deletions(-)

commit b932df26e3be91a0e1f950389da7f47146c9bebc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-30 12:48:04 +0100

    5.2.1 development

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 82be8c897a960400753cd33ca179ff40760ca2c6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-30 12:05:16 +0100

    Release version 5.2.0 (start of stable branch)

 NEWS         |   25 +++++++++++++++++++++++--
 configure.ac |    2 +-
 2 files changed, 24 insertions(+), 3 deletions(-)

commit 453c23d159c074ec15f65c82865e489d79a26de9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-30 11:59:44 +0100

    Fix build with plugins disabled: $(builddir) is equivalent to "." and is not always substituted

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c5f1378f99d30c191b50fe5f730c9d2f90803e9d
Merge: 32919ca b406534
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-28 15:45:41 +0100

    Merge branch 'caps-tests'
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit b4065345f01e15124493c9e59f89949effa8494b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-28 13:53:54 +0100

    Capabilities tests: list StreamTube filters with a specific handle type
    
    This is currently what's necessary to make Gabble advertise the
    capability, so it's more useful to behave like this when checking for
    regressions.

 test/twisted/capabilities/draft-1.py          |   23 +++++++++++++++++++----
 test/twisted/capabilities/legacy-caps.py      |   10 +++++++++-
 test/twisted/telepathy/clients/AbiWord.client |    6 ++++++
 3 files changed, 34 insertions(+), 5 deletions(-)

commit cf51fadc59f5ffd761019c5376e0e86f9c226e8f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-28 13:40:31 +0100

    capabilities/legacy-caps.py: when Gabble moves to draft 2, this test will be relevant

 test/twisted/capabilities/legacy-caps.py |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 1a355c17d268c8c24867969e4f8638d029836684
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-28 13:40:10 +0100

    capabilities/draft-1.py: assert that AdvertiseCapabilities is called first
    
    This ensures that we don't cause regressions: Gabble's regression tests
    only check the case where AdvertiseCapabilities comes first.

 test/twisted/capabilities/draft-1.py |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 32919ca2c229f3ff454c74aebcaad4e36e39f3cb
Merge: 27eb4a1 88ab436
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-27 18:36:59 +0100

    Merge branch 'caps'
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit 88ab436c572f7e8cbaa49fdce777e4c022b144a0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-27 18:36:47 +0100

    Remove wrongly-copied comment as per wjt's review

 test/twisted/capabilities/draft-1.py |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit 997b9627fb3ffe4c1ffc18c433be96d5917dad36
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-27 15:20:50 +0100

    capabilities/draft-1.py: assert that legacy caps are still set
    
    In all versions of telepathy-gabble that implement this draft, draft 1
    ContactCapabilities are only respected for Tube channels, so Gabble
    will not be callable unless MC *also* tells it (via the Capabilities
    interface) that it should support StreamedMedia.
    
    (This is a Gabble bug, but since MC does not currently cause it to be
    exhibited, triggering it would be a regression of sorts; when we implement
    draft 2 in Gabble, though, we should do it right.)

 test/twisted/capabilities/draft-1.py     |   26 +++++++++++++++++++++++---
 test/twisted/capabilities/legacy-caps.py |    4 ++--
 2 files changed, 25 insertions(+), 5 deletions(-)

commit a1646905d26cc2f6ba549a1ed8264d05f8aaf83b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-23 15:09:18 +0100

    fd.o #20903: ContactCapabilities: update draft from telepathy-spec 0.17.26
    
    This requires that Requestable_Channel_Class is added to all.xml as an
    externally-defined type.
    
    Incompatible changes in ContactCapabilities, none of which actually affect
    MC:
    
    * ContactCapabilitiesChanged acts on multiple contacts (but MC never
      connects to this signal)
    * Contact_Handle_Enhanced_Contact_Capability_Map renamed to
      Contact_Capabilities_Map (but MC never mentions this type by name, and
      the D-Bus signature is the same)
    * Enhanced_Contact_Capability is replaced by the Requestable_Channel_Class
      type first defined in Requests (but MC never mentions this type by
      name, and the D-Bus signature is the same)

 xml/Connection_Interface_Contact_Capabilities.xml |   90 ++++++++++-----------
 xml/all.xml                                       |    2 +
 2 files changed, 44 insertions(+), 48 deletions(-)

commit e6edfe8fcd6a1a0d59d7b384db386f35d4dd16db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-23 15:05:22 +0100

    src/mcd.xml: don't include the types that libmcclient needs to generate

 src/mcd.xml |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit 5b2877bf3f436897430073155c4cf2563cf9dd1a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-23 15:04:50 +0100

    Move Channel_Count_Map from generic-types to Stats
    
    There's nothing generic about it - it's completely Telepathy-specific, and
    indeed Stats-specific.

 xml/Account_Interface_Stats.xml |    6 ++++++
 xml/generic-types.xml           |    6 ------
 2 files changed, 6 insertions(+), 6 deletions(-)

commit a1e9b8d9feaaef25378a2806bb8db74e755d8778
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-27 15:04:53 +0100

    capabilities/draft-1.py: new regression test for the version of ContactCapabilities in telepathy-spec 0.17.26

 test/twisted/Makefile.am             |    1 +
 test/twisted/capabilities/draft-1.py |   81 ++++++++++++++++++++++++++++++++++
 test/twisted/constants.py            |    3 +-
 3 files changed, 84 insertions(+), 1 deletions(-)

commit 739099b73a35e1240c93192defa030b028e68329
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-27 15:04:07 +0100

    test/twisted: make connections with misc extra interfaces more scalable

 test/twisted/capabilities/legacy-caps.py |    2 +-
 test/twisted/mctest.py                   |   13 +++++++------
 2 files changed, 8 insertions(+), 7 deletions(-)

commit 0ea59dcb59d9e3fdc89710afd690e3298e35e14c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-27 14:25:20 +0100

    capabilities/legacy-caps.py: new regression test for old-style Capabilities

 test/twisted/Makefile.am                 |    1 +
 test/twisted/capabilities/legacy-caps.py |   77 ++++++++++++++++++++++++++++++
 2 files changed, 78 insertions(+), 0 deletions(-)

commit b197d3cf8b14b4bf18f234e2e72df36468141b0d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-27 14:24:38 +0100

    test/twisted: add support for simulating connections with Capabilities

 test/twisted/constants.py |    1 +
 test/twisted/mctest.py    |   10 +++++++---
 2 files changed, 8 insertions(+), 3 deletions(-)

commit a1157d34697bec162e3f21f882e21cf2363b2524
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-27 12:59:10 +0100

    When simulating a Tubes client, simulate it using the final API rather than the draft

 test/twisted/constants.py                     |    6 +++---
 test/twisted/telepathy/clients/AbiWord.client |    4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 27eb4a114a85fbfa390420225c440784e1bba0bc
Merge: a20f6b1 ebe8b82
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-09 14:34:55 +0100

    Merge branch 'criticals'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit ebe8b82a2401b242cd5971305e5da125ee520281
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-09 14:08:01 +0100

    McdConnection: make static string arrays (as well as the contents) const
    
    This would have made the compiler refuse to let us get away with
    implementing the bug fixed in the previous commit.

 src/mcd-connection.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit b69aad661f2d88cd6b3858a0a7d8dd77cb9c0d45
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-09 14:06:51 +0100

    McdConnection: if no fallbacks for a presence are supported, twice, don't crash
    
    The first time this happened, we'd overwrite the NULL at the end of
    one of the fallbacks arrays (e.g. _away_fb[1]) with a pointer to
    "available". Then, the *second* time it happened, we'd iterate off the end
    of the array (since it would no longer have a NULL terminator), try to
    dereference some random memory as a char* in g_str_hash, and crash.

 src/mcd-connection.c |   22 ++++++++++++++++------
 1 files changed, 16 insertions(+), 6 deletions(-)

commit 561b0482962e8831e484b644d2c43fa7f2aa8b34
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-09 13:38:15 +0100

    McdConnection: _check_presence: guard against recognized_presences not having been set up yet

 src/mcd-connection.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit a20f6b1bc1bd5a791b30ce60fef62d7b7cc25d94
Merge: 6b53e8f 7a98ed6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-09 14:48:46 +0300

    Merge branch 'fix_double_callback'

commit 7a98ed6ff29bd4d056807c0158d8b3c9546f876f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-09 13:52:19 +0300

    Never invoke the callback twice
    
    If the object was already in ready state, the callback was being invoked twice.
    An extra lock ensure this won't happen.

 libmcclient/dbus-api.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit ee8bfe6798536e9194e0ae983cdf907cb89cfc00
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-09 13:51:35 +0300

    Remove unused function
    
    _mc_iface_call_when_all_ready() is not used anymore.

 libmcclient/dbus-api.c |   28 ----------------------------
 libmcclient/dbus-api.h |    4 ----
 2 files changed, 0 insertions(+), 32 deletions(-)

commit 6b53e8f64ad7ab597f799fa979b7e311e0033929
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-09 11:50:05 +0100

    Start 5.1.5 development

 NEWS         |    5 +++++
 configure.ac |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 160cbafaf12cd7d1b963c7494d0205dae4345997
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-09 13:47:03 +0300

    Reimplement mc_account_call_when_all_ready.
    
    Use _mc_iface_call_when_all_readyv() instead of using
    _mc_iface_call_when_all_ready(), that can later be removed.

 libmcclient/mc-account.c |   26 ++++++++++++++++++--------
 1 files changed, 18 insertions(+), 8 deletions(-)

commit 9ce4bc6e6b8aab48daeddf67d470ba66296ab616
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-09 09:39:28 +0100

    Prepare version 5.1.4

 NEWS         |    2 +-
 configure.ac |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit f0bdb51fda74d3d19035d83c69f685eb2667e497
Merge: 5084667 dce7c30
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-09 09:33:45 +0100

    Merge branches '22670-name-release' and 'misc'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit dce7c30b2253992d6fe2bce047f9ae0eb3a83fb9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-08 14:36:08 +0100

    NEWS for today's planned release

 NEWS |   30 ++++++++++++++++++++++++++++--
 1 files changed, 28 insertions(+), 2 deletions(-)

commit f3f6e1ecdd5b8acd5355f2ac60a36cc81daf9925
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-08 14:31:59 +0100

    Add simple man pages for mc-account-convert, mc-tool and mc-wait-for-name

 .gitignore                 |    1 +
 util/Makefile.am           |   12 +++
 util/mc-account-convert.1  |   17 ++++
 util/mc-tool.1             |  204 ++++++++++++++++++++++++++++++++++++++++++++
 util/mc-wait-for-name.1.in |   34 +++++++
 5 files changed, 268 insertions(+), 0 deletions(-)

commit 78fac02f5cd8bb4bb09125f705b087c0b2b5bdb6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-08 14:24:35 +0100

    Add a man page for the mission-control-5 daemon

 .gitignore                    |    1 +
 server/Makefile.am            |   11 +++++++++--
 server/mission-control-5.8.in |   32 ++++++++++++++++++++++++++++++++
 3 files changed, 42 insertions(+), 2 deletions(-)

commit 4ed8a4dc26d06f8c26d02edbdfe9e5abcb27fe2e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-08 13:29:23 +0100

    ...AccountManager.service.in: correct the name of the MC binary
    
    This regression was introduced when MC 5 was made parallel-installable
    with MC 4.

 ...freedesktop.Telepathy.AccountManager.service.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0ef551a07040bd48c620dcbf24906439a4e7f184
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-08 13:28:17 +0100

    Add a regression test for fd.o #22670

 test/twisted/dispatcher/bypass-approval.py |   15 ++++++++++++++-
 1 files changed, 14 insertions(+), 1 deletions(-)

commit 9802f270df285487265fcc301bd53ef8f7f6cf8e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-08 13:28:06 +0100

    fd.o #22670: when a client loses a well-known name, don't assume it crashed
    
    This was a logic error; this code was only meant to run when the client
    lost its unique name.

 src/mcd-dispatcher.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit 50846673eae36bc7d0caefd637923c2020cf109a
Merge: 9096e83 b870865
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-02 10:29:35 +0100

    Merge branch 'no-gconf'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 9096e832ebcea1b355e3c34358036fb4ca79bb30
Merge: 09d20f9 a1474cf
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-02 12:13:36 +0300

    Merge commit 'upstream/master'

commit a1474cfbac177ae5b6c2268acafa42cc02a04557
Merge: 5e98102 502df96
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-02 10:07:01 +0100

    Merge branch 'symbol-collision'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 5e98102a136be4fe57611419342bcc3104d5ce65
Merge: 740a513 6e2c7e2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-02 10:05:24 +0100

    Merge branch 'byte'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 09d20f9df2c306f1907d0ea567ed55c43c407421
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-02 08:44:56 +0300

    Don't always overwrite the automatic presence
    
    This avoids rewriting the automatic presence status that we just set few lines
    above (and also avoids leaking it).

 src/mcd-account.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit 5dbd1f2e2d594d1ecfb9bb6db52f46251af96149
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-02 08:41:51 +0300

    Duplicate the automatic presence status string
    
    All the presence strings in McdAccountPrivate are allocated on dynamic memory.

 src/mcd-account.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b870865538ff4e1485b96fb5f10afd4f6843950c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-01 18:41:40 +0100

    fd.o #22332: make GConf only a weak dependency
    
    * Make mc-tool not depend on GConf (there's no reason for it to do so)
    * Make GConf optional, and only build mc-account-convert if we do have it

 configure.ac     |    4 +++-
 util/Makefile.am |   17 ++++++++++++-----
 2 files changed, 15 insertions(+), 6 deletions(-)

commit d4e4b4c2e0b3653f7a13ab6cf6557f6b3908cc9d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-01 18:38:02 +0100

    fd.o #22332: libmissioncontrol-server: remove unnecessary gconf dependency
    
    libmissioncontrol-server no longer has anything to do with GConf.
    
    In the case where plugins are enabled, this requires promoting the GModule
    dependency from libmissioncontrol-server.la to libmcd-convenience.la:
    previously, libmcd-convenience.la implicitly had a GModule dependency
    anyway, via GConf, which masked this mistake.

 mission-control.pc.in |    2 +-
 src/Makefile.am       |    8 +++-----
 src/mcd-master.c      |    1 -
 src/mcd-service.c     |    1 -
 4 files changed, 4 insertions(+), 8 deletions(-)

commit 502df96a26dcf9b62d41306df6afe7c54aa8dc0f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-01 18:05:06 +0100

    fd.o #22585: src: stop generating interfaces and GTypes, fixing static linking
    
    All the interfaces and GTypes we need are already in libmcclient, with the
    same names and auto-generated implementations, so it's useless to generate
    them in libmissioncontrol-server.
    
    When configured with --enable-static --disable-shared (which is what we
    want in Debian, I suspect), it becomes actively harmful to have two
    implementations: shared library linking can survive colliding symbols
    (at least on Linux), but static linking can't.
    
    (If we ever want Mission Control to be independent of libmcclient, then
    it should generate its own quark/type functions in the Mcd namespace.)

 src/Makefile.am                 |   25 -------------------------
 src/mcd-account-compat.c        |    4 +++-
 src/mcd-account-conditions.c    |    4 +++-
 src/mcd-account-manager-query.c |    5 ++---
 src/mcd-account-manager.c       |    3 ++-
 src/mcd-account-requests.c      |    3 ++-
 src/mcd-account-stats.c         |    6 +++---
 src/mcd-account.c               |    5 +++--
 src/mcd-connection.c            |    4 ++--
 src/mcd-dbusprop.c              |    7 +++----
 10 files changed, 23 insertions(+), 43 deletions(-)

commit 6e2c7e2099d9082ec2a1b09cc3e6381cdd34b6f0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-01 14:23:27 +0100

    fd.o #21378: McdAccount: add support for byte ('y') parameters

 src/mcd-account.c                                  |    3 +++
 test/twisted/account-manager/param-types.py        |    1 +
 .../telepathy/managers/onewitheverything.manager   |    3 +++
 3 files changed, 7 insertions(+), 0 deletions(-)

commit 740a5138652c9a3f5bbd4b4ad1886d381827b2f3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-01 13:42:06 +0100

    Start 5.1.4 development

 NEWS         |    5 +++++
 configure.ac |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 30013b81c89a803522fe085c26218f9e7be1663e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-01 13:26:07 +0100

    Prepare release 5.1.3

 NEWS         |   33 +++++++++++++++++++++++++++++++--
 configure.ac |    2 +-
 2 files changed, 32 insertions(+), 3 deletions(-)

commit 7cf0ec6b39ddc2508f5ee5a9e5827fd0d7768924
Merge: e1f5b98 49c220d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-01 15:16:57 +0300

    Merge branch 'set_contents'

commit e1f5b9824076adb30fa9e880d782a1224e830d17
Merge: d3f0140 157b1fa
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-01 15:16:27 +0300

    Merge commit 'upstream/master'

commit d3f01405526b8a21aa0055f63418e0194e775dcb
Merge: e263606 31502a2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-01 15:15:55 +0300

    Merge commit 'upstream/master'
    
    Conflicts:
    
    	src/mcd-account.c

commit 157b1fabb40a9ad3e4bccc612eb789488a8be617
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-01 13:05:13 +0100

    McdChannel: remove now-unused close_on_dispose member
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

 src/mcd-channel.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 49c220d1aaf90850d9e8c0ef7c3e2633ad52da66
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-01 15:05:48 +0300

    Use g_file_set_contents
    
    Our implementation was buggy anyway, because it was not doing fflush()
    before calling fsync().
    Recent versions of glib have a g_file_set_contents() that does all the right
    things, so let's use it.

 src/mcd-misc.c |  241 +-------------------------------------------------------
 1 files changed, 1 insertions(+), 240 deletions(-)

commit 31502a2a9d56cbcd0a70a119b893d8cd85b956b5
Merge: b09c447 31b3ba6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-07-01 12:58:13 +0100

    Merge branch 'closing-channels'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit e2636067880fe4a78d08c6a5726c5b3b2d97da79
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-01 11:16:35 +0300

    Make sure connection is not NULL before using it.

 src/mcd-connection.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 1917eec16519e7bf21143531b7d5fdeeab385440
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-01 11:14:01 +0300

    Access private data through a local variable

 src/mcd-account.c |   19 ++++++++++---------
 1 files changed, 10 insertions(+), 9 deletions(-)

commit b77689ec74fb76d185805ca30ad8039fed3182bb
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-07-01 11:09:04 +0300

    Close the connection only if it's not NULL

 src/mcd-account.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 31b3ba64b19fb59578a3ba2396945f18d033d06f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-30 18:37:00 +0100

    dispatcher/dispatch-rejected-by-plugin.py: exercise all of the special usernames

 .../dispatcher/dispatch-rejected-by-plugin.py      |  132 ++++++++++++++++++--
 1 files changed, 123 insertions(+), 9 deletions(-)

commit 92e636f4f148a894ff2959ea362b63d7aa576b6c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-30 18:36:36 +0100

    test-plugin.c: add more special usernames whose channels are terminated with new API, old API, or new API with a reason

 test/twisted/test-plugin.c |   71 ++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 71 insertions(+), 0 deletions(-)

commit 107cf9a9d44ff379cbb2d60c067cde4685d16cbe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-30 18:34:47 +0100

    mctest: add the ability to simulate Group channels (albeit not very well)

 test/twisted/mctest.py |   41 ++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 40 insertions(+), 1 deletions(-)

commit 5772ef02eca981bc141dd44945119129e02f9251
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-30 18:34:24 +0100

    constants: add group change reasons

 test/twisted/constants.py |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

commit 568f2a51f1cea8f2cb05ad46a045591565afb6bc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-30 18:34:13 +0100

    McdDispatcher: refactor how plugins close channels
    
    mcd_dispatcher_context_process has two purposes: it releases the filter's
    implicit reference to the context/lock on the context, and it can
    arrange for channels to be terminated.
    
    It seems cleaner to introduce mcd_dispatcher_context_proceed() which
    just releases the reference/lock at all times, and redefine
    mcd_dispatcher_context_process (which will be deprecated later) in terms
    of it.
    
    To ensure that proceeding after channels have been "dealt with" does not
    invoke clients, new function mcd_dispatcher_context_forget_all provides
    a way to tell the context that its channels are no longer suitable for
    dispatching, removing them (as a result of the abort signal). proceed
    needs to handle this by just clearing up if all the channels have already
    gone.
    
    The remaining bit of new API needed is an easy way to terminate channels,
    possibly with a reason or with Destroy. mcd_dispatcher_context_close_all
    and mcd_dispatcher_context_destroy_all provide this.

 src/mcd-dispatcher-context.h |   10 ++
 src/mcd-dispatcher.c         |  209 ++++++++++++++++++++++++++++++++++--------
 2 files changed, 180 insertions(+), 39 deletions(-)

commit 44f55018ad53efb9acb80d8f1c51ac0f59aeadfe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-30 18:28:58 +0100

    McdChannel: add _mcd_channel_depart(), which departs with a reason code

 src/mcd-channel-priv.h |    4 ++
 src/mcd-channel.c      |   94 ++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 98 insertions(+), 0 deletions(-)

commit 5dfe2f024c1a1aaf5aa75ec521b7055d1e95228f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 17:18:20 +0100

    McdChannel: never implicitly close the channel
    
    This hurts clarity, and is actually actively undesirable. We now close the
    channel explicitly in every situation where we want to, so the only
    remaining times that we abort channels are they are closed, or when the
    McdConnection aborts (i.e. the TpConnection closes). In either case, there
    is no need to close the channel, because the CM has closed it or will do
    so shortly.
    
    The undesirability comes from the fact that in telepathy-idle, closing a
    room Channel is like a /part, but disconnecting the Connection is like a
    /quit. When Idle is connected to an IRC proxy like irssi or bip, we never
    want to /part from channels in response to disconnection from the proxy,
    because that would mean the proxy would no longer stay in your desired
    channels recording a backlog.
    
    (See commit 6cda49f79b43a8a71 for a more targeted form of this change,
    as applied to Mission Control 4 upstream and in Debian.)

 src/mcd-channel.c |   19 ++++---------------
 1 files changed, 4 insertions(+), 15 deletions(-)

commit 0544ebc6469643fc102fdc01ae45cfff7a1db910
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 17:12:19 +0100

    McdChannel: proxy_destroyed: make the debug messages clearer and more informative

 src/mcd-channel.c |    9 ++-------
 1 files changed, 2 insertions(+), 7 deletions(-)

commit ecd489428fdaac4a6ec82f9721fed1a5a9f33387
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 16:56:39 +0100

    McdConnection: explicitly close channels resulting from cancelled requests
    
    When mcd_mission_abort doesn't close the channels, we'll have to be
    explicit about closing them.

 src/mcd-connection.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 12fdc91fede334aaed7fd0d856dddc7db82682ab
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 16:50:31 +0100

    dispatcher/dispatch-rejected-by-plugin.py: don't assert that we see ChannelLost
    
    In situations where processing is forcibly stopped, it seems reasonable
    not to wait for the channel to close before terminating the dispatch
    operation.

 .../dispatcher/dispatch-rejected-by-plugin.py      |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit df59c0816bd916654113f7ccf17fa9a26761cc8d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 16:45:25 +0100

    McdDispatcher: if plugins reject channels, Destroy them

 src/mcd-dispatcher.c |   13 ++++++++++---
 1 files changed, 10 insertions(+), 3 deletions(-)

commit 2c42d442de7e7afb43b8d7e5d872f7732424b432
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 16:44:03 +0100

    McdDispatcherContext: make the CDO finish before unreffing it
    
    When the McdDispatcherContext is destroyed, it's fair to say that
    no more dispatching will continue, so we want to emit the necessary
    signals.
    
    This is necessary to make dispatcher/approver-fails.py pass if we don't
    abort channels in order to close them.

 src/mcd-dispatch-operation-priv.h |    2 ++
 src/mcd-dispatch-operation.c      |   24 +++++++++++++-----------
 src/mcd-dispatcher.c              |    9 +++++++++
 3 files changed, 24 insertions(+), 11 deletions(-)

commit ad107d76563ef6ef2045b0f8034cb55bf60cba05
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 15:46:14 +0100

    If we try to dispatch channels but no more handlers can take them, Destroy() them instead of aborting them

 src/mcd-dispatcher.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f63e06fd4b74f58dee7773bed8e05a3b03fa4d0d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 15:45:51 +0100

    If HandleChannels succeeds but the Client has gone, Destroy() the channels
    
    Again, previously we'd use abort.

 src/mcd-dispatcher.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b3afb904cd38b4e409ee97aa65c48daf6c27995a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 15:45:29 +0100

    If HandleChannels fails, Destroy the channels if possible
    
    Previously we'd "abort" the channels, which conflates Close() and unref.
    Now, the channels will get aborted and unreffed when they emit Closed.

 src/mcd-dispatcher.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 0becd2436144d3dd834655dc9558486ed2653329
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 15:03:30 +0100

    McdHandlerMap: call _mcd_channel_close instead of mcd_mission_abort
    
    This will eventually let us get away from the "abort => Close"
    anti-pattern.

 src/mcd-handler-map.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit d38eb6a94303845737f2ddd272340fe57ce3a685
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 15:02:24 +0100

    _mcd_channel_close: if we don't close the channel, make the debug messages explain why

 src/mcd-channel.c |   29 ++++++++++++++++++++++++-----
 1 files changed, 24 insertions(+), 5 deletions(-)

commit efa2683fd6138b19cf4273f70895f83543e07517
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 15:02:02 +0100

    McdChannel: expose _mcd_channel_close to the rest of MC

 src/mcd-channel-priv.h |    2 ++
 src/mcd-channel.c      |    8 ++++----
 2 files changed, 6 insertions(+), 4 deletions(-)

commit ccd58eff921bf119312f27bc1243dd4fe6870cce
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-30 16:24:23 +0100

    Add regression tests for current functionality of EnsureChannel
    
    These are quite important to have before refactoring the way in which
    channels close, and they already point out various bugs.

 test/twisted/Makefile.am                         |    3 +
 test/twisted/dispatcher/ensure-and-redispatch.py |  262 +++++++++++++++++++++
 test/twisted/dispatcher/ensure-is-approval.py    |  263 ++++++++++++++++++++++
 test/twisted/dispatcher/ensure-rapidly.py        |  215 ++++++++++++++++++
 4 files changed, 743 insertions(+), 0 deletions(-)

commit b09c447a55d978c99f116b530fa3cd2253749628
Merge: 6329e8c 5915173
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-30 15:38:04 +0100

    Merge branch 'tests'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 59151736c2b956009e81ecd32c085a56e6dc289b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 19:17:17 +0100

    Restructure `make check-torture` so it doesn't risk exceeding command-line length limits

 test/twisted/Makefile.am |   40 ++++++++++------------------------------
 1 files changed, 10 insertions(+), 30 deletions(-)

commit 9f0c697db507d81daf892c2af79ef3ef4033a251
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 17:33:21 +0100

    Disable tests that rely on a special MC build when running installcheck
    
    The auto-away and create-lowmem tests poke the MC system flags via an
    ad-hoc D-Bus interface that only exists in the debug build of MC, so they
    can't be run on "the real MC".

 test/twisted/Makefile.am |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

commit 704db6d52e7395d021e801341ee1723129e7e8af
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 15:57:09 +0100

    Add support for installcheck

 test/twisted/Makefile.am |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit d804eccdacd3dee45e8fa1f4f3ac839ae30cbd30
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 15:54:53 +0100

    exec-with-log.sh.in: add support for running a different MC binary

 test/twisted/tools/exec-with-log.sh.in |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 513a9bf5609e1e5b96030d57f264d7ec0ad00b87
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 15:54:29 +0100

    test/twisted: export XDG_CONFIG_HOME, XDG_CONFIG_DIRS for completeness
    
    It's another well-known directory prefix that we should divert into our
    tests directory.

 test/twisted/Makefile.am |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 3dbd72516412667652f1d4da1a04cf341fece0bc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 15:12:22 +0100

    Put explicit copyright/license on exec-with-log.sh

 test/twisted/tools/exec-with-log.sh.in |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit 09cff71a0cb5ce2b2cd823c8c74d1ae2b445881d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 15:10:55 +0100

    Update copyright on mc-debug-server.c

 test/twisted/mc-debug-server.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit ca02e5f3a2a8c49cdff9bbf41c4dc9ae5485b695
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 15:10:46 +0100

    Move Account tests into account-manager subdirectory and delete do-nothing.py
    
    do-nothing.py was just a trivial "hello world" test, to make sure the
    infrastructure worked; there's no reason to keep it any more.

 test/twisted/Makefile.am                       |    9 +-
 test/twisted/account-bad-cm.py                 |   79 --------
 test/twisted/account-manager/account-basics.py |  249 ++++++++++++++++++++++++
 test/twisted/account-manager/bad-cm.py         |   79 ++++++++
 test/twisted/account-manager/request-online.py |  158 +++++++++++++++
 test/twisted/do-nothing.py                     |   26 ---
 test/twisted/test-account.py                   |  249 ------------------------
 test/twisted/test-connect.py                   |  158 ---------------
 8 files changed, 490 insertions(+), 517 deletions(-)

commit 9d62eb43f3a8dd5e44667fe51af2ad9d65e347ef
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-29 15:05:42 +0100

    Put explicit licensing/copyright on the Python tests

 test/twisted/account-bad-cm.py                     |   18 ++++++++++++++++++
 test/twisted/account-manager/auto-away.py          |   18 ++++++++++++++++++
 test/twisted/account-manager/auto-connect.py       |   19 +++++++++++++++++++
 test/twisted/account-manager/avatar-persist.py     |   19 +++++++++++++++++++
 test/twisted/account-manager/avatar-refresh.py     |   19 +++++++++++++++++++
 test/twisted/account-manager/avatar.py             |   19 +++++++++++++++++++
 .../twisted/account-manager/create-auto-connect.py |   19 +++++++++++++++++++
 .../account-manager/create-with-properties.py      |   19 +++++++++++++++++++
 .../twisted/account-manager/enable-auto-connect.py |   19 +++++++++++++++++++
 test/twisted/account-manager/enable.py             |   19 +++++++++++++++++++
 test/twisted/account-manager/make-valid.py         |   19 +++++++++++++++++++
 test/twisted/account-manager/nickname.py           |   19 +++++++++++++++++++
 .../account-manager/old-create-with-properties.py  |   19 +++++++++++++++++++
 test/twisted/account-manager/param-types.py        |   19 +++++++++++++++++++
 test/twisted/account-manager/presence.py           |   19 +++++++++++++++++++
 test/twisted/account-manager/reconnect.py          |   19 +++++++++++++++++++
 .../account-manager/recover-from-disconnect.py     |   19 +++++++++++++++++++
 test/twisted/account-manager/update-parameters.py  |   19 +++++++++++++++++++
 test/twisted/account-requests/cancel.py            |   19 +++++++++++++++++++
 test/twisted/account-requests/create-text.py       |   19 +++++++++++++++++++
 .../delete-account-during-request.py               |   19 +++++++++++++++++++
 test/twisted/constants.py                          |   18 ++++++++++++++++++
 test/twisted/crash-recovery/crash-recovery.py      |   19 +++++++++++++++++++
 test/twisted/dispatcher/already-has-channel.py     |   19 +++++++++++++++++++
 test/twisted/dispatcher/already-has-obsolete.py    |   19 +++++++++++++++++++
 test/twisted/dispatcher/approver-fails.py          |   19 +++++++++++++++++++
 test/twisted/dispatcher/bypass-approval.py         |   19 +++++++++++++++++++
 test/twisted/dispatcher/cancel.py                  |   19 +++++++++++++++++++
 test/twisted/dispatcher/capture-bundle.py          |   19 +++++++++++++++++++
 test/twisted/dispatcher/connect-for-request.py     |   19 +++++++++++++++++++
 test/twisted/dispatcher/create-at-startup.py       |   19 +++++++++++++++++++
 test/twisted/dispatcher/create-handler-fails.py    |   19 +++++++++++++++++++
 test/twisted/dispatcher/create-lowmem.py           |   19 +++++++++++++++++++
 .../dispatcher/create-no-preferred-handler.py      |   19 +++++++++++++++++++
 test/twisted/dispatcher/create-text.py             |   19 +++++++++++++++++++
 test/twisted/dispatcher/dispatch-activatable.py    |   19 +++++++++++++++++++
 test/twisted/dispatcher/dispatch-obsolete.py       |   19 +++++++++++++++++++
 .../dispatcher/dispatch-rejected-by-plugin.py      |   19 +++++++++++++++++++
 test/twisted/dispatcher/dispatch-text.py           |   19 +++++++++++++++++++
 test/twisted/dispatcher/exploding-bundles.py       |   19 +++++++++++++++++++
 test/twisted/dispatcher/fdo-21034.py               |   19 +++++++++++++++++++
 test/twisted/dispatcher/handle-channels-fails.py   |   19 +++++++++++++++++++
 test/twisted/dispatcher/lose-text.py               |   19 +++++++++++++++++++
 test/twisted/dispatcher/recover-from-disconnect.py |   19 +++++++++++++++++++
 .../twisted/dispatcher/request-disabled-account.py |   19 +++++++++++++++++++
 test/twisted/dispatcher/undispatchable.py          |   19 +++++++++++++++++++
 test/twisted/dispatcher/vanishing-client.py        |   19 +++++++++++++++++++
 test/twisted/do-nothing.py                         |   18 ++++++++++++++++++
 test/twisted/fakeclient.py                         |   18 ++++++++++++++++++
 test/twisted/fakecm.py                             |   18 ++++++++++++++++++
 test/twisted/mctest.py                             |   17 +++++++++++++++++
 test/twisted/servicetest.py                        |   17 +++++++++++++++++
 test/twisted/test-account.py                       |   18 ++++++++++++++++++
 test/twisted/test-connect.py                       |   18 ++++++++++++++++++
 54 files changed, 1014 insertions(+), 0 deletions(-)

commit 6329e8cef9bd4d4c30a771c6bd89d64c9c7e0311
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 19:34:01 +0100

    wait-for-name: initialize error properly if we can't connect to D-Bus
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

 util/wait-for-name.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 707df289c545d3d3e6397fac16eafc0a100faa50
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 19:28:01 +0100

    Start 5.1.3 development

 NEWS         |    5 +++++
 configure.ac |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 3ad54821664ced4bb2b8ad1d9802e4c3014a643a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 19:16:05 +0100

    Prepare version 5.1.2

 NEWS         |    6 ++++--
 configure.ac |    2 +-
 2 files changed, 5 insertions(+), 3 deletions(-)

commit 3c87d376a773c642d93e6271b83d39d587fb4d59
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 18:18:26 +0100

    Here is the NEWS

 NEWS |   46 +++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 45 insertions(+), 1 deletions(-)

commit 0dc5842d74dd6c038ddf92f0e61ba4373ca4de0a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 13:07:58 +0100

    McdAccount: when forcing loaded AutomaticPresence to be online, set status member too
    
    Alberto points out that the status is used (if supported) regardless of
    the value of the presence type, with the presence type used only to select
    fallbacks.
    
    This is mitigated by the fact that if we fail to set the AutomaticPresence
    (because it's not an online presence type), we'll keep the default
    available presence that was obtained by signing in.

 src/mcd-account.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 7661a95072b7103ccd0682873f10eea1a1d8baa4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 13:03:32 +0100

    Revert "McdAccount: always pass static strings to mcd_account_changed_property"
    
    This reverts commit eee23bb66e83cb61546c2710279cb3d4f0d10829.
    
    Alberto points out:
    
    > Our property names are indeed static, because
    > they are taken from the static structure that defines the property.
    > See the last few lines in mcd_dbusprop_set_property:
    >
    >     /* we pass property->name, because we know it's a static value and there
    >      * will be no need to care about its lifetime */
    >     return property->setprop (self, property->name, value, error);
    
    Conflicts:
    
    	src/mcd-account.c

 src/mcd-account.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 55e1765c83a9b13acaff196ffde6dbda8df3e86f
Merge: 545fda4 b9f34ff
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-26 13:00:57 +0100

    Merge branches 'connect', 'connect-cleanup' and 'master-reduction'
    
    One patch will be reverted immediately after, as per Alberto's review.
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit b9f34ffa8d80f071a053f04450a57d1223e8027f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:33:38 +0100

    McdMaster: remove now-unused TransportData typedef

 src/mcd-master.c |    6 ------
 1 files changed, 0 insertions(+), 6 deletions(-)

commit 4f9297c52188bb6df8ecee61945cc0e364813c51
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:33:29 +0100

    McdMaster: inline disconnect_account_transport

 src/mcd-master.c |   55 +++++++++++++++++++++--------------------------------
 1 files changed, 22 insertions(+), 33 deletions(-)

commit 3557a696559cba12f363b2fc284a8263be47df87
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:31:19 +0100

    mcd_master_transport_disconnected: use GHashTableIter

 src/mcd-master.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit f9994cfa93096099a41ace84f292484016646e63
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:26:49 +0100

    McdMaster: inline check_account_transport

 src/mcd-master.c |   64 ++++++++++++++++++++++--------------------------------
 1 files changed, 26 insertions(+), 38 deletions(-)

commit 118a408659491f57b677c8edebf596567ba7e0dd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 17:56:31 +0100

    mcd_master_transport_connected: use GHashTableIter

 src/mcd-master.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit 48c664876c02e96958172ea49dd36ab668f7559c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 17:15:13 +0100

    McdMaster: make _mcd_master_lookup_manager private

 src/mcd-account-manager.c |    3 ++-
 src/mcd-account.c         |    2 +-
 src/mcd-master-priv.h     |    3 +++
 src/mcd-master.c          |    8 ++++----
 src/mcd-master.h          |    2 --
 5 files changed, 10 insertions(+), 8 deletions(-)

commit 1f56cfc78ec558ff9cfe07f4fe8b2b1a9b8fae8f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 17:12:41 +0100

    McdMaster: make mcd_master_get_nth_account_connection private

 src/mcd-account-connection.c |    7 ++++---
 src/mcd-master-priv.h        |    4 ++++
 src/mcd-master.c             |    7 ++++---
 src/mcd-master.h             |    4 ----
 4 files changed, 12 insertions(+), 10 deletions(-)

commit d49611daec2b8f113aae76d7e999e0c65241dae2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 17:10:58 +0100

    McdMaster: remove obsolete awake_presence, awake_presence_message

 src/mcd-master.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit d3c5769150d4e62823186f37cae8e7752b3cac3d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 17:10:11 +0100

    McdMaster: remove obsolete default-presence property

 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |   14 ------------
 src/mcd-master.c                                   |   23 --------------------
 src/mcd-master.h                                   |    3 --
 3 files changed, 0 insertions(+), 40 deletions(-)

commit 6e4a346c10d671f93af30cd7029486e3d291da39
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 17:26:32 +0100

    McdMaster: call _mcd_account_maybe_autoconnect rather than reimplementing it

 src/mcd-master.c |   16 +---------------
 1 files changed, 1 insertions(+), 15 deletions(-)

commit 16482e100045fa8978c43f10add93c20b1459145
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 17:26:16 +0100

    McdAccount: expose _mcd_account_maybe_autoconnect within MC

 src/mcd-account-priv.h |    1 +
 src/mcd-account.c      |    2 +-
 2 files changed, 2 insertions(+), 1 deletions(-)

commit 8608d43927f4ad2031ca02317448e6b8e067459b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:57:49 +0100

    Rename _mcd_account_request_connection to _mcd_account_connect_with_auto_presence
    
    This suits its purpose better.

 src/mcd-account-priv.h |    2 +-
 src/mcd-account.c      |   16 +++++++++-------
 src/mcd-master.c       |    6 +++---
 3 files changed, 13 insertions(+), 11 deletions(-)

commit d3bdd1dad4f4cdeb7fef92bb3c1cb8d83b03e092
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:53:52 +0100

    Implement _mcd_account_request_connection by simply asking for the AutomaticPresence
    
    Now that we enforce that AutomaticPresence is an online status, this
    should work.

 src/mcd-account.c |   12 ++++--------
 1 files changed, 4 insertions(+), 8 deletions(-)

commit c663d8774b60a4b278a5126af82eb38ef6a6e968
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:46:21 +0100

    account-manager/create-with-properties.py: test setting RequestedPresence at creation and assert that the account starts to go online

 .../account-manager/create-with-properties.py      |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 6e518789362cb445b085a2f00490980e0e7527db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:45:49 +0100

    McdAccountManager: officially support setting RequestedPresence at creation

 src/mcd-account-manager.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 81fc68d69c47a70829b8b7df96b5fa6b98df62a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:40:54 +0100

    McdAccount: start from RequestedPresence == Offline rather than Unset
    
    This means that various tests need to stop asserting that our requested
    presence is initially Unset, but that was wrong all along really.

 src/mcd-account.c                                  |    5 ++++-
 test/twisted/account-manager/auto-away.py          |    9 +++------
 .../twisted/account-manager/create-auto-connect.py |    4 ----
 .../twisted/account-manager/enable-auto-connect.py |    4 ----
 test/twisted/account-manager/enable.py             |    4 ----
 test/twisted/dispatcher/connect-for-request.py     |    4 ----
 .../twisted/dispatcher/request-disabled-account.py |    4 ----
 test/twisted/test-connect.py                       |   13 -------------
 8 files changed, 7 insertions(+), 40 deletions(-)

commit 630feff62d795e2f6b842a8000834a2ffc6aca76
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:27:28 +0100

    McdAccount: don't allow setting RequestedPresence to unset, unknown or error
    
    These make no sense to set on yourself.

 src/mcd-account.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit 40b76f9a1a2751ae9925e92af75e84aed711b61d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 18:26:25 +0100

    McdAccount: force AutomaticPresence to be an online presence of some sort

 src/mcd-account.c |   39 ++++++++++++++++++++++++++++++++++++++-
 1 files changed, 38 insertions(+), 1 deletions(-)

commit f560db8bb44bc5f3be17e9a519e281ca07aa5b59
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:45:31 +0100

    McdAccount: fix race between loading accounts and requesting channels
    
    * If we get an online request for an account before it has fully loaded,
      queue it up
    * When the account has loaded, if there are queued online requests:
      - if the account is invalid or disabled, fail all the requests
      - else resume trying to put the account online
    
    This fixes dispatcher/create-at-startup.py when run under valgrind (which
    previously lost the race, because Valgrind made MC load accounts slowly).

 src/mcd-account.c |   47 ++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 44 insertions(+), 3 deletions(-)

commit 9252e3a303e256d0610169fc8308271d9335b5e7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:12:08 +0100

    account-manager/enable.py: assert that when an account with RequestedPresence online is enabled, it goes online

 test/twisted/Makefile.am               |    1 +
 test/twisted/account-manager/enable.py |   50 ++++++++++++++++++++++++++++++++
 2 files changed, 51 insertions(+), 0 deletions(-)

commit 4c53aff6ffe7e90b4d9d77c929a2165f0f778cf3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:11:30 +0100

    McdAccount: set_enabled: if Enabled becomes TRUE, re-set RequestedPresence
    
    This means that if RequestedPresence was an online presence, we'll go
    online when enabled.

 src/mcd-account.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 62a06cb9812a5d6281ac0da343e95ba259469b07
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:09:48 +0100

    account-manager/enable-auto-connect.py: assert that when a Valid, ConnectAutomatically account becomes Enabled, it goes online

 test/twisted/Makefile.am                           |    1 +
 .../twisted/account-manager/enable-auto-connect.py |   57 ++++++++++++++++++++
 2 files changed, 58 insertions(+), 0 deletions(-)

commit e3ad70b773429f8d12d112fd70b602d631d34537
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:08:53 +0100

    McdAccount: set_enabled: consider auto-connecting if Enabled becomes TRUE

 src/mcd-account.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit cd92ca8bb57d5cdb3fe257e3441d68b2d4c96630
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:06:53 +0100

    account-manager/create-auto-connect.py: assert that when ConnectAutomatically is set TRUE, the account connects

 test/twisted/Makefile.am                           |    1 +
 .../twisted/account-manager/create-auto-connect.py |   56 ++++++++++++++++++++
 2 files changed, 57 insertions(+), 0 deletions(-)

commit af3b83d3af4f3d4217083b22a55b971825346348
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:06:26 +0100

    McdAccount: set_connect_automatically: consider auto-connecting if set TRUE

 src/mcd-account.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit d1b6d771b88644b1400e0740fb096cc40f310854
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:04:21 +0100

    dispatcher/request-disabled-account.py: assert that requests on a disabled account fail

 test/twisted/Makefile.am                           |    1 +
 .../twisted/dispatcher/request-disabled-account.py |   85 ++++++++++++++++++++
 2 files changed, 86 insertions(+), 0 deletions(-)

commit 8a50c2fe967e01ea375cf4e00985f672b589cdcf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:02:49 +0100

    account-manager/make-valid.py: assert that channel requests on an invalid account fail

 test/twisted/account-manager/make-valid.py |   35 ++++++++++++++++++++++++++++
 1 files changed, 35 insertions(+), 0 deletions(-)

commit 100444a151c2618ae22b6e6d90af4a7638a8e001
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 16:02:29 +0100

    _mcd_account_online_request: deny the request if the account is invalid or disabled

 src/mcd-account.c |   46 ++++++++++++++++++++++++++++++++++------------
 1 files changed, 34 insertions(+), 12 deletions(-)

commit f01e068c353fc76f8a173135930b51e6bbe6f84f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 15:52:12 +0100

    Add a regression test for accounts that "want to connect" doing so when they become valid

 test/twisted/Makefile.am                   |    1 +
 test/twisted/account-manager/make-valid.py |  182 ++++++++++++++++++++++++++++
 2 files changed, 183 insertions(+), 0 deletions(-)

commit eee23bb66e83cb61546c2710279cb3d4f0d10829
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 15:51:27 +0100

    McdAccount: always pass static strings to mcd_account_changed_property
    
    mcd_account_changed_property relies on its argument staying valid
    indefinitely, and the D-Bus property setters have no such guarantee.

 src/mcd-account.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit c30a4a9f3646862250e59d1f39fe090d5faea3ff
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 15:50:41 +0100

    McdAccount: remove incorrect "optimization" using an array of property GValues
    
    Previously, this code would copy changed properties into a GArray of
    GValue, populate a GHashTable with pointers into the GArray's memory
    buffer, and emit that GHashTable in the delayed PropertiesChanged signal.
    
    This was fine until the GArray ran out of space in its memory buffer
    and triggered a realloc(), at which point the GValues would be copied
    to the new buffer, leaving the values in the GHashTable pointing to the
    old (cleared and/or freed) memory buffer. At this point, emitting the
    signal would cause a crash. The regression test
    account-manager/make-valid.py causes this failure mode.
    
    In practice, slice-allocating the GValues individually is likely to be
    just as efficient, so do that instead.

 src/mcd-account.c |   21 ++++-----------------
 1 files changed, 4 insertions(+), 17 deletions(-)

commit cb62d21fca39ed28ad63aee014a6c4275a0f0a5e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 14:29:32 +0100

    mcd_account_check_validity: if the account becomes valid, set the requested presence again
    
    This means that accounts that become valid will get put online, if an
    online presence was requested.

 src/mcd-account.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 761cac0e5ea22078c834acd7b5fac98f6dd18d34
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 14:28:09 +0100

    _mcd_account_set_parameters: check validity before perhaps auto-connecting, rather than only doing so in UpdateParameters
    
    This means that when deciding whether to auto-connect, we already have the
    updated value for whether the account is valid.

 src/mcd-account.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5950761f17d89553a3e4aa70ecd6b5f1d99d29e5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 14:26:32 +0100

    mcd_account_request_presence_int: don't try to connect invalid accounts

 src/mcd-account.c |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

commit 00ec91609214a939f908a25587491d292f18ceb8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 13:57:53 +0100

    Add a regression test for requesting channels on offline accounts
    
    This correctly puts the account online.

 test/twisted/Makefile.am                       |    1 +
 test/twisted/dispatcher/connect-for-request.py |  146 ++++++++++++++++++++++++
 2 files changed, 147 insertions(+), 0 deletions(-)

commit 09e31c90585ae44550bc72e965210d706b0f2134
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 13:56:35 +0100

    mcd_account_request_presence_int: allow setting RequestedPresence on disabled accounts
    
    This won't do anything immediately, but is necessary for RequestedPresence
    to work when creating accounts with properties.

 src/mcd-account.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 2673bd60baa328d5cb408a47f2e291b5b909aacc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 13:53:24 +0100

    _mcd_account_maybe_autoconnect: never auto-connect unless valid

 src/mcd-account.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 9fff740253f25a604487c5b3c8f0fb7086fada1b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 13:52:56 +0100

    _mcd_account_maybe_autoconnect: if we're not connecting, explain why

 src/mcd-account.c |   36 +++++++++++++++++++++++++++---------
 1 files changed, 27 insertions(+), 9 deletions(-)

commit 8ffd32c57f99bbed04144bbf8f526aca7b7e7eb2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 13:52:22 +0100

    mcd_account_check_validity: accounts are never valid until they have loaded

 src/mcd-account.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 545fda42268bd5e6e1d67fbd82fbc1923a97d2f4
Merge: 5cf657d 3b6bc23
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-25 12:14:33 +0100

    Merge branch 'system-flags'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 3b6bc230740fa9ce0cc332acfa51eca919207f45
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-24 13:02:35 +0100

    mcd-account-requests: use new API for low memory indicator

 src/mcd-account-requests.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit a082a0cb3cee1307a06459642241d58e36989b95
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-24 13:02:10 +0100

    McdMaster: add API to set lowmem and idle flags, and get lowmem flag
    
    The rest of the system flags don't seem to be used, so we can eventually
    get rid of McdSystemFlags and the propagation through a tree of
    McdMissions entirely, and just have two booleans on the Master.

 src/mcd-master.c |   67 +++++++++++++++++++++++++++++++++++++++++++++++++-----
 src/mcd-master.h |    4 +++
 2 files changed, 65 insertions(+), 6 deletions(-)

commit 98ae3b352369b7131f42dd779b9a075596f964d4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-24 13:00:40 +0100

    Add a regression test for not creating a channel due to low memory
    
    This test asserts that fd.o #21035 still exists, in order to verify
    existing functionality.

 test/twisted/Makefile.am                 |    1 +
 test/twisted/dispatcher/create-lowmem.py |  188 ++++++++++++++++++++++++++++++
 2 files changed, 189 insertions(+), 0 deletions(-)

commit 5cf657d812004e4fe0249142151aae1435ad2603
Merge: 4ca4348 59194ca
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-24 12:16:24 +0100

    Merge branch 'valgrind'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 59194cae014dd0b8a00b0a92e638522b214efd14
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-23 17:55:07 +0100

    dispatcher/handle-channels-fails.py: remove a race by asserting that fd.o #21003 exists
    
    The order of events isn't guaranteed, unfortunately, and valgrind makes MC
    slow enough that we lose the race and fail the test. This is yet another
    test that will have to be changed when fd.o #21003 is finally fixed.

 test/twisted/dispatcher/handle-channels-fails.py |   19 ++++++++++++-------
 1 files changed, 12 insertions(+), 7 deletions(-)

commit 84c65deb86edb00de44428aabd6e2b38a077e308
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-23 17:32:36 +0100

    In regression tests, don't leak a DBusMessage when poking system flags
    
    The check-combined target now has no leaks detected by valgrind,
    when suppressions are used. Some tests still fail, since valgrind's
    reduced performance exhibits race conditions better.

 test/twisted/mc-debug-server.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 4ca4348d128065b0713746d029316740fd233e05
Merge: e67ecfa 0e052b0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-22 16:42:05 +0100

    Merge branch 'undraft'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>
    Conflicts:
    	src/Makefile.am
    Amended: src/mcd-account.c: use TP_STRUCT_TYPE_AVATAR instead of MC_*

commit e67ecfaba27c3212c1aa99eac2fa1a0df6bf7828
Merge: dcc41fe 99c62fd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-22 15:25:15 +0100

    Merge branch 'build'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 99c62fdea11ebdb172a887df4a199da24b471fb8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-22 13:36:20 +0100

    Move ChangeLog to ChangeLog.old and add a new ChangeLog placeholder

 ChangeLog     | 4559 +--------------------------------------------------------
 ChangeLog.old | 4557 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 4559 insertions(+), 4557 deletions(-)

commit 5a6a114a1bc1d6d4b69a429162fb1a7129d37fbb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-22 13:33:24 +0100

    Incorporate telepathy.am from telepathy-glib (adapted slightly for our versioning scheme)

 Makefile.am        |    1 +
 tools/Makefile.am  |    3 ++-
 tools/telepathy.am |   27 +++++++++++++++++++++++++++
 3 files changed, 30 insertions(+), 1 deletions(-)

commit 73cb882a9a9d5b9eb7e0e98c4c487bda6d77b611
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-22 13:32:38 +0100

    Turn MCD into a convenience library so one of the tests can link it statically
    
    This fixes `make check` with --enable-plugins.

 src/Makefile.am  |   27 +++++++++++++++++++--------
 test/Makefile.am |    4 +++-
 2 files changed, 22 insertions(+), 9 deletions(-)

commit a930c226ac85e7855a1dc562c8bd7570c1ac6677
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-22 13:37:04 +0100

    Start NEWS for 5.1.2

 NEWS |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 628ee6e542a793c8a168e2a7e66b70e114fa8e6d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-22 13:31:55 +0100

    Retroactively add NEWS from last Tuesday

 NEWS |   28 ++++++++++++++++++++++++++++
 1 files changed, 28 insertions(+), 0 deletions(-)

commit dcc41fe3e04cbfa9f51cbadf81b3bf0a9a080584
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-06-16 16:49:29 +0300

    Development cycle

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a2a1e6b11e7ed506308bddeb481200bec994af49
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-06-16 16:43:49 +0300

    Version 5.1.1

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 030d390d3ed40ee2d40b6775140f60037f4bf4d3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-06-16 13:37:31 +0300

    Reset the transport when disconnected.

 src/mcd-account.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 329d46cab64c21265f2fe81a88151b231b43a615
Merge: a59efaa c272e56
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-12 14:48:45 +0100

    Merge branch '22201-pointless-rewrite'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit a59efaa52451f271df367eedca4e39c4833049fe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-12 11:46:06 +0100

    Fix out-of-tree builds of value-is-same.c
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

 test/Makefile.am |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit f32c0b42d3985491f909d20d804d1e3056f47e13
Merge: 727b876 37bead5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-12 11:42:03 +0100

    Merge branches '21299-name-in-use' and 'all-the-types'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit c272e5632224cc77b29571b0a8075106f09e3a45
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-12 11:26:18 +0100

    fd.o #22201: _mcd_file_set_contents: don't rewrite the file if unnecessary
    
    This should avoid rewriting accounts.cfg unless there is actually a
    change - in particular, repeatedly setting HasBeenOnline=TRUE won't
    cause it to be rewritten.

 src/mcd-misc.c |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit 727b876e079524e245198ce37ac5efd05cef0691
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-11 16:12:18 +0100

    fd.o #21299: don't reconnect if disconnected with reason Name_In_Use
    
    On protocols where the new connection fails, we'd just keep retrying
    until the old connection goes away (i.e. perhaps indefinitely) which is
    not too bad, but a waste of bandwidth.
    
    On protocols where the old connection drops and the new one succeeds,
    we could easily get into a fight with the other client - we reconnect, the
    other client gets kicked off, it reconnects, we get kicked off, we
    reconnect, repeat. This is particularly harmful when our initial
    reconnection timeout is only a second. If the other client is also
    MC 5, we could end up with two connection attempts per second,
    indefinitely.

 src/mcd-connection.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 37bead5d6746adeca2273ab728f6ebc64c3c44ae
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:43:25 +0100

    McdAccount: use MC_STRUCT_TYPE_AVATAR instead of reinventing it

 src/mcd-account.c |    7 +------
 1 files changed, 1 insertions(+), 6 deletions(-)

commit 3a9fe85286f62630503205783735f08aacdf9b2d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:48:13 +0100

    account-manager/param-types.py: fd.o #21377: exercise all the types for which telepathy-spec defines a serialization

 test/twisted/Makefile.am                           |    2 +
 test/twisted/account-manager/param-types.py        |   66 ++++++++++++++++++++
 .../telepathy/managers/onewitheverything.manager   |   45 +++++++++++++
 3 files changed, 113 insertions(+), 0 deletions(-)

commit 7c16686082be3c55237d9eb844aa99f8df34b138
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:43:49 +0100

    mc_param_type: fd.o #21377: add support for double, object path, and 64-bit ints

 src/mcd-account.c |   16 ++++++++++++++++
 1 files changed, 16 insertions(+), 0 deletions(-)

commit 7bcc81a573226d7ec435fa9f1bd4fe0437edbfa9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:43:06 +0100

    McdAccount: fd.o #21377: add support for deserializing doubles and object paths

 src/mcd-account.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit 5abdade8ddeb299b5065a936b4aab2b614244338
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:42:43 +0100

    McdAccount: don't truncate to the range of gint when deserializing int64, uint32, uint64

 src/mcd-account.c |   54 +++++++++++++++++++++++++++++++++++++---------------
 1 files changed, 38 insertions(+), 16 deletions(-)

commit 68f106067a245157855dbcf735b201a2b2322494
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:40:33 +0100

    McdAccount: fd.o #21377: add support for serializing bytes, 64-bit integers, doubles and object paths

 src/mcd-account.c |   39 +++++++++++++++++++++++++++++++++++++--
 1 files changed, 37 insertions(+), 2 deletions(-)

commit 6233f4526ac6a996ecbdd912b59871fcbab2fd1b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:39:56 +0100

    McdAccount: serialize uint32 values larger than G_MAXINT correctly

 src/mcd-account.c |   11 ++++++++---
 1 files changed, 8 insertions(+), 3 deletions(-)

commit 654b399a4f16514d844087722a4b4d67ab604d52
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-11 11:14:31 +0100

    Add a regression test for value_is_same()

 .gitignore           |    1 +
 test/Makefile.am     |    8 ++
 test/value-is-same.c |  209 ++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 218 insertions(+), 0 deletions(-)

commit 6d7fed5017f09bbd607f094bcb3132cb02d87d9b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:37:57 +0100

    McdAccount: value_is_same: add support for object path and GStrv values

 src/mcd-account.c |   39 ++++++++++++++++++++++++++++++++++++---
 1 files changed, 36 insertions(+), 3 deletions(-)

commit e6bf992c8c5567920ca470b796a67d099fbed276
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:37:08 +0100

    McdAccount: value_is_same(): add support for double values

 src/mcd-account.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit fc1f05def4040eada1c332c465b4db88f801edf9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 11:44:57 +0100

    McdAccountManager: bugfix: emit AccountValidityChanged if an already-valid account is added
    
    Otherwise, accounts for CMs with no required parameters would never be
    announced.

 src/mcd-account-manager.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 9d52b49f0597cacec5f34d2b9993d30a45866def
Merge: d7813dd 18f6d8e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-11 10:24:06 +0100

    Merge branch 'update-scripts'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 0e052b09e962c74ad9871fd0252c533c83b382c5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 17:41:29 +0100

    Require the version of telepathy-glib that'll have these interfaces

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 68fd637f26188ca517da5ca2e5d0624d66f5306c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-09 17:11:07 +0100

    mcd: use telepathy-glib for all standard interfaces, and only generate code for non-standard ones

 src/Makefile.am                |   36 +++++-------
 src/mcd-account-manager-priv.h |    1 -
 src/mcd-account-manager.c      |   34 ++++++-----
 src/mcd-account-requests.c     |   10 ++-
 src/mcd-account.c              |   45 ++++++++-------
 src/mcd-account.h              |    3 -
 src/mcd-channel.c              |   23 ++++----
 src/mcd-client-priv.h          |   11 +--
 src/mcd-client.c               |    8 +-
 src/mcd-dispatch-operation.c   |   33 ++++++-----
 src/mcd-dispatch-operation.h   |    2 -
 src/mcd-dispatcher.c           |  123 +++++++++++++++++++---------------------
 src/mcd.xml                    |   20 +++++++
 13 files changed, 176 insertions(+), 173 deletions(-)

commit 843aca149510da052236bba21489a52f3f450fd0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-09 17:06:18 +0100

    libmcclient: copy in all.xml from xml/
    
    This gives libmcclient control over the exact classes for which code is
    generated (keeping the list separate from what src uses). Even when MCD
    uses telepathy-glib for all standard interfaces, libmcclient will have to
    keep generating code for everything, to stay compatible with itself.

 libmcclient/Makefile.am     |   17 +++++++++--------
 libmcclient/libmcclient.xml |   31 +++++++++++++++++++++++++++++++
 2 files changed, 40 insertions(+), 8 deletions(-)

commit 18f6d8e18711b3ed8e7825e27d72838b61ec1dd1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 16:32:45 +0100

    src, libmcclient: follow recommendations of telepathy-glib 0.7.6 NEWS
    
    This uses newer TpProxy API to avoid some possible assertion failures.

 libmcclient/Makefile.am             |    1 +
 libmcclient/mc-account-manager.c    |    1 +
 libmcclient/mc-account.c            |    1 +
 libmcclient/mc-dispatch-operation.c |    1 +
 src/Makefile.am                     |    1 +
 src/mcd-connection.c                |    1 +
 src/mcd-dispatcher.c                |    1 +
 7 files changed, 7 insertions(+), 0 deletions(-)

commit dc8913f12aae3ec6fcd3f054317c786dfe5f7788
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 16:32:14 +0100

    tools: update from telepathy-glib
    
    This requires a minor change to the invocation: when making docs,
    explicitly allow dangling references to interfaces.

 doc/Makefile.am                |    4 +-
 tools/doc-generator.xsl        |  432 ++++++++++++++++++++++++++---
 tools/glib-client-gen.py       |  597 ++++++++++++++++-----------------------
 tools/glib-ginterface-gen.py   |  101 +++++---
 tools/glib-gtypes-generator.py |   82 +++++-
 tools/libglibcodegen.py        |    9 +-
 tools/libtpcodegen.py          |   67 +++--
 7 files changed, 824 insertions(+), 468 deletions(-)

commit cdd588d0774111f3f8975ac4643b5a77f728dbcc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 16:31:12 +0100

    Add tp:name-for-bindings to interfaces where needed
    
    The versions of the code-generation scripts found in telepathy-glib git
    will fail if no tp:name-for-bindings is given: explicit is better than
    implicit.

 xml/Account_Interface_ChannelRequests.xml  |    4 ++--
 xml/Account_Interface_Compat.xml           |    3 ++-
 xml/Account_Manager_Interface_Creation.xml |    3 ++-
 xml/Account_Manager_Interface_Query.xml    |    3 ++-
 4 files changed, 8 insertions(+), 5 deletions(-)

commit d1d25eeefb30666c85d44281c2e21616cf81c65d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 16:03:27 +0100

    ChannelRequests: remove tp:type from User_Action_Time; generic-types: redefine Unix_Timestamp64
    
    The D-Bus type of Unix_Timestamp64 was changed to signed in
    telepathy-spec; for compatibility, the one in ChannelRequests stays as
    unsigned, which means it no longer matches the definition of Unix_Timestamp64.
    
    (When the codegen scripts are updated from telepathy-glib, we'll get
    stricter checks that would fail on this inconsistency.)

 xml/Account_Interface_ChannelRequests.xml |    6 ++----
 xml/generic-types.xml                     |    4 ++--
 2 files changed, 4 insertions(+), 6 deletions(-)

commit 388cf6241504d8d942f7344a1923bdd6055ecbee
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 16:28:35 +0100

    gquark-gen.py: pull in a local copy of camelcase_to_lower
    
    This has been removed from libtpcodegen and libglibcodegen in
    telepathy-glib, to discourage guessing how bindings should be spelled.

 tools/gquark-gen.py |   24 ++++++++++++++++++++++--
 1 files changed, 22 insertions(+), 2 deletions(-)

commit d7813ddaf11211183c6c122132feb55c5fde8c9b
Merge: d501ad9 e18a821
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 16:26:03 +0100

    Merge branch '22169-empty-pref-handler'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit e18a8219055fd9c248bf559b994a79b334d37319
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-10 12:20:00 +0100

    fd.o #22169: allow PreferredHandler to be empty when requesting a channel

 src/mcd-dispatcher.c                               |   35 +++--
 test/twisted/Makefile.am                           |    1 +
 .../dispatcher/create-no-preferred-handler.py      |  170 ++++++++++++++++++++
 3 files changed, 192 insertions(+), 14 deletions(-)

commit d501ad9cf4c02e3c2629c9c869de9e5cb1971db9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 18:47:11 +0100

    Post-release version bump

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3ed0c5d5ec21426e442872bafd0ae2b279fcc3ce
Merge: 9c25d1e d6d2917
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 17:46:34 +0100

    Merge branch 'nonbeta'
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit d6d29178a088ca4d373c38153b7afd89255ae275
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 17:02:10 +0100

    Woo! A release!

 NEWS         |    2 +-
 configure.ac |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 95c4919cb845aabff1587a47e4ff3410e5b70097
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 17:00:35 +0100

    Write a NEWS file and a README (both loosely based on telepathy-glib's)

 NEWS   |   52 ++++++++++++++++++++++++++
 README |  125 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 177 insertions(+), 0 deletions(-)

commit a282f8a9edb43a24f6c27e241d6fd4663abe6e1a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 16:25:58 +0100

    Use -release in LDFLAGS unless we're on Maemo
    
    SONAME guarantees are not given for the MC libraries yet (if at all), so
    we should use -release to encode the MC version number in the SONAME.
    
    However, on Maemo, things already rely on having libmcclient.so.6 and
    libmissioncontrol-server.so.6, so add --enable-mcclient-so6 and
    --enable-mcserver-so6 options which pretend these libraries are already
    stable. (On Maemo, it's easier to rebuild all reverse dependencies than
    to bump the SONAME regularly.)

 configure.ac            |   30 ++++++++++++++++++++++++++++++
 libmcclient/Makefile.am |    9 +++++++--
 src/Makefile.am         |   13 +++++++++----
 3 files changed, 46 insertions(+), 6 deletions(-)

commit 9c25d1e67e60be7136d4cbcf65ee939a1560101c
Merge: 4e6d2cf 531b4f4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 15:06:49 +0100

    Merge branch 'notfdo', reviewed some time ago
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 4e6d2cff64bfedafebfb00b7b50d860f42fca6c9
Merge: 26d0492 09c8201
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 15:06:24 +0100

    Merge branch 'rerequest'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 09c820115d17f8ef5232f4b1dc1c15b564148ec2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 13:46:05 +0100

    McdAccount: remove temporary_presence indicator
    
    Now that re-requesting a presence status is never suppressed (see previous
    commit), we don't need a flag to avoid suppressing it.

 src/mcd-account.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit d7ae67240aec07992c5d90ff101ae10220bc7e1f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-05 13:43:57 +0100

    mcd_account_request_presence_int: allow same presence to be re-requested
    
    Also, only emit AccountPropertyChanged for RequestedPresence if it
    actually changed, and add a regression test for both.
    
    Transport plugins provide a hook for MC to communicate with connectivity
    mechanisms like NetworkManager, Maemo's ConIc or Moblin's ConnMan to
    request an Internet connection when signing on to IM protocols.
    
    If the user sets online presence but the Internet connection fails, the
    RequestedPresence will still be online. As a result, the user can only
    retry connection by setting their presence to offline and back to online,
    which is deeply unintuitive.
    
    Removing the check for a no-op means that the UI re-requesting an online
    presence will trigger another attempt to connect to the Internet; this one
    might succeed.
    
    Also, if a protocol has side-effects from re-requesting the same presence
    (e.g. it records the time at which the current presence was requested),
    this change will make it behave according to the user's input.

 src/mcd-account.c                        |    6 ++----
 test/twisted/account-manager/presence.py |   25 ++++++++++++++++++++++++-
 2 files changed, 26 insertions(+), 5 deletions(-)

commit 26d0492c3dcc3d5eb76b0d29f31d16b444b69cea
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-04 10:20:05 +0100

    Post-release version bump

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 78a5d32d18bfaf2b5209cef619e8555d80a2362d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-04 09:59:53 +0100

    Beta 74

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 465aef73f4c624e76ecb3a00354facb2c8995f08
Merge: d44a5c8 f13adb7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-04 09:33:56 +0100

    Merge branch 'avatars'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit d44a5c8b781a34e40b15e5286a7a4d3abc821f14
Merge: e0b3d50 68b50d5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-04 09:33:26 +0100

    Merge branch 'reconnect'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 68b50d5e61a98c9da6038d1a81979e41927aacb9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 18:41:39 +0100

    account-manager/recover-from-disconnect: assert that our custom status is preserved
    
    Until the previous commit, this test would fail, because our presence
    would be left as (AVAILABLE, 'available', '') after reconnection.

 .../account-manager/recover-from-disconnect.py     |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

commit 3f96f8b8399b539403cf0cd1ca9e33c1bb611b9a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 18:39:35 +0100

    McdConnection: when a connection dies, don't unset the RequestedPresence
    
    This appears to be a remnant of having the McdConnection not be in control
    of attempts to reconnect (as it now is).

 src/mcd-connection.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

commit 6f290a239090468932f2d48be3574eeaa1cf95f2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 18:30:28 +0100

    Improve debug when setting presence or failing to do so

 src/mcd-connection.c |   21 ++++++++++++++++++---
 1 files changed, 18 insertions(+), 3 deletions(-)

commit 6f6e075bb8fd599432414adb83977e3b93a7aa2d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 18:00:53 +0100

    Add a regression test asserting that dispatching still works after reconnecting

 test/twisted/Makefile.am                           |    1 +
 test/twisted/dispatcher/recover-from-disconnect.py |  257 ++++++++++++++++++++
 2 files changed, 258 insertions(+), 0 deletions(-)

commit 9d7e0c60e3dd722386c915ac8a9ffef23a78da4f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 17:35:21 +0100

    Add a regression test for basic recovery from disconnection

 test/twisted/Makefile.am                           |    1 +
 .../account-manager/recover-from-disconnect.py     |   98 ++++++++++++++++++++
 2 files changed, 99 insertions(+), 0 deletions(-)

commit b64dfb0878d7c26d3683d793e4de041c9fda58ac
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 17:22:06 +0100

    McdConnection: mark connections' dispatching as not started when releasing TpConnection
    
    Otherwise we get an assertion failure after reconnecting, because the
    McdDispatcher tells us to start dispatching again.

 src/mcd-connection.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 8d1a4e92711f5b0b548bca12817d0c20f4bdb6b8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 17:21:16 +0100

    McdConnection: if we're given a new TpConnection, release the old one rather than leaking it

 src/mcd-connection.c |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit f13adb7afd5c6cc19b3f74da80cd33bbd5944f38
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 12:11:50 +0100

    Add a regression test for signing in to an account with persistent avatars

 test/twisted/Makefile.am                       |    1 +
 test/twisted/account-manager/avatar-persist.py |  125 ++++++++++++++++++++++++
 2 files changed, 126 insertions(+), 0 deletions(-)

commit dea33e6af4fe048c283824cc4cd2fab09e63a497
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 12:11:35 +0100

    McdConnection: bugfix: if the account has a stored avatar (or lack thereof), take it, unless we are changing it
    
    * Account exists on server with stored avatar A (which might be an avatar,
      or the absence of an avatar)
    * MC is not connected
    * Another client (say, Pidgin) connects and changes avatar to B (which
      might be an avatar, or the absence of an avatar)
    * Pidgin disconnects
    * MC signs in
    
    Desired result: MC sets the Account.Interface.Avatar.Avatar property to B
    Actual result before this bugfix: MC still thinks the desired avatar is A

 src/mcd-connection.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit abedae9cec91be192b4ca546aa22b8969a79131a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 11:54:28 +0100

    Add a regression test for refreshing avatars
    
    This simulates connection managers that need an avatar upload every time
    we connect, like telepathy-salut and telepathy-haze.

 test/twisted/Makefile.am                       |    1 +
 test/twisted/account-manager/avatar-refresh.py |  106 ++++++++++++++++++++++++
 2 files changed, 107 insertions(+), 0 deletions(-)

commit d477e958f0330af1bb411980f55ae83564c36336
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 11:44:21 +0100

    mctest: get the special case for non-persistent avatars right

 test/twisted/mctest.py |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit 96bf1fe7d6a1b265d5420b72569ba9bc4c6ebec5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 11:12:25 +0100

    McdAccount, McdConnection: push new avatars into the connection via a method call

 src/mcd-account.c         |   18 ++++++------------
 src/mcd-connection-priv.h |    4 ++++
 src/mcd-connection.c      |   26 +++++++-------------------
 3 files changed, 17 insertions(+), 31 deletions(-)

commit e0b3d506dbe24782942ba65d7940c66c6aa9fcba
Merge: 6c7a7df 2a0893f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 10:57:42 +0100

    Merge branch 'request-name'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 6c7a7df5d4cc4ceb2f51de9dcb8581e40590184a
Merge: 2d8258b 3fbdeb0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-03 10:41:58 +0100

    Merge branches 'coverity' and 'avatars'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 3fbdeb06ad26b74c19e0eff70ce2af5f6b45812e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-02 19:46:11 +0100

    account-manager/auto-connect.py: test setting an avatar that was changed while offline

 test/twisted/account-manager/auto-connect.py |   24 ++++++++++++++++++------
 1 files changed, 18 insertions(+), 6 deletions(-)

commit 58b9f4406330d7ae85cc15b01a6211590477e701
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-02 19:05:13 +0100

    Add a simple regression test for avatars

 test/twisted/Makefile.am               |    1 +
 test/twisted/account-manager/avatar.py |   85 ++++++++++++++++++++++++++++++++
 test/twisted/mctest.py                 |   43 +++++++++++++++-
 3 files changed, 126 insertions(+), 3 deletions(-)

commit aa43546ad57506698dd176162aece483498031cb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-02 17:21:01 +0100

    libmcclient: _mc_iface_update_props: remove unused parameters
    
    This function is always called with iface_name = NULL and
    iface_name_len = 0, in practice, so we can get rid of them. In the
    process, delete some strcpy()ing that makes coverity complain.

 libmcclient/dbus-api.c         |   28 ++++------------------------
 libmcclient/dbus-api.h         |    3 +--
 libmcclient/mc-account-stats.c |    4 ++--
 libmcclient/mc-account.c       |    4 ++--
 4 files changed, 9 insertions(+), 30 deletions(-)

commit 1acead4e59351ec27e28456245cdaaaf5bc4ce46
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-02 17:12:26 +0100

    _mcd_account_get_avatar: don't segfault on NULL out-parameters

 src/mcd-account.c |   11 ++++++++---
 1 files changed, 8 insertions(+), 3 deletions(-)

commit 6c6d06a4409275dfbee82d524df9bde0616d3757
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-02 17:11:46 +0100

    McdAccountManager: when loading account <-> connection cache make it explicit that we don't really care if it fails
    
    Coverity doesn't like it if we ignore the result of g_file_get_contents,
    and it's not immediately clear when inspecting the code that contents
    will be set to NULL on error (although g_file_get_contents does in fact
    guarantee this, so this patch makes no functional change).

 src/mcd-account-manager.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit 2d8258b81fecd5be1dc5d7512a60c04d8ddd608a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-02 15:34:56 +0100

    Post-release version bump

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f21de824d1d0e4645c1f3af23598f443e40941db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-02 14:44:59 +0100

    Beta 73

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f0e1ac22c70b09f08c0491e6fe0c28acecce7225
Merge: dce2802 a5af031
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-06-02 13:52:37 +0300

    Merge branch 'get_keyfile'

commit dce2802a22703ab60a51f97b6240ce34434a7f0a
Merge: 5a8a0b0 78b6f03
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-02 11:29:08 +0100

    Merge branches 'parallel', 'nickname' and 'connecting'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit a5af031e887004ff8d7e96ee64204bc952d11f20
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-06-02 10:38:29 +0300

    Add an API to get the GKeyFile.

 libmcclient/mc-profile.c |   21 +++++++++++++++++++++
 libmcclient/mc-profile.h |    2 ++
 2 files changed, 23 insertions(+), 0 deletions(-)

commit 78b6f03003fd70a18b8b2a3998dfccae95b36bff
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 19:28:18 +0100

    McdConnection: fetch the initial self-presence on connection
    
    This should mean that the previous hack (assuming that SetStatus set
    exactly the requested status) is no longer necessary - by downloading the
    initial state, we've caught up with any missed signal emissions.
    
    This requires some alterations to account-manager/auto-away.py to make its
    Presence implementation more realistic. While there, alter it to assert
    that the initial presence (available with no message) is correctly
    signalled.
    
    Some minor alterations to other presence-related tests were also needed.

 src/mcd-connection.c                         |   50 ++++++++++--------
 test/twisted/account-manager/auto-away.py    |   69 +++++++++++++-------------
 test/twisted/account-manager/auto-connect.py |    8 ++--
 test/twisted/account-manager/presence.py     |   13 +----
 test/twisted/mctest.py                       |   39 ++++++++++++++
 5 files changed, 107 insertions(+), 72 deletions(-)

commit 24adf9f6a8cc2e71facac99e968f7a0d3723ceca
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 18:45:20 +0100

    McdAccount, McdConnection: move responsibility for calling InspectHandles from C. to A.
    
    There's no real gain to having this functionality in the McdConnection,
    and it's yet another case where McdConnection inappropriately calls
    McdAccount methods.

 src/mcd-account.c    |   38 ++++++++++++++++++++++++++++++++++++++
 src/mcd-connection.c |   40 ----------------------------------------
 2 files changed, 38 insertions(+), 40 deletions(-)

commit 87eb58d71a479b059b6a46389b31d8f5c469d913
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 18:14:12 +0100

    McdAccount: note that our logic for the nickname is inconsistent
    
    If another client alters the nickname while we're offline, we'll overwrite
    it, but if another client alters the nickname while we're online, we'll
    accept their alteration. We should make our minds up.

 src/mcd-account.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit f1a1e8c40dfc035e91c9a577c2af30ffa31ef004
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 18:12:05 +0100

    McdAccount, McdConnection: transfer remote nickname changes from C to A via a signal
    
    Ideally, the Connection would know nothing about the Account. This is a
    step in that direction.

 .../tmpl/mcd-connection.sgml                       |    8 +++
 src/mcd-account.c                                  |   10 +++-
 src/mcd-connection.c                               |   50 +++++++++++--------
 3 files changed, 45 insertions(+), 23 deletions(-)

commit e32080c5ef1a1bdd337024ba694a85b8af3f9cd9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 17:52:35 +0100

    McdAccount: push nickname into McdConnection via a method call rather than a signal
    
    The "larger" object should be calling methods on the "smaller", and the
    "smaller" should be receiving signals from the "larger" (McdAccount is
    "larger" than McdConnection and should depend on it, and the converse
    is false).

 src/mcd-account.c         |   52 +++++++++++++++++++++++++++++++++++---------
 src/mcd-connection-priv.h |    3 ++
 src/mcd-connection.c      |   36 +++++++-----------------------
 3 files changed, 53 insertions(+), 38 deletions(-)

commit 63fb36de9e7223d7bb7a367ea14fdfe2333a86b9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 17:48:49 +0100

    McdConnection: add a "ready" signal, emitted whenever our TpConnection becomes ready

 .../tmpl/mcd-connection.sgml                       |    7 +++++++
 src/mcd-connection-priv.h                          |    2 ++
 src/mcd-connection.c                               |   17 +++++++++++++++++
 3 files changed, 26 insertions(+), 0 deletions(-)

commit c4ed2f7437854de6995f44d5875b43cd080604e2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 17:23:22 +0100

    account-manager/nickname.py: exercise picking up nickname setting from the CM

 test/twisted/account-manager/nickname.py |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit 247a412a91fa8bdeb472c2d75bb80582e5f82e82
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 16:41:17 +0100

    Don't install mission-control.pc unless we're supporting plugins

 Makefile.am |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit f08e78a2d5a0125cf012e270027ba0d393f45ad3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 16:38:53 +0100

    .gitignore: ignore /server/mission-control-5 under its new name

 .gitignore |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 03da163b1c3f7a6973d4a139800e89f0d0aaca9a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 16:37:49 +0100

    Add a configure option for whether to support plugins
    
    In Debian we don't want to support MC's plugin architecture yet (if at
    all), to reduce the amount of API/ABI exposed.
    
    When plugins are disabled, we don't need GModule,
    libmissioncontrol-server doesn't need to be installed or be a shared
    library, and the headers don't need to be installed either.

 autogen.sh               |    4 ++--
 configure.ac             |   30 ++++++++++++++++++++++++++----
 src/Makefile.am          |   44 ++++++++++++++++++++++++++++----------------
 src/mcd-master.c         |    8 ++++++++
 test/twisted/Makefile.am |    8 +++++++-
 5 files changed, 71 insertions(+), 23 deletions(-)

commit 5a8a0b0506a30bdddcdc3a4853810b1d4322b37b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 12:21:12 +0100

    test/twisted: run a larger number of tests in `make check-torture`

 test/twisted/Makefile.am |   15 ++++++++++++++-
 1 files changed, 14 insertions(+), 1 deletions(-)

commit f9f82de09673a8d97486a679adb54040b6f3f102
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 14:59:28 +0100

    Change the name of the binary to mission-control-5
    
    The binary isn't generally run directly by users, and this means it won't
    try to use the same filename as MC 4.

 server/Makefile.am                                 |    6 +++---
 ...reedesktop.Telepathy.MissionControl5.service.in |    2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

commit ea678a8426ab1dac34b169292e1d22a17c1d94c8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 12:43:49 +0100

    Change MC's bus name to end with MissionControl5
    
    This is a step towards having MC 4 and MC 5 parallel-installable, which
    will be useful for development.

 .gitignore                                         |    4 ++--
 server/Makefile.am                                 |    6 +++---
 ...freedesktop.Telepathy.MissionControl.service.in |    3 ---
 ...reedesktop.Telepathy.MissionControl5.service.in |    3 +++
 src/mcd-service.c                                  |    4 +---
 test/twisted/account-manager/auto-away.py          |    2 +-
 test/twisted/constants.py                          |    4 ++--
 test/twisted/mc-debug-server.c                     |    2 +-
 test/twisted/servicetest.py                        |    4 ++--
 test/twisted/tools/Makefile.am                     |    2 +-
 test/twisted/tools/MissionControl.service.in       |    3 ---
 test/twisted/tools/MissionControl5.service.in      |    3 +++
 12 files changed, 19 insertions(+), 21 deletions(-)

commit abefea64785ea735e1f833b4f0fad78e8b064fdb
Merge: bfe0b94 153f9f6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-06-01 15:33:39 +0100

    Merge branch 'wait-for-name'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 153f9f66daf09ad89b615f903ddbd66fb96503cf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-29 12:38:41 +0100

    Add a small helper utility to wait for a bus name to appear

 .gitignore           |    5 ++-
 util/Makefile.am     |    4 ++-
 util/wait-for-name.c |   96 ++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 102 insertions(+), 3 deletions(-)

commit bfe0b9485195f489d4c1660979d894cb728bc862
Merge: 525c9a2 57d0a55
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-29 11:29:55 +0100

    Merge branches 'refdbg-partial', 'refdbg' and 'more-leaks'

commit 57d0a551725ff254b20e103a85f94c7775476a39
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 17:51:25 +0100

    Add the ability to run the basic tests repeatedly

 test/twisted/Makefile.am |   26 ++++++++++++++++++++++++++
 1 files changed, 26 insertions(+), 0 deletions(-)

commit f52939096b36befbfb99eff14640b702cc548e5e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 17:36:45 +0100

    McdClientProxy: don't leak unique name

 src/mcd-client.c |   16 ++++++++++++++++
 1 files changed, 16 insertions(+), 0 deletions(-)

commit ab4708316046d2209eb13566a55e0e82361d822e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 17:33:57 +0100

    Add some more valgrind suppressions

 test/twisted/tools/valgrind.supp |   51 ++++++++++++++++++++++++++++++++++++++
 1 files changed, 51 insertions(+), 0 deletions(-)

commit 779376d42c10917cb4a8ee6b87634dd3df7938ae
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 17:31:42 +0100

    Shut down libdbus in regression-tested build, in an attempt to get cleaner valgrind logs

 test/twisted/mc-debug-server.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit e7bff493e6dd9fc54a8385ed0b3540cd30c09b23
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 17:14:33 +0100

    dispatcher/approver-fails.py: remove a race condition
    
    We can't assert that there are no more dispatch operations until the one
    we had has signalled Finished.

 test/twisted/dispatcher/approver-fails.py |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 2af00c9bfad5ef58fa07d5296a3be214fffc4d95
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 17:08:23 +0100

    lcov.am: wait for a refdbg-valgrind-enabled MC to exit before compiling stats
    
    Otherwise it'll look as though nothing has been run.

 tools/lcov.am |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 8a0ad6466ef8ffce5c7ab103090287145e597d3a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 17:07:46 +0100

    McdDispatcher: don't leak requested McdChannels if they abort

 src/mcd-dispatcher.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit 33ce7fddd751caa3cc74f1178046b4546ba6e018
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 17:07:09 +0100

    mcd-account-requests: assert that the channel will not be leaked
    
    If it has no parent (as is the case), the McdConnection will take it, but
    if it has a parent already, we'll be leaking it.

 src/mcd-account-requests.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 9b144048833fd1e0c0334ddf6f092e5d805967bf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 16:47:09 +0100

    Add a regression test for HandleChannels failing
    
    This is a simpler way to reproduce a leak of one McdChannel, also seen in
    dispatcher/create-at-startup.py.

 test/twisted/Makefile.am                        |    1 +
 test/twisted/dispatcher/create-handler-fails.py |  172 +++++++++++++++++++++++
 2 files changed, 173 insertions(+), 0 deletions(-)

commit b153af49785d7184e8f9727b2e07f85aa851dbd4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 16:23:45 +0100

    Add regression tests for the Approver and Handler returning failure

 test/twisted/Makefile.am                         |    2 +
 test/twisted/dispatcher/approver-fails.py        |  129 +++++++++++++++++++++
 test/twisted/dispatcher/handle-channels-fails.py |  134 ++++++++++++++++++++++
 3 files changed, 265 insertions(+), 0 deletions(-)

commit e45fdf99e2b96b4b89ff030573a46d580fbe930c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 15:17:04 +0100

    mcd_dispatcher_context_handler_done: remove the check for unhandled channels
    
    We always send all channels to the Handler together now, so this case
    can no longer be achieved.

 src/mcd-dispatcher.c |   26 +++-----------------------
 1 files changed, 3 insertions(+), 23 deletions(-)

commit 2ba07d2733d1a232f59117d15f7b7c34bb954b54
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 15:15:12 +0100

    McdDispatcher: remove CTXREF09 altogether
    
    In the case where we call HandleChannels, we're protected by CTXREF03;
    in the case where Claim was called, we're protected by CTXREF13.

 src/mcd-dispatcher.c |   10 ----------
 1 files changed, 0 insertions(+), 10 deletions(-)

commit f5758ad5e35bd63de58c7746b1dc79a610dd6fb7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 15:11:17 +0100

    Don't ref context (released by mcd_dispatcher_context_handler_done) unless we're actually going to call HandleChannels

 src/mcd-dispatcher.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 1210a3f433ea08fa0a1b822f7e39f1f610f3d1d2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 15:01:17 +0100

    McdClientProxy: if NameOwnerChanged is received before GetNameOwner returns, don't leak our unique name
    
    Previously, self->priv->unique_name would be set by NameOwnerChanged, then
    re-set by GetNameOwner (without freeing the previous value).

 src/mcd-client.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 68613da6146e90c73e8967f5d604abf31de7d090
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 15:00:00 +0100

    McdClientProxy: if set inactive, store the fact that the unique name is known to be empty
    
    Storing NULL means the unique name is unknown.

 src/mcd-client.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0c2337ea39778b2883006a1a99555564600aad88
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 14:52:13 +0100

    McdDispatcher: fix the McdDispatcherContext reference-leak
    
    We never release all the client locks if there are no channels left. As
    a result, if some client locks are held (i.e. we have taken a reference
    to the context that will be released when all locks are released), we need
    to release the reference at the point that we decide not to release the
    locks.

 src/mcd-dispatcher.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 3b260e03201fabee890b36916dd7edfb63a70d04
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 14:23:40 +0100

    McdDispatcher: make more lock pairing more explicit

 src/mcd-dispatcher.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 5820ef3a4f201a7f198856f869f11040b489cbde
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 14:18:55 +0100

    McdDispatcher: move CTXREF09 inside mcd_dispatcher_run_handlers

 src/mcd-dispatcher.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 2d99a86e6ccf8180f495a0d45b57de38e993905c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 14:17:17 +0100

    McdDispatcher: make lock-pairing more explicit

 src/mcd-dispatcher.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 4d205b63144ff9ab8b3f0b25c8c38241466b95e4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 14:14:53 +0100

    McdDispatcher: move CTXREF09 into mcd_dispatcher_run_clients

 src/mcd-dispatcher.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 014b3934c2c044e6daea91aa91de44a5a50f7fbf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 14:11:29 +0100

    McdDispatcher: fix mis-pairing of ref annotations

 src/mcd-dispatcher.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 7b5c397f5269bf83e20ad81e2895f04298bc1b78
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 14:09:22 +0100

    McdDispatcher: improve clarity of what happens to initial references

 src/mcd-dispatcher.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit 5032ebc3af0c2f859dfe4ca22795c6da7f86e12e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 13:35:04 +0100

    Temporarily ref dispatcher context around a call into user code
    
    It should never be possible for it to lose its last reference there.

 src/mcd-dispatcher.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 2f9fa6af9f035fbe30a9d10a66c5f7639204b091
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 13:28:24 +0100

    McdDispatcher: debug the initial refs on the McdDispatcherContext

 src/mcd-dispatcher.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 2924796a272df2ef49e1a0146c4cf36d1bd81a2b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 12:47:56 +0100

    McdDispatcherContext: emit CTXREF codes in debug messages when tracking down refcount issues

 src/mcd-dispatcher.c |   59 +++++++++++++++++++++++++++++++------------------
 1 files changed, 37 insertions(+), 22 deletions(-)

commit 8c0b3172186f7ab47902ca3b69fab34ef5c473b9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 12:41:23 +0100

    Add a simpler test for dispatching one undispatchable channel

 test/twisted/Makefile.am                  |    1 +
 test/twisted/dispatcher/undispatchable.py |   56 +++++++++++++++++++++++++++++
 2 files changed, 57 insertions(+), 0 deletions(-)

commit 855aae574050cdc5cad49131046efb50d8e975f4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 12:24:31 +0100

    McdDispatchOperation: make it clearer that unique_name is not leaked

 src/mcd-dispatch-operation.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d40590709d9c9f9a1919083db1b203a03a8036ea
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 12:24:18 +0100

    McdDispatchOperation: don't leak lost channels if they have not been signalled at dispose time
    
    This shouldn't ever happen, though.

 src/mcd-dispatch-operation.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit c0059c4e2c800d694c38993d5075304a62fb4bbb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 12:20:37 +0100

    McdDispatchOperation: don't leak lost channels if delaying ChannelLost emission

 src/mcd-dispatch-operation.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit bcdc7b5b08aea8e52185aaebff6ac3f53c0013d6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 11:47:28 +0100

    McdDispatcher: don't leak a ref to the AM when a channel is requested via the CD
    
    This isn't significant "in real life", only when using valgrind/refdbg.

 src/mcd-dispatcher.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 3da32e6dcc015484b80b191414adde1d5e356678
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 11:40:12 +0100

    McdConnection: correct the TpConnection refcounting
    
    _mcd_connection_release_tp_connection fails to unref the TpConnection if
    it was invalidated. In any case, what's going on is clearer if we follow
    "normal" unref rules by putting unref(thing) and thing = NULL together.
    
    We could have taken a temporary ref to the TpConnection in
    _mcd_connection_call_disconnect and released it in disconnect_cb, but
    there's actually no point - the TpConnection will do that itself,
    automatically.

 src/mcd-connection.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit dd48a1808f79ed77dae2f35211ff7ac1baff1dbd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 11:37:53 +0100

    McdAccountManager: don't leak a TpConnection every time we clean up a lost-in-space connection
    
    Note that this is safe to do: the proxy isn't needed because the callback
    will never be called (and if there was a callback, the TpConnection would
    reference itself for the duration of the call to ensure that it survived
    until just after the callback).

 src/mcd-account-manager.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 52ef84f7288c6101beac3bf16f0bcc83e041bc68
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 11:23:59 +0100

    McdDispatcher: don't leak one ref to the dispatcher per Connection monitored
    
    This is not a concern "in real life", only when running MC under
    valgrind/refdbg.

 src/mcd-dispatcher.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 845500f287cc520772139ea786e01aa72641bc20
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-28 11:15:19 +0100

    mc-debug-server: only linger for 5 seconds by default (adjust via $MC_LINGER_TIME)
    
    5 seconds should be plenty, in practice - all our D-Bus calls will fail
    because we've been disconnected.

 test/twisted/mc-debug-server.c |   13 +++++++++----
 1 files changed, 9 insertions(+), 4 deletions(-)

commit 2a0893f8e1e036b55a0003044f737c4732c9df9b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 17:49:36 +0100

    Use tp_dbus_daemon_request_name now we depend on a new enough tp-glib

 src/mcd-account-manager.c |    6 ++--
 src/mcd-dispatcher.c      |    6 ++--
 src/mcd-misc.c            |   70 ---------------------------------------------
 src/mcd-misc.h            |    5 ---
 src/mcd-service.c         |    6 ++--
 5 files changed, 9 insertions(+), 84 deletions(-)

commit 525c9a213132069cccb53843556aa2cd5ef75f57
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 17:19:40 +0100

    Require telepathy-glib 0.7.31 for the bugfixes made in that version

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e4063f3416f71dd525c5e8b966ab84e3aaa6b674
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 13:52:02 +0100

    mc-debug-server: after disconnection from the bus, tear everything down, and wait for no more events
    
    Doing this under valgrind uncovered various problems, fixed in earlier
    patches. It also requires some bug fixes in telepathy-glib, which will
    be released in 0.7.30.

 test/twisted/mc-debug-server.c |   42 ++++++++++++++++++++++++++++++---------
 1 files changed, 32 insertions(+), 10 deletions(-)

commit d67d55cbfeccaed8bbb025878f1976e6e1bfeae2
Merge: 75bf385 c0b9181
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 15:37:36 +0100

    Merge branch 'valgrind'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 75bf3856f99198b102d278a34c4fb44913a2304f
Merge: 5130b84 98fcc61
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 15:37:20 +0100

    Merge branches 'client-death' and 'client-death-fixes'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 5130b84449774bca3608c06bd87038fa411b165f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 15:36:43 +0100

    Revert "tests: Provide a fake activatable Telepathy client (simulating AbiWord with stream tubes)"
    
    This reverts commit b311615795611406c7916ff9c92bf4a2c8214efe.
    
    This commit was mistakenly included when rebasing: it adds a generated
    file to git.

 ...rg.freedesktop.Telepathy.Client.AbiWord.service |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit e5d39759b3fede9652285a8b7b6283905365ad87
Merge: 0334e84 471e6cc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 15:36:26 +0100

    Merge branch 'handled-channels'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 0334e84e7bf62deb370aa0a99ce3e97790c3c2a3
Merge: 40c8400 632d2fc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 15:36:00 +0100

    Merge branch 'client-discovery'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit c0b918113c472a0bffe27a5dab5adfa8e7ae9ebc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 13:49:40 +0100

    dispatcher/create-at-startup.py: make a bit more robust against races by using the activatable name
    
    Unfortunately, this test still fails under valgrind: RequestConnection is
    called before the McdAccount has been loaded (!), so it's called with no
    CM parameters.

 test/twisted/dispatcher/create-at-startup.py |   18 ++----------------
 1 files changed, 2 insertions(+), 16 deletions(-)

commit fdc3822925c529e3332b4fea63dedd62f51cba00
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 13:18:45 +0100

    McdAccountManager: make sure write_conf_id gets cancelled during teardown
    
    Previously this was a use-after-free: the configuration is forced to be
    written during finalize, then GKeyFile is freed, then the timer goes off
    later and the freed GKeyFile is used again.

 src/mcd-account-manager.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 939439ff7b5be435b0b6c78d7b51d3961c348b4b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 13:17:04 +0100

    crash-recovery/crash-recovery.py: don't fail if ObserveChannels comes in before the AM bus name appears
    
    This failure mode was observed while valgrinding MC.

 test/twisted/crash-recovery/crash-recovery.py |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 5080dba694f61ddcadf7e03bb157a49c7d2e7d25
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 12:55:33 +0100

    account-manager/auto-connect.py: be robust against MC being very slow
    
    These changes are necessary for the test to pass under valgrind.

 test/twisted/account-manager/auto-connect.py |   13 ++++++++-----
 1 files changed, 8 insertions(+), 5 deletions(-)

commit 76f73a0620a1184001704d6c06790471174c3793
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 12:55:05 +0100

    Run each test with MC writing to its own temporary directory
    
    This avoids having to worry about whether accounts.cfg is still around
    from a previous run.

 .gitignore               |    1 +
 test/twisted/Makefile.am |   47 ++++++++++++++++++++++++++++++++-------------
 2 files changed, 34 insertions(+), 14 deletions(-)

commit 541dd4ab9e5a7e84426441c84004701793d5667a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 19:09:19 +0100

    McdDispatcher: don't leak the connections hash table
    
    This is only one leak per process, though.

 src/mcd-dispatcher.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit b8236c4ec80024c7d34dce08c7160818bedfee40
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 19:04:22 +0100

    McdDispatcher: don't leak a hash table per Observer per ObserveChannels invocation

 src/mcd-dispatcher.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 1678057ec28d5964c437cd0b3edd9c87598c187b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 19:01:37 +0100

    exec-with-log.sh.in: show reachable objects when valgrinding

 test/twisted/tools/exec-with-log.sh.in |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 7df1937bbaf27525c138e4da06c84c680a8554ce
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 19:01:24 +0100

    account-manager/presence.py: don't fail when valgrinding
    
    Some AccountPropertyChanged signals that are normally combined may end up
    separate when valgrinding (it's that much slower).

 test/twisted/account-manager/presence.py |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 157b55f50d8741294782c729c51d34cd29c86596
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 19:00:44 +0100

    McdMaster: don't leak hash table of extra parameters

 src/mcd-master.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 15146f5b732f52ec099848376c67162c86f07ee7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 19:00:30 +0100

    McdChannel: if changing error, don't leak the previous one

 src/mcd-channel.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit f6995540728bc3919eb632374154505b39dadd04
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 19:00:09 +0100

    McdAccountManager: don't leak account connections directory

 src/mcd-account-manager.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 1a040de28060d32b78da01bca17f0ca2c6e4832f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 18:22:31 +0100

    McdDispatcher: don't iterate over a channel list that will be modified during iteration
    
    This fixes a valgrind warning.

 src/mcd-dispatcher.c |   13 +++++++++++--
 1 files changed, 11 insertions(+), 2 deletions(-)

commit 8e23b452a147627092ba64191b934891227f08d1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 18:05:26 +0100

    McdClient: don't leak the links from filter lists

 src/mcd-dispatcher.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit cca17f83cd574a8ced8cf0c8508bb51009a67a8e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 17:55:36 +0100

    McdDispatchOperation: move a simple memory-free from dispose to finalize

 src/mcd-dispatch-operation.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 98fcc6133d4da6c4be50a79e36531909d060d273
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 14:07:53 +0100

    McdClientProxy: remove readability of unique-name property
    
    We have a "C binding", which is all that MC actually needs, and Alberto
    requested that the readable property be removed.

 src/mcd-client.c |   22 +---------------------
 1 files changed, 1 insertions(+), 21 deletions(-)

commit 1ae20b06e9a5be0aae5fffd11895a722ac172b91
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 14:04:29 +0100

    dispatcher/dispatch-text.py: assert that a channel owned by Kopete is not terminated when Empathy crashes

 test/twisted/dispatcher/dispatch-text.py |   81 +++++++++++++++++++++++++++++-
 1 files changed, 79 insertions(+), 2 deletions(-)

commit 91b2d610523b3bb4200ed6edc76a77ef3340a29e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 14:03:50 +0100

    McdHandlerMap: only terminate the channels owned by the crashing handler!

 src/mcd-handler-map.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit 470c32bd1538b5551cef7c8bfe32b5e32e2bd246
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 14:03:23 +0100

    dispatcher/dispatch-text.py: correctly claim the second channel on behalf of the fake Empathy, not on behalf of the test suite

 test/twisted/dispatcher/dispatch-text.py |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit c4e6659df6daffb09285f73c8d397aeba682143c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 12:13:30 +0100

    McdHandlerMap: simplify logic for incrementing handler-process use counter
    
    In the process, don't leak a copy of the unique name if incrementing from
    >= 1.
    
    As suggested during code review.

 src/mcd-handler-map.c |   14 +++++---------
 1 files changed, 5 insertions(+), 9 deletions(-)

commit 839bff42e7ce650a6a0511948d4bfe5f03d432ca
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-27 12:12:17 +0100

    McdHandlerMap: correct a comment
    
    The handler map (currently) holds McdChannel objects, not TpChannel objects.

 src/mcd-handler-map.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4f3453e450ab425d25bfacd279bb9b1c50037c18
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 17:55:17 +0100

    McdDispatchOperation: don't leak the handler that claimed the channels, if any

 src/mcd-dispatch-operation.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e1322b90e08bcb5e6d8df7508089be8b80fbeb68
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 13:47:58 +0100

    Add a regression test for closing handled channels when the handler exits

 test/twisted/dispatcher/dispatch-text.py |   33 ++++++++++++++++++++++++++---
 test/twisted/mctest.py                   |    3 ++
 2 files changed, 32 insertions(+), 4 deletions(-)

commit 98ab65f5e9b6d160020f4c30b4f827db86fb4eb0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 15:57:39 +0100

    fd.o #21175: McdDispatcher: track channel handlers using McdHandlerMap
    
    As a consequence, channels Claim()ed by an Approver are closed if that
    approver exits, and channels accepted by a Handler are closed if that
    handler exits.

 src/mcd-dispatcher.c |  177 ++++++++++++++++++++++++++++++++------------------
 1 files changed, 113 insertions(+), 64 deletions(-)

commit c9bdb6e0ff7862418b0a7c78eda9d2c6cc65c229
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 15:31:00 +0100

    McdHandlerMap: new class tracking the relationship between handlers and channels

 src/Makefile.am            |    2 +
 src/mcd-handler-map-priv.h |   84 +++++++++++++
 src/mcd-handler-map.c      |  278 ++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 364 insertions(+), 0 deletions(-)

commit 1c1b48cc9247166e72274e239390d7ef86f3cad4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 13:54:02 +0100

    McdDispatcher: tell McdClientProxy when it becomes active/inactive

 src/mcd-client-priv.h |    4 ++++
 src/mcd-client.c      |   19 +++++++++++++++++++
 src/mcd-dispatcher.c  |    9 ++++++++-
 3 files changed, 31 insertions(+), 1 deletions(-)

commit 7acac3209e169e2876fc082fffa35573713dffc5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 13:43:21 +0100

    McdDispatchOperation: add an accessor for the unique name of the process that claimed us

 src/mcd-dispatch-operation-priv.h |    2 ++
 src/mcd-dispatch-operation.c      |   15 ++++++++++++---
 2 files changed, 14 insertions(+), 3 deletions(-)

commit e56aebd4d1ced949614d8b4135a75eb5fc615936
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 13:07:14 +0100

    dispatcher/dispatch-text.py: be a little more realistic by giving the two clients a unique name each

 test/twisted/dispatcher/dispatch-text.py |   27 ++++++++++++++++-----------
 1 files changed, 16 insertions(+), 11 deletions(-)

commit 49c63c53deefbfa08f44d4b9aea251f755371231
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 13:03:56 +0100

    In tests that start up MC late, wait for it to take its bus names

 test/twisted/crash-recovery/crash-recovery.py |   14 ++++++++++++++
 test/twisted/dispatcher/create-at-startup.py  |   15 +++++++++++++++
 2 files changed, 29 insertions(+), 0 deletions(-)

commit 1a9b2d5b5b3d72eced776d5a7c4bf9b3464c4bd4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 13:02:30 +0100

    servicetest, mctest: add support for Clients being on more than one bus

 test/twisted/mctest.py      |   38 ++++++++++++++--------
 test/twisted/servicetest.py |   75 +++++++++++++++++++++++++++++++++---------
 2 files changed, 83 insertions(+), 30 deletions(-)

commit 471e6cc27a17376bb172f0f8c76a3e93a3d89d57
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 17:35:49 +0100

    McdClientProxy: pre-load unique name if known

 src/mcd-client-priv.h |    3 +-
 src/mcd-client.c      |   60 ++++++++++++++++++++++++++++++++++++++++++++++++-
 src/mcd-dispatcher.c  |   16 +++++++-----
 3 files changed, 70 insertions(+), 9 deletions(-)

commit 07c640f1c7b2b0f0ff74c2d32104c418652ba298
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 17:20:54 +0100

    dispatcher/create-at-startup.py: resurrect the assertion that ObserveChannels occurs in the right order

 test/twisted/dispatcher/create-at-startup.py |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)

commit 38ea5847d7ca2171b510a1f47e74454af13461c8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 17:20:07 +0100

    McdDispatcher: stop doing the now-useless Get(HANDLER, "HandledChannels") call

 src/mcd-dispatcher.c |  136 ++++++++++---------------------------------------
 1 files changed, 28 insertions(+), 108 deletions(-)

commit 11290335b6d686472ff29ae9de3afae9b6ed1896
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 17:00:09 +0100

    tests: stop asserting that MC will call Get(HANDLER, "HandledChannels")
    
    Previously, we asserted that it would be called. Now, we allow it to be
    called, and return the right thing, but don't fail if this doesn't happen.
    
    This means we no longer have precise control over the order of events in
    dispatcher/create-at-startup.py, so we can't assert that ObserveChannels
    for the request and the incoming channel are called in the right order.
    Temporarily disable that assertion.

 test/twisted/Makefile.am                           |    1 -
 .../crash-recovery/client-crash-during-recovery.py |  109 --------------------
 test/twisted/crash-recovery/crash-recovery.py      |   10 --
 test/twisted/dispatcher/already-has-channel.py     |   17 ---
 test/twisted/dispatcher/already-has-obsolete.py    |   17 ---
 test/twisted/dispatcher/create-at-startup.py       |   16 +--
 test/twisted/mctest.py                             |    6 +
 7 files changed, 12 insertions(+), 164 deletions(-)

commit 78596361c03d9ea157906c5a174db53c633d635c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-22 16:26:05 +0100

    McdDispatcher: harvest HandledChannels from the GetAll(HANDLER) result
    
    For the moment keep calling Get(HANDLER, "HandledChannels") since the
    regression tests rely on it, but instead of using the result, just assert
    that we already know the answer.

 src/mcd-dispatcher.c |   58 +++++++++++++++++++++++++++++--------------------
 1 files changed, 34 insertions(+), 24 deletions(-)

commit 6c4936106bff9c6f07a0c22af2c662700b943149
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 16:50:38 +0100

    McdDispatcher: if an activatable Handler is running, call GetAll(HANDLER)
    
    This will eventually be used to check whether it is handling any channels.

 src/mcd-dispatcher.c |   26 ++++++++++++++++++++++++++
 1 files changed, 26 insertions(+), 0 deletions(-)

commit 3993f13282a58e794355d539962a89a7dbe05156
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 16:49:50 +0100

    McdClientProxy: add accessors for "is active" and unique name

 src/mcd-client-priv.h |    4 ++++
 src/mcd-client.c      |   19 +++++++++++++++++++
 2 files changed, 23 insertions(+), 0 deletions(-)

commit 6dae94df1637bd3959dba108ceee7abcd0548079
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 16:38:05 +0100

    McdDispatcher: wait for unique name of client to be discovered before introspecting it

 src/mcd-dispatcher.c |   25 +++++++++++++++++++++++--
 1 files changed, 23 insertions(+), 2 deletions(-)

commit 526336639cbdaa91fb8faee0a150e69d6404211e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 16:37:28 +0100

    McdClient: look up unique name on construction, and emit "ready" when done

 src/mcd-client.c |   85 +++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 84 insertions(+), 1 deletions(-)

commit 4d09d4059d3db7e7ccffb6a3a5d54c00852d0497
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 15:46:30 +0100

    McdDispatcher: separate create_mcd_client from new function mcd_client_start_introspection

 src/mcd-dispatcher.c |   39 ++++++++++++++++++++++++---------------
 1 files changed, 24 insertions(+), 15 deletions(-)

commit b311615795611406c7916ff9c92bf4a2c8214efe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 14:53:32 +0100

    tests: Provide a fake activatable Telepathy client (simulating AbiWord with stream tubes)

 ...rg.freedesktop.Telepathy.Client.AbiWord.service |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 632d2fc89b344d4cf032582bb59e1315c8f91d58
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 15:30:45 +0100

    Add a regression test for dispatching to an activatable client

 test/twisted/Makefile.am                        |    1 +
 test/twisted/dispatcher/dispatch-activatable.py |  114 +++++++++++++++++++++++
 2 files changed, 115 insertions(+), 0 deletions(-)

commit 6236c83afd776c2b038107d7c24da0f67426238a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-26 16:34:42 +0100

    tests: Provide a fake activatable Telepathy client (simulating AbiWord with stream tubes)

 .gitignore                                    |    2 +-
 test/twisted/Makefile.am                      |    1 +
 test/twisted/telepathy/clients/AbiWord.client |    6 ++++++
 test/twisted/tools/Client.AbiWord.service.in  |    3 +++
 test/twisted/tools/Makefile.am                |   10 +++++++---
 test/twisted/tools/fake-startup.sh            |    5 +++++
 6 files changed, 23 insertions(+), 4 deletions(-)

commit b42d64edcb91290155f608c8fd7b7753cb7c0ce1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 14:52:54 +0100

    servicetest: subscribe to *all* signals, not just MC ones

 test/twisted/servicetest.py |   33 +++++++++++++++++----------------
 1 files changed, 17 insertions(+), 16 deletions(-)

commit e6d1fb618a2aec1d7678e84e1947418dcaaeda62
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 14:52:22 +0100

    McdChannel: improve debug when closing channels

 src/mcd-channel.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit a0902ee7f8457e84a3141f565010ad1267fdcb0c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 12:39:28 +0100

    name_owner_changed_cb: simplify string comparisons
    
    We don't need to be so defensive here: dbus-glib guarantees that the
    strings are non-NULL, so assert that and carry on with our lives.

 src/mcd-dispatcher.c |   15 ++++++++++-----
 1 files changed, 10 insertions(+), 5 deletions(-)

commit 0411d4ba61a5d466efc4eff95c740058cb0e302b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 12:35:30 +0100

    McdDispatcher: make mcd_dispatcher_add_clients singular
    
    Also handle errors from ListNames and ListActivatableNames, and treat
    atomic name ownership change like an exit + startup pair by recursing.

 src/mcd-dispatcher.c |  139 ++++++++++++++++++++++++++++++--------------------
 1 files changed, 83 insertions(+), 56 deletions(-)

commit 93b44dd245e3bff57646e5e8fbd00366857ec1a5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-25 12:24:01 +0100

    McdDispatcher: serialize calls to ListNames and ListActivatableNames
    
    They should both be happening "quickly", and forcing ListNames to complete
    before ListActivatableNames completes means that we will deal with
    clients that are both running and activatable as though they were
    running (which involves a bit of extra processing).
    
    Also rename new_names_cb to mcd_dispatcher_add_clients for clarity, and
    eliminate an unnecessary g_strdup/g_free pair.

 src/mcd-dispatcher.c |   39 +++++++++++++++++++--------------------
 1 files changed, 19 insertions(+), 20 deletions(-)

commit 850e6b666bafa097756ef6bf5f833a1830c43743
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-22 16:12:08 +0100

    McdDispatcher: declare it to be an error to call _mcd_dispatcher_recover_channel before dispatching has started
    
    McdConnection doesn't, so this assertion should never be hit.
    
    This means that if we promote the download of HandledChannels to happen
    before dispatching starts, we'll no longer need to wait for it.

 src/mcd-dispatcher.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit ba251d640d9480b9ea3f55e8ec84ac30d1394c7b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-22 15:13:43 +0100

    McdClientProxy: new subclass of TpProxy to use for Client proxies
    
    Also, syntax-check Client bus names.

 src/Makefile.am       |    2 +
 src/mcd-client-priv.h |   82 +++++++++++++++++++++++++++++
 src/mcd-client.c      |  138 +++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-dispatcher.c  |   53 ++++++++-----------
 4 files changed, 244 insertions(+), 31 deletions(-)

commit 01ed966a2446a10965c2a8dfa527051b4390cbd0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-22 17:56:18 +0100

    crash-recovery/crash-recovery.py: correctly report a handled channel in GetAll output

 test/twisted/crash-recovery/crash-recovery.py |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 63ac2cfc54f1ba2d0e5d87553274fed0b64aaf36
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-22 17:56:04 +0100

    dispatcher/already-has-obsolete.py: do not assert that MC knows all the channel's properties
    
    ListChannels provides an incomplete set and MC is not guaranteed to
    download the rest.

 test/twisted/dispatcher/already-has-obsolete.py |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 82ff60b0691b713fb147b11c665e0f0d0a7ef618
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-22 17:55:47 +0100

    McdConnection: turn ListChannels output into immutable properties correctly
    
    This off-by-one error in parsing the GValueArray was previously masked by
    the fact that there was time to re-download the Channel's immutable
    properties before it was dispatched. Some refactoring in McdDispatcher
    makes this fail.

 src/mcd-connection.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 40c840080fc3d27273fb6d26e51fcca77462300a
Merge: cc17082 efa4c87
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-22 11:12:58 +0100

    Merge branch 'connection-coverage'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit efa4c871227135746595d48e5a5ad95f1abc4290
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 18:42:52 +0100

    Add a simple regression test for presence manipulation

 test/twisted/Makefile.am                 |    1 +
 test/twisted/account-manager/presence.py |   67 ++++++++++++++++++++++++++++++
 2 files changed, 68 insertions(+), 0 deletions(-)

commit 1bb6c021cc0ba271dd287da62655057a948b6c13
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 18:35:40 +0100

    enable_fakecm_account: add support for not forcing presence to available

 test/twisted/mctest.py |   17 +++++++++++------
 1 files changed, 11 insertions(+), 6 deletions(-)

commit 463ee330478862be020a37fbbe5451f3d8fe2a67
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 17:32:50 +0100

    account-manager/auto-connect.py: verify that the Nickname property is loaded correctly from saved accounts

 test/twisted/account-manager/auto-connect.py |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit ef9e5a1f431af6e4caf3ca7d6278976453e9bf64
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 17:32:26 +0100

    account-manager/nickname.py: Add a regression test for the Nickname property

 test/twisted/Makefile.am                 |    1 +
 test/twisted/account-manager/nickname.py |   59 ++++++++++++++++++++++++++++++
 2 files changed, 60 insertions(+), 0 deletions(-)

commit 21b8be5b4a1bbe172fda16591ede332aea91d579
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 17:29:37 +0100

    enable_fakecm_account: add the ability to expect events after CONNECTED

 test/twisted/mctest.py |   27 +++++++++++++++++++--------
 1 files changed, 19 insertions(+), 8 deletions(-)

commit 047d33fd24cf1b4e468a00b23e516146ffd77e9f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 17:19:12 +0100

    SimulatedConnection: Add trivial support for aliasing and avatars interfaces

 test/twisted/constants.py |    2 +
 test/twisted/mctest.py    |   50 ++++++++++++++++++++++++++++++++++++++++++--
 2 files changed, 49 insertions(+), 3 deletions(-)

commit 6d80c866cb581a3e41db95f8122ce24999690d1e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 16:39:02 +0100

    mctest: allow enable_fakecm_account to make connections with simple presence

 test/twisted/mctest.py |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 81f3a747fd26c092d6c555e1a3a9fb6c860d202f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 16:23:52 +0100

    account-manager/auto-connect.py: add regression test for signing in on MC startup

 test/twisted/Makefile.am                     |    1 +
 test/twisted/account-manager/auto-connect.py |   97 ++++++++++++++++++++++++++
 2 files changed, 98 insertions(+), 0 deletions(-)

commit 615a7e0480341c6265e3388531af03c2fbe2f6a6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 16:22:11 +0100

    mctest: implement part of SimplePresence

 test/twisted/mctest.py |   36 ++++++++++++++++++++++++++++++++++--
 1 files changed, 34 insertions(+), 2 deletions(-)

commit cc170820ef99995bacdde77b7269eadaaecdc442
Merge: 2a72167 9ac33a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 14:46:35 +0100

    Merge branch 'cdo-coverage'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 9ac33a1f934b29315164e74d01197d5470fa794d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:41:08 +0100

    McdDispatchOperation: assert that we don't set dbus-daemon twice
    
    dbus-daemon is a construct-only property, so setting it twice would be a
    bug.
    
    (Spotted via lcov.)

 src/mcd-dispatch-operation.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 393adfd38117215750a0b2dab46b48eacfe0a91e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:35:20 +0100

    dispatcher/dispatch-text.py: exercise ChannelDispatchOperation property-getting

 test/twisted/dispatcher/dispatch-text.py |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit f7fd54a9e505555de17078b2795dbf314089f739
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:31:10 +0100

    dispatcher/dispatch-text.py: exercise HandleWith with invalid Client names

 test/twisted/dispatcher/dispatch-text.py |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit ed58c229ec0c746c798157e71ef3f82394e1fbf7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:30:45 +0100

    McdDispatchOperation: fix confusing variable name
    
    The argument to HandleWith is a bus name, not an object path, so call it
    handler_name rather than handler_path.

 src/mcd-dispatch-operation.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit a90bc4ba8d1e6e278af315a01967f4e8435825c4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:29:46 +0100

    McdDispatchOperation: reject syntactically invalid client bus names

 src/mcd-dispatch-operation.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 53c656636d6830eccf99640e3a7e1148d8abe7b7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:12:50 +0100

    McdDispatchOperation: use g_str_has_prefix rather than strncmp for clarity

 src/mcd-dispatch-operation.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit fcfdb9ba24694704082fd5698c46de643f06d084
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:23:58 +0100

    Add a regression test for the ChannelDispatchOperation.Claim() method

 test/twisted/dispatcher/dispatch-text.py |  112 ++++++++++++++++++++++++++++++
 1 files changed, 112 insertions(+), 0 deletions(-)

commit 2a721679fa5d6cf0cdc614c4366580213db10207
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:37:55 +0100

    Post-release version bump (apparently mardy forgot this time)

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5663d900f20dd77c072906e69fb73c4550ea3461
Merge: a629df8 eab74cf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-20 10:08:35 +0100

    Merge branch 'plugins'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit eab74cfed8cf9a32797b7915c15914d497c517b2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-19 17:50:04 +0100

    Explain why the libtool command line for the test plugin is so long

 test/twisted/Makefile.am |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 81eefc8cee75bf2a94598b79753f22ef25f9198d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-19 17:47:12 +0100

    Add a regression test for plugins rejecting channels

 test/twisted/Makefile.am                           |    1 +
 .../dispatcher/dispatch-rejected-by-plugin.py      |  110 ++++++++++++++++++++
 2 files changed, 111 insertions(+), 0 deletions(-)

commit bab3e09fb81624e1afebc5f5a4d02713ac742678
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-18 17:25:18 +0100

    test: add an example filter plugin

 test/twisted/Makefile.am   |    5 +++
 test/twisted/test-plugin.c |   78 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 83 insertions(+), 0 deletions(-)

commit 9412cffb8af07fb6ff4b7a63a15c22caddae0a28
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-19 17:17:15 +0100

    Improve diagnostics while loading plugins

 src/mcd-master.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 71d9fa1ed8d4abc7335467d264e5e948cd017fdf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-18 17:25:00 +0100

    mcd-plugin.h: make self-contained by including glib.h

 src/mcd-plugin.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 426b967b2ecaadb051a08f670b8e75b60b16b6ab
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-18 17:01:59 +0100

    Regression tests: load plugins from @top_builddir@/test/twisted

 test/twisted/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit c1f2d17b1ff47edc41b3fdd2658f315065d5d06a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-18 16:47:04 +0100

    McdMaster: allow plugin location to be overridden in the environment

 src/mcd-master.c |   21 ++++++++++++++++++---
 1 files changed, 18 insertions(+), 3 deletions(-)

commit a629df883c12cc67a4c82dce6cb29be76117579d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-19 15:20:19 +0300

    Version 5.0.beta72

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1140b62153bb6cc74d669fed97648d1975252b9b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-19 15:15:42 +0300

    Force linkinking of scanner to libmcclient

 doc/reference/libmissioncontrol-server/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 285b7714bfbd50a865dfc5530faa74544c9847ff
Merge: 643defb 52aba77
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-19 13:09:43 +0100

    Merge branch 'distcheck'

commit 52aba770079e3e85ee27ee610f01b8f5a47a6aa0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-19 13:06:57 +0100

    Correctly delete all files created by the tests

 test/twisted/Makefile.am       |    2 ++
 test/twisted/tools/Makefile.am |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit fc534f1d5f15146f25779bc3813a155dd0ef3a0e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-19 13:06:06 +0100

    Distribute separately-run tests as well as combinable tests

 test/twisted/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 643defb26a8a8519de2326538857ee7a893ea4b5
Merge: 5508c18 8a4e42f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-19 15:02:54 +0300

    Merge branch 'channel_error'

commit 5508c181e18f65783e5f5c824ee1a26982307840
Merge: 0828ab7 3a01d9e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-19 12:42:13 +0100

    Merge branches 'dispatcher-disentangle' and 'deletion'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 8a4e42ff6bd431dacdec3ece41a9301892cd54d1
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-19 11:40:43 +0300

    Get errors from the TpProxy
    
    If the channel is aborted because of the TpProxy "invalidated" signal, there
    might be no error on the McdChannel: it must be retrieved from the TpProxy.

 src/mcd-channel.c |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit 3a01d9ea30a81badc0f7e47ef29c3d3c1c3fe19d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-18 15:27:43 +0100

    Remove _mcd_xdg_data_subdir_foreach (unused)

 src/mcd-misc.c |   59 --------------------------------------------------------
 src/mcd-misc.h |    7 ------
 2 files changed, 0 insertions(+), 66 deletions(-)

commit cc9c402baeee5d9f59165950ae9fa0106fcce4c9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-18 14:36:20 +0100

    McdChannel: remove some cruft previously needed for pre-Requests support

 src/mcd-channel-priv.h |    8 ------
 src/mcd-channel.c      |   65 +----------------------------------------------
 src/mcd-channel.h      |    1 -
 3 files changed, 2 insertions(+), 72 deletions(-)

commit 5764dd9d0dbde9931706c756a7b634bbfa56a155
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-18 11:53:27 +0100

    Add a regression test for channel creation during MC startup
    
    * assert that channels created before the dispatching process has fully
      started can still be observed
    * assert that CreateChannel isn't called until the dispatching process has
      fully started (i.e. clients have been discovered) so requested channels
      can always be observed too

 test/twisted/Makefile.am                     |    3 +-
 test/twisted/dispatcher/create-at-startup.py |  220 ++++++++++++++++++++++++++
 2 files changed, 222 insertions(+), 1 deletions(-)

commit e3e3c6c8d26b0e1bd983e6fd098e24e54a3a11c4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-18 11:51:01 +0100

    McdDispatcher, McdConnection: wait for dispatcher to be ready before starting dispatcher processing on connections
    
    Also add some debug regarding the dispatcher's startup process.

 src/mcd-connection-priv.h |    2 +
 src/mcd-connection.c      |   23 ++++++++++++--
 src/mcd-dispatcher-priv.h |    4 ++
 src/mcd-dispatcher.c      |   72 +++++++++++++++++++++++++++++++++++++++++++--
 4 files changed, 94 insertions(+), 7 deletions(-)

commit 0828ab73e3cbcc25f08eb78bab076405361ec1db
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-18 09:36:56 +0300

    Support parameter with longer names
    
    It's not totally unlikely that a parameter name is longer than 64 characters,
    especially if it's a dbus_property parameter. So, use the
    DBUS_MAXIMUM_NAME_LENGTH macro (currently 255) as a reference.

 src/mcd-account.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f5c6c4d748df8a5f8242b47f2059bd703d451c00
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 18:43:30 +0100

    McdConnection: rename can_dispatch to dispatched_initial_channels
    
    This better describes its meaning.

 src/mcd-connection.c |   15 ++++++++-------
 1 files changed, 8 insertions(+), 7 deletions(-)

commit b6fc3099b3eb05d4b3b62e93751d7b6bf08bb846
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 18:30:09 +0100

    Add a regression test for already having a channel, without Requests

 test/twisted/Makefile.am                        |    1 +
 test/twisted/dispatcher/already-has-obsolete.py |  214 +++++++++++++++++++++++
 2 files changed, 215 insertions(+), 0 deletions(-)

commit 6fc6582b4ec056045b692df514a23311f4293f3f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 18:24:05 +0100

    mctest: expect ListChannels to be called during Connection setup

 test/twisted/mctest.py |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 44e639282b2e59def3ad438fb4a1f6fa06810b6d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-29 15:23:17 +0100

    McdConnection: don't connect to NewChannel until we know Requests is unsupported

 src/mcd-connection.c |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

commit 2fccd77c8df12bf109ddc2888e232e0ca4dc384b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-29 15:18:01 +0100

    McdConnection: ignore NewChannel until we know whether we have Requests
    
    Before Requests became mandatory, this was a minor optimization and a
    questionable correctness fix: MC could remember whether legacy channels
    had Suppress_Handler or not, and avoided calling ListChannels.
    
    Not calling ListChannels avoided accidentally dispatching old channels
    which in fact had Suppress_Handler (before Requests, this information
    couldn't be recovered) but potentially meant that we failed to dispatch
    old undispatched channels that did not have Suppress_Handler, so we can't
    really win.
    
    Now that we expect all CMs to implement Requests, this code is just
    confusing. Getting rid of it means that channels which appear before
    the TpConnection is ready will cause crash-recovery code to be invoked,
    altering the behaviour of one of the tests, so I've adjusted the test to
    reflect this.
    
    This does mean we'll potentially re-dispatch channels that are already
    being handled by a handler that is not a Client, but as noted above, with
    pre-Requests CMs we can't win anyway.

 src/mcd-connection.c                           |   35 +-----------------------
 test/twisted/dispatcher/already-has-channel.py |   17 +++++++++++
 2 files changed, 18 insertions(+), 34 deletions(-)

commit 5cc74145a8384f6d0590b446d4ccb75e785f88af
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-29 15:07:41 +0100

    McdConnection: remove redundant variables and debug-log the output of ListChannels

 src/mcd-connection.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit 11d79f81b7b50893cc663f232084f5e7f7745b93
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 18:19:42 +0100

    McdConnection: remove vestigial McdTmpChannelData struct

 src/mcd-connection.c |   20 --------------------
 1 files changed, 0 insertions(+), 20 deletions(-)

commit 182eb861bcef23f4b13eecb2af9ce530aef16e9e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 18:19:28 +0100

    McdConnection: debug-log the channels from GetAll(Requests)

 src/mcd-connection.c |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit 0aafeeaf46e1ea7b7e319456b27e464d3f0ad9cf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 18:18:44 +0100

    mctest: fix requestsless connections

 test/twisted/mctest.py |   15 ++++++++++-----
 1 files changed, 10 insertions(+), 5 deletions(-)

commit 5fd8c3ab780a10bdce366167e82addc2f70de525
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-29 14:38:01 +0100

    McdConnection: for old pre-Requests CMs, behave as for Requests - bind to the signal then download the list

 src/mcd-connection.c |  104 ++++++++++++++++++++++++++++++--------------------
 1 files changed, 62 insertions(+), 42 deletions(-)

commit f113c3ed041a58ef391a9ec90bac5cf6a2e7ce1d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-29 14:29:21 +0100

    McdConnection: factor out processing of each channel from get_all_requests_cb

 src/mcd-connection.c |  103 +++++++++++++++++++++++++++-----------------------
 1 files changed, 56 insertions(+), 47 deletions(-)

commit 23511bfa8367e85637773b70d240abd35264695f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 17:55:50 +0100

    McdDispatcher: add a concept of blocking dispatching until initial clients are ready
    
    This doesn't do actually delay anything yet.

 src/mcd-dispatcher.c |   76 ++++++++++++++++++++++++++++++++++++++++++++-----
 1 files changed, 68 insertions(+), 8 deletions(-)

commit 12d4b387520ec8fd787f3cbaf97b765e6760aee3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 17:53:45 +0100

    SimulatedClient: add support for not responding to GetInterfaces
    
    This lets regression tests delay a client becoming usable.

 test/twisted/mctest.py |   26 ++++++++++++++------------
 1 files changed, 14 insertions(+), 12 deletions(-)

commit 7579fe2ede541a23c08b0e924bdffbe4c02cda33
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 17:52:58 +0100

    constants: add MC's bus name and object path

 test/twisted/constants.py |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit b3bb0577b7f7149e5d0ba8276583ebd1e46c5593
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 17:52:45 +0100

    Add a regression test for dispatching obsolete (non-Requests) connections

 test/twisted/Makefile.am                     |    1 +
 test/twisted/dispatcher/dispatch-obsolete.py |  165 ++++++++++++++++++++++++++
 2 files changed, 166 insertions(+), 0 deletions(-)

commit a0b7eff7e129d4f35f712730fda31f5b8c4bb09c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 17:52:20 +0100

    tests: in simulated Connection, add support for not having Requests

 test/twisted/mctest.py |   56 +++++++++++++++++++++++++++++++++--------------
 1 files changed, 39 insertions(+), 17 deletions(-)

commit b09757196241e7c68fbf0a2a63418bbf2539794c
Merge: 707ae21 4b08472
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 15:21:04 +0100

    Merge branch 'cachedir-fix'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 4b0847281d1905c8b4c96c152536534e54eb9988
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 13:19:01 +0100

    Create directory to store account <-> connection mapping if it doesn't exist
    
    This is for the new default behaviour in which it's the freedesktop.org
    cache directory (most likely, ~/.cache) which might not yet exist.
    
    Errors aren't checked here - if g_mkdir_with_parents fails, so will fopen
    anyway, and the failure mode is just "don't store the mapping".

 src/mcd-account-manager.c |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit 63bfa91dc04eabd7ac260aae3590077ec6792f71
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 13:07:25 +0100

    configure.ac: fix --with-accounts-cache-dir option

 configure.ac |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 707ae2142d7b1fccc3c59905f7cb468bfe67182e
Merge: 95e885f ae85c7d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-15 12:53:32 +0100

    Merge branches 'creation' and 'recovery'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit ae85c7de1a79765ffaee075453f9faa64d6b7ee9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 19:48:47 +0100

    Add a regression test for Get("HandledChannels") failing during recovery

 test/twisted/Makefile.am                           |    3 +-
 .../crash-recovery/client-crash-during-recovery.py |  109 ++++++++++++++++++++
 2 files changed, 111 insertions(+), 1 deletions(-)

commit bb32156be9d14ac9d152e5901eb955b8cd73bbba
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 16:55:11 +0100

    McdDispatcher: if a client disappears, end its "readying" immediately
    
    Otherwise, we'll get a use-after-free when the Get("HandledChannels") call
    eventually returns.
    
    (I suspect having McdClient be a subclass of TpProxy would be a better
    long-term fix for this.)

 src/mcd-dispatcher.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit c9ab7946a51734fe36c6ec0a46c9aff1051e3b0f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 16:26:35 +0100

    McdDispatcher: free the client structs rather than leaking them
    
    This could be why the use-after-free issues in McdDispatcher never
    actually did any damage :-)

 src/mcd-dispatcher.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit aaf9f500484b80f369f44d6f7bdf3025d4da2d74
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 19:36:22 +0100

    Add a regression test for recovering channels/connections after a crash

 .gitignore                                    |    3 +-
 test/twisted/Makefile.am                      |    2 +-
 test/twisted/crash-recovery/crash-recovery.py |  111 +++++++++++++++++++++++++
 3 files changed, 114 insertions(+), 2 deletions(-)

commit 9c7f02cfb1ab378c53264e4808ac51cccaf26eef
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 19:35:22 +0100

    mctest: add support for not pre-loading MC
    
    This means tests can do some setup, *then* run MC.

 test/twisted/mctest.py |   13 +++++++++----
 1 files changed, 9 insertions(+), 4 deletions(-)

commit 02aa73076acff7e85de9970412e6aa3602b3a1eb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 19:34:54 +0100

    Move responsibility for deleting accounts.cfg from exec-with-log to Makefile
    
    This means that the "combined tests" (tests run in the same MC instance)
    can assume accounts.cfg to have been cleared, but the "separate tests"
    are each responsible for deleting or pre-seeding it themselves.

 test/twisted/Makefile.am               |    1 +
 test/twisted/tools/exec-with-log.sh.in |   11 -----------
 2 files changed, 1 insertions(+), 11 deletions(-)

commit 8f35149f25388340200f1c1a0e0737b20ef9c061
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 18:51:08 +0100

    Store the accounts cache in $XDG_CACHE_DIR by default
    
    Using /tmp renders MC unusable for more than one desktop user at a time,
    and also makes desktop users vulnerable to an easy symlink attack.
    
    For testing, MC_ACCOUNT_DIR in the environment takes precedence.
    
    For embedded use, --with-accounts-cache-dir=/some/tmpfs can be used to
    restore the old behaviour.

 configure.ac              |   10 ++++++++++
 src/mcd-account-manager.c |   21 ++++++++++++++++++++-
 test/twisted/Makefile.am  |    1 +
 3 files changed, 31 insertions(+), 1 deletions(-)

commit f456313b67211607029883547417bfa497ac7b94
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 18:00:00 +0100

    tests: abort if MC_ACCOUNT_DIR isn't set

 test/twisted/tools/exec-with-log.sh.in |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit fe515a9f41b8838ed31608a0754bdbde2305c355
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 17:59:47 +0100

    tests: add support for running some tests each in their own MC

 test/twisted/Makefile.am |   32 ++++++++++++++++++++++++--------
 1 files changed, 24 insertions(+), 8 deletions(-)

commit 850aa19e5fcadda7a3d62ffc453079c6696252a9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 17:12:23 +0100

    exec-with-log.sh.in: be compatible with non-bash shells

 test/twisted/tools/exec-with-log.sh.in |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit ff55c85210e512bbdf1ce992cb28c3e6d26ab6d1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 17:09:19 +0100

    test/twisted: set environment variables in Makefile.am instead of exec-with-log.sh

 test/twisted/Makefile.am               |   12 +++++++++++-
 test/twisted/tools/exec-with-log.sh.in |   16 ----------------
 2 files changed, 11 insertions(+), 17 deletions(-)

commit 754e154e0d83c953b8fe35d266653ada8e12f2c6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 15:00:43 +0100

    test/twisted: save one log per MC run
    
    If MC crashes and is reactivated, this lets us see why the first crash
    happened.

 .gitignore                             |    2 +-
 test/twisted/Makefile.am               |    1 +
 test/twisted/tools/exec-with-log.sh.in |    2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)

commit 0d576b6b7942c04f2f098303cf1921c60bb40b6c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 14:03:23 +0100

    fd.o #20880: enable regression test for failing to create accounts

 test/twisted/account-bad-cm.py |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit 385d761d92599c421c162a8c2b620c08ee0b7eac
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 14:02:52 +0100

    McdAccountManager: don't allow accounts that are not Valid to be created
    
    telepathy-spec says "The account manager SHOULD NOT allow invalid accounts
    to be created". We want to avoid having invalid accounts exist at all,
    wherever possible.
    
    In the process, alter add_account so it doesn't steal a reference to the
    account - complete_account_creation now wants to keep working with the
    account even after calling add_account.

 src/mcd-account-manager.c |   29 ++++++++++++++++++++++-------
 1 files changed, 22 insertions(+), 7 deletions(-)

commit a79a13e688305d0ca75daac4c9e7236e0465f4d1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 15:14:27 +0100

    _mcd_account_delete: return successfully if the account wasn't in the key file
    
    This needs to work if we're going to add accounts to the AM before
    checking for validity.

 src/mcd-account.c |   20 +++++++++++++++-----
 1 files changed, 15 insertions(+), 5 deletions(-)

commit 92dbf802a148a999d66ebdbcc9f3675f6f5fda8a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 14:24:29 +0100

    McdAccount: emit removed in dispose if it hasn't already been done
    
    This means that if an account is created and momentarily added to the
    hash table of accounts, then deleted due to error, it will correctly emit
    removed and be removed from the hash table.

 src/mcd-account.c |   21 ++++++++++++++++++---
 1 files changed, 18 insertions(+), 3 deletions(-)

commit 046af4ad2db67d9d08c481e20dccc513f88ef6ad
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 13:57:18 +0100

    fd.o #20880: _mcd_object_ready: guard against premature freeing of object and double callback invocation
    
    * Ref the object across all the callback calls so it can't get finalized
      with callback invocations still pending
    * Steal the ready-data from the object so re-entrant calls to
      _mcd_object_ready from inside a callback can't cause the callbacks to
      be invoked for a second time

 src/mcd-misc.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit 1eed732341ff9fa7e216fbc79be1adcd05c5a3f1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 13:54:46 +0100

    fd.o #20880: McdAccount: register_dbus_service: be more defensive
    
    * If loading the account fails, don't register it on the bus
    * Assert about invariants rather than just checking them

 src/mcd-account.c |   31 ++++++++++++++++++++++++-------
 1 files changed, 24 insertions(+), 7 deletions(-)

commit e7bcd4058dc9a2c18cc5d88c733b53775408e4fa
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 13:53:33 +0100

    fd.o #20880: mcd_account_loaded: ref the account across callbacks
    
    The account becoming ready can result in its removal, in failure cases,
    causing _mcd_account_maybe_autoconnect to be a use-after-free.

 src/mcd-account.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 08d2fb7c6aafd7a4906fc951b87ba2211a918c62
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 13:51:57 +0100

    McdAccount: improve debug messages
    
    When tracking down crashes it's useful to know the address of the relevant
    account at various points in its life cycle.

 src/mcd-account.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 95e885faae179e353a6ce173c19a0616d1c3bad8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-14 13:33:06 +0100

    Development cycle

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9cb104f3128b27fc9c5437b169d8afbcc755b455
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 17:15:54 +0100

    Prepare beta 71

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0fed267e527513ff3c570a18a0b4083295d9fa1b
Merge: f1294d4 691ee5b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 16:51:23 +0100

    Merge branch 'requestname'
    
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

commit 691ee5b91ddb05fde065a729d4a0162f7daed833
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 16:21:27 +0100

    McdService: obtain the NMC bus name correctly and exit if we can't

 src/mcd-service.c |   26 ++++++++++++--------------
 1 files changed, 12 insertions(+), 14 deletions(-)

commit 998ce73dbbf19c2d5ff1c9eff3e56dd63bbb707c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 16:21:06 +0100

    McdDispatcher: obtain the D-Bus name correctly and exit if we can't

 src/mcd-dispatcher.c |   18 +++++++++---------
 1 files changed, 9 insertions(+), 9 deletions(-)

commit 9864a3af1c7b35f87d730b925ff00ffb42965392
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 16:20:46 +0100

    McdAccountManager: obtain the D-Bus name correctly and exit if we can't
    
    Since people were worrying about whether g_error is absolutely guaranteed
    to be fatal even when assertions are turned off, explicitly exit() too.

 src/mcd-account-manager.c |   18 +++++++++++-------
 1 files changed, 11 insertions(+), 7 deletions(-)

commit 703fe5959abe43c699b7c8cfc1bd38d423b3d326
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 16:19:09 +0100

    mcd-misc: copy _tp_dbus_daemon_request_name from telepathy-glib
    
    MC's current implementation of requesting bus names is wrong; it doesn't
    handle rejection from dbus-daemon, only outright errors.
    
    This should perhaps be made public API in a future version of
    telepathy-glib.

 src/mcd-misc.c |   76 ++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 src/mcd-misc.h |    6 ++++
 2 files changed, 80 insertions(+), 2 deletions(-)

commit f1294d43462cff0a4e72c3726054180e00d44ab7
Merge: 2c83531 e5cafb0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 14:33:13 +0100

    Merge branch 'debug'

commit 2c835317fb27e6ed88d7e3f1c61879f8a00301c5
Merge: 296a925 df587ca
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 13:26:27 +0100

    Merge branch 'getall'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 531b4f4fbcce825520398783e84ac6aff81a9ad6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 13:26:03 +0100

    Rename non-standard interfaces into the com.nokia namespace
    
    The Creation interface remains .DRAFT, but since MC beta 70 and
    telepathy-spec 0.17.24 the same functionality has been present on the
    main CreateAccount method. Any existing users should migrate to the core
    API, at which point the draft API can be deleted altogether.
    
    ChannelRequests won't go into telepathy-spec, we already have API for
    this on the ChannelDispatcher object.
    
    Compat is for compatibility with MC 4, which was never specified by
    telepathy-spec, so it would be inappropriate for it to go in
    telepathy-spec.

 examples/mc-example-2.c                   |    4 ++--
 examples/mc-example.c                     |    4 ++--
 test/twisted/constants.py                 |    4 ++--
 xml/Account_Interface_ChannelRequests.xml |    2 +-
 xml/Account_Interface_Compat.xml          |    2 +-
 5 files changed, 8 insertions(+), 8 deletions(-)

commit df587ca3a6a8f9e05906185fdb9f3e6729a1e0dd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 11:59:28 +0100

    McdDispatcher: use GetAll rather than Get for Handler properties

 src/mcd-dispatcher.c |  104 +++++++++++++++++++++++++------------------------
 1 files changed, 53 insertions(+), 51 deletions(-)

commit a8b9df7743e71628e96a0bb9fab3f6dd818ec21b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-13 11:56:20 +0100

    McdDispatcher: factor out setting filters on clients

 src/mcd-dispatcher.c |   79 +++++++++++++++++++++++++++----------------------
 1 files changed, 43 insertions(+), 36 deletions(-)

commit 01af46261e29ffbcad3432821ead1eefb4692cf7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 19:05:54 +0100

    Add a regression test for clients vanishing

 test/twisted/Makefile.am                    |    1 +
 test/twisted/constants.py                   |    2 +
 test/twisted/dispatcher/vanishing-client.py |   92 +++++++++++++++++++++++++++
 3 files changed, 95 insertions(+), 0 deletions(-)

commit 634d09607c03ba805aac0d5084f7b41965a70fd5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 18:38:29 +0100

    McdDispatcher: make client introspection robust against clients disappearing or otherwise misbehaving

 src/mcd-dispatcher.c |   93 +++++++++++++++++++++++++++++++++++++++----------
 1 files changed, 74 insertions(+), 19 deletions(-)

commit 5704be116d2a671b22700018947ffb13de187b91
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 18:07:06 +0100

    McdDispatcher: don't crash if getting clients' Interfaces property fails

 src/mcd-dispatcher.c |   18 +++++++++++++++++-
 1 files changed, 17 insertions(+), 1 deletions(-)

commit 8a92b8d133a3f967365038213d769f83ac1a8013
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 17:37:35 +0100

    Refactor tests to use a new function expect_client_setup
    
    As well as code reduction, this function copes with calling GetAll instead
    of Get.

 test/twisted/account-requests/cancel.py            |   22 +------
 test/twisted/account-requests/create-text.py       |   22 +------
 .../delete-account-during-request.py               |   22 +------
 test/twisted/dispatcher/already-has-channel.py     |   38 +------------
 test/twisted/dispatcher/bypass-approval.py         |   48 +---------------
 test/twisted/dispatcher/cancel.py                  |   22 +------
 test/twisted/dispatcher/capture-bundle.py          |   50 +---------------
 test/twisted/dispatcher/create-text.py             |   22 +------
 test/twisted/dispatcher/dispatch-text.py           |   39 +------------
 test/twisted/dispatcher/exploding-bundles.py       |   39 +------------
 test/twisted/dispatcher/fdo-21034.py               |   22 +------
 test/twisted/dispatcher/lose-text.py               |   39 +------------
 test/twisted/mctest.py                             |   59 ++++++++++++++++++++
 test/twisted/test-connect.py                       |   22 ++------
 14 files changed, 100 insertions(+), 366 deletions(-)

commit e5cafb0f72ac621fd8e2fa9557518f9d6b13bec0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 12:37:38 +0100

    McdDispatcher: debug when dispatcher contexts are created

 src/mcd-dispatcher.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit abef84c4155051803d6b209c529d9e1605ba799a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 12:37:28 +0100

    McdDispatcher: debug more of the interaction with clients

 src/mcd-dispatcher.c |   23 +++++++++++++++++++++--
 1 files changed, 21 insertions(+), 2 deletions(-)

commit 7aa96985d2697a73b80cb245497c3b0590880e1e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 12:36:53 +0100

    Warn critically if a dispatch operation is created without a TpDBusDaemon (shouldn't happen)

 src/mcd-dispatch-operation.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3645a01052dfbb010fb4f777d9704599c8a6881d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 12:36:30 +0100

    Debug about the life cycles of dispatch operations

 src/mcd-dispatch-operation.c |   31 +++++++++++++++++++++++++++++++
 1 files changed, 31 insertions(+), 0 deletions(-)

commit 296a92580e622fe6d5e4c030a52366b0677c13cd
Merge: e2c4077 2af36d5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 11:17:26 +0100

    Merge branches 'drop-finished-cdos' and 'test-bundles'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit e2c40778a01d5528a5175d76376142069fced6e1
Merge: 0c60c71 42b2a25
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-12 11:17:14 +0100

    Merge branch 'internalize'
    
    Conflicts:
    	src/mcd-account-requests.h
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 2af36d553d3698dc7944b555336e5000e5bad0a3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-11 16:07:09 +0100

    dispatcher/capture-bundle.py: Add a regression test for capturing bundles by ID
    
    This is use-case dis5a from telepathy-spec's doc/dispatch.txt.

 test/twisted/Makefile.am                  |    1 +
 test/twisted/dispatcher/capture-bundle.py |  309 +++++++++++++++++++++++++++++
 2 files changed, 310 insertions(+), 0 deletions(-)

commit 42b2a25774759c76687828de4b3dbe89ed3e581b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-11 12:37:47 +0100

    Delete now-empty header files

 src/Makefile.am                    |    4 ---
 src/mcd-account-connection.c       |    1 -
 src/mcd-account-connection.h       |   37 ------------------------------------
 src/mcd-account-manager-query.c    |    1 -
 src/mcd-account-manager-query.h    |   32 -------------------------------
 src/mcd-account-manager.c          |    1 -
 src/mcd-account-priv.h             |    1 -
 src/mcd-account-requests.c         |    1 -
 src/mcd-account-requests.h         |   30 -----------------------------
 src/mcd-account-stats.c            |    1 -
 src/mcd-account-stats.h            |   32 -------------------------------
 src/mcd-account.c                  |    3 --
 src/mcd-channel.c                  |    1 -
 src/mcd-connection.c               |    1 -
 src/mcd-dispatcher.c               |    1 -
 src/mcd-master.c                   |    1 -
 16 files changed, 0 insertions(+), 148 deletions(-)

commit a053b37a709a1d54b37635c59d26bf2092b3369e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-11 12:30:53 +0100

    Slim down public headers, move private stuff into private headers

 src/mcd-account-compat.h        |    6 +-----
 src/mcd-account-conditions.h    |   12 +-----------
 src/mcd-account-manager-priv.h  |   11 +++++++++++
 src/mcd-account-manager-query.c |    2 ++
 src/mcd-account-manager-query.h |   12 +-----------
 src/mcd-account-manager.h       |    2 --
 src/mcd-account-priv.h          |   17 +++++++++++++++++
 src/mcd-account-requests.h      |    8 +-------
 src/mcd-account-stats.h         |   13 +------------
 9 files changed, 35 insertions(+), 48 deletions(-)

commit 0bc5591e5b4c12380722e69c245be704fb8ffdf4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-11 11:50:38 +0100

    McdDispatcher: don't include finished CDOs in the DispatchOperations property
    
    Alberto's recent life-cycle bugfixing caused CDOs to remain referenced for
    longer than they previously were, resulting in them remaining in the
    DispatchOperations property even after they had finished. This caused
    dispatcher/lose-text.py to fail.

 src/mcd-dispatch-operation-priv.h |    2 ++
 src/mcd-dispatch-operation.c      |   13 +++++++++++++
 src/mcd-dispatcher.c              |    3 ++-
 3 files changed, 17 insertions(+), 1 deletions(-)

commit 0c60c712d9dafab6fdfd52f5b7b8c0f01b866b87
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-08 16:29:50 +0100

    Catch up with copyright updates on src/

 src/mcd-account-compat.c        |    3 ++-
 src/mcd-account-conditions.c    |    3 ++-
 src/mcd-account-config.h        |    3 ++-
 src/mcd-account-connection.c    |    3 ++-
 src/mcd-account-manager-priv.h  |    4 ++--
 src/mcd-account-manager-query.c |    3 ++-
 src/mcd-account-manager.c       |    3 ++-
 src/mcd-account-priv.h          |    3 ++-
 src/mcd-account-requests.c      |    3 ++-
 src/mcd-account-requests.h      |    3 ++-
 src/mcd-account.c               |    3 ++-
 src/mcd-channel-priv.h          |    3 ++-
 src/mcd-channel.c               |    3 ++-
 src/mcd-channel.h               |    3 ++-
 src/mcd-connection-plugin.h     |    2 +-
 src/mcd-connection-priv.h       |    3 ++-
 src/mcd-connection.c            |    3 ++-
 src/mcd-connection.h            |    2 +-
 src/mcd-controller.c            |    2 +-
 src/mcd-dbusprop.c              |    3 ++-
 src/mcd-dbusprop.h              |    3 ++-
 src/mcd-debug.c                 |    3 ++-
 src/mcd-debug.h                 |    3 ++-
 src/mcd-dispatch-operation.c    |    3 ++-
 src/mcd-dispatcher-context.h    |    2 +-
 src/mcd-dispatcher-priv.h       |    3 ++-
 src/mcd-dispatcher.c            |    3 ++-
 src/mcd-dispatcher.h            |    3 ++-
 src/mcd-manager.c               |    3 ++-
 src/mcd-manager.h               |    2 +-
 src/mcd-master-priv.h           |    3 ++-
 src/mcd-master.c                |    3 ++-
 src/mcd-misc.c                  |    3 ++-
 src/mcd-misc.h                  |    3 ++-
 src/mcd-service.c               |    3 ++-
 35 files changed, 65 insertions(+), 36 deletions(-)

commit 0fb432aa790f6658b7f349b79ae8858b5d71498d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-08 15:00:43 +0300

    development cycle

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d043d40b78abb16e551260038de47cb8a05f7a8c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-08 14:55:55 +0300

    Version 5.0.beta70

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit daba2ff14c3b023f31e2023a718ff2f0a5c6f477
Merge: d41cbd7 6dc72dc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-08 14:01:11 +0300

    Merge commit 'upstream/master'

commit d41cbd7c1fdc6e3c432588fe01d34a0bd304e569
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-08 09:36:46 +0300

    Comment context references, to track them better
    
    Add a comment next to each ref/unref of the context, so that mistakes are more
    easily spotted.

 src/mcd-dispatcher.c |   40 +++++++++++++++++++++-------------------
 1 files changed, 21 insertions(+), 19 deletions(-)

commit e1dcb98ed41d26ce8d80a5c16c59a7f0bab09827
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-08 09:32:05 +0300

    Move references around
    
    Reduce the number of code paths to follow in order to track context references:
    the unref originally done in _mcd_dispatcher_context_abort() is moved after the
    invocation of this function, and will be done even in the case when dispatching
    can continue to handlers; a new ref is added in that case, then.
    
    (this patch doesn't change the total number of references)

 src/mcd-dispatcher.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit bc160385ecbf265765e99cd6adfb18ae18be0634
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-07 19:42:01 +0300

    Don't touch dead channels
    
    The call_data structure carries a list of McdChannels, but doesn't hold a
    reference to them; they could die before HandleChannels returns, and in that
    case we must not access them.

 src/mcd-dispatcher.c |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

commit 93e7b95e5ca1a378fb89b9b9008d1443059394e4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-07 19:31:05 +0300

    Remove wrong call
    
    That code can cause a crash if the incoming channel is deleted before the
    handler is called: the context must not be implicitly destroyed.

 src/mcd-dispatcher.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit f5e6355f4b57891927ca42f64b8518c2aec7a2ca
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-07 19:29:36 +0300

    Keep context alive waiting for handler
    
    Don't let the context die while we are waiting for HandleChannels to return.

 src/mcd-dispatcher.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 6dc72dcc2b557dbe99294485cfceec9477765b75
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-07 17:06:02 +0100

    Update docs, tests, util for CreateAccount taking a Properties argument
    
    In the process, duplicate the existing account-creation-with-properties
    test (using the Creation interface) as old-create-with-properties.py,
    and make create-with-properties.py use the core Account interface instead.

 .../libmcclient/tmpl/mc-account-manager.sgml       |    1 +
 test/twisted/Makefile.am                           |    1 +
 test/twisted/account-bad-cm.py                     |    3 +
 .../account-manager/create-with-properties.py      |    5 +-
 .../account-manager/old-create-with-properties.py  |  131 ++++++++++++++++++++
 test/twisted/mctest.py                             |    1 +
 util/mc-account-convert.c                          |    4 +
 7 files changed, 143 insertions(+), 3 deletions(-)

commit d58dd06c23b63f3f695e1c1ee242aaa527a8a279
Merge: b271dc9 3e5e874 661d875
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-07 16:50:47 +0100

    Merge branches 'update-parameters-abi-break' and 'creation-abi-break' into abi-breaks
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit b271dc9219b11ec42621a497027fc9b3cb791c97
Merge: a2a4ee5 e444112
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-07 15:05:26 +0100

    Merge branch 'bypass-approval'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit e4441124809efa772aad2f6d9d9cf90aa57652c6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-07 11:46:10 +0100

    dispatcher/bypass-approval.py: new regression test for BypassApproval

 test/twisted/Makefile.am                   |    1 +
 test/twisted/dispatcher/bypass-approval.py |  301 ++++++++++++++++++++++++++++
 2 files changed, 302 insertions(+), 0 deletions(-)

commit 2d2c700e2cec165954bfebebb7a9f87580a7aed9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-07 11:39:14 +0100

    McdDispatcher: rewrite logic for whether channels bypass approval
    
    It doesn't make sense to check whether each individual channel can bypass
    approval - what we want is to see whether the whole batch bypasses
    approval. Also, instead of calling get_default_handler() we can just
    iterate through the saved list of possible handlers.

 src/mcd-dispatcher.c |   34 +++++++++++++++++++++++++---------
 1 files changed, 25 insertions(+), 9 deletions(-)

commit 3bbce0ec6767d47b6d1d414926473d9ee2df300e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-07 11:37:12 +0100

    McdDispatcher: get_interfaces_cb: check whether handlers have BypassApproval
    
    Previously, only handlers with a .client file could bypass approval. Oops.
    
    Also note some problems to come back to later.

 src/mcd-dispatcher.c |   39 +++++++++++++++++++++++++++++++++++++++
 1 files changed, 39 insertions(+), 0 deletions(-)

commit 02bdde83b4f718b21fa13fd4ef3822fad9bdc0e9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-07 11:39:42 +0100

    mctest: implement Get(HANDLER, 'BypassApproval') in simulated clients

 test/twisted/mctest.py |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit b374ddbf31377acb5fb1b45b9a3add198853a311
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-06 17:39:09 +0100

    McdDispatcher: rethink logic for selecting and running handlers
    
    The previous logic would keep dispatching subsets of the batch of channels
    until no more could be dispatched. However, this is not actually what we
    want.
    
    By this point we've already decided what the preferred handlers are, in
    preference order, and reassured ourselves that each possible handler in
    the list can handle all of the batch of channels. Also, filters are
    immutable, so they can *still* all handle all the channels. So, the right
    thing to do seems to be to pick the first one that still exists, and
    dispatch everything to it.
    
    The only failure mode is that we decided in advance what the possible
    handlers were, but they've all exited, and none of them are activatable.
    This means we can no longer handle all these channels as a unit at all.
    For now, recover by closing all the channels (in future, it might be worth
    exploding the batch into individual channels and launching one handler
    each, or exploding the batch into individual CDOs and asking the
    approvers again, or something).
    
    (Also, this patch is a net code reduction.)

 src/mcd-dispatcher.c |  169 +++++++++++++++++++-------------------------------
 1 files changed, 64 insertions(+), 105 deletions(-)

commit 40aa87274e84d6dd53fa0d4fe3eeec4690d1518b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-06 16:55:31 +0100

    McdDispatcher: factor out a function to call HandleChannels on a client

 src/mcd-dispatcher.c |  144 ++++++++++++++++++++++++++++----------------------
 1 files changed, 81 insertions(+), 63 deletions(-)

commit 5c43a5f11967b4bcbf11b9960f228334ca299434
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-06 16:42:51 +0100

    McdDispatcher: save the possible handlers in the McdDispatcherContext
    
    This will let it use the pre-calculated order of preference later.

 src/mcd-dispatcher.c |   16 +++++++++++++---
 1 files changed, 13 insertions(+), 3 deletions(-)

commit 906b88af7fc6c3da4e8742ad817b8d8a8db87118
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-06 14:18:30 +0100

    McdDispatcher: sort possible handlers by "quality"
    
    Quality is currently defined as: handlers that bypass approval are better
    than handlers that don't; otherwise, handlers get one point for each
    matching property in a filter, and the handler with most points is best.
    
    In practice this should mean that the most specific bypass-approval filter
    (if any), or the most specific filter (otherwise), wins.

 src/mcd-dispatcher.c |  106 +++++++++++++++++++++++++++++++++++++++++++-------
 1 files changed, 91 insertions(+), 15 deletions(-)

commit 661d8752bb3bd8e507b353d394d880b8fafe548f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 12:33:23 +0100

    fd.o #21171: AccountManager: break CreateAccount API to introduce Properties arg

 src/mcd-account-manager.c |   12 +++++++-----
 xml/Account_Manager.xml   |   38 ++++++++++++++++++++++++++++++++------
 2 files changed, 39 insertions(+), 11 deletions(-)

commit 3e5e8744e0f653f342c9c4b7b1d074e1548463d0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-29 18:01:12 +0100

    Add a regression test for UpdateParameters

 test/twisted/Makefile.am                          |    1 +
 test/twisted/account-manager/update-parameters.py |  147 +++++++++++++++++++++
 2 files changed, 148 insertions(+), 0 deletions(-)

commit a075d41bcfcd16b4c90811e497c183fac4eb89bf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-29 16:04:13 +0100

    fd.o #21154: McdAccount: UpdateParameters: don't reconnect automatically

 src/mcd-account.c |   27 +++++++--------------------
 1 files changed, 7 insertions(+), 20 deletions(-)

commit 21cfe143327f5a8a76a83a29128261d9e90a46ce
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-29 15:54:34 +0100

    fd.o #21154: McdAccount: UpdateParameters: break API to return the parameters that will only change after a reconnect

 doc/reference/libmcclient/tmpl/mc-account.sgml |    1 +
 src/mcd-account.c                              |    5 +--
 util/mc-tool.c                                 |   19 ++++++++++-
 xml/Account.xml                                |   43 +++++++++++++++++------
 xml/all.xml                                    |    2 +
 5 files changed, 55 insertions(+), 15 deletions(-)

commit a2a4ee5e5561e3169cf179723982c09647b4739b
Merge: 0d62d8c 4aa9036 839f32f 5b19e7a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-06 10:21:37 +0100

    Merge branches 'update-parameters', 'property-setting-failure', 'reconnect' and 'no-request-channel'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 839f32f28f5d2d09d56a8e32a63738e17b861622
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 18:56:01 +0100

    account-manager/reconnect.py: assert that Reconnect is a no-op when it should be

 test/twisted/account-manager/reconnect.py |   75 +++++++++++++++++++++++++----
 1 files changed, 65 insertions(+), 10 deletions(-)

commit e374edde71e45bcf285d3220bfe8cb4cf4c36c8d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 18:33:04 +0100

    McdAccount: Reconnect: don't do anything if we can't connect or don't want to
    
    This was always the intention, and this is what telepathy-spec says.

 src/mcd-account.c |   15 +++++++++++++++
 1 files changed, 15 insertions(+), 0 deletions(-)

commit 4aa90368112ea259a12e88de43f1effbc93f3821
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 16:21:52 +0100

    test-account.py: exercise property setting for more properties

 test/twisted/test-account.py |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit eb6fe3736ea55277d3205797b0b5b4646d2a8461
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 16:21:18 +0100

    fd.o #21544: mcd-account-conditions: don't crash if the type is wrong when setting Condition
    
    Also, this probably ought to be validated according to the BNF in the
    interface description, if anyone uses it.

 src/mcd-account-conditions.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 246f591839f56566daeef0b7e766007519219f9a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 16:20:29 +0100

    fd.o #21544: mcd-account-compat: don't crash if properties are set to wrong types
    
    Also add a FIXME note: we should probably do more validation in both cases,
    but I don't know what the semantics of these fields are meant to be.

 src/mcd-account-compat.c |   21 +++++++++++++++++++++
 1 files changed, 21 insertions(+), 0 deletions(-)

commit fb280d32c940be9687659a2ed97f990601ea5522
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 16:09:37 +0100

    fd.o #21544: change signature of mcd_setprop so it can raise an error
    
    The new implementation of set_avatar() looks suspicious: it changes the
    interpretation of _mcd_account_set_avatar's boolean return value from
    "changed" to "no error". However, _mcd_account_set_avatar either returns
    FALSE with a GError, or TRUE, in all cases, so this is actually OK.

 src/mcd-account-compat.c     |   11 +++--
 src/mcd-account-conditions.c |    5 +-
 src/mcd-account.c            |  118 +++++++++++++++++++++++------------------
 src/mcd-dbusprop.c           |    3 +-
 src/mcd-dbusprop.h           |    4 +-
 test/twisted/test-account.py |   88 +++++++++++++++-----------------
 6 files changed, 120 insertions(+), 109 deletions(-)

commit b6058ee72e2671b220756c4c6244450312e75b7a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 15:46:08 +0100

    mcd_account_set_string_val: return a tristate instead of a boolean
    
    This will allow setting properties to fail, later.

 src/mcd-account.c |   47 +++++++++++++++++++++++++++++++++--------------
 1 files changed, 33 insertions(+), 14 deletions(-)

commit 05b67716a4fcebc6c5906df905a44970322bec36
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 15:02:40 +0100

    mcd-dbusprop: Don't install the header
    
    The exact implementation of D-Bus properties should be an implementation
    detail (and I plan to change it to be TpDBusPropertiesMixin at some point,
    to avoid having two sets of code for the same functionality).

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 51f507be6ec50cda099cdcdf71dc85a896330471
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 15:00:25 +0100

    mcd-dbusprop: make mcd_dbusprop_set_property, get_property return a boolean
    
    It's generally bad practice for the only indication of error or not to be
    whether a GError was written through a GError** - you're meant to be able
    to pass NULL if you don't care which error it was, and still see whether
    it's success or failure.

 src/mcd-dbusprop.c |   18 ++++++++++--------
 src/mcd-dbusprop.h |   20 ++++++++++----------
 2 files changed, 20 insertions(+), 18 deletions(-)

commit 0d62d8c2400f026b4200f5aa53d7f866461e7248
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 16:00:04 +0100

    _mcd_account_set_parameters: optionally return the deferred parameters

 src/mcd-account-manager.c |    3 +-
 src/mcd-account-priv.h    |    1 +
 src/mcd-account.c         |   62 +++++++++++++++++++++++++++++++++++++++++++-
 3 files changed, 63 insertions(+), 3 deletions(-)

commit 61f74bfb009edbc2fe5e474a5c90a633dc3ce149
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 15:54:47 +0100

    McdAccount: UpdateParameters: don't work around failure to set GError

 src/mcd-account.c |    9 +++------
 1 files changed, 3 insertions(+), 6 deletions(-)

commit 3444efec18b0a479c2d98912562633cdf228b2df
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 14:14:12 +0100

    _mcd_account_set_parameter: make static
    
    _mcd_account_set_parameters is the protected entry point for this private
    function.

 src/mcd-account-priv.h |    3 ---
 src/mcd-account.c      |    2 +-
 2 files changed, 1 insertions(+), 4 deletions(-)

commit 5b19e7a752d5378eec4648af4d56ca15f6d700d7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 19:44:55 +0100

    McdConnection: tp_conn is not a DBusGProxy
    
    It's not used, so this had no practical effect, but it's still wrong.

 src/mcd-connection.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 32685aa68266167bce50353359bccea6e7a643d4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 19:40:46 +0100

    McdService: remove vestigial McStatus enum

 src/mcd-service.c |    6 ------
 1 files changed, 0 insertions(+), 6 deletions(-)

commit 7a7aee6cf0113910fc9ebc814cace7ddc30ccdef
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 19:40:05 +0100

    McdService: remove vestigial #define of LAST_MC_PRESENCE

 src/mcd-service.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 101aca2db9a6264bc1d78b817b0b3115f17513e4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 19:39:42 +0100

    McdConnection: remove vestigial defines/structures

 src/mcd-connection.c |   16 ----------------
 1 files changed, 0 insertions(+), 16 deletions(-)

commit e5a0d424aec2ddaec9d7690ce41c8523b6ba1f79
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 19:36:16 +0100

    McdConnection: remove vestigial capabilities timer

 src/mcd-connection.c |   34 +---------------------------------
 1 files changed, 1 insertions(+), 33 deletions(-)

commit a68fac47a993821f2db39ce56823ea2f5e885a6b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 19:34:36 +0100

    McdConnection: channels can no longer have error_on_creation attached, so delete the code for timing them out

 src/mcd-connection.c |   46 ----------------------------------------------
 1 files changed, 0 insertions(+), 46 deletions(-)

commit 4754ad80eb172b4618a668eb0cd3c3ee9e1d7ea0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 19:30:47 +0100

    McdConnection: Remove circularly dependent code from the RequestChannel code path

 src/mcd-connection.c |  168 --------------------------------------------------
 1 files changed, 0 insertions(+), 168 deletions(-)

commit d14b5dfb4f2ba424a3fd0f074cebb609c0ba7fc4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-28 19:22:39 +0100

    McdConnection: remove support for calling RequestChannel
    
    We could never really support it properly anyway, due to deficiencies in
    the pre-Requests D-Bus API.

 src/mcd-connection.c |  144 +++-----------------------------------------------
 1 files changed, 8 insertions(+), 136 deletions(-)

commit 27a316b80721a26f61f286fd019eeb43f0792638
Merge: 3f93815 5622c36
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-05 14:01:54 +0100

    Merge branch 'creation'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 5622c36f3114de876864a659d3c4c0470f10823e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 19:55:07 +0100

    McdAccountManager: add and test SupportedAccountProperties property

 src/mcd-account-manager.c                          |   25 ++++++++
 .../account-manager/create-with-properties.py      |   16 +++++-
 xml/Account_Manager.xml                            |   64 ++++++++++++++++++++
 3 files changed, 104 insertions(+), 1 deletions(-)

commit 7d2d1c6ce83a912a97d3f4f5fb22599e15a95293
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 17:29:35 +0100

    account-manager/create-with-properties.py: test more properties
    
    RequestedPresence turns out not to work, so it's been missed out for now.

 .../account-manager/create-with-properties.py      |   35 ++++++++++++++++++--
 1 files changed, 32 insertions(+), 3 deletions(-)

commit 143fe4eafe8af1c11fd8bc047ef63209bbba0dbd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 16:36:41 +0100

    McdAccountManager: use properties, if given, in common account-creation code

 src/mcd-account-manager.c |   44 ++++++++++++--------------------------------
 1 files changed, 12 insertions(+), 32 deletions(-)

commit b06a18982a0c6e9e3ef315a64f8e9120e5a469bc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 15:47:38 +0100

    McdAccountManager: fold -creation.c into main .c (no code changes)

 src/Makefile.am                    |    2 -
 src/mcd-account-manager-creation.c |  158 ------------------------------------
 src/mcd-account-manager-creation.h |   42 ----------
 src/mcd-account-manager.c          |  125 ++++++++++++++++++++++++++++-
 4 files changed, 124 insertions(+), 203 deletions(-)

commit 7c3015a53a96f2bcebd318a830a5301d9defe0a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 15:42:05 +0100

    McdAccountManager: creation: factor out property-setting function

 src/mcd-account-manager-creation.c |   63 ++++++++++++++++++++++-------------
 1 files changed, 39 insertions(+), 24 deletions(-)

commit af6966b0d0c38e3fc7d3b8f48afffc816e21c75e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 14:26:43 +0100

    mcd-account-manager-creation: re-namespace creation method
    
    This will stop it colliding with the main-interface version when merging
    the .c files (the main version is going to become this version,
    basically).

 src/mcd-account-manager-creation.c |   30 +++++++++++++++++-------------
 1 files changed, 17 insertions(+), 13 deletions(-)

commit 5861c235fe526fd9c45a59fe24c0c02d0feb185a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-30 15:18:44 +0100

    McdAccountManager: pass properties around internally

 src/mcd-account-manager-creation.c |    3 ++-
 src/mcd-account-manager-priv.h     |    2 +-
 src/mcd-account-manager.c          |   11 ++++++++++-
 3 files changed, 13 insertions(+), 3 deletions(-)

commit bd2340b2b440853170832e34f70943490c9306a5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 15:27:59 +0100

    account-manager/create-with-properties.py: new test for the Creation interface

 test/twisted/Makefile.am                           |    1 +
 .../account-manager/create-with-properties.py      |   88 ++++++++++++++++++++
 2 files changed, 89 insertions(+), 0 deletions(-)

commit 2351333b53553e37ed0e60c2ac3cd7811c7dede6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 15:22:49 +0100

    test-account.py: make sure we can set properties to wrong types without crashing

 test/twisted/test-account.py |   61 ++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 61 insertions(+), 0 deletions(-)

commit faa9895e882649c7c3f24a2518c1285738e4f394
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-05-04 15:22:17 +0100

    McdAccount: don't crash when D-Bus properties are set to the wrong type
    
    The mcd_dbusprop API can't raise an error, so just ignore them for now.
    We should port to TpSvcDBusProperties later.

 src/mcd-account.c |   57 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 57 insertions(+), 0 deletions(-)

commit 3f938153fc2c807de06ed46938233da85bc05571
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-05 12:47:34 +0300

    Development cycle

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 21bebbc468afd92768863a79eb894d6111486d33
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-05 12:43:57 +0300

    Version 5.0.beta69

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7fa84c536dffdc162773555a3238c4b6855423ee
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-05-05 12:08:48 +0300

    Release TP connection before aborting
    
    Aborting means that the McdAccount will immediately release its reference to
    McdConnection and therefore will miss the status-changed signal that
    McdConnection will emit when disposing. Therefore, disconnect the TpConnection
    when mcd_connection_close() is called, so that the signals will be emitted
    immediately.

 src/mcd-connection.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit ebd67ca480e0ab5bd45a378597b87c56380c4492
Merge: 3c243e4 9699ff3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-24 16:27:10 +0300

    Merge branch 'reg_marshallers'

commit 3c243e49c76b2f7dadff2bcc63aab138566e6192
Merge: 76ccd45 e63d092
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-24 15:34:20 +0300

    Merge commit 'upstream/master'

commit 9699ff3411fececa0242786131e522c43af2ad71
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-24 15:27:11 +0300

    Register marshallers for the ContactCapabilities iface

 src/mcd-connection.c |    2 ++
 src/mcd-misc.c       |    2 ++
 src/mcd-misc.h       |    2 ++
 3 files changed, 6 insertions(+), 0 deletions(-)

commit e63d09285349b45d26606692d5ec523ea590c029
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2009-04-24 10:30:21 +0100

    Use G_GSIZE_FORMAT for gsize

 src/mcd-account-manager.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 76ccd45d5052f77995ea7a2ba2fc9cd710d0e2d7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-24 11:30:35 +0300

    Supports parameters of type 'as'

 src/mcd-account.c |   23 ++++++++++++++++++++++-
 1 files changed, 22 insertions(+), 1 deletions(-)

commit 9826835b25910c86a32e92d609c579b028356ed0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-22 17:26:47 +0300

    Development cycle

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0534810649c8bca3d89c7a20b01d12194d18e75b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-22 17:25:52 +0300

    Version 5.0.beta68

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5c9db1eb04c07036db8a81b0be0c227115821ddc
Merge: 56d90f1 940c95b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-22 17:14:29 +0300

    Merge branch 'no_old_handlers'

commit 56d90f14bf790d8ceb3becc394919e31aedbcc78
Merge: 35fbcef f39bba9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-22 11:44:17 +0100

    Merge branch 'client-api-break'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit f39bba91d0abfc1bf5c252b2240c23242acf60db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-21 18:21:25 +0100

    mc_dispatch_operation_new_ready: take the Channels as an extra argument
    
    This matches the new AddDispatchOperation D-Bus API.

 libmcclient/mc-dispatch-operation.c |   40 ++++++++++++++++++++++++++++------
 libmcclient/mc-dispatch-operation.h |    1 +
 2 files changed, 34 insertions(+), 7 deletions(-)

commit 55c9905fb87433c5eba68b811c93b6ac5694192d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-21 17:02:33 +0100

    Update to telepathy-spec 0.17.23 ChannelDispatcher interfaces
    
    Also enable Client.Interface.Requests in libmcclient.

 libmcclient/client.xml                             |    1 +
 src/client.xml                                     |    2 +-
 src/mcd-dispatcher.c                               |   54 ++----
 test/twisted/account-requests/cancel.py            |    9 +-
 test/twisted/account-requests/create-text.py       |    9 +-
 .../delete-account-during-request.py               |    8 +-
 test/twisted/constants.py                          |   17 +-
 test/twisted/dispatcher/already-has-channel.py     |    4 +-
 test/twisted/dispatcher/cancel.py                  |   21 +--
 test/twisted/dispatcher/create-text.py             |   13 +-
 test/twisted/dispatcher/dispatch-text.py           |    4 +-
 test/twisted/dispatcher/exploding-bundles.py       |    4 +-
 test/twisted/dispatcher/fdo-21034.py               |    2 +-
 test/twisted/dispatcher/lose-text.py               |    4 +-
 test/twisted/fakeclient.py                         |    8 +-
 test/twisted/mctest.py                             |    2 +-
 xml/Channel_Dispatch_Operation.xml                 |  152 +++++++++++++-----
 xml/Channel_Dispatcher.xml                         |   89 +++++------
 ...Channel_Dispatcher_Interface_Operation_List.xml |   19 +-
 xml/Channel_Request.xml                            |    6 +-
 xml/Client.xml                                     |   10 +-
 xml/Client_Approver.xml                            |   48 +++---
 xml/Client_Handler.xml                             |   14 +-
 ...ient_Handler_Interface_Request_Notification.xml |  173 --------------------
 xml/Client_Interface_Requests.xml                  |  173 ++++++++++++++++++++
 xml/Client_Observer.xml                            |   30 ++--
 xml/Makefile.am                                    |    2 +-
 xml/nmc5.xml                                       |    2 +-
 28 files changed, 456 insertions(+), 424 deletions(-)

commit 8160bbc7592df03148ba69bab12358bb9879ad68
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 19:12:25 +0100

    Handler: pass an empty a{sv} for future expansion
    
    Also, in the regression test, assert that the user action time is
    propagated.

 src/mcd-dispatcher.c                   |    6 +++++-
 test/twisted/dispatcher/create-text.py |    3 +++
 xml/Client_Handler.xml                 |   10 ++++++++++
 3 files changed, 18 insertions(+), 1 deletions(-)

commit f730a02bd777ce723ba95df41159f5ffb16dccc3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 18:23:10 +0100

    fd.o #21176: update Handler API from telepathy-spec master
    
    This is an API break.
    
    * Split out RequestNotification interface
    * Move AddRequest to that interface
    * Rename RemoveFailedRequest to RemoveRequest and move it to that interface
    
    Brief rationale: Handlers that don't care about the requests don't want
    to be service-activated.

 src/client.xml                                     |    1 +
 src/mcd-account-requests.c                         |    2 +-
 src/mcd-dispatcher.c                               |   29 +++-
 test/twisted/account-requests/cancel.py            |    3 +-
 test/twisted/account-requests/create-text.py       |    3 +-
 .../delete-account-during-request.py               |   19 +-
 test/twisted/constants.py                          |    1 +
 test/twisted/dispatcher/cancel.py                  |    4 +-
 test/twisted/dispatcher/create-text.py             |    4 +-
 test/twisted/mctest.py                             |    7 +-
 xml/Client_Handler.xml                             |  156 +++++++-----------
 ...ient_Handler_Interface_Request_Notification.xml |  173 ++++++++++++++++++++
 xml/Makefile.am                                    |    1 +
 xml/nmc5.xml                                       |    1 +
 14 files changed, 287 insertions(+), 117 deletions(-)

commit 447053c6359d0cbddde949b25fb642ff50330f62
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 17:12:20 +0100

    fd.o #20909: regression tests: assert that ObserveChannels gets the extra arguments

 test/twisted/account-requests/create-text.py   |    2 ++
 test/twisted/dispatcher/already-has-channel.py |    2 ++
 test/twisted/dispatcher/create-text.py         |    2 ++
 test/twisted/dispatcher/dispatch-text.py       |    2 ++
 test/twisted/dispatcher/exploding-bundles.py   |    2 ++
 5 files changed, 10 insertions(+), 0 deletions(-)

commit f93617ca4ab3487884ce3dd6ef9a91e62edc7cb1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 16:42:58 +0100

    fd.o #20909: Observer: add Dispatch_Operation and Requests_Satisfied
    
    This is a D-Bus API break - we now pass more parameters to Observers.

 src/mcd-dispatcher.c    |    7 +----
 xml/Client_Observer.xml |   48 +++++++++++++++++++++++++++++++++++++++-------
 2 files changed, 42 insertions(+), 13 deletions(-)

commit 6e9d998088e55d333e81e31432f3b1501875db1e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 16:04:50 +0100

    fd.o #21174: break AddDispatchOperation API
    
    This is necessary because the previous API assumed that Channels was not
    mutable, which is untrue.

 src/mcd-dispatch-operation.c                   |    4 +
 src/mcd-dispatcher.c                           |    7 ++-
 test/twisted/dispatcher/already-has-channel.py |    8 +-
 test/twisted/dispatcher/dispatch-text.py       |    8 +-
 test/twisted/dispatcher/exploding-bundles.py   |   34 +++-----
 test/twisted/dispatcher/lose-text.py           |    8 +-
 xml/Client_Approver.xml                        |  112 +++++++++++++++++-------
 7 files changed, 113 insertions(+), 68 deletions(-)

commit 35fbcefc6854363ca0052f6aa142b6d61149ff4b
Merge: 3e16a88 fb2465e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-21 11:57:22 +0100

    Merge branch 'approval-delay-21174'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 3e16a8812845c1ea16194c776a9349a9877d1464
Merge: e057728 3fe1aab
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-21 11:57:04 +0100

    Merge branch 'client-with-dots'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 940c95bfa9deff66e8792d37b53c763154e17587
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-21 09:34:07 +0300

    Quick clean-up of documentation files
    
    Remove references to deleted files.

 .../libmissioncontrol-server-docs.sgml             |    4 --
 .../libmissioncontrol-server-sections.txt          |   31 --------------------
 .../tmpl/mcd-chan-handler.sgml                     |   19 ------------
 .../tmpl/mcd-presence-frame.sgml                   |   19 ------------
 4 files changed, 0 insertions(+), 73 deletions(-)

commit 3540fd010dde8af98aa694a3f6e8b19a544f434f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-21 09:27:09 +0300

    Remove mcd-chan-handler.[hc]

 .../libmissioncontrol-server-sections.txt          |    5 -
 .../tmpl/mcd-chan-handler.sgml                     |    8 -
 src/Makefile.am                                    |    2 -
 src/mcd-chan-handler.c                             |  232 --------------------
 src/mcd-chan-handler.h                             |   44 ----
 5 files changed, 0 insertions(+), 291 deletions(-)

commit 80fdd4e43edfa095e6e6a9c238898b5849a8b6a2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-20 16:17:39 +0300

    Remove deprecated APIs and deprecate more

 .../libmissioncontrol-server-sections.txt          |    2 --
 .../tmpl/mcd-dispatcher-context.sgml               |   18 ------------------
 src/mcd-dispatcher-context.h                       |   10 +++-------
 src/mcd-dispatcher.c                               |    7 -------
 4 files changed, 3 insertions(+), 34 deletions(-)

commit 34576df7d47220e1f7c092e9951d049e224aa742
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-20 15:59:43 +0300

    Remove old-style channel handlers table

 src/mcd-dispatcher-context.h |    3 --
 src/mcd-dispatcher.c         |   68 ++---------------------------------------
 2 files changed, 4 insertions(+), 67 deletions(-)

commit 3fe1aab85c180d94ddc7af05a7403a21a5d319b5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 16:53:50 +0100

    Extend regression tests to cover clients with dots in their names

 test/twisted/dispatcher/exploding-bundles.py |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit 23b1135a6cf5e08921ae469649c9f13ac9c8d446
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 16:52:48 +0100

    McdDispatcher: construct object paths for clients with "." in their name correctly
    
    telepathy-spec explains that, for instance, the client named
    o.f.T.C.Empathy._1_42.Window2 has the object path
    /o/f/T/C/Empathy/_1_42/Window2.
    
    This patch fixes a crash whenever a Client with such a name is contacted.

 src/mcd-dispatcher.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit fb2465e7e1a037cbb0c6b5c31fce21fab0016489
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 15:29:08 +0100

    Add a regression test for losing channels during approval

 test/twisted/Makefile.am             |    3 +-
 test/twisted/constants.py            |    1 +
 test/twisted/dispatcher/lose-text.py |  191 ++++++++++++++++++++++++++++++++++
 3 files changed, 194 insertions(+), 1 deletions(-)

commit 9780930d6506a699e12cb1b513770d194f2c737d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 15:14:32 +0100

    McdDispatchOperation: add a method to dup channel details

 src/mcd-dispatch-operation-priv.h |    2 ++
 src/mcd-dispatch-operation.c      |   20 +++++++++++++++-----
 2 files changed, 17 insertions(+), 5 deletions(-)

commit 01d7b102852715600afaed1a7153a0e6df9393d7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 15:14:06 +0100

    McdDispatcher: delay ChannelLost and Finished until all approvers have returned

 src/mcd-dispatcher.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit bbbd16f11723fd68660ac10ce453548071c5bf80
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 15:13:28 +0100

    McdDispatchOperation: allow delaying ChannelLost and Finished

 src/mcd-dispatch-operation-priv.h |    5 ++
 src/mcd-dispatch-operation.c      |   77 ++++++++++++++++++++++++++++++++++++-
 2 files changed, 81 insertions(+), 1 deletions(-)

commit 6b660fa98cf9060919ff42248b5b4b1f89f7cad6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-20 15:15:31 +0300

    Remove invocation of old-style channel handlers

 src/mcd-dispatcher.c |  351 +-------------------------------------------------
 1 files changed, 1 insertions(+), 350 deletions(-)

commit e057728955db6e86ff45c4e960756b318f47d69d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-20 14:58:24 +0300

    Development cycle

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d6458336f20ec8ecef34ebedf442c903fbc85fd4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-20 14:55:48 +0300

    Version 5.0.beta67

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bbc3944c72d072f8ed25bee4e419219c5cb2a8f0
Merge: bad2c46 be84a62
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-20 14:39:44 +0300

    Merge branch 'crash_on_error'

commit be84a627cc68a57f9697ecbcdc84cd0d6b476e0b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-20 14:15:40 +0300

    Keep the context alive
    
    Don't let the context be freed in the middle of a function.
    This was causing a crash, if the handler returned an error: the channel was
    aborted, therefore removed from the DispatchOperation, which in turn emitted
    the Finished signal. This caused the mcd_dispatcher_context_handler_done() to
    be called and free the context, which would still be used later.

 src/mcd-dispatcher.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 48824a6e13880e08e1c5e5b0350f34edae1a576f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-20 14:14:19 +0300

    Context cannot be finished twice
    
    Make sure that the dispatch-finished (and the unreferencing of the relative
    context) happens only once per context.

 src/mcd-dispatcher.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit bad2c46f592af8c08cbfecd7b5fb43d3569d09f4
Merge: d71d1da f0e3582
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 11:52:29 +0100

    Merge branch 'interfaces-21256'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit d71d1da180b5b0015aae29f5fcc8883ed9fc62b1
Merge: 8b79a76 ba751fc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 11:50:32 +0100

    Merge branch 'observer-20909'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 8b79a76993b4ed1d8c09f81e7d86af01e1ab87dd
Merge: 23413ac a42c2fc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 11:49:50 +0100

    Merge branch 'cr-21169'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 23413ac6cbbace696380adbdf9397bd3b562fd1d
Merge: a9f2880 e61c68e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-20 11:49:10 +0100

    Merge branch 'reconnect'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit a9f2880b44c43924fe5e2b6024bc47a2a228bbae
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 15:47:43 +0100

    libmcclient/Makefile.am, src/Makefile.am: regenerate merged XML if any interfaces change
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

 libmcclient/Makefile.am |    2 +-
 src/Makefile.am         |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit f0e3582ac143b1edff9c925a2f0595c67c841657
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 19:07:07 +0100

    fd.o #21256: assert that CDOs have the Interfaces property

 test/twisted/dispatcher/dispatch-text.py |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit bc6a87b8c4a2e85935749240896cf6fee77e2704
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 19:10:04 +0100

    fd.o #21256: ChannelRequest: add stub Interfaces property and assert that it's there

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    5 +++++
 src/mcd-channel.c                                  |   15 +++++++++++++++
 src/mcd-dispatcher.c                               |    6 ++++++
 test/twisted/dispatcher/create-text.py             |    2 ++
 xml/Channel_Request.xml                            |    8 ++++++++
 5 files changed, 36 insertions(+), 0 deletions(-)

commit ba751fc3a8c04eb7a94556af6130e0d7c2875801
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 16:15:40 +0100

    part of fd.o #20909: McdDispatcher: prepare Satisfied_Requests param for Observers
    
    Don't actually pass it to the observer just yet (that'll be an API break).

 src/mcd-dispatcher.c |   43 ++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 42 insertions(+), 1 deletions(-)

commit c8fe5314be7be31768c51d87c67bf433cfc39ed8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 16:21:05 +0100

    part of fd.o #20909: McdDispatcher: work out the dispatch operation path, but don't use it yet
    
    This will be passed to ObserveChannels when we break API.

 src/mcd-dispatcher.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit bc0278cbd950f2132d16ebee9c3187b46fcb49bf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 16:23:49 +0100

    Observer spec: update text from telepathy-spec git master
    
    Still omit the Dispatch_Operation, and also omit the Requests_Satisfied.

 xml/Client_Observer.xml |   75 ++++++++++++++++++++++++++++++++++++++---------
 1 files changed, 61 insertions(+), 14 deletions(-)

commit c9fd7e66106fac63dcb7071249dcbd4bc53e14bb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 16:19:02 +0100

    Update spec text of Client interfaces from telepathy-spec 0.17.22
    
    No substantive changes (ObserveChannels' Dispatch_Operation parameter has
    been omitted here).

 xml/Client.xml          |    6 +++---
 xml/Client_Approver.xml |    2 +-
 xml/Client_Handler.xml  |   26 +++++++++++++++++++-------
 xml/Client_Observer.xml |    2 +-
 4 files changed, 24 insertions(+), 12 deletions(-)

commit a42c2fc7057330ccee2487a61a597182b61665b6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 15:08:42 +0100

    fd.o #21169: Update ChannelRequest from telepathy-spec master, and implement it
    
    Implement and test PreferredHandler property; no further substantive
    changes.

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    5 +++++
 src/mcd-channel.c                                  |   19 +++++++++++++++++++
 test/twisted/dispatcher/create-text.py             |    1 +
 xml/Channel_Request.xml                            |   20 ++++++++++++++++++++
 4 files changed, 45 insertions(+), 0 deletions(-)

commit 6ec25c8fafdf80ee02fc59ae5fa3d0082a176cee
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 15:47:43 +0100

    libmcclient/Makefile.am, src/Makefile.am: regenerate merged XML if any interfaces change

 libmcclient/Makefile.am |    2 +-
 src/Makefile.am         |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit e61c68e40eb4f99fcc559d3f4f68a581ac69d3ca
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 14:48:00 +0100

    account-manager/reconnect.py: add a trivial test that Reconnect works
    
    This still doesn't cover situations like:
    
    * we call RequestConnection
    * MC user calls UpdateParameters
    * MC user calls Reconnect
    * RequestConnection returns
    
    in which case the old parameters will probably still be in use. However,
    this can wait.

 test/twisted/account-manager/reconnect.py |   24 ++++++++++++++++++++++++
 1 files changed, 24 insertions(+), 0 deletions(-)

commit 3f7ddf4548fda4688d8b8906ce67b7a717fb12b8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 14:46:45 +0100

    McdAccount: if we have no McdConnection, set status DISCONNECTED
    
    Otherwise, reconnecting doesn't work at all, even in simple cases.

 src/mcd-account.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit af7bbf200459a2a0701fa402d14338ad1649a73a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 14:37:20 +0100

    Fix _mcd_connection_attempt

 src/mcd-connection.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit 9a6cc64a5085ee802430b16da0353c064a3a8703
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-17 14:36:33 +0100

    McdAccount: Implement Reconnect() in a trivial way, matching what UpdateParameters does
    
    This implementation isn't right, but I think McdAccount/McdConnection need
    more refactoring before we can write a correct one, and now is not the
    time.

 src/mcd-account.c |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit 24fb692085cc00158c9a2528db263330cada23bd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-17 14:14:31 +0300

    Development restarts

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5bfdf7823f709e413ec8e9c5602a7b8b7dc9dbbb
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-17 14:12:54 +0300

    Version 5.0.beta66

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a03284e84b33ded27d5063114979c6b6d8177cce
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-17 11:42:56 +0300

    libmcclient support for HasBeenOnline
    
    Add a mc_account_has_been_online() API, and a new GQuark for the flags-changed
    signal.

 doc/reference/libmcclient/libmcclient-sections.txt |    1 +
 doc/reference/libmcclient/tmpl/mc-account.sgml     |    9 +++++
 libmcclient/mc-account.c                           |   33 ++++++++++++++++++++
 libmcclient/mc-account.h                           |    1 +
 libmcclient/mc-quark.list                          |    1 +
 5 files changed, 45 insertions(+), 0 deletions(-)

commit 4f11487eecc8056a328919453cde42e954f7173a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 18:22:01 +0100

    _mcd_connection_connect: temporarily duplicate this function
    
    This function has two entirely distinct uses: it's called with
    params == NULL from within McdConnection when it wants to trigger a
    connection attempt (which pokes the McdAccount, which eventually calls
    into it again as the second form), and it's called with params != NULL
    from within McdAccount. This is needlessly confusing, so split them up.

 src/mcd-connection.c |   45 ++++++++++++++++++++++++++++++++-------------
 1 files changed, 32 insertions(+), 13 deletions(-)

commit cac85ae75dbd6bdc04536d9769959046dc57b74f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 18:13:00 +0100

    mcd_connection_connect: don't store @params in the McdConnection at all
    
    They may once have been used for something, but now they're just dead
    weight; there's no need to keep any reference to them at all, after
    tp_cli_connection_manager_call_request_connection has been called.

 src/mcd-connection.c |   22 +++++-----------------
 1 files changed, 5 insertions(+), 17 deletions(-)

commit 29a0b742f95d17cec5bf6e3fdd14842e232629f2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 18:01:49 +0100

    Remove mcd_connection_get_connection_status from docs

 .../tmpl/mcd-connection.sgml                       |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

commit ac44580ef0eda6e04cab37784dfdf028a0a3b070
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 18:01:33 +0100

    McdConnection: remove status reason accessor
    
    The Account no longer needs it.

 src/mcd-connection.c |   15 ---------------
 src/mcd-connection.h |    1 -
 2 files changed, 0 insertions(+), 16 deletions(-)

commit 37170ba03d1f45d1470eee7c895c17c4527139f8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 18:01:08 +0100

    McdAccount: have the Account use the value it already stored for the status reason
    
    Also simplify access to the connection status.

 src/mcd-account.c |   18 ++----------------
 1 files changed, 2 insertions(+), 16 deletions(-)

commit 60a134fac9dab1cb9329cb44a0f192d7e4f8344a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 17:55:07 +0100

    McdConnection: remove mcd_connection_get_connection_status
    
    It turns out to be a trap - it returns what the account thinks the
    connection status is, not what the TpConnection's actual status is. Given
    that, it's more comprehensible to use the account method directly.

 src/mcd-account-requests.c |    2 +-
 src/mcd-account.c          |    2 +-
 src/mcd-connection.c       |   11 ++---------
 src/mcd-connection.h       |    1 -
 4 files changed, 4 insertions(+), 12 deletions(-)

commit d3d7b97431668481cac35e342a02f230c13fcfc4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 16:34:16 +0100

    McdAccount: call a method on the McdConnection to request presence, rather than emitting a signal

 src/mcd-account.c         |   35 ++++++++++++++++-------------------
 src/mcd-connection-priv.h |    3 +++
 src/mcd-connection.c      |   37 +++++++++++++++----------------------
 3 files changed, 34 insertions(+), 41 deletions(-)

commit f90204e032585f86b91c7651bb3f19a98e539422
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 16:24:32 +0100

    McdConnection: provide Connection status to McdAccount via a signal rather than calling methods

 .../tmpl/mcd-connection.sgml                       |    9 ++++++
 src/mcd-account-priv.h                             |    3 --
 src/mcd-account.c                                  |   16 +++++++---
 src/mcd-connection.c                               |   31 ++++++++++++-------
 4 files changed, 39 insertions(+), 20 deletions(-)

commit 19b699b3bb199ffb8287ea06a851844a7017b564
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 18:17:09 +0100

    Add a trivial regression test for Reconnect (only tests that it doesn't actually crash MC)

 test/twisted/Makefile.am                  |    1 +
 test/twisted/account-manager/reconnect.py |  104 +++++++++++++++++++++++++++++
 2 files changed, 105 insertions(+), 0 deletions(-)

commit 73f7b4f2571565f56e7c4f0d1d94b293bc561abb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 18:16:32 +0100

    McdAccount: implement a stub version of Reconnect

 src/mcd-account.c |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

commit 02ef18a9e8bb22bc43e26744c7056fe7217129ed
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 17:34:33 +0100

    Account spec: add Reconnect method from my 'account' branch

 xml/Account.xml |   35 +++++++++++++++++++++++++++++++++++
 1 files changed, 35 insertions(+), 0 deletions(-)

commit 86fe3381c60569609ba79ad19aa806b7944aaa1e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 15:49:35 +0100

    McdConnection: emit presence changes as a signal rather than poking the Account
    
    Ideally, McdConnection shouldn't have to call *any* methods on the
    McdAccount - it's conceptually "smaller".

 .../tmpl/mcd-connection.sgml                       |   10 +++++++
 src/mcd-account-priv.h                             |    4 ---
 src/mcd-account.c                                  |   25 ++++++++---------
 src/mcd-connection.c                               |   28 +++++++++++++++-----
 4 files changed, 43 insertions(+), 24 deletions(-)

commit 69fd0e779ff7047f2ee572305c4db0112ea8259c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 14:56:37 +0100

    McdAccount: remove unused current-presence-changed signal

 src/mcd-account.c |   14 --------------
 1 files changed, 0 insertions(+), 14 deletions(-)

commit 0f672668c7554a060be75acab3a9c64f6a81da5f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-16 15:53:07 +0100

    McdAccount: inline mcd_account_unset_parameters into _mcd_account_set_parameters
    
    Otherwise, we might reconnect before we've actually unset those parameters.

 src/mcd-account-manager.c |    2 +-
 src/mcd-account-priv.h    |    1 +
 src/mcd-account.c         |   27 ++++++++++++---------------
 3 files changed, 14 insertions(+), 16 deletions(-)

commit 2bb09da439e213b36e305c876ac7389a2b2b87a2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 17:23:23 +0100

    _mcd_account_connect, _mcd_connection_connect: don't consume @params
    
    Instead of passing parameters which are consumed by the function, it seems
    safer and more comprehensible to use GHashTable reference counting.
    
    Also, instead of stashing the params on the McdConnection with qdata,
    put them in a private struct field (more legible *and* more efficient).
    
    I believe that this branch also fixes a memory leak in
    mcd_account_connection_proceed: if plugins refused connection to the
    account, the params hash table would be leaked.

 src/mcd-account-connection.c |    4 +---
 src/mcd-account.c            |    2 +-
 src/mcd-connection.c         |   22 +++++++++++++++++++---
 3 files changed, 21 insertions(+), 7 deletions(-)

commit a012a48cd812cbf5d846c2ffc555b6a48f3498b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 17:07:21 +0100

    Assert in various places that the CM parameters are non-NULL
    
    _mcd_connection_connect() behaves differently (calling back into Account!)
    if the CM parameters are NULL, so this is an important assertion to be
    able to reason correctly about the behaviour of the connection process.

 src/mcd-account-connection.c |    2 ++
 src/mcd-account.c            |    2 ++
 2 files changed, 4 insertions(+), 0 deletions(-)

commit c13b942d060abeb42bb465790c08cbdb0dc9a692
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 17:02:45 +0100

    McdAccount: make parameter accessors internal
    
    mcd_account_get_parameters is misleadingly named, make it internal as
    _mcd_account_dup_parameters (it returns a new hash table).
    
    mcd_account_check_parameters, mcd_account_get_parameter are never used
    outside mcd-account.c so they can be static.

 src/mcd-account-connection.c |    2 +-
 src/mcd-account-priv.h       |    2 +
 src/mcd-account.c            |   52 +++++++++++++++++++++--------------------
 src/mcd-account.h            |    5 ----
 4 files changed, 30 insertions(+), 31 deletions(-)

commit bddb829e6eeb2576cb4b10abfe9087408fc8e8d3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 14:54:54 +0100

    McdAccount: put McdAccountConnectionContext in a private struct field rather than qdata

 src/mcd-account-connection.c |   34 ++++++++++++++--------------------
 src/mcd-account-priv.h       |   13 +++++++++++++
 src/mcd-account.c            |   29 +++++++++++++++++++++++++++--
 3 files changed, 54 insertions(+), 22 deletions(-)

commit 14a61dbdfdb356fdcc1b66a756114d40e6ac6cad
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:56:58 +0100

    McdChannel: use a struct field for the error rather than gluing on qdata

 src/mcd-channel.c |   17 ++++++++++++-----
 1 files changed, 12 insertions(+), 5 deletions(-)

commit e82a4309cbacb7e33e24adaf7b82270fd20e9b96
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:52:44 +0100

    McdDispatcher, McdDispatchOperation, McdMaster: move unexported stuff to new -priv headers

 src/Makefile.am                   |    3 ++
 src/mcd-account-requests.c        |    1 +
 src/mcd-account.c                 |    1 +
 src/mcd-connection.c              |    1 +
 src/mcd-dispatch-operation-priv.h |   39 ++++++++++++++++++++++++
 src/mcd-dispatch-operation.c      |    1 +
 src/mcd-dispatch-operation.h      |    5 +--
 src/mcd-dispatcher-priv.h         |   59 +++++++++++++++++++++++++++++++++++++
 src/mcd-dispatcher.c              |    2 +
 src/mcd-dispatcher.h              |   23 --------------
 src/mcd-master-priv.h             |   38 +++++++++++++++++++++++
 src/mcd-master.c                  |    1 +
 src/mcd-master.h                  |    3 --
 13 files changed, 147 insertions(+), 30 deletions(-)

commit c2c4e7a6ea637094f12a68a3727ecb5de1ad7d52
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:47:51 +0100

    McdChannel: move unexported stuff to new mcd-channel-priv.h

 src/Makefile.am              |    1 +
 src/mcd-account-requests.c   |    1 +
 src/mcd-channel-priv.h       |   86 ++++++++++++++++++++++++++++++++++++++++++
 src/mcd-channel.c            |    4 +-
 src/mcd-channel.h            |   50 ------------------------
 src/mcd-connection.c         |    1 +
 src/mcd-dispatch-operation.c |    1 +
 src/mcd-dispatcher.c         |    1 +
 8 files changed, 94 insertions(+), 51 deletions(-)

commit ec41d551a7d0ce0e640740f9a2bb5b2619214c6b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:40:05 +0100

    mcd-connection-plugin.h: move unexported function to mcd-account-priv

 src/mcd-account-priv.h      |    2 ++
 src/mcd-connection-plugin.h |    4 ----
 2 files changed, 2 insertions(+), 4 deletions(-)

commit 577097ce023ec7a3df45dde80c749a5e0b1d7aef
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:38:09 +0100

    mcd-misc: rename all functions to start with an underscore
    
    We don't install mcd-misc.h, so to be consistent, all its functions should
    be private to the library.

 src/mcd-account.c    |    6 +++---
 src/mcd-dispatcher.c |    4 ++--
 src/mcd-manager.c    |    6 +++---
 src/mcd-misc.c       |   16 ++++++++--------
 src/mcd-misc.h       |   12 ++++++------
 5 files changed, 22 insertions(+), 22 deletions(-)

commit e2b263cde58579ce3c0494633c9e47dfff5a327b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:33:13 +0100

    mcd-account-requests: move unexported stuff to mcd-account-priv.h

 src/mcd-account-priv.h     |   15 +++++++++++++++
 src/mcd-account-requests.h |   14 --------------
 src/mcd-channel.c          |    1 +
 src/mcd-dispatcher.c       |    1 +
 4 files changed, 17 insertions(+), 14 deletions(-)

commit 1dc149cbdcc94267821f367e41e5ff69f00ce16c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:32:34 +0100

    McdAccount: move signals to .c

 src/mcd-account-priv.h |   15 ---------------
 src/mcd-account.c      |   13 ++++++++++++-
 2 files changed, 12 insertions(+), 16 deletions(-)

commit a34caf654a1aa66c2e26efc36f9012009d08c935
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:32:06 +0100

    mcd-account-compat, mcd-account-connection: separate out "private" signals

 src/mcd-account-compat.c     |    6 ++++--
 src/mcd-account-connection.c |    6 ++++--
 2 files changed, 8 insertions(+), 4 deletions(-)

commit 23277cf8eb0af1c394bf70d2c211d3eed8257b36
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:22:50 +0100

    mcd-account-connection.h: move declarations to mcd-account-priv.h

 src/mcd-account-connection.h |    4 ----
 src/mcd-account-priv.h       |    3 +++
 2 files changed, 3 insertions(+), 4 deletions(-)

commit 05c03fafef1a87d9e83d7bb2322ccde02e566e55
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:20:59 +0100

    mcd-account-compat: move unexported stuff to mcd-account-priv.h

 src/mcd-account-compat.h |    9 ---------
 src/mcd-account-priv.h   |    9 +++++++++
 2 files changed, 9 insertions(+), 9 deletions(-)

commit c63041f74de88e29fc49112b6d1ac3be4e2c704e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:09:46 +0100

    McdAccountManager: move unexported functions to a new mcd-account-manager-priv.h
    
    Also rename some G_GNUC_INTERNAL functions to clarify what is and isn't
    public.

 src/Makefile.am                    |    1 +
 src/mcd-account-manager-creation.c |    9 +++--
 src/mcd-account-manager-priv.h     |   54 ++++++++++++++++++++++++++++++++++++
 src/mcd-account-manager-query.c    |   10 ++++--
 src/mcd-account-manager.c          |   29 ++++++++++--------
 src/mcd-account-manager.h          |   23 ---------------
 src/mcd-account.c                  |    1 +
 src/mcd-master.c                   |    9 +++--
 8 files changed, 88 insertions(+), 48 deletions(-)

commit a6ea4945c736aeb019989e542b722a1d8afffabb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 13:08:16 +0100

    McdConnection: move unexported functions to a new mcd-connection-priv.h

 src/Makefile.am              |    1 +
 src/mcd-account-connection.c |    1 +
 src/mcd-account-manager.c    |    1 +
 src/mcd-account.c            |    1 +
 src/mcd-connection-priv.h    |   46 ++++++++++++++++++++++++++++++++++++++++++
 src/mcd-connection.c         |    4 ++-
 src/mcd-connection.h         |   11 ----------
 7 files changed, 53 insertions(+), 12 deletions(-)

commit f9a801aa48dadd62a24c94b9ca297476cac63c97
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 12:56:28 +0100

    McdAccount: move private functions to mcd-account-priv.h
    
    If they shouldn't be used outside this library, then they should only be
    declared in a header we don't install.

 src/mcd-account-manager-query.c |    1 +
 src/mcd-account-manager.c       |    1 +
 src/mcd-account-priv.h          |   53 ++++++++++++++++++++++++++++++++++++++-
 src/mcd-account.h               |   44 --------------------------------
 src/mcd-connection.c            |    1 +
 5 files changed, 55 insertions(+), 45 deletions(-)

commit ea31aac24544f01689e04242271d7e9629296162
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 12:55:15 +0100

    mcd-account-connection: move transport-related functions to mcd-account
    
    This means the transport can be a struct field in the private struct,
    rather than just qdata glued onto the side of the object.

 src/mcd-account-connection.c |   27 ---------------------------
 src/mcd-account.c            |   29 +++++++++++++++++++++++++++++
 2 files changed, 29 insertions(+), 27 deletions(-)

commit 4706915f3bd84b9af1e110112c525f4836229b29
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 12:53:24 +0100

    mcd_account_write_conf: rename to _mcd_account_write_conf, it's internal to this library

 src/mcd-account-compat.c     |    4 ++--
 src/mcd-account-conditions.c |    2 +-
 src/mcd-account-priv.h       |    2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit d602462c52c532860e1cc660d85cad4271d2b8f6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 12:52:20 +0100

    mcd-account-config.h: delete duplicate copy with incorrect header guards

 src/mcd-account-config.h |   54 ----------------------------------------------
 1 files changed, 0 insertions(+), 54 deletions(-)

commit aac818bb3aa1d9172217837d34dca4fcdb5e0d69
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-15 12:42:45 +0100

    src/Makefile.am: don't install headers that were never meant to be installed
    
    Also make mcd-enum-types.c correctly depend on the headers it uses

 src/Makefile.am |   26 +++++++++++---------------
 1 files changed, 11 insertions(+), 15 deletions(-)

commit 32fd673c57fa708e5daae58cf05f362f703ac0c3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 18:26:34 +0100

    McdConnection: make mcd_connection_connect() internal

 src/mcd-account-connection.c |    2 +-
 src/mcd-account.c            |    2 +-
 src/mcd-connection.c         |   14 +++++++-------
 src/mcd-connection.h         |    3 ++-
 4 files changed, 11 insertions(+), 10 deletions(-)

commit 00b0fb3bdbd1ead92f5668ab60244f6445c0714d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 18:16:01 +0100

    McdAccount: make _mcd_account_connection_begin internal
    
    Also make _mcd_account_connection_class_init internal, rather than trying
    to make it inline (in a way that doesn't work).

 src/mcd-account-connection.c |    2 +-
 src/mcd-account-connection.h |    4 ++--
 src/mcd-account.c            |    6 +++---
 src/mcd-connection.c         |    2 +-
 4 files changed, 7 insertions(+), 7 deletions(-)

commit c4ebfad487e643957358651858741b7173d1b4d1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 17:50:31 +0100

    McdConnection: stop passing excess parameter to DEBUG()
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

 src/mcd-connection.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 085c0f469eefa08a963408898fe2eefca09129c2
Merge: 6401861 8f235ec
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 15:46:26 +0100

    Merge commit 'upstream/master'

commit 64018618811c87c8d1e8fdcfa404ebcdc03ac87b
Merge: aa53982 6a9cd6e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 15:45:06 +0100

    Merge branch 'deletion'
    
    Conflicts:
    	src/mcd-account.c
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit aa53982105cfa6ef3b31d2692181d743e699e336
Merge: 5251b9b db33283
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-14 15:35:54 +0100

    Merge branch 'has-been-online'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 8f235ecafea591a16e9b243be9ea6fd0e84c9f6c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-14 16:34:33 +0300

    Turning a warning into a debug message

 src/mcd-connection.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6a9cd6e41d7f2fb3b15427cb555a932484fd6566
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 13:14:08 +0100

    McdAccountManager: make account lookup O(1) rather than O(n)
    
    This means the AccountManager has to know the relationship between
    "unique names" (which conflict with D-Bus terminology!) and account object
    paths, but telepathy-spec basically already mandates that.

 src/mcd-account-manager.c |   23 ++++++++---------------
 1 files changed, 8 insertions(+), 15 deletions(-)

commit a4b07f7950127c25c137f6ffe08e931ded73428e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 13:06:10 +0100

    McdPresenceFrame: remove from source tree, leaving only a stub header

 .../libmissioncontrol-server.types                 |    2 -
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    5 -
 .../tmpl/mcd-presence-frame.sgml                   |   14 -
 src/Makefile.am                                    |    1 -
 src/mcd-presence-frame.c                           |  414 --------------------
 src/mcd-presence-frame.h                           |   53 +---
 6 files changed, 1 insertions(+), 488 deletions(-)

commit a2977c63b084b48bb127b7027861a42c437b9eea
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 13:03:08 +0100

    McdMaster: don't have a presence frame

 src/mcd-master.c |   24 ++----------------------
 1 files changed, 2 insertions(+), 22 deletions(-)

commit 581cee389c3f9fe8ff1695390572c0022b0d5912
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:59:56 +0100

    McdManager: don't have a presence frame

 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |    6 ---
 src/mcd-manager.c                                  |   38 --------------------
 src/mcd-manager.h                                  |    2 -
 src/mcd-master.c                                   |    3 +-
 4 files changed, 1 insertions(+), 48 deletions(-)

commit 73cb834c48f4ce43d83d984573b8f72d467b85c5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:59:30 +0100

    McdService: remove now-unnecessary mentions of presence frame

 src/mcd-service.c |   12 ------------
 1 files changed, 0 insertions(+), 12 deletions(-)

commit 2876a17a7a33291d27da7c9bfb1baafcd7746a0e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:52:42 +0100

    McdPresenceFrame: make mcd_presence_frame_get_requested_presence static (no longer called externally)

 .../tmpl/mcd-presence-frame.sgml                   |    9 ---------
 src/mcd-presence-frame.c                           |    2 +-
 src/mcd-presence-frame.h                           |    3 ---
 3 files changed, 1 insertions(+), 13 deletions(-)

commit 52d30a76f86afd059b306a228385d5e75177c68d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:51:00 +0100

    McdPresenceFrame: remove mcd_presence_frame_get_actual_presence (no longer called)

 .../tmpl/mcd-presence-frame.sgml                   |    9 ---------
 src/mcd-presence-frame.c                           |   11 -----------
 src/mcd-presence-frame.h                           |    3 ---
 3 files changed, 0 insertions(+), 23 deletions(-)

commit 3d21f6ed38dbd531089200f551069300c3adadc4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:45:57 +0100

    McdPresenceFrame: remove presence-requested signal (never emitted now)

 .../tmpl/mcd-presence-frame.sgml                   |    9 ---
 src/mcd-presence-frame.c                           |   65 --------------------
 src/mcd-presence-frame.h                           |    5 --
 3 files changed, 0 insertions(+), 79 deletions(-)

commit 9487a56041c2a064611b0643cabe7de9d7239968
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:45:27 +0100

    McdManager: don't handle McdPresenceFrame::presence-requested, it can no longer be emitted

 src/mcd-manager.c |   66 -----------------------------------------------------
 1 files changed, 0 insertions(+), 66 deletions(-)

commit 9b72c40e2488c75f928bd83d7cf60735a1a6d0a7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:44:56 +0100

    McdService: don't handle presence-requested (it can no longer be emitted)

 src/mcd-service.c |   21 ---------------------
 1 files changed, 0 insertions(+), 21 deletions(-)

commit 8fffd9c1cb065e30a3812908aeea0550ec345b81
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:44:15 +0100

    McdPresenceFrame: remove the ability to request a global presence

 .../tmpl/mcd-presence-frame.sgml                   |   10 ---
 src/mcd-presence-frame.c                           |   79 --------------------
 src/mcd-presence-frame.h                           |    4 -
 3 files changed, 0 insertions(+), 93 deletions(-)

commit 264b013e2e2a2d6b33111515fde86155558da27c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:37:39 +0100

    McdPresenceFrame: remove mcd_presence_frame_get_actual_presence_message (no longer used)

 .../tmpl/mcd-presence-frame.sgml                   |    9 ---------
 src/mcd-presence-frame.c                           |   11 -----------
 src/mcd-presence-frame.h                           |    2 --
 3 files changed, 0 insertions(+), 22 deletions(-)

commit 960edcbc1420a80957d3d129232da04ba8a2f38d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 18:53:58 +0100

    McdMaster: do auto-away by prodding each Account individually
    
    This avoids using the presence frame and its suspicious
    synchronized-presence model.

 src/mcd-master.c |   64 ++++++++++++++++++++++++++++++++++++-----------------
 1 files changed, 43 insertions(+), 21 deletions(-)

commit d7defb818bb013a6d34445c12704d57db5ff4440
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:08:48 +0100

    McdAccount: in all accessors for presences, allow NULL output arguments
    
    This costs ~1 CPU instruction per parameter per call, makes callers
    simpler, and is the usual GLib/GObject convention.h

 src/mcd-account.c |   33 ++++++++++++++++++++++++---------
 1 files changed, 24 insertions(+), 9 deletions(-)

commit d75e00ce2a4361e0462cda487433ecdc6910297c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 18:53:05 +0100

    McdAccount: add a way to adjust presence temporarily
    
    This can be used for auto-away embedded in MC (as seen in
    McdMaster).

 src/mcd-account.c |   15 ++++++++++++++-
 src/mcd-account.h |    2 ++
 2 files changed, 16 insertions(+), 1 deletions(-)

commit dd60bdfaeebe10bbda2066b1e953e8d53d053703
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 17:20:20 +0100

    McdConnection: fix signal connection ordering
    
    Connect to signals before calling state-recovery methods.

 src/mcd-connection.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 187858f0739bf70f4dc33b62ad652b1b39c89b24
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 16:58:13 +0100

    McdPresenceFrame: remove some unused methods

 .../tmpl/mcd-presence-frame.sgml                   |   18 ----------
 src/mcd-presence-frame.c                           |   35 --------------------
 src/mcd-presence-frame.h                           |    5 ---
 3 files changed, 0 insertions(+), 58 deletions(-)

commit 6ec4f4b77cd6fe3801354b95e9d0fd896da727f1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 16:52:53 +0100

    McdAccount: internalize mcd_account_get_avatar*

 src/mcd-account-compat.c |    2 +-
 src/mcd-account.c        |   14 +++++++-------
 src/mcd-account.h        |    9 +++++----
 src/mcd-connection.c     |   10 +++++-----
 4 files changed, 18 insertions(+), 17 deletions(-)

commit 6499b357f563d4d3c1111a834c9c48643ac62bd1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 16:42:49 +0100

    McdAccount: make all setter functions internal
    
    Subclasses of McdConnection etc. shouldn't be manipulating
    internal state like that.

 src/mcd-account-manager.c |    2 +-
 src/mcd-account.c         |   46 +++++++++++++-------------
 src/mcd-account.h         |   44 +++++++++++++-----------
 src/mcd-connection.c      |   81 ++++++++++++++++++++++++---------------------
 4 files changed, 91 insertions(+), 82 deletions(-)

commit b4b7cfd0bb6602986e41797064894672ad401507
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 16:29:57 +0100

    mcd_account_get_keyfile: make internal
    
    The fact that accounts are stored in a GKeyFile is an
    implementation detail.

 src/mcd-account-compat.c        |   10 +++++-----
 src/mcd-account-conditions.c    |    6 +++---
 src/mcd-account-manager-query.c |    2 +-
 src/mcd-account.c               |    2 +-
 src/mcd-account.h               |    2 +-
 5 files changed, 11 insertions(+), 11 deletions(-)

commit 40e41da68bdabe576ef9f067d12ca5ad0fc8be86
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 16:27:43 +0100

    Remove mcd_channel_get_self_handle (unused)

 src/mcd-channel.c |   18 ------------------
 src/mcd-channel.h |    1 -
 2 files changed, 0 insertions(+), 19 deletions(-)

commit 0d45f76bfe6a932548aad8b1ba9a861f9e1605f0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:25:08 +0100

    Remove mcd_channel_get_flags from header (does not exist)

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    9 ---------
 src/mcd-channel.h                                  |    1 -
 2 files changed, 0 insertions(+), 10 deletions(-)

commit 592f4f5075818c99bf31d18d2f9278d90bf3332d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 16:20:20 +0100

    Remove mcd_connection_set_reconnect (unused)

 src/mcd-connection.c |   26 +++-----------------------
 src/mcd-connection.h |    3 ---
 2 files changed, 3 insertions(+), 26 deletions(-)

commit 0e16049e12a05434c062434264c24ec01c149502
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:23:28 +0100

    Remove mcd_connection_remote_avatar_changed (unused stub)

 .../tmpl/mcd-connection.sgml                       |   11 -----------
 src/mcd-connection.c                               |   20 --------------------
 src/mcd-connection.h                               |    3 ---
 3 files changed, 0 insertions(+), 34 deletions(-)

commit eb70e0f30329caa4891563419ea77c1069c46392
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:22:30 +0100

    Remove mcd_connection_get_telepathy_details (unused)

 .../tmpl/mcd-connection.sgml                       |   11 -----------
 src/mcd-connection.c                               |   19 -------------------
 src/mcd-connection.h                               |    4 ----
 3 files changed, 0 insertions(+), 34 deletions(-)

commit a9cf45f873f3e6f5381fd9f912586bc336f2258d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:21:26 +0100

    Remove mcd_connection_new (deprecated and never called)

 .../tmpl/mcd-connection.sgml                       |   13 -----------
 src/mcd-connection.c                               |   23 --------------------
 src/mcd-connection.h                               |    6 -----
 3 files changed, 0 insertions(+), 42 deletions(-)

commit afd14bfcfa84b23ac1b2a419db17bcaaaa4d952a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:20:14 +0100

    McdDispatcher: remove support for old-style filters
    
    As Alberto requested by email.

 .../tmpl/mcd-dispatcher-context.sgml               |   35 ---
 src/mcd-dispatcher-context.h                       |   17 --
 src/mcd-dispatcher.c                               |  255 +-------------------
 3 files changed, 3 insertions(+), 304 deletions(-)

commit f17eaaf5891fd6b8bc541631f5b994ac8c5b15e2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 12:19:34 +0100

    McdDispatcher: make contact-caps functions internal

 .../tmpl/mcd-dispatcher.sgml                       |   10 ----------
 src/mcd-connection.c                               |    6 +++---
 src/mcd-dispatcher.c                               |    7 ++++---
 src/mcd-dispatcher.h                               |    8 ++++----
 4 files changed, 11 insertions(+), 20 deletions(-)

commit 4333af9e38f604eec40a41b6225cca0e95507e57
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 11:56:38 +0100

    McdConnection: presence_get_statuses_cb: don't assert and crash if Statuses has an unexpected D-Bus type
    
    Design principle: whatever the other processes on D-Bus do, don't crash.

 src/mcd-connection.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 2deec93b064d9cba79a77cc94b643b7651d839ec
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-13 11:55:42 +0100

    Add a regression test for auto-away on system idle
    
    This should eventually be in a plugin or a device-specific build of MC,
    but for now MC is responsible for it, so we should test it.

 test/twisted/Makefile.am                  |    1 +
 test/twisted/account-manager/auto-away.py |  194 +++++++++++++++++++++++++++++
 test/twisted/constants.py                 |    1 +
 test/twisted/mc-debug-server.c            |   36 ++++++
 4 files changed, 232 insertions(+), 0 deletions(-)

commit b1514ab6d61f70ebf74dcd27957da3594526dc5d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 19:22:43 +0100

    servicetest: selectively update from telepathy-gabble
    
    * don't support old and obscure API
    * do support forbidding events

 test/twisted/servicetest.py |  175 +++++++------------------------------------
 1 files changed, 29 insertions(+), 146 deletions(-)

commit db33283cb8e39713c33b246d52dcd4fe7d66fffd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-09 15:10:01 +0100

    McdAccount Compat: add SetHasBeenOnline

 src/mcd-account-compat.c         |   13 ++++++++++++-
 test/twisted/test-account.py     |   13 +++++++++++++
 xml/Account_Interface_Compat.xml |    7 +++++++
 3 files changed, 32 insertions(+), 1 deletions(-)

commit f0703003174896772a47e0a4d04ca1a5405ed7c7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-09 15:09:35 +0100

    McdAccount: add HasBeenOnline property
    
    Recently merged to telepathy-spec, will be in 0.17.23

 src/mcd-account-config.h     |    1 +
 src/mcd-account.c            |   41 +++++++++++++++++++++++++++++++++++++++++
 src/mcd-account.h            |    1 +
 test/twisted/test-connect.py |    2 ++
 xml/Account.xml              |   16 ++++++++++++++++
 5 files changed, 61 insertions(+), 0 deletions(-)

commit 5251b9bf1e5db9d6a53eaef5231c2d8fd56e9d6d
Merge: 08f82cf 9e338be
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-09 13:12:49 +0100

    Merge branch 'channel-lost'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 08f82cf4360a475ddb082f9cfc917a91857d81a4
Merge: 8a68f86 58f7460
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 15:06:01 +0100

    Merge branch 'pref-handlers'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 8a68f863dfeb0be89dd1ef1c1f12654d844d06c3
Merge: 41b3283 604bcc0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-08 15:05:27 +0100

    Merge branch 'fdo21034'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 9e338be9349602dbd1568130112f9a79a34de306
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 22:01:39 +0100

    McdDispatcher: correctly drop refs to channels when they abort
    
    Also emit ChannelLost from McdDispatchOperation, and
    make the dispatch operation close appropriately.

 src/mcd-dispatch-operation.c |   56 ++++++++++++++++++++++++++++++++++++++++++
 src/mcd-dispatch-operation.h |    2 +
 src/mcd-dispatcher.c         |   51 +++++++++++++++++++++++++++++++++-----
 3 files changed, 102 insertions(+), 7 deletions(-)

commit d3e2bac439f66ea1eeeec398727be40ba5fb912c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 19:28:21 +0100

    McdAccountManager: don't create accounts with object paths that are still in use
    
    There seems to be no way to remove a GObject from dbus-glib other than
    letting it be disposed. If it isn't unreffed immediately (or if there's
    a leak), it's possible that the object path will still be in use even
    though it's been removed from the config file.

 src/mcd-account-manager.c |   16 ++++++++++++----
 1 files changed, 12 insertions(+), 4 deletions(-)

commit 58f7460282347c57114cc772870dd88e7c43d870
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 18:42:22 +0100

    Add a regression test for exploding a bundle if no handler supports all of it, and closing unhandleable channels

 test/twisted/Makefile.am                     |    1 +
 test/twisted/dispatcher/exploding-bundles.py |  346 ++++++++++++++++++++++++++
 2 files changed, 347 insertions(+), 0 deletions(-)

commit 87d4562a973b0240e7aab95a43246fbe2686bc2f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 18:40:13 +0100

    SimulatedConnection: allow emission of NewChannels with multiple channels
    
    Also allow SimulatedChannel to be Destroyable or not.

 test/twisted/constants.py |    1 +
 test/twisted/mctest.py    |   44 ++++++++++++++++++++++++++++++--------------
 2 files changed, 31 insertions(+), 14 deletions(-)

commit 2d3bba6fc4cb4ce50729ad023855ab2fcb99bc50
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 18:38:48 +0100

    McdDispatcher: bugfix: update our idea of what the best handler is
    
    Without this, an arbitrarily chosen handler (the last one) will handle
    the channels in the case where HandleWith('') is called, even if it can't
    actually handle all of them. MC will then fall back to dispatching any
    that can't be handled to another arbitrarily chosen handler.

 src/mcd-dispatcher.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit eb870239bb95a2450d78d72ac1df665953a848e7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 17:01:55 +0100

    dispatcher/dispatch-text: assert that we have the PossibleHandlers property

 test/twisted/dispatcher/already-has-channel.py |    5 ++---
 test/twisted/dispatcher/dispatch-text.py       |    5 ++---
 2 files changed, 4 insertions(+), 6 deletions(-)

commit 44dcbd2edaa80bed7ba9433783f29d53534a68b5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 17:00:47 +0100

    McdDispatchOperation: remember the possible handlers

 src/mcd-dispatch-operation.c |   29 +++++++++++++++++++++++++++--
 1 files changed, 27 insertions(+), 2 deletions(-)

commit ae0dbce661fa631f97a79b9f6e66d153f3d2641e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 17:00:10 +0100

    McdDispatcher: work out the possible handlers when starting to dispatch
    
    If no handlers can take the whole batch, follow telepathy-spec by breaking
    the batch into individual channels; if there are channels that have no
    possible handlers, shoot them in the head rather than trying to dispatch
    them (unless they're a ContactList, which is caught by a special case in
    McdChannel).

 src/mcd-dispatch-operation.c |    4 +-
 src/mcd-dispatch-operation.h |    2 +-
 src/mcd-dispatcher.c         |  117 +++++++++++++++++++++++++++++++++++++++--
 3 files changed, 115 insertions(+), 8 deletions(-)

commit 15abdc225ada1af3afea41d489a8b70b793040d9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 16:56:51 +0100

    McdDispatcher: remove redundant return statements

 src/mcd-dispatcher.c |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)

commit 4276e7eee87caf16d619ff75f6918995bbf5f1ed
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 16:28:14 +0100

    McdChannel: add _mcd_channel_undispatchable

 src/mcd-channel.c |   29 +++++++++++++++++++++++++++++
 src/mcd-channel.h |    3 ++-
 2 files changed, 31 insertions(+), 1 deletions(-)

commit 7bcc9c65b44b97d1c2684b265648c9a0ee4602b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 14:58:08 +0100

    Rename _mcd_dispatcher_send_channels to _mcd_dispatcher_take_channels
    
    This makes it more obvious that ownership of the list is stolen.

 src/mcd-connection.c |   12 ++++++------
 src/mcd-dispatcher.c |    6 +++---
 src/mcd-dispatcher.h |    4 ++--
 3 files changed, 11 insertions(+), 11 deletions(-)

commit cd85132f144884e5281454ed3584720a6614af62
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 14:53:11 +0100

    Make _mcd_dispatch_operation_new explicitly G_GNUC_INTERNAL

 src/mcd-dispatch-operation.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 4e1b3bf40ba626a02003603079e0d04a6ad9bab2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 13:18:30 +0100

    McdDispatchOperation: allow handler_path to be ""
    
    telepathy-spec says this is allowed, and results in handling with a
    handler of the ChannelDispatcher's choice. Alberto already implemented
    those semantics, for NULL.

 src/mcd-dispatch-operation.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6fc32a7de622e419628e55a1817bee9d37805f83
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 16:56:29 +0100

    _mcd_account_online_request_completed: don't return early if no online requests
    
    Going through no-op processing is harmless, and means that we free the
    error (which could otherwise be leaked - thanks, valgrind).

 src/mcd-account.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit d61dbb73a9f43e22344395394b03aba8d0f6bac8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 16:27:31 +0100

    McdAccountManager: _mcd_account_manager_store_account_connections: remove spurious assertion
    
    There's no point in asserting about the value of an uninitialized piece
    of stack that we're about to use in g_hash_table_iter_next. valgrind
    catches this.

 src/mcd-account-manager.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 604bcc09432202a5cf7578a582634444cb977768
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 13:07:53 +0100

    fd.o#21034: add a regression test for invalid Client bus names

 test/twisted/Makefile.am             |    1 +
 test/twisted/dispatcher/fdo-21034.py |   75 ++++++++++++++++++++++++++++++++++
 2 files changed, 76 insertions(+), 0 deletions(-)

commit 17783a85ffddca406905814b8858752f1f440601
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 13:04:04 +0100

    fd.o #21034: McdDispatcher: in CreateChannel and EnsureChannel, validate Client name
    
    The spec says we should, and it's easy to do.

 src/mcd-dispatcher.c |   19 +++++++++++++++++--
 1 files changed, 17 insertions(+), 2 deletions(-)

commit c17bbef5c2b4194475cd7df50d6e8e564f39ff4b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 12:56:07 +0100

    McdDispatcher: use the appropriate constants for Client bus name/object path
    
    Also use g_str_has_prefix rather than strncmp, for greater clarity

 src/mcd-dispatcher.c |   13 +++++--------
 1 files changed, 5 insertions(+), 8 deletions(-)

commit 627e957a919a78e3860708754dd9cb972c9774cc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 12:55:06 +0100

    McdDispatcher: add constants for the bus name and object path prefixes of Clients

 src/mcd-dispatcher.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 41b3283c2483b42e715ac095ba574c3bee209c2c
Merge: 0cd1fcd 864d518
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 11:55:25 +0100

    Merge branch 'cancel'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 0cd1fcde8df98159792ce7ae11b5eace91b4502b
Merge: 8a892e9 300a74e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-07 11:54:45 +0100

    Merge branch 'trivia'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 864d5184e98fd875d131c9200505cb1e36077fe4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 18:24:57 +0100

    dispatcher/cancel.py: also test cancelling before the Proceed call

 test/twisted/dispatcher/cancel.py |   32 ++++++++++++++++++++++++++++++--
 1 files changed, 30 insertions(+), 2 deletions(-)

commit ff0e6a3004b0ab43f1994098728841a425f659b7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 18:19:58 +0100

    Add regression tests for cancelling channel requests (by the standard API, and mardy's API)

 test/twisted/Makefile.am                |    2 +
 test/twisted/account-requests/cancel.py |  131 ++++++++++++++++++++++++++++++
 test/twisted/constants.py               |    1 +
 test/twisted/dispatcher/cancel.py       |  135 +++++++++++++++++++++++++++++++
 4 files changed, 269 insertions(+), 0 deletions(-)

commit 1c6f3ba88a16154f785622ba130b6eabccfe8140
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 18:02:57 +0100

    McdChannel: implement ChannelRequest.Cancel

 src/mcd-channel.c |   18 ++++++++++--------
 1 files changed, 10 insertions(+), 8 deletions(-)

commit 2af21776925bea1067d62925a9505d26984429ca
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 17:59:41 +0100

    McdAccount: account_request_cancel: move logic of how to cancel into McdChannel

 src/mcd-account-requests.c |   28 ++--------------------------
 src/mcd-channel.c          |   37 +++++++++++++++++++++++++++++++++++++
 src/mcd-channel.h          |    3 +++
 3 files changed, 42 insertions(+), 26 deletions(-)

commit 300a74efe19a1724592146a347aeae4c9ab49572
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 14:25:53 +0100

    autogen.sh: don't use unsupported --enable-maintainer-mode option

 autogen.sh |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 16b8ab2a201fc4e0aca88e140a92a04344895af2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 14:12:16 +0100

    configure.ac: append "+" to version, and enable -Werror, for non-releases

 configure.ac |   17 +++++++++++++++--
 1 files changed, 15 insertions(+), 2 deletions(-)

commit e2758effc45d8000fad70d590531746a8213da7d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 14:02:14 +0100

    .gitignore: ignore extra m4 that gets installed by recent libtoolize(1)

 .gitignore |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 6261cbd2fad156a60b785b406d0b5ff073b6f6f5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 13:59:59 +0100

    Update auto-generated gtkdoc misc
    
    One day we should move to having the docs in the source code and the .sgml
    purely generated, like telepathy-glib does. Today is probably not that day.

 .../libmcclient/tmpl/libmcclient-unused.sgml       |   78 ++++++++++++++++++
 doc/reference/libmcclient/tmpl/mc-account.sgml     |   84 --------------------
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |   42 ++--------
 .../tmpl/mcd-dispatcher.sgml                       |   16 ++--
 4 files changed, 93 insertions(+), 127 deletions(-)

commit 8a892e9274d21f6303c7ed0fd47fe29185d2b7bd
Merge: ed1f55a c134cd4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-06 13:47:13 +0100

    Merge branch 'requests'
    
    Conflicts:
    	src/mcd-channel.c
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit c134cd4a6feef10c7b51b6aedd44d5f9ccfd189c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 19:33:45 +0100

    Add a ChannelDispatcher version of the create-text.py test.
    
    \o\ \o/ telepathy-spec compliance! /o/

 test/twisted/Makefile.am               |    1 +
 test/twisted/dispatcher/create-text.py |  184 ++++++++++++++++++++++++++++++++
 2 files changed, 185 insertions(+), 0 deletions(-)

commit 877d4f180c7ed3b105984683fc0697b526ff11ab
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 19:32:22 +0100

    McdDispatcher: implement CreateChannel, EnsureChannel

 src/mcd-dispatcher.c |   93 +++++++++++++++++++++++++++++++++++++++++++------
 1 files changed, 81 insertions(+), 12 deletions(-)

commit 2ea5beb0cf09c66b7bf6c8498fe4dcfa27340b4a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 19:31:34 +0100

    McdChannel: implement Proceed()

 src/mcd-channel.c |   43 ++++++++++++++++++++++++++++++++++++-------
 1 files changed, 36 insertions(+), 7 deletions(-)

commit 7f06dd718ac6344080486a2208e383709e7dd389
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 19:31:09 +0100

    McdAccount: Requests: expose internal methods to create a ChannelRequest, and Proceed with it

 src/mcd-account-requests.c |   45 +++++++++++++++++++++++++++----------------
 src/mcd-account-requests.h |    9 ++++++++
 2 files changed, 37 insertions(+), 17 deletions(-)

commit 3494602dad69bb630c618ea8b08e9457c60b5f5f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 19:29:14 +0100

    McdChannel: mcd_channel_new_request: add proceeding parameter
    
    This indicates whether D-Bus clients are allowed to call Proceed().

 src/mcd-account-requests.c |    3 ++-
 src/mcd-channel.c          |    7 ++++++-
 src/mcd-channel.h          |    3 ++-
 3 files changed, 10 insertions(+), 3 deletions(-)

commit cd351b046dd87164fc6e8106e12bea5447d463c3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 18:36:34 +0100

    McdAccount: Requests: move _mcd_account_online_request() from create_request to account_request_common
    
    The ChannelDispatcher API will want to call create_request() immediately,
    but only call _mcd_account_online_request() when the user calls Proceed.

 src/mcd-account-requests.c |   15 ++++++++++-----
 1 files changed, 10 insertions(+), 5 deletions(-)

commit bf11c7cec9abc7fb24f9c7ec6fd66f4143466295
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 18:32:16 +0100

    McdAccount: Requests: make create_request less precarious by returning a ref
    
    Returning a ref borrowed from the status-changed signal connection
    is technically also correct, because account_request_common() doesn't
    currently give that signal a chance to occur - but it's less fragile
    to have too many references.

 src/mcd-account-requests.c |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit 6050981b0ba8477a96b02a7461983ea590beee9a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 17:36:06 +0100

    McdConnection: don't set undispatched channels to UNDISPATCHED status
    
    This is already the case anyway.

 src/mcd-connection.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 5256d134d1dc9f3b95ff4ccb804297b1731dc716
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 17:35:03 +0100

    dispatcher/already-has-channel.py: add a test for a channel that already exists when the TpConnection becomes ready
    
    This is necessary to have test coverage for _mcd_channel_new_undispatched.

 test/twisted/Makefile.am                       |    1 +
 test/twisted/dispatcher/already-has-channel.py |  235 ++++++++++++++++++++++++
 2 files changed, 236 insertions(+), 0 deletions(-)

commit 429ae27b8e77f333b061a9009a97ee694ace692d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 17:26:19 +0100

    dispatcher/dispatch-text.py: fix comment

 test/twisted/dispatcher/dispatch-text.py |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9c6b9658337e082bd7367474b4177901632b1833
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 17:26:08 +0100

    SimulatedChannel: arrange for NewChannel to be emitted, as well as NewChannels
    
    MC watches for NewChannel while it doesn't yet know that NewChannels is
    supported.

 test/twisted/mctest.py |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 27f44fc929bf3a251e92a1b912e21c273e6fd0d1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 17:24:35 +0100

    SimulatedConnection: optionally switch off the reply to GetInterfaces
    
    This lets us delay a connection becoming ready (at least in current
    telepathy-glib - it's a bit fragile).

 test/twisted/mctest.py |   12 ++++++++----
 1 files changed, 8 insertions(+), 4 deletions(-)

commit fa371135a6db4a4d8eb15272b1322c05afdc0531
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 16:21:53 +0100

    McdChannel: add new internal constructor _mcd_channel_new_undispatched
    
    This means McdConnection doesn't need to call g_object_new directly.

 src/mcd-channel.c    |    8 ++++++++
 src/mcd-channel.h    |    1 +
 src/mcd-connection.c |    4 +---
 3 files changed, 10 insertions(+), 3 deletions(-)

commit 38787e4398a9d09a93b6abe9ff95981d30009eb6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 16:21:21 +0100

    McdChannel: Don't let anything outside this library call mcd_channel_set_status
    
    It's easier to reason about channel statuses if we know nobody else can
    call it.

 src/mcd-channel.c    |    8 ++++----
 src/mcd-channel.h    |    4 +++-
 src/mcd-connection.c |    4 ++--
 src/mcd-dispatcher.c |   18 +++++++++---------
 4 files changed, 18 insertions(+), 16 deletions(-)

commit d91a10e5227fb27fdc475458ba859dd1fcad8a01
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 16:04:58 +0100

    McdChannel: store a weak ref to the McdAccount, not just its path
    
    This also corrects a missing g_free of the account path in the destructor.

 src/mcd-channel.c |   38 +++++++++++++++++++++++++++++++++-----
 1 files changed, 33 insertions(+), 5 deletions(-)

commit 4282f42d99f6b0c4210b81b9ce3d8133b867a1b3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 15:19:28 +0100

    Add a regression test for deleting an Account during a channel request

 test/twisted/Makefile.am                           |    1 +
 .../delete-account-during-request.py               |  136 ++++++++++++++++++++
 2 files changed, 137 insertions(+), 0 deletions(-)

commit 20371cba1834d5b82f63af5907015281d7ca5c49
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 15:00:07 +0100

    _mcd_account_online_request: remove confusing error handling
    
    This function had two ways to signal error (giving it to the callback,
    or returning it immediately) but only actually used the former. Documenting
    that this is the only way an error can happen results in an immediate
    simplification in account-requests.

 src/mcd-account-priv.h     |    7 +++----
 src/mcd-account-requests.c |   19 +++----------------
 src/mcd-account.c          |   16 ++++++----------
 3 files changed, 12 insertions(+), 30 deletions(-)

commit ed1f55a992a7884b29974682387ea9b363384d42
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-03 17:11:54 +0300

    Version 5.0.beta65

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f4e6aab54cd0809a5d82bf1cc09fb1bcf759f416
Merge: 4bd1b03 e2347c6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-03 16:42:53 +0300

    Merge branch 'master' of git+ssh://git.collabora.co.uk/git/telepathy-mission-control

commit 4bd1b03e46aa5cde6b4410f455ed01c773737862
Merge: ed53d80 44d1673
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-03 16:40:53 +0300

    Merge branch 'use-tp-errors'

commit 2c0f00408dc7ff0746249fde7fc252654b58867a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 14:02:53 +0100

    mcd_channel_new_request: pass use_existing as a parameter rather than changing it later

 src/mcd-account-requests.c |    3 +--
 src/mcd-channel.c          |   23 +++--------------------
 src/mcd-channel.h          |    6 ++----
 3 files changed, 6 insertions(+), 26 deletions(-)

commit d1ea3cfdf2d3a1c3df0ad08f76d9461254e8b635
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 17:39:53 +0100

    account-requests/create-text.py: assert that MC implements ChannelRequest

 test/twisted/account-requests/create-text.py |   23 +++++++++++++++++++----
 1 files changed, 19 insertions(+), 4 deletions(-)

commit 9344498fb82835a14f409a14b94f6226c61d5432
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 17:12:19 +0100

    McdChannel: export the McdChannel on D-Bus if it represents a ChannelRequest
    
    While we're changing API, change user action time to gint64 as per
    telepathy-spec, rather than guint64, except in the
    Account.Interface.Requests D-Bus API itself (which keeps guint64).

 src/mcd-account-requests.c |    9 +++++--
 src/mcd-channel.c          |   45 ++++++++++++++++++++++++++++++++++++++-----
 src/mcd-channel.h          |    6 +++-
 3 files changed, 49 insertions(+), 11 deletions(-)

commit 994eb1f2148b90e69b48b64de1c0ec7b716ab951
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 16:23:52 +0100

    McdAccount: induce the McdChannel to emit Succeeded and Failed when necessary
    
    This doesn't yet emit actual D-Bus signals, because the McdChannel isn't
    yet exported.

 src/mcd-account-requests.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 336d5781007e303d42fac6f0dc99db25496c0e19
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 14:48:40 +0100

    McdChannel: implement a stub version of the ChannelRequest interface

 src/mcd-channel.c |  114 ++++++++++++++++++++++++++++++++++++++++++++++++++++-
 src/mcd-channel.h |    2 +
 2 files changed, 115 insertions(+), 1 deletions(-)

commit 5d633ca79d42e4477d58a445ee3c48cb9f0bf9a4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 14:38:46 +0100

    McdDispatcher: revert hack used to preserve ABI
    
    We don't care about MCD's ABI yet anyway, so preserve the old amount of
    padding after adding the TpDBusPropertiesMixinClass.

 src/mcd-dispatcher.c |    2 +-
 src/mcd-dispatcher.h |    6 ++----
 2 files changed, 3 insertions(+), 5 deletions(-)

commit e2347c62dc5a5660789fea7065016009d90ca15b
Merge: 374d589 eecd217
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 14:20:45 +0100

    Merge branch 'dispatcher-premature-optimization'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 374d589a55d928f1e9ee7252ea387c618586140e
Merge: 09b5b47 719bae3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 13:41:25 +0100

    Merge branch 'dispatcher'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 09b5b471c2d502de3137f3a601461e2b02efb826
Merge: 27189c8 0801339
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 13:37:05 +0100

    Merge branch 'pruning-with-a-chainsaw'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit eecd217a77f66ef23e6078f0d51ec0d152284d30
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 13:17:22 +0100

    McdDispatcher: suppress DispatchOperations change notification signals until it has been retrieved once
    
    Alberto requested that NewDispatchOperation/DispatchOperationFinished be
    suppressed until the client has opted in somehow; retrieving
    the DispatchOperations seems like the least bad opt-in mechanism, since
    it's a piece of state recovery that any correct client of this interface
    ought to be doing anyway.
    
    I think this is premature optimization, but since Alberto disagrees, here
    is a branch...

 src/mcd-dispatcher.c |   36 ++++++++++++++++++++++++++++--------
 1 files changed, 28 insertions(+), 8 deletions(-)

commit e9fc95ef237600a5eb0e44a3a4719fcad33b4e0a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 13:14:41 +0100

    dispatcher/dispatch-text.py: retrieve DispatchOperations property before testing
    
    Alberto suggests that there should be some "opt-in" process for
    DispatchOperations change notification signals, and this seems the least
    bad one.

 test/twisted/dispatcher/dispatch-text.py |   10 +++++++---
 1 files changed, 7 insertions(+), 3 deletions(-)

commit 719bae3961cd2aeed655a69a5b32fb3d38df35ce
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 13:13:28 +0100

    dispatcher/dispatch-text.py: assert that after the test finishes, there are no more CDOs

 test/twisted/dispatcher/dispatch-text.py |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit d7a11d4c74bd8daa10fb723e6060a5ed90a78b6e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 20:11:44 +0100

    Implement a test for the channel dispatcher

 test/twisted/Makefile.am                 |    1 +
 test/twisted/dispatcher/dispatch-text.py |  185 ++++++++++++++++++++++++++++++
 2 files changed, 186 insertions(+), 0 deletions(-)

commit 39c5dfb6b6bf6b5a50a4eeb052f200690b26f8e6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 20:11:32 +0100

    McdDispatcher: implement a stub version of ChannelDispatcher
    
    This takes the bus name and can list all channel dispatch operations, but
    does not yet implement CreateChannel or EnsureChannel.

 src/mcd-dispatcher.c |  171 +++++++++++++++++++++++++++++++++++++++++++++++++-
 src/mcd-dispatcher.h |   11 +++-
 2 files changed, 180 insertions(+), 2 deletions(-)

commit 2115fbb707905ee5d0864efc9387593cf44820ea
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 20:04:23 +0100

    constants: add ChannelDispatcher-related constants

 test/twisted/constants.py |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 90328c46283011140316cd402aa0aa40b7c34b91
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 20:10:49 +0100

    src/Makefile.am: re-enable support code for TpDBusPropertiesMixin

 src/Makefile.am |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 27189c828dcdbf75560267fd21cb452ac2ccfd56
Merge: 4d064bc e527cfb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-03 12:44:51 +0100

    Merge branch 'pruning'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 44d1673dcad0f5530914884bed693917057c91f4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-03 12:11:05 +0300

    Turn warning into DEBUG()
    
    Also, rewrite the comment.

 src/mcd-connection.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit f8bb2011cecf13b9c2e6ab29c47ede7f60dd8120
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-03 12:08:32 +0300

    Use TP errors whenever possible

 src/mcd-connection.c |   25 ++++++-------------------
 1 files changed, 6 insertions(+), 19 deletions(-)

commit ed53d80a96c929467306dbea58ff8dff306b129e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-03 11:53:18 +0300

    Fix channel direction
    
    Channels requested not through MC were having their direction always set to
    incoming; this is because after the "tp-proxy" property is set, GObject was
    setting the "outgoing" property to its default value, therefore overriding
    whatever had been set before.
    The solution is to hold on the call to mcd_channel_setup() until the object is
    constructed.

 src/mcd-channel.c |   21 +++++++++++++++++++--
 1 files changed, 19 insertions(+), 2 deletions(-)

commit 08013394901e82f4a428a2866d55023e241300d9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:41:16 +0100

    McdMaster: now that we've removed the old D-Bus APIs we can remove the concept of "offline on idle" too

 src/mcd-master.c |  106 ++---------------------------------------------------
 1 files changed, 4 insertions(+), 102 deletions(-)

commit 1c2c515c21053d4ec4c072bbf8477ff53c210b12
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:35:23 +0100

    McdMaster: remove deleted methods from docs

 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |  114 --------------------
 1 files changed, 0 insertions(+), 114 deletions(-)

commit d2d223bbf429528f8728e480cc266e593af7165f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:34:49 +0100

    McdMaster: remove more unused methods
    
    * mcd_master_set_default_presence
    * mcd_master_get_account_status
    * mcd_master_get_online_connection_names
    * mcd_master_get_account_connection_details
    * mcd_master_get_account_for_connection
    * mcd_master_new (a #define for mcd_master_get_default)

 src/mcd-master.c |  210 ------------------------------------------------------
 src/mcd-master.h |   21 ------
 2 files changed, 0 insertions(+), 231 deletions(-)

commit dfe4fb53093e8361d0b99a6d146e315bf12595ee
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:29:48 +0100

    McdMaster: remove various methods
    
    * mcd_master_request_presence
    * mcd_master_get_actual_presence
    * mcd_master_get_actual_presence_message
    * mcd_master_get_requested_presence
    * mcd_master_get_requested_presence_message
    * mcd_master_get_used_channels_count
    * mcd_master_get_connection_parameters
    
    and make mcd_master_get_connection static

 src/mcd-master.c |   91 +-----------------------------------------------------
 src/mcd-master.h |   16 ---------
 2 files changed, 1 insertions(+), 106 deletions(-)

commit fa2e8faab0acaa5cbd766d386058e647d4641bb1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:24:21 +0100

    McdPresenceFrame: remove deleted functionality from docs

 .../tmpl/mcd-presence-frame.sgml                   |   57 --------------------
 1 files changed, 0 insertions(+), 57 deletions(-)

commit 3356fc9eed8c3cf6cb366f1dbca46605904b031f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:24:01 +0100

    McdPresenceFrame: remove function pointers for default signal handlers too

 src/mcd-presence-frame.h |   16 ----------------
 1 files changed, 0 insertions(+), 16 deletions(-)

commit 551cfa187e3b90dcc05aa9e5e82a751fe8e7fed7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:18:17 +0100

    McdPresenceFrame: remove mcd_presence_frame_get_account_status, mcd_presence_frame_get_account_status_reason

 src/mcd-presence-frame.c |   17 -----------------
 src/mcd-presence-frame.h |    5 -----
 2 files changed, 0 insertions(+), 22 deletions(-)

commit c0fc70d23159ffcf0c26d3f2760f6d306f77eb35
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:16:32 +0100

    McdPresenceFrame: remove status-changed signal

 src/mcd-presence-frame.c |   19 -------------------
 1 files changed, 0 insertions(+), 19 deletions(-)

commit a5ab0abfd8a3400ed6c25bad96f08f401d3057a4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:13:28 +0100

    Fix unused variable

 src/mcd-presence-frame.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 2ee3e13e9ae17698ceae40522d144202604b6b75
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:12:53 +0100

    McdPresenceFrame: remove status-actual signal

 src/mcd-presence-frame.c |   16 ----------------
 1 files changed, 0 insertions(+), 16 deletions(-)

commit 3b25c428805f1436dbe69340097eba376fdc6c1f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:11:17 +0100

    McdPresenceFrame: remove presence-actual signal

 src/mcd-presence-frame.c |   18 ------------------
 1 files changed, 0 insertions(+), 18 deletions(-)

commit 4597ce90fdb28123cee3421a7809b4c0253f51a2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:09:04 +0100

    McdPresenceFrame: remove presence-changed signal

 src/mcd-presence-frame.c |   13 -------------
 1 files changed, 0 insertions(+), 13 deletions(-)

commit e4713672afe91c1c73bbb051c4bf821fbfe3bfe3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:05:33 +0100

    McdService: remove signals from docs

 .../libmissioncontrol-server/tmpl/mcd-service.sgml |   55 --------------------
 1 files changed, 0 insertions(+), 55 deletions(-)

commit 863c1cdfabb3f20fc9935741dfcb9fe0e85513ed
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:05:23 +0100

    McdService: remove remnants of dispatcher

 src/mcd-service.c |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)

commit cb477d6917685b4ceffdf956082f6deac6e72232
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:04:20 +0100

    McdService: remove tracking of last status
    
    _on_status_actual now has no side-effects, so it can be removed.

 src/mcd-service.c |   37 -------------------------------------
 1 files changed, 0 insertions(+), 37 deletions(-)

commit 640597bb0fd3a415fb2cd20a9dcb056f45495c36
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:02:48 +0100

    McdService: remove presence-changed signal

 src/mcd-service.c |   25 -------------------------
 1 files changed, 0 insertions(+), 25 deletions(-)

commit 19821b56a661bf211a346c0ed60e5e6fcf625c50
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 21:01:16 +0100

    McdService: remove presence-requested signal

 src/mcd-service.c |   15 ---------------
 1 files changed, 0 insertions(+), 15 deletions(-)

commit e1ead0cb0f1f01c61dcb70085cb6a384a9db9d22
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:59:41 +0100

    McdService: remove account-presence-changed signal

 src/mcd-service.c |   91 -----------------------------------------------------
 1 files changed, 0 insertions(+), 91 deletions(-)

commit c696ee087896cf020cb6bca4213467dff6fcd58d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:56:43 +0100

    McdService: remove status-actual signal

 src/mcd-service.c |   13 -------------
 1 files changed, 0 insertions(+), 13 deletions(-)

commit e58139a7ab888d9d49a519f56034e239f0b87079
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:55:18 +0100

    McdService: remove mcd-error signal (never emitted)

 src/mcd-service.c |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

commit ab901cbb4f648bfc6a817ec5ee8ef05db5a32d94
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:54:19 +0100

    McdService: remove account-status-changed signal

 src/mcd-service.c |   22 ----------------------
 1 files changed, 0 insertions(+), 22 deletions(-)

commit cea2a6a6053948a0ceeefda7256806c7696155ad
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:52:54 +0100

    McdService: remove presence-status-requested, presence-status-actual, used-channels-count-changed signals
    
    Nothing in MC mentions them any more.

 src/mcd-service.c |   94 -----------------------------------------------------
 1 files changed, 0 insertions(+), 94 deletions(-)

commit e527cfb8082ba87ced65a41e77c07dfae8a1d6b8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:43:13 +0100

    Remove NMC4 API altogether

 xml/Makefile.am        |    8 +-
 xml/MissionControl.xml |  406 ------------------------------------------------
 xml/nmc4.xml           |    9 -
 3 files changed, 1 insertions(+), 422 deletions(-)

commit e6eab61a56a02ca7df4d11ffbfb892a5a080d216
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:41:45 +0100

    McdService: don't generate old MC API to implement

 src/Makefile.am |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)

commit 26a7984b5418bd5515b052e2655f4ca9c8748dc0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:41:09 +0100

    McdService: don't register with GObject at all

 src/mcd-service.c |  172 -----------------------------------------------------
 1 files changed, 0 insertions(+), 172 deletions(-)

commit 99eba1bdcad5ce9664f35e6dc7345dc1f192933a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:27:28 +0100

    Compat: remove channel-requesting methods altogether

 src/mcd-account-compat.c         |   46 +--------------------------------
 xml/Account_Interface_Compat.xml |   51 --------------------------------------
 2 files changed, 2 insertions(+), 95 deletions(-)

commit 15281e5eb0e24b8e4c2ead5c4ef5a74222b4a124
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:22:06 +0100

    configure.ac: enable some more warnings (the ones used by telepathy-glib)

 configure.ac |   12 +++++-------
 1 files changed, 5 insertions(+), 7 deletions(-)

commit dd723e26b189384b2d0387cfca020c06d1bfc03a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:21:49 +0100

    mcd-misc: write_to_temp_file: length is guaranteed to be >= 0 so use gsize
    
    This avoids a signed/unsigned comparison.

 src/mcd-misc.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5815963fa4d5d8f4c1767302cc6fdb81c4d7383a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:09:52 +0100

    McdAccount: Compat: remove old channel-requesting API (no longer used)

 src/mcd-account-compat.c |  121 ----------------------------------------------
 src/mcd-account-compat.h |   13 -----
 src/mcd-master.h         |    2 -
 3 files changed, 0 insertions(+), 136 deletions(-)

commit 91845ead0fdfa71c650497a9455a70c4d265d485
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:09:23 +0100

    Remove old request mechanisms from gtkdoc

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    6 ----
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |   29 --------------------
 2 files changed, 0 insertions(+), 35 deletions(-)

commit c5908f273fd5a0abfd3326f9d8239b9bcadefbc9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:05:04 +0100

    McdAccount: remove unused channel-requesting method

 src/mcd-account.c |    8 --------
 src/mcd-account.h |    5 -----
 2 files changed, 0 insertions(+), 13 deletions(-)

commit f4e531d0051171dc2bdf20c5632d16cdf35f69b3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:52:18 +0100

    McdMaster: remove the ability to request channels and cancel requests
    
    No longer used (it was previously used by McdService).

 src/mcd-master.c |   48 ------------------------------------------------
 src/mcd-master.h |    9 ---------
 2 files changed, 0 insertions(+), 57 deletions(-)

commit 5d3a7c2c2801aa6f3305aec0a2204d3ad37df4f2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:51:44 +0100

    McdAccountManager: reformulate expression to avoid signed/unsigned comparison
    
    A pointer plus an unsigned is a pointer, but a pointer minus a pointer is
    a ptrdiff_t which is signed.

 src/mcd-account-manager.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a321e70af6b848858f77b9eacc51a66799055f24
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:44:55 +0100

    McdAccount: don't implement Compat request/cancel methods

 src/mcd-account-compat.c |   56 +++++++++-------------------------------------
 1 files changed, 11 insertions(+), 45 deletions(-)

commit 97405a0880056c66964a7c862e591e0b810fbbbf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:36:08 +0100

    McdService: don't actually export the object
    
    This avoids emitting D-Bus signals. For now the GObject signals are still
    emitted, since it's harder to determine which ones are still needed.

 src/mcd-service.c |   12 ++----------
 1 files changed, 2 insertions(+), 10 deletions(-)

commit 2146b69b1023aeb756a4a5e309ea9db88447fd72
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 20:32:57 +0100

    McdService: do not implement any methods

 src/mcd-service.c |  320 ++++++-----------------------------------------------
 1 files changed, 32 insertions(+), 288 deletions(-)

commit 40c4d53c1e2ab9b58902a83ccf83353f910cc580
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:34:36 +0100

    configure.ac: use TP_COMPILER_WARNINGS to enable warnings

 configure.ac |   52 ++++++++++++++++++++--------------------------------
 1 files changed, 20 insertions(+), 32 deletions(-)

commit e30b8557a3aa8f823414681feb6ee84c1b96700c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:28:49 +0100

    Import TP_COMPILER_WARNINGS m4 macro from telepathy-glib

 m4/Makefile.am             |    2 ++
 m4/tp-compiler-flag.m4     |   36 ++++++++++++++++++++++++++++++++++++
 m4/tp-compiler-warnings.m4 |   40 ++++++++++++++++++++++++++++++++++++++++
 3 files changed, 78 insertions(+), 0 deletions(-)

commit eda808b735d50205e383f8180a6005989fd34658
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:09:01 +0100

    libmcclient: don't generate bindings for the MC 4 API

 .../libmcclient/tmpl/interfaces-body.sgml          |    8 -------
 doc/reference/libmcclient/tmpl/interfaces.sgml     |   22 --------------------
 .../libmcclient/tmpl/libmcclient-unused.sgml       |   19 +++++++++++++++++
 doc/reference/libmcclient/tmpl/mc-errors.sgml      |   17 +-------------
 xml/all.xml                                        |    1 -
 5 files changed, 21 insertions(+), 46 deletions(-)

commit dca1e51652e0e81adc1ef5b167395e8d6d0e7d37
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:03:58 +0100

    Remove libmissioncontrol altogether

 .gitignore                                         |    3 -
 configure.ac                                       |    2 -
 libmissioncontrol.pc.in                            |   13 -
 libmissioncontrol/Makefile.am                      |  241 ---
 libmissioncontrol/cli-nmc4.c                       |  111 --
 libmissioncontrol/cli-nmc4.h                       |   58 -
 libmissioncontrol/dbus-api.c                       |   26 -
 libmissioncontrol/dbus-api.h                       |   40 -
 libmissioncontrol/mc-account-cli.c                 |  363 ----
 libmissioncontrol/mc-account-manager-proxy.c       |   64 -
 libmissioncontrol/mc-account-manager-proxy.h       |   57 -
 libmissioncontrol/mc-account-monitor-priv.h        |   36 -
 libmissioncontrol/mc-account-monitor.c             |  468 -----
 libmissioncontrol/mc-account-monitor.h             |   72 -
 libmissioncontrol/mc-account-priv.h                |   57 -
 libmissioncontrol/mc-account-proxy.c               |   61 -
 libmissioncontrol/mc-account-proxy.h               |   58 -
 libmissioncontrol/mc-account.c                     | 2062 --------------------
 libmissioncontrol/mc-account.h                     |  197 --
 libmissioncontrol/mc-manager-priv.h                |   32 -
 libmissioncontrol/mc-manager.c                     |  466 -----
 libmissioncontrol/mc-manager.h                     |   84 -
 libmissioncontrol/mc-profile.c                     | 1075 ----------
 libmissioncontrol/mc-profile.h                     |  127 --
 libmissioncontrol/mc-protocol-priv.h               |   32 -
 libmissioncontrol/mc-protocol.c                    |  372 ----
 libmissioncontrol/mc-protocol.h                    |  105 -
 libmissioncontrol/mc-remap.h                       |  159 --
 libmissioncontrol/mc-signals-marshal.list          |    1 -
 libmissioncontrol/mc.c                             |  163 --
 libmissioncontrol/mc.h                             |   56 -
 .../mission-control-signals-marshal.list           |    7 -
 libmissioncontrol/mission-control.c                | 1454 --------------
 libmissioncontrol/mission-control.h                |  251 ---
 libmissioncontrol/svc-nmc4.h                       |   28 -
 libmissioncontrol/test.c                           |  441 -----
 test/mc-client.c                                   |   84 -
 37 files changed, 0 insertions(+), 8926 deletions(-)

commit 77ef82c316412e520210c0d1118b3ecdb7a8e394
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:03:34 +0100

    Remove libmissioncontrol documentation

 configure.ac                                       |    1 -
 doc/reference/libmissioncontrol/Makefile.am        |   87 -----
 .../libmissioncontrol/libmissioncontrol-docs.sgml  |   18 -
 .../libmissioncontrol-sections.txt                 |  179 ---------
 .../libmissioncontrol/libmissioncontrol.types      |    9 -
 doc/reference/libmissioncontrol/tmpl/dummy.sgml    |    1 -
 .../tmpl/mc-account-monitor-priv.sgml              |   16 -
 .../libmissioncontrol/tmpl/mc-account-monitor.sgml |   82 -----
 .../libmissioncontrol/tmpl/mc-account-priv.sgml    |   16 -
 .../libmissioncontrol/tmpl/mc-account.sgml         |  377 --------------------
 .../libmissioncontrol/tmpl/mc-client-lib-gen.sgml  |   16 -
 .../libmissioncontrol/tmpl/mc-manager-priv.sgml    |   16 -
 .../libmissioncontrol/tmpl/mc-manager.sgml         |   95 -----
 .../libmissioncontrol/tmpl/mc-profile.sgml         |  218 -----------
 .../libmissioncontrol/tmpl/mc-protocol-priv.sgml   |   16 -
 .../libmissioncontrol/tmpl/mc-protocol.sgml        |  113 ------
 doc/reference/libmissioncontrol/tmpl/mc.sgml       |   26 --
 .../tmpl/mission-control-signals-marshal.sgml      |   16 -
 .../tmpl/mission-control-unused.sgml               |  256 -------------
 .../libmissioncontrol/tmpl/mission-control.sgml    |  318 -----------------
 20 files changed, 0 insertions(+), 1876 deletions(-)

commit 461fcde09cd2c5215555c22d13224d77775db95a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 19:02:51 +0100

    libmissioncontrol-server docs: use libmcclient for cross-references

 doc/reference/libmissioncontrol-server/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit dc2d56dc661f7964203a6244d2a0ecb2935d7da3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 18:56:03 +0100

    Never build libmissioncontrol-client (aka libmissioncontrol)

 Makefile.am               |    7 -------
 configure.ac              |   20 --------------------
 doc/reference/Makefile.am |    3 ---
 test/Makefile.am          |    6 ------
 4 files changed, 0 insertions(+), 36 deletions(-)

commit 4d064bc1b79eaf863600b77bc1663d7e60c23da1
Merge: 8cd1ae9 8e0a5e0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-02 13:37:36 +0100

    Merge branches 'misc' and 'tests'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 8e0a5e0a7db9f659c166e1060bac37feb8899da0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 18:00:44 +0100

    account-requests/create-text.py: exercise both CreateChannel and Ensure

 test/twisted/account-requests/create-text.py |   13 ++++++++++---
 1 files changed, 10 insertions(+), 3 deletions(-)

commit d958905c365c45c812a5ae6f0d329ca96ebd0ceb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 18:00:18 +0100

    SimulatedConnection.ensure_handle: fix ensuring the same handle twice

 test/twisted/mctest.py |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit fcfd924b86b6e5ae93b516251356e6b67cab8fb9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 17:55:48 +0100

    mctest.exec_test_deferred: put all accounts offline, disable them and delete them when finishing a test

 test/twisted/mctest.py |   31 +++++++++++++++++++++++++++----
 1 files changed, 27 insertions(+), 4 deletions(-)

commit d4c8148818b166872db799d97fc01261f16edf26
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 17:55:17 +0100

    servicetest: add a way to clean up circular references among simulated objects

 test/twisted/servicetest.py |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit 6c9963b9bd7ce809cf80cea946b92724421601aa
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 17:54:57 +0100

    SimulatedConnection: close all channels on disconnect

 test/twisted/mctest.py |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit f6625976f866361b0b929e312619416f8baae8d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 16:17:06 +0100

    account-requests/create-text.py: add a simple test for requesting a channel using Alberto's API

 test/twisted/Makefile.am                     |    1 +
 test/twisted/account-requests/create-text.py |  158 ++++++++++++++++++++++++++
 2 files changed, 159 insertions(+), 0 deletions(-)

commit 4475b160d43b7ef529f413252e0946d0ad82c809
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 17:43:30 +0100

    mctest: hopefully improve clarity, by moving shutdown actions out of a try/except block

 test/twisted/mctest.py |   18 +++++++++---------
 1 files changed, 9 insertions(+), 9 deletions(-)

commit 219226bceeb4388d38bc36304360ffb2420622d4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 16:58:15 +0100

    test-connect: exercise taking the account offline

 test/twisted/test-connect.py |   23 +++++++++++++++++++++++
 1 files changed, 23 insertions(+), 0 deletions(-)

commit 3634c1d94e7aca219e0c9f42eedeb1c881dd999d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 16:57:22 +0100

    create_fakecm_account: wait for the Valid property to change

 test/twisted/mctest.py |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit a4fad3438c7b72b11372d254a38de5f04059c45f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 16:56:59 +0100

    mctest: SimulatedChannel: implement Close and GetInterfaces, fix announce and close

 test/twisted/mctest.py |   19 ++++++++++++++++++-
 1 files changed, 18 insertions(+), 1 deletions(-)

commit 7dbdbfa3d988bb7df73140817792239321daa478
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 16:56:37 +0100

    mctest: SimulatedConnection: implement Disconnect, and keep status/reason in sync

 test/twisted/mctest.py |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 53b5e5fe0af5b3b086526473089fb5ae04f3cb2a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 16:07:41 +0100

    test-connect: remove dead comments

 test/twisted/test-connect.py |   13 ++-----------
 1 files changed, 2 insertions(+), 11 deletions(-)

commit 7c09a8df3b0489d45b1bf60a3f50274e390f4073
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 16:07:26 +0100

    mctest: don't wait for NormalizedName to become set
    
    This is exercised by test-connect.py and doesn't need to be done elsewhere.

 test/twisted/mctest.py |    7 -------
 1 files changed, 0 insertions(+), 7 deletions(-)

commit 7cbd0d63573b082064b751b6c7f8096ac4f71855
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 16:01:40 +0100

    mctest: un-stub the Channels property on connections; use SimulatedChannel in test-connect

 test/twisted/mctest.py       |   25 ++++++++++++++++++++++++-
 test/twisted/test-connect.py |   12 +++++-------
 2 files changed, 29 insertions(+), 8 deletions(-)

commit c5c9becf4006b172c818bffbc53d267fb8a918cc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 15:56:07 +0100

    mctest: between tests, delete all accounts

 test/twisted/mctest.py |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit b8933dba393291fce6374527c3ee083ae1b7cb50
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 15:24:32 +0100

    Improve robustness of waiting for the NormalizedName
    
    MC sometimes combines AccountPropertyChanged signals, so waiting for
    one with particular arguments won't necessarily work.

 test/twisted/test-connect.py |   19 ++++++++++++++-----
 1 files changed, 14 insertions(+), 5 deletions(-)

commit 8d7a6db81776e769e864972a61be0747a9d26a00
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 13:55:25 +0100

    mctest: add a simulated channel

 test/twisted/mctest.py |   35 +++++++++++++++++++++++++++++++++++
 1 files changed, 35 insertions(+), 0 deletions(-)

commit 6d901c1c87f8e59edf21bd14f51ad93bd22bae38
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 13:55:15 +0100

    mctest: add a simulated client

 test/twisted/mctest.py |   94 ++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 94 insertions(+), 0 deletions(-)

commit 1ebcff2b2b60592c6292689013faa600b6a65e74
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 13:54:32 +0100

    constants: add various more constants

 test/twisted/constants.py |   16 ++++++++++++++++
 1 files changed, 16 insertions(+), 0 deletions(-)

commit efa4c26d977b1df8d06db93e47ee6c2d3f30888a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 11:26:23 +0100

    mctest: factor out code to create an account and put it online

 test/twisted/mctest.py       |   94 ++++++++++++++++++++++++++++++++++++++++++
 test/twisted/test-account.py |   31 +------------
 test/twisted/test-connect.py |   27 ++----------
 3 files changed, 101 insertions(+), 51 deletions(-)

commit 384566d2c2ad083e6a7f5b23b003dd603adfab7e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 17:22:31 +0100

    servicetest.sync_dbus: allow to be called on any D-Bus object

 test/twisted/servicetest.py |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit c18bf24e949807dfb51b5f92a67ff329f5f82b91
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 20:26:11 +0000

    test-connect: use SimulatedConnection to be more order-independent

 test/twisted/test-connect.py |   84 +++++++++++-------------------------------
 1 files changed, 22 insertions(+), 62 deletions(-)

commit afbdfb36224396a3aa67281379e7a0845ce4631b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 20:25:48 +0000

    mctest: add an improved SimulatedConnection class

 test/twisted/mctest.py |   89 ++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 89 insertions(+), 0 deletions(-)

commit 3c48f1c4aa1878ecfcffbc0cc62df3648710949f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 19:42:38 +0000

    test-connect.py: reimplement by responding to D-Bus calls directly

 test/twisted/test-connect.py |  132 +++++++++++++++++++++++++++++++++--------
 1 files changed, 106 insertions(+), 26 deletions(-)

commit 6f62bf1c860c2551f4be97a4995c1437ba5024cf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 19:41:36 +0000

    servicetest: require signature when emitting D-Bus messages
    
    Otherwise, it's very easy to get it wrong, which means that dbus-glib
    will silently ignore the message. Thanks, dbus-glib.

 test/twisted/servicetest.py |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit b32ec22d4d53c72edcfd8c13c7a9e7a6363efc72
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 18:52:13 +0000

    test-account.py: port to use direct D-Bus access

 test/twisted/test-account.py |   13 ++++++++-----
 1 files changed, 8 insertions(+), 5 deletions(-)

commit 190f7518e4d75e61ad711f36fb2feb6401892eb9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 18:50:28 +0000

    constants: add lots more constants

 test/twisted/constants.py |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit 78c6f606afb1b18dcf3ebecc62a7941796cd37b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 17:24:55 +0000

    servicetest: add support for treating D-Bus method calls like any other event

 test/twisted/mctest.py      |    1 +
 test/twisted/servicetest.py |   51 +++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 52 insertions(+), 0 deletions(-)

commit 3c91de66dbee3b15f13b02a1bbf8cbd1088d2361
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 16:59:24 +0000

    servicetest: update from telepathy-gabble, adding support for predicate= and expect_racy

 test/twisted/servicetest.py |   29 ++++++++++++++++++++++++++++-
 1 files changed, 28 insertions(+), 1 deletions(-)

commit fb95432abce5deab2bf9b9d7e1053bbcb4ef2918
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 14:38:31 +0000

    Import ChannelDispatcher, ChannelDispatcher.Interface.OperationList, ChannelRequest from telepathy-spec 0.17.22

 libmcclient/Makefile.am                            |    2 +-
 src/Makefile.am                                    |   10 +-
 src/dispatcher.xml                                 |    8 +
 src/request.xml                                    |    7 +
 xml/Channel_Dispatcher.xml                         |  383 ++++++++++++++++++++
 ...Channel_Dispatcher_Interface_Operation_List.xml |  141 +++++++
 xml/Channel_Request.xml                            |  189 ++++++++++
 xml/Makefile.am                                    |    3 +
 xml/nmc5.xml                                       |    3 +
 9 files changed, 743 insertions(+), 3 deletions(-)

commit a691472a05ba797ad138fc0489db78906c3604ef
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 13:49:28 +0000

    Update ChannelDispatchOperation from spec 0.17.22 (only editorial changes)

 xml/Channel_Dispatch_Operation.xml |   53 ++++++++++++++++++++---------------
 1 files changed, 30 insertions(+), 23 deletions(-)

commit 2c07daee0d2fbec63860bc29d28e3856e72b98d2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 13:56:45 +0100

    _mcd_channel_get_immutable_properties: debug if returning NULL
    
    Ideally, this method should eventually have "does not return NULL
    unless caller is buggy" as an API guarantee. Until then, we can at
    least be noisy about it.

 src/mcd-channel.c |   22 +++++++++++++++++++---
 1 files changed, 19 insertions(+), 3 deletions(-)

commit a3fa389d01ac9ae81309216473ac4c015000b876
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 14:17:18 +0100

    mcd_dispatcher_run_observers: allocate and free an empty observer_info hash table
    
    It is incorrect to pass NULL to dbus-glib when a GHashTable is
    expected; a critical warning inside GLib is the result.

 src/mcd-dispatcher.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 80cc867c4b78bb1318723885154ff65b33f1c517
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-04-01 17:29:18 +0100

    McdConnection: debug when RequestConnection returns successfully

 src/mcd-connection.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 7f8be49f068d3bf8f264d91ae6cbc9a4f7f88d0f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 13:43:56 +0000

    Move generated introspect XML into a subdirectory
    
    Reducing clutter in xml/ makes it easier to compare the interfaces with
    the versions found in telepathy-spec.

 .gitignore                    |    1 -
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 xml/Makefile.am               |    8 +++++---
 4 files changed, 7 insertions(+), 6 deletions(-)

commit 0640194139e496210677333a761fa202fb134643
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 19:29:30 +0000

    McdConnection: get_all_requests_cb: don't segfault if Channels property doesn't exist
    
    However buggy the other process is, we shouldn't crash.

 src/mcd-connection.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 8a9f137ead5a1cb6ba633c57a71c5965f36a2c33
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 18:51:21 +0000

    McdConnection: debug when channels appear

 src/mcd-connection.c |   28 ++++++++++++++++++++++++++++
 1 files changed, 28 insertions(+), 0 deletions(-)

commit 24dab1c6b9b5ddd36e4f7fab2411562a4f642e49
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 18:50:18 +0000

    mcd-debug.h: add DEBUGGING
    
    This lets us avoid potentially costly debug actions (like iterating
    over a hash table or doing g_strdup_value_contents) when we're not
    actually going to output them anyway.

 src/mcd-debug.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 8cd1ae91b3b8014bec14b301a126baabcabcf0c8
Merge: 04690c7 ee8f3e7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-01 09:48:27 +0300

    Merge branch 'master' of git+ssh://git.collabora.co.uk/git/telepathy-mission-control

commit 04690c72d5f29fba232a9ca8cb0d135ee7eb1729
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-04-01 09:45:28 +0300

    Version 5.0.beta64

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2d79131c150c3971d656348d61d21942d9975440
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-31 16:18:42 +0300

    Signal when the profile is set.

 src/mcd-account-compat.c |   14 ++++++++++++++
 src/mcd-account-compat.h |    2 ++
 src/mcd-account-priv.h   |    1 +
 src/mcd-account.c        |    1 +
 4 files changed, 18 insertions(+), 0 deletions(-)

commit ee8f3e731a015b390e8914f95f48c491f3ac6248
Merge: 662c6b5 2166db5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 20:34:05 +0000

    Merge branch 'distcheck'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 2166db570365d7b8225c230c3ea315cf2ce18612
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 12:44:55 +0000

    .gitignore: ignore tarballs and dist directories

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 52180760b802bf2c15dc56e209f080315ff14ac8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 12:44:36 +0000

    test/twisted: remove accounts.cfg during clean

 test/twisted/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit a44bdaf10b42095d91fc19baa783c80c3ad6566e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 12:44:25 +0000

    test/twisted: distribute constants.py

 test/twisted/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 4b898158d66c17ccbb5ce28d750612a5905b708d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 12:44:12 +0000

    various: distribute XML for the ChannelDispatchOperation

 libmcclient/Makefile.am |    1 +
 src/Makefile.am         |    1 +
 xml/Makefile.am         |    1 +
 3 files changed, 3 insertions(+), 0 deletions(-)

commit 662c6b52d0abbf2f06e20416bfc87d8190c35354
Merge: 9414c83 b4462ff
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-27 12:18:07 +0000

    Merge branch 'tests'
    
    Reviewed-by: Alberto Mardegan <alberto.mardegan@nokia.com>

commit 9414c831d104c3140b4c539af00eb59a5f19d261
Merge: 801f9b3 4856bf5
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-27 11:59:23 +0200

    Merge branch 'satisfied_requests'

commit 801f9b33025c52061fa4aaf7a489b0c5d269ea46
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-27 11:56:47 +0200

    Version 5.0.beta63

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4856bf58787cc12a62ca80283cb6dfa091befa6c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-27 11:11:50 +0200

    Unbind the SatisfiedRequests from the RequestData
    
    This is because even unrequested channels can satisfy a request, if the same
    channel is requested while it's still dispatching.

 src/mcd-channel.c    |   54 ++++++++++++++++++++++++++++---------------------
 src/mcd-dispatcher.c |    2 +-
 2 files changed, 32 insertions(+), 24 deletions(-)

commit b4462ff8c069a1ec4436c05937673a80cd469906
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-26 16:30:38 +0000

    Initialize MCD debug so we can see what's going on in twisted tests

 server/mc-server.c             |    1 +
 test/twisted/mc-debug-server.c |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit 236f012f1995ea3c09452f2aed049fb2555a4f80
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-26 16:20:40 +0000

    McdDispatcher: get_channel_filter_cb: cope with errors
    
    It is wrong to dereference out_Value if the Get() call failed (in practice
    we'll get filters == NULL and an invalid access to (void *) 0x4); it
    seems reasonable to treat an error as equivalent to an empty list.
    
    (Reproduced by using Valgrind on a slightly modified test-connect.py.)

 src/mcd-dispatcher.c |   12 +++++++++++-
 1 files changed, 11 insertions(+), 1 deletions(-)

commit f8a8abf8757f3ce3f8f9c485dca71e664be7dee4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-26 16:08:57 +0000

    exec-with-log.sh.in: set up more valgrind options

 test/twisted/tools/Makefile.am         |    6 +-
 test/twisted/tools/exec-with-log.sh.in |    4 +
 test/twisted/tools/valgrind.supp       |  871 ++++++++++++++++++++++++++++++++
 3 files changed, 879 insertions(+), 2 deletions(-)

commit 0719db1ac4d905e494f3c6531960229c2c311908
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-26 16:08:27 +0000

    Add a test for various ways to fail at creating an account
    
    Unfortunately, the first two of these scenarios currently cause MC to
    dump core :-( so the test is not currently connected up.

 test/twisted/Makefile.am       |    1 +
 test/twisted/account-bad-cm.py |   59 ++++++++++++++++++++++++++++++++++++++++
 2 files changed, 60 insertions(+), 0 deletions(-)

commit 133301743aebd34e847cf7303114971cd7ba5017
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-26 15:50:30 +0000

    exec-with-log.sh.in: produce a telepathy-glib debug log

 test/twisted/tools/exec-with-log.sh.in |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e3bad1604a43bd1b7e03fead68904168db18790b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-26 15:20:00 +0000

    test/twisted: run a modified build of MC that exits gracefully
    
    The normal mc-server exits via _exit() when disconnected from D-Bus. This
    doesn't run atexit handlers, which is undesirable when using gcov for
    targeted testing.
    
    Also use libtool correctly when invoking the modified build, and add a
    template test that doesn't do anything.

 .gitignore                             |    1 +
 test/twisted/Makefile.am               |   19 +++++-
 test/twisted/do-nothing.py             |    8 ++
 test/twisted/mc-debug-server.c         |  119 ++++++++++++++++++++++++++++++++
 test/twisted/tools/exec-with-log.sh.in |    4 +-
 5 files changed, 148 insertions(+), 3 deletions(-)

commit 4091d4be0f92d773960ed05c3c5240b527bd809e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 19:58:49 +0000

    Fail tests with a core dump on critical warnings
    
    We should be stricter in tests than in normal usage.

 test/twisted/tools/exec-with-log.sh.in |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit c601771f399a57893a7427a4b9b4d43f90893919
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 19:27:48 +0000

    test-account.py: create account asynchronously and assert that AccountValidityChanged is emitted

 test/twisted/test-account.py |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit b39fa1b51f4eb056f47069711192086047ef3c9f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 19:20:42 +0000

    test-account.py: exercise miscellaneous read/write properties

 test/twisted/test-account.py |   46 ++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 44 insertions(+), 2 deletions(-)

commit f57f49888c6bd61b3a0a8154bfeb7dad26a21739
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 19:07:13 +0000

    test-connect.py: use constants.py

 test/twisted/test-connect.py |   69 ++++++++++++++++++-----------------------
 1 files changed, 30 insertions(+), 39 deletions(-)

commit b46b0abf3004f1a98a73f891292df9b2f73719c0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 19:02:09 +0000

    test-account.py: use constants.py

 test/twisted/test-account.py |   54 ++++++++++++++++-------------------------
 1 files changed, 21 insertions(+), 33 deletions(-)

commit d0997f4363d43218558cb47a323b2f9b3fd92712
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 19:01:54 +0000

    constants.py: extend coverage

 test/twisted/constants.py |   21 ++++++++++++++++-----
 1 files changed, 16 insertions(+), 5 deletions(-)

commit e83780813ce08926e9eecbfa98ebbbfcc13fe680
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 18:50:09 +0000

    tests: Set up some more realistic parameters for the fake CM

 test/twisted/telepathy/managers/fakecm.manager |   12 ++++++++++--
 test/twisted/test-account.py                   |    3 ++-
 test/twisted/test-connect.py                   |   17 ++++++++++++++---
 3 files changed, 26 insertions(+), 6 deletions(-)

commit 19f63a7b83605e528753b551fbc6ee557a2959e2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 18:22:32 +0000

    test/twisted: import constants.py from telepathy-gabble master

 test/twisted/constants.py |   96 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 96 insertions(+), 0 deletions(-)

commit fdfe98c8a220069d613317a73b504fd6a476ab54
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 18:21:51 +0000

    test-account.py: improve assertions about interfaces
    
    * assert in such a way that if interfaces are added or re-ordered, the
      test will continue to pass
    * don't assert that AccountManager is among the AM interfaces - there's no
      point in listing an interface that the caller clearly already knows
      we have
    * likewise for Account

 test/twisted/test-account.py |   28 +++++++++++++++-------------
 1 files changed, 15 insertions(+), 13 deletions(-)

commit 59e88f7638b36a992a7c45cc866b471efbd4cd8a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 17:55:01 +0000

    Override .manager, .client search path using XDG_DATA_HOME, XDG_DATA_DIRS
    
    MC now searches for connection manager cached info using telepathy-glib,
    which does not respect the old MC-specific hooks to divert the search path
    into different directories.
    
    To implement this, the support files in test/twisted need to be moved
    into a telepathy subdirectory.

 test/twisted/Makefile.am                       |    3 +++
 test/twisted/clients/README                    |    4 ----
 test/twisted/managers/README                   |    4 ----
 test/twisted/managers/fakecm.manager           |    7 -------
 test/twisted/telepathy/clients/README          |    4 ++++
 test/twisted/telepathy/managers/README         |    4 ++++
 test/twisted/telepathy/managers/fakecm.manager |    7 +++++++
 test/twisted/tools/exec-with-log.sh.in         |    9 +++++++--
 8 files changed, 25 insertions(+), 17 deletions(-)

commit a984e9442c91daa29fbbdada7095e5f924d0b5ec
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 17:33:04 +0000

    Add optional Lcov machinery from telepathy-gabble (usage: make lcov-check)

 .gitignore        |    5 +++++
 Makefile.am       |    2 ++
 tools/Makefile.am |    1 +
 tools/lcov.am     |   25 +++++++++++++++++++++++++
 4 files changed, 33 insertions(+), 0 deletions(-)

commit dc545ef63154f267d3ebfbb138379da08dd0d38f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2009-03-25 19:42:20 +0000

    Account, Account_Manager, Account_Interface_Avatar: update from telepathy-spec 0.17.22
    
    No substantive changes, except the special DBus_Property behaviour (which
    MC already implements).

 xml/Account.xml                  |  103 +++++++++++++++++++++++++------------
 xml/Account_Interface_Avatar.xml |    2 +
 xml/Account_Manager.xml          |   49 +++++++++++++-----
 3 files changed, 106 insertions(+), 48 deletions(-)

commit 4554308384ad90ed229709646a1e3b75c04bfd2e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-17 10:27:18 +0200

    Version 5.0.beta62

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6585f46bf87b616742f7310eaf3695975f8af238
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-17 10:01:06 +0200

    Mark handled channels as dispatched
    
    When recovering existing channels, mark them as dispatched if they are
    currently being handled.

 src/mcd-dispatcher.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 93dcd56f12bdd9a8b21c7f95ef231d2839900461
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-17 10:00:00 +0200

    Close the channel only when needed
    
    If the close_on_dispose flag is not set, channel must not be closed when
    aborting either.

 src/mcd-channel.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 42fba99e4a90f2a7b9fb6e6223776131548c8e55
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-16 12:14:18 +0200

    Use _mcd_file_set_contents()

 src/mcd-account-manager.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 128fea291d065ee5b2bc119f51e1ffc0eb1262aa
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-16 11:52:27 +0200

    Sync the temporary file

 src/mcd-misc.c |   19 +++++++++++++++++++
 1 files changed, 19 insertions(+), 0 deletions(-)

commit 4f05a29d2eff6f54e64714bd9ad6b3416be93f15
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-16 11:47:02 +0200

    Autoreindent

 src/mcd-misc.c |  312 ++++++++++++++++++++++++++++----------------------------
 1 files changed, 156 insertions(+), 156 deletions(-)

commit dee649d41bfc3e8c9c71430b2bc85147334938ab
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-16 11:44:33 +0200

    Take g_file_set_contents code from GLib
    
    We'll need to sync the temporary file.

 src/mcd-misc.c |  244 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-misc.h |    4 +
 2 files changed, 248 insertions(+), 0 deletions(-)

commit 1941bd627d33b47668c083aa8b7b4cdb7ee61802
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-16 11:26:22 +0200

    Remove DBus hack
    
    The problem was in the Uis having two different connections to DBus. This is
    being fixed in the UIs themselves and in libdbus.

 src/mcd-account-requests.c |   22 ----------------------
 1 files changed, 0 insertions(+), 22 deletions(-)

commit 0c1a395d1f5ff26bc8c8d8c94b942276f70e87f7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-05 16:47:26 +0200

    Version 5.0.beta61

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 76ca3e2983736bc00c417497a1da3f6b827a33c8
Merge: cb1be9b 1a3d178
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-05 16:43:06 +0200

    Merge branch 'mctool'

commit cb1be9b3582fc95e9a0319c719dcd85e5fde377b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-05 16:24:32 +0200

    Sleep for some time after a channel request
    
    This hack is to workaround DBus reordering or messages: sometimes it happens
    that the method return from Create/Ensure is delivered after the AddRequest
    method call.
    This sleep hopefully helps in reducing the chances this happens.

 src/mcd-account-requests.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit f49f8fbde5c860205a58255939d99f2ee15fa62d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-05 14:11:37 +0200

    Cancel reconnections when offline presence is requested

 src/mcd-connection.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit f05f39b8d8650437aab61f7060c57ef3525b8023
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-02 13:07:58 +0200

    Define G_LOG_DOMAIN

 libmcclient/Makefile.am |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 150fac70bae39d0852fa1c88ad46f4b53e677d94
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-03-02 11:09:14 +0200

    Don't free the name string, it's a static one.

 src/mcd-account.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c322486aa60c325593cb73bc85a7e6e8e395908c
Author: Mathias Hasselmann <hasselmm@gnome.org>
Date:   2009-02-27 21:23:17 +0100

    Emit PropertyChanged signal for NormalizedName

 src/mcd-account.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 1a3d17821f694fa9f4b1fdac1fb6b490367c90c9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-27 14:52:31 +0200

    Add McProfile support to mc-tool

 util/mc-tool.c |   62 ++++++++++++++++++++++++++++++++++++++++++++-----------
 1 files changed, 49 insertions(+), 13 deletions(-)

commit 76e64d44b81db44cf505bebf7509cbc22f30326d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-27 11:47:40 +0200

    Construct the proper GError when a request fails.

 libmcclient/mc-account-request.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit e4b7cd310e02f15e25c8a186b71e330bdc228003
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-27 11:46:38 +0200

    Add DBus error mapping to McAccount proxy

 libmcclient/mc-account.c |    2 ++
 libmcclient/mc-account.h |    1 +
 2 files changed, 3 insertions(+), 0 deletions(-)

commit 4f541f1b1c7cc2d110d8b38a9a628924c70b3f0e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-27 10:09:49 +0200

    Rewrite GError-to-string function
    
    Use the GError enum types to build the error strings.

 src/mcd-account-requests.c |    5 ++-
 src/mcd-dispatcher.c       |    5 ++-
 src/mcd-misc.c             |   74 +++++++++++--------------------------------
 src/mcd-misc.h             |    2 +-
 4 files changed, 26 insertions(+), 60 deletions(-)

commit c1f643cb4e847608e56a7b1a55ffa8b08b290303
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-27 09:32:41 +0200

    Map MC errors as DBus errors
    
    Register a GType for the McError enum, and register it to DBus for error
    mapping.
    Code mostly copied from tp-glib.

 libmcclient/mc-errors.c |   46 ++++++++++++++++++++++++++++++++++++++++++----
 libmcclient/mc-errors.h |   11 ++++++++++-
 src/mcd-misc.c          |    2 --
 3 files changed, 52 insertions(+), 7 deletions(-)

commit e20a18b2459f68357f8a652edc88ca906a046fcf
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 14:51:55 +0200

    Version 5.0.beta60

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 479af6c535b9b0740857a576e8370339d9575be0
Merge: 59b6dc4 f61a872
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 14:49:17 +0200

    Merge branch 'debug'
    
    Conflicts:
    
    	src/mcd-manager.c

commit f61a872d715b4665eec3346eae62c799d9b1e3c4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 14:48:11 +0200

    Try avoid conflicts with other macros

 src/mcd-debug.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 51890dc35c877e8869901c7caaf07c3666ce0b76
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 14:31:30 +0200

    Remove G_STRFUNC from DEBUG() parameters

 src/mcd-account-compat.c        |    4 +-
 src/mcd-account-manager-query.c |    4 +-
 src/mcd-account-manager.c       |   20 ++++-----
 src/mcd-account-requests.c      |   12 +++---
 src/mcd-account.c               |   60 ++++++++++++-------------
 src/mcd-channel.c               |   17 +++----
 src/mcd-connection.c            |   95 +++++++++++++++++++--------------------
 src/mcd-dbusprop.c              |    8 ++--
 src/mcd-dispatch-operation.c    |    8 ++--
 src/mcd-dispatcher.c            |   29 +++++-------
 src/mcd-manager.c               |   16 +++---
 src/mcd-master.c                |   26 +++++-----
 src/mcd-mission.c               |    4 +-
 src/mcd-presence-frame.c        |   14 +++---
 src/mcd-service.c               |   10 ++--
 15 files changed, 159 insertions(+), 168 deletions(-)

commit 13018d16972fe8fa9de272d4ea2eee8cadb74ff8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 13:11:14 +0200

    Print the function name with the DEBUG macro

 src/mcd-debug.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e208b8dc9bf55a665a8a27bc652518a0752ad24e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 13:10:20 +0200

    Use G_STMT_START/END

 src/mcd-debug.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 591cfae9dd1134f458f1d4f55c0422f6de350b58
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 11:44:23 +0200

    Remove PresetParameters property
    
    The getter function was a stub anyways.

 src/mcd-account.c |   13 -------------
 1 files changed, 0 insertions(+), 13 deletions(-)

commit 19532240ff7500a559f3e929162e3dabb822d78a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 11:43:23 +0200

    Allow inlining
    
    The debug level variable must be exported, for the _mcd_debug_get_level() to be
    inlined.

 src/mcd-debug.c |   17 ++++++-----------
 src/mcd-debug.h |    9 +++++++--
 2 files changed, 13 insertions(+), 13 deletions(-)

commit 6c1967f5748b4d99b13c007b28097341745df97f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 10:20:42 +0200

    Use MC_TP_DEBUG as environment variable for tp-glib debug

 server/mc-server.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8e44af43195422dab92a941775695fdac14b0ef0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 10:07:56 +0200

    Implement mcd_debug_set_level
    
    Users of the library will be able to change teh debug level at runtime.

 src/mcd-debug.c |    6 ++++++
 src/mcd-debug.h |    1 +
 2 files changed, 7 insertions(+), 0 deletions(-)

commit ac7ebd601e3ae93668591c154462d663dd3f3eae
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-26 10:05:17 +0200

    Change all g_debug into DEBUG

 src/mcd-account-compat.c        |    4 +-
 src/mcd-account-conditions.c    |    2 +-
 src/mcd-account-manager-query.c |   12 ++--
 src/mcd-account-manager.c       |   32 +++++-----
 src/mcd-account-requests.c      |   10 ++--
 src/mcd-account.c               |   87 ++++++++++++-------------
 src/mcd-channel.c               |   36 +++++-----
 src/mcd-connection.c            |  137 ++++++++++++++++++++-------------------
 src/mcd-controller.c            |   12 ++--
 src/mcd-dbusprop.c              |    9 ++-
 src/mcd-dispatch-operation.c    |    8 +-
 src/mcd-dispatcher.c            |  104 +++++++++++++++---------------
 src/mcd-manager.c               |   27 ++++----
 src/mcd-master.c                |   48 +++++++-------
 src/mcd-mission.c               |    8 +-
 src/mcd-operation.c             |    6 +-
 src/mcd-presence-frame.c        |   16 ++--
 src/mcd-proxy.c                 |    2 +-
 src/mcd-service.c               |   38 ++++++------
 19 files changed, 299 insertions(+), 299 deletions(-)

commit 647435242c1f02b4fc75c4e6c4f3d21acb28fd6f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-25 16:45:16 +0200

    Debug object references only if --enable-debug is given
    
    Move the macros into the ENABLE_DEBUG condition.

 src/mcd-debug.h |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit 1b0c4aac56a8de91d512432d4bb63dfcfe097096
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-25 16:43:24 +0200

    Add DEBUG() macro
    
    Add a --enable-debug configuration flag to toggle generation of debug code.

 configure.ac    |    5 +++++
 src/mcd-debug.h |   15 +++++++++++++++
 2 files changed, 20 insertions(+), 0 deletions(-)

commit 59b6dc485c75626af1d8fbd6ed16b4af5cd390e8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-25 15:49:31 +0200

    Rename variables

 src/mcd-manager.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit a7cf65c13edc3380a6f85e3982b753b5747413e6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-25 15:48:01 +0200

    Use tp_connection_manager_call_when_ready

 src/mcd-manager.c |   19 ++++++-------------
 1 files changed, 6 insertions(+), 13 deletions(-)

commit 0ea97c344c3983f5858f25b05fcda53216d28801
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-24 13:52:34 +0200

    Version 5.0.beta59

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b3b163a2f90141b1430223d379b026e86c8602e6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-24 13:51:44 +0200

    Fix compilation
    
    Remove deprecated header

 examples/mc-example-2.c   |    1 -
 examples/mc-example-3.c   |    1 -
 examples/mc-example.c     |    1 -
 util/mc-account-convert.c |    1 -
 util/mc-tool.c            |    1 -
 5 files changed, 0 insertions(+), 5 deletions(-)

commit 35d767e90bc1a0690c335d9c4a8805dfd6f62af8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-24 11:29:26 +0200

    Version 5.0.beta58

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 866b3dfba3142dc3e8afa8491373cdc772137d4c
Merge: 23835d8 d071fb9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-24 11:28:51 +0200

    Merge branch 'bugfixes'

commit d071fb9b6d971a9ee24a7c6458357f013e9f8ada
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-24 11:15:07 +0200

    Add mcd_account_connection_bind_transport

 src/mcd-account-connection.c |   27 +++++++++++++++++++++++++++
 src/mcd-connection-plugin.h  |    7 +++++++
 src/mcd-master.c             |   20 ++++----------------
 3 files changed, 38 insertions(+), 16 deletions(-)

commit 23835d83aecaa63defaedc2ad16c9354da9b3ece
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-24 09:32:58 +0200

    Some include headers cleanups
    
    dbus.api.h should not have been installed in the first place. Deprecate it.
    Add mc-types.h, mc-interfaces.h, mc-enums.h and mc-svc-client.h

 libmcclient/Makefile.am             |    6 ++++-
 libmcclient/dbus-api.c              |    2 +
 libmcclient/dbus-api.h              |   13 +++++++---
 libmcclient/mc-account-avatar.c     |    2 +
 libmcclient/mc-account-compat.c     |    2 +
 libmcclient/mc-account-conditions.c |    2 +
 libmcclient/mc-account-manager.c    |    2 +
 libmcclient/mc-account-manager.h    |    7 ++++++
 libmcclient/mc-account-request.c    |    2 +
 libmcclient/mc-account-stats.c      |    2 +
 libmcclient/mc-account.c            |    4 +++
 libmcclient/mc-account.h            |    9 +++++++
 libmcclient/mc-dispatch-operation.c |    5 ++++
 libmcclient/mc-enums.h              |    6 +++++
 libmcclient/mc-gtypes.h             |   32 +++++++++++++++++++++++++++
 libmcclient/mc-interfaces.h         |   12 ++++++++++
 libmcclient/mc-profile.c            |    2 +
 libmcclient/mc-svc-client.h         |   41 +++++++++++++++++++++++++++++++++++
 18 files changed, 146 insertions(+), 5 deletions(-)

commit bcbadbf583c443294be15826820e770b6379b9b0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-23 10:07:32 +0200

    Version 5.0.beta57

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1053f190a2c835b02758df693961092917eac635
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-23 10:05:02 +0200

    Use requested properties
    
    When channels are in Requested state, TpChannel's immutable properties could be
    empty.

 src/mcd-dispatcher.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit eb6128dd31426708979b390515716e68f86290d6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-20 11:33:13 +0200

    Version 5.0.beta56

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b99ede31221501786473ee782b0537ab2d19dcc0
Merge: a95e992 976862d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-20 11:32:11 +0200

    Merge branch 'bugfixes'

commit a95e9926c3d53090fd8859277d694f3ce0e31544
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 16:56:30 +0200

    Add mc_profile_get_single_enable

 libmcclient/mc-profile.c |   18 ++++++++++++++++++
 libmcclient/mc-profile.h |    1 +
 2 files changed, 19 insertions(+), 0 deletions(-)

commit 988e77ec1f2b68146c5dc9097d1b9f7f27a3b38e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 16:38:07 +0200

    Boolean as bit

 libmcclient/mc-profile.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 259a46111c22aa6a4a2156882b9f98b16e6aae81
Merge: d51b2c5 c0fc010
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 16:02:45 +0200

    Merge branch 'tp_glib_26'
    
    Conflicts:
    
    	src/mcd-misc.c

commit d51b2c525ead2da1dddd99bc7c90df4b59af556d
Merge: 5fd9c08 8801f9f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 15:57:34 +0200

    Merge branch 'new_tp_glib'
    
    Conflicts:
    
    	src/mcd-misc.c
    	src/mcd-misc.h

commit 976862df9a352434cef6358a7502b921c137873f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 15:51:17 +0200

    Fix avatar change notifications
    
    The remote avatar was not retrieved correctly.

 src/mcd-account.c    |   27 ++++++++++++++++++---------
 src/mcd-connection.c |   14 +++++++-------
 2 files changed, 25 insertions(+), 16 deletions(-)

commit b0e646a70e5d5c2f87b5c395a61b684bc585d9d4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 15:50:18 +0200

    Let _get_avatar return NULL if there's no avatar set.

 src/mcd-account.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit c1765460a8f27d513152076aa6589716af255313
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 11:55:18 +0200

    Add mcd_connection_get_tp_connection()

 src/mcd-connection.c |   13 +++++++++++++
 src/mcd-connection.h |    1 +
 2 files changed, 14 insertions(+), 0 deletions(-)

commit 0d57f0477bed18ac94df8deee39eaa990252bbad
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 11:17:47 +0200

    Reduce the timeout value to half a second, and make it high priority

 src/mcd-account-manager.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit c0fc01035d616d3bc1266f207ad454e5e1a226a8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 10:35:57 +0200

    Get the normalized name when the connection is ready.

 src/mcd-connection.c |    9 ++-------
 1 files changed, 2 insertions(+), 7 deletions(-)

commit 8469c3520e6e3eaf76d00551d0a305dc2194c5db
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 10:25:08 +0200

    Make use of tp_connection_get_self_handle()

 src/mcd-connection.c |   54 +++++++++++++++++++------------------------------
 1 files changed, 21 insertions(+), 33 deletions(-)

commit 905f3f1f9bb317e03a9f1085bc54c3e882bd47c1
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 10:23:01 +0200

    Remove conflicting macro
    
    The new tp-glib defines this macro and function, we can remove it from here.

 src/mcd-misc.c |   10 ----------
 src/mcd-misc.h |    9 ---------
 2 files changed, 0 insertions(+), 19 deletions(-)

commit ee0d6c492364b311e7587233bd70383b83120544
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-19 10:22:23 +0200

    Depend on tp-glib 0.7.26

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5fd9c0881bffd97801bd38858e657b13aba221c2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-18 16:33:13 +0200

    Clean up connection process.
    
    Make function names slightly more clear.
    When the connection restarts, don't reuse the parameters from the previous
    time, but get them from the account again.

 src/mcd-connection.c |  103 ++++++++++++++++++++-----------------------------
 1 files changed, 42 insertions(+), 61 deletions(-)

commit fee43b9690951c4007dfb9e0d5865a1157df4ae7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-18 13:16:20 +0200

    Implement channel recovery
    
    While examining the channels already present on the TpConnection, recover those
    which don't match any known channels.
    Recovering is done by querying the running handlers about the channels they are
    already handling, and mathing them with the ones to be recovered: if a channel
    is already being handled, nothing has to be done; if instead a channel is not
    handled by any clients, this channel has to be redispatched.

 src/mcd-connection.c |   44 ++++++++++--
 src/mcd-dispatcher.c |  184 +++++++++++++++++++++++++++++++++++++++++++++++++-
 src/mcd-dispatcher.h |    3 +
 3 files changed, 223 insertions(+), 8 deletions(-)

commit 7e734d33500520ccd35b5545375cb2be2414f318
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-18 13:15:19 +0200

    Add GType getter function for DBus type "ao".

 src/mcd-misc.c |   10 ++++++++++
 src/mcd-misc.h |    5 +++++
 2 files changed, 15 insertions(+), 0 deletions(-)

commit 6722097adc50e2d22fd5ab376ab83af8fa5e1545
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-18 10:26:38 +0200

    Try to get the requested flag with the TpChannel
    
    Even if the channel is not yet ready, the "Requested" property might already be
    there.

 src/mcd-channel.c |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit e30c03c9f3569dffd50a1954884101faf256ee96
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-17 18:20:58 +0200

    Allow callbacks to be registered on generic pointers
    
    Allow the callback to be "emitted" by any kind of pointers, not only GObject. A
    GObject is still needed to hold the quark data, but the callback can be invoked
    with another base pointer.

 src/mcd-misc.c |   19 ++++++++++++++-----
 src/mcd-misc.h |    5 ++++-
 2 files changed, 18 insertions(+), 6 deletions(-)

commit 1cf95a3e0565245d0b15cac2642cf0ced172f352
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-17 13:48:17 +0200

    Avoid copying and leaking the channel properties

 src/mcd-connection.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0a1b213fd7a57e41a53ae61216487d33a6daa299
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-17 11:51:36 +0200

    Don't autoconnect disabled accounts.

 src/mcd-account.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 7eaceaca5bec41ee61e5bfd2aa74aaf0fa6d3029
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 11:41:50 +0200

    Recover existing connections
    
    List for existing connections at startup, and recover those which match some
    account.

 src/mcd-account-manager.c |  135 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 135 insertions(+), 0 deletions(-)

commit 8801f9fba0a6e087acccb562d512063de8a98b0a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-17 18:26:21 +0200

    Remove definition of TP_ARRAY_TYPE_CHANNEL_CLASS_LIST

 src/mcd-misc.c |   10 ----------
 src/mcd-misc.h |    9 ---------
 2 files changed, 0 insertions(+), 19 deletions(-)

commit 5c92938f5829085cc86d2a119ad96e36be6408b5
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-17 11:19:06 +0200

    Don't shut all connections at startup.

 src/mcd-manager.c |   83 -----------------------------------------------------
 1 files changed, 0 insertions(+), 83 deletions(-)

commit 099910c6b73a5c8581ed072a88c13ecba2534080
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 14:55:48 +0200

    Make sure that the account knows about the connection
    
    Call _mcd_account_set_connection() when the account property is set

 src/mcd-connection.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 20162604a5d6c36c6c5be1dc33f0aec2e74056f0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 14:54:04 +0200

    Implement _mcd_account_set_connection()

 src/mcd-account.c |   44 +++++++++++++++++++++++++++++++-------------
 src/mcd-account.h |    3 +++
 2 files changed, 34 insertions(+), 13 deletions(-)

commit a7471c584f2f2af7734d6ff10d65e6a6d8f8b365
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 14:33:34 +0200

    Move TpConnection setup code in a separate function

 src/mcd-connection.c |   75 ++++++++++++++++++++++++++++++--------------------
 src/mcd-connection.h |    4 ++
 2 files changed, 49 insertions(+), 30 deletions(-)

commit bce190970953254c21745db542d94ca207dc2c79
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 10:13:58 +0200

    Keep track of active connections in a tmp file

 src/mcd-account-manager.c |   51 +++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-account-manager.h |    3 ++
 src/mcd-account.c         |    3 ++
 3 files changed, 57 insertions(+), 0 deletions(-)

commit f51ea6c4697544f0ac88587d51775055150c0458
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 10:47:50 +0200

    Add mcd_connection_get_name()

 src/mcd-connection.c |   11 +++++++++++
 src/mcd-connection.h |    1 +
 2 files changed, 12 insertions(+), 0 deletions(-)

commit e020fa7ed4c33e45e04953e1015b7f56b4274187
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 12:30:10 +0200

    Immediately add accounts to the GHashTable
    
    The McdAccount was leaked if not added.

 src/mcd-account-manager.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit 15dc3b583b9c6963374c5cfc243d3aa33774602a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 12:26:20 +0200

    Disconnect signals when removing accounts

 src/mcd-account-manager.c |   18 +++++++++++++++++-
 1 files changed, 17 insertions(+), 1 deletions(-)

commit 97ec0839e4ddbeecb1e80f8601ffafb02ba614a8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 12:04:12 +0200

    Don't check for account validity when adding accounts.
    
    No one cares if the account is valid at this point.

 src/mcd-account-manager.c |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

commit 5f2a9ec26a88beab207112babdeffb21f34c1f3c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-16 12:00:22 +0200

    Keep all accounts in a single hash table.
    
    Remove the invalid_accounts GHashTable and keep all accounts in the same HT.
    This simplifies some code.
    Other modules also needed to be changed; in particular, the AccountManager's
    Query interface now will also return invalid accounts in the results.

 src/mcd-account-manager-query.c         |    2 +-
 src/mcd-account-manager.c               |   61 ++++++++-----------------------
 src/mcd-account-manager.h               |    2 +-
 src/mcd-master.c                        |   27 +++++++-------
 src/mcd-presence-frame.c                |    6 ++-
 xml/Account_Manager_Interface_Query.xml |   11 ++----
 6 files changed, 37 insertions(+), 72 deletions(-)

commit 1de51a25751d9f51883ef0b2dab964845444413e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-12 16:34:41 +0200

    Version 5.0.beta55

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ac3f7667d0a4d1b72020b7eaffca9fbceb42f7ce
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-12 14:58:20 +0200

    Make the McdChannel error API public
    
    Also, rename _mcd_channel_set_error() to mcd_channel_take_error().

 src/mcd-account-compat.c   |    2 +-
 src/mcd-account-requests.c |    8 ++++----
 src/mcd-channel.c          |   24 ++++++++++++------------
 src/mcd-channel.h          |    9 ++++-----
 src/mcd-connection.c       |   10 +++++-----
 src/mcd-dispatcher.c       |   14 +++++++-------
 6 files changed, 33 insertions(+), 34 deletions(-)

commit c9beaea5d81e245382aa4ddf022ba4b1559b18cd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-12 12:11:40 +0200

    Set the GError when returning FALSE

 src/mcd-account.c |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

commit 1f90f592759c337060682f33cca0cd6444707a1c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-12 11:50:56 +0200

    Initialize the account field.
    
    This fixes a failed assertion in mcd_dispatcher_run_handler().

 src/mcd-dispatcher.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 1549d36213670a1fe3621d60780f7caa6b7c7052
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-11 11:51:52 +0200

    Version 5.0.beta54

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 53499cbbaa5a4345a2f6331747ccfb2e79365a03
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-11 11:25:34 +0200

    Don't access fields of a possibly deleted struct.
    
    Do not rely on the "req" structure in being there anymore. It could have been
    destroyed in the callback.

 libmcclient/mc-account-request.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 9e1a7a0cc312e400c04d4f51f54ef98e38d9fbea
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-11 11:25:16 +0200

    Add debug line

 libmcclient/mc-account-request.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 198d23a428aa982a6ee05f12860ad2123fdc429a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-11 11:15:30 +0200

    Fix negated assertion
    
    Argh!

 libmcclient/mc-account-request.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1ae2ba7575af9b15bc528c078c697778b8ea38b3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-10 14:23:40 +0200

    The channel could be in any state.

 src/mcd-dispatcher.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit a56a018671a4278ea2e48a7955cbc738a122c36d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-10 12:16:22 +0200

    Fix more memory leaks

 src/mcd-dispatcher.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit c4f4743e294964c062fb8a043036e1e2d2d1774d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-10 12:00:24 +0200

    Fix a memory leak.

 src/mcd-account.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit ec7898d6d7743546ddfba4d0628f88ea14d589d6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-10 11:10:50 +0200

    Rewrite the locating of client files.
    
    The previous code was leaking the GErrors.

 src/mcd-dispatcher.c |  117 +++++++++++++++++++++++++-------------------------
 1 files changed, 59 insertions(+), 58 deletions(-)

commit 9661ebcd15712e15def5f2c123d75c438ae1e190
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-10 10:48:08 +0200

    Don't leak the GError

 src/mcd-dispatcher.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 8fad76e21d789b54ccd5370375fa99d9d994dced
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-10 09:23:09 +0200

    Check for autoconnection conditions
    
    Add _mcd_account_maybe_autoconnect(), which checks if the account could go
    online, and attempt connecting.
    This function can be called anytime, and especially when there are some events
    that could open the possibility of connecting an account.
    
    Here, we call it when the account has been loaded, and when a parameter changes.

 src/mcd-account.c |   29 +++++++++++++++++++++++++++++
 1 files changed, 29 insertions(+), 0 deletions(-)

commit 5d706155ce04433be894de9f1875b0e795d51ee9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-09 15:48:14 +0200

    Make function visible to other modules

 src/mcd-master.c |   93 ++++++++++++++++++++++++++---------------------------
 src/mcd-master.h |    3 ++
 2 files changed, 49 insertions(+), 47 deletions(-)

commit 5828088eaa431240a6d080fcf7001613f7a1eef9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-09 15:19:16 +0200

    Update the connection when a parameter changes
    
    If the parameter can be updated on the fly, do it; otherwise, restart the
    connection.

 src/mcd-account.c |   77 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 77 insertions(+), 0 deletions(-)

commit 8069d45e6ccfc6062de7625f13135c999d02db5c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-09 10:58:18 +0200

    Add _mcd_connection_update_property
    
    Convenience function that changes the value of a connection property.
    Will be used by McdAccount to set the parameters having the DBus_Property flag.

 src/mcd-connection.c |   33 +++++++++++++++++++++++++++++++++
 src/mcd-connection.h |    5 +++++
 2 files changed, 38 insertions(+), 0 deletions(-)

commit d8b111ff26255b765885d1d44c53de82e38bdf23
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-06 13:22:34 +0200

    Remove wrong warning.
    
    It's not an error, nor it is unlikely, that there are no callbacks registered
    to the object's readiness event.

 src/mcd-misc.c |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

commit 759ac57e0a72f94e118acbe3a02cf699c7deec8f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-04 18:18:16 +0200

    Adjust to use TpConnectionManagerParam

 src/mcd-account.c |   85 +++++++++++++++++-----------------------------------
 1 files changed, 28 insertions(+), 57 deletions(-)

commit 24b9d8d8b6047434800756ab0eb09ff4e1c0f947
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-04 17:52:38 +0200

    Use TpConnectionManager protocol information
    
    Make fully use of the TpConnectionManager API, by not loading the configuration
    file ourselves.
    This saves a lot of code.

 src/mcd-manager.c |  214 +++++------------------------------------------------
 src/mcd-manager.h |   23 +-----
 2 files changed, 20 insertions(+), 217 deletions(-)

commit 1492cc7521c41ab3bfda3d63ffcaacb5c1534566
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-04 13:23:54 +0200

    Add mcd_manager_call_when_ready()
    
    This function registers a callback that will be called when the CM protocols
    and parameters information is available.

 src/mcd-manager.c |   54 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-manager.h |    6 +++++
 2 files changed, 60 insertions(+), 0 deletions(-)

commit 66e3356dcf9da92080de412df69a794eae53ce3b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-03 16:50:23 +0200

    Use GHashTableIter for setting the account properties

 src/mcd-account-manager-creation.c |   60 ++++++++++++++++-------------------
 1 files changed, 27 insertions(+), 33 deletions(-)

commit aa81bb99fe24b62536b28799c9b2be5084be025d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-03 16:37:16 +0200

    Update the Creation interface
    
    Fix it so that it uses the new asynchronous API.

 src/mcd-account-manager-creation.c |   70 +++++++++++++++++++++++-------------
 1 files changed, 45 insertions(+), 25 deletions(-)

commit 0c4a0b85b32d0f3e50ba23c16be3dc898d12a4b9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-03 16:34:56 +0200

    Asynchronous loading of accounts
    
    Allow for accounts to be loaded and created asynchronously.
    Also, don't request the service name to DBus before having loaded all the
    accounts.

 src/mcd-account-manager.c |  178 ++++++++++++++++++++++++++++++++++----------
 src/mcd-account-manager.h |   21 +++--
 src/mcd-account.c         |   76 ++++++++++++++++---
 src/mcd-account.h         |   11 +++-
 4 files changed, 223 insertions(+), 63 deletions(-)

commit c9d1ae25249ae2e36ca8d5766b0130e75fffebf2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-04 16:43:27 +0200

    Add helpers for _call_when_ready implementations
    
    Add some common code to be used for objects which implement a
    _call_when_ready()-like API, where the first parameter of the callback is the
    object itself, the second is an error indicator, and the third is user provided
    data.

 src/mcd-misc.c |   83 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-misc.h |    5 +++
 2 files changed, 88 insertions(+), 0 deletions(-)

commit ffb63f2030c0834972be90e6554978cb1b248bd4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-04 09:35:33 +0200

    booleans as bit fields

 src/mcd-manager.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit bdd53929c42a72aee1917a4352dc4de9e601451d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-03 16:27:34 +0200

    Turn a check into an assertion

 src/mcd-account-manager.c |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

commit 2b1cb29c6ce3c66aa1b33b7e1e0995757355e9bb
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-03 09:47:01 +0200

    Mark internal functions as such

 src/mcd-account-manager.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 1a1394d40a4735b97b57bc02feda344774a2db63
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-09 09:56:39 +0200

    Version 5.0.beta53

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b44d51decb5d3258d94df67f54883f033e6f1f71
Merge: 97a69f1 3c5f260
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-09 08:46:02 +0200

    Merge branch 'lowmem'

commit 3c5f260d5b0d294a5811d4768cb103c1ddebe0b9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-06 15:52:02 +0200

    Handle low-memory situations
    
    Prevent creation of outgoing channels in low-memory situations.

 src/mcd-account-requests.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 5f77d9e3c110608b72faf8032b0755388fcc8e5f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-06 15:13:43 +0200

    Proper error propagation.

 src/mcd-account-requests.c |   16 +++++++++-------
 1 files changed, 9 insertions(+), 7 deletions(-)

commit 0938eefbd68d2df16fa2601c17807cc3c6dbbe71
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-06 15:03:13 +0200

    Move common code into separate function.

 src/mcd-account-requests.c |   54 +++++++++++++++++++------------------------
 1 files changed, 24 insertions(+), 30 deletions(-)

commit 97a69f1bbf8a592b87018d1331e151eedd4d3690
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-28 12:02:04 +0200

    Virtualize channel requesting.

 src/mcd-connection.c |   57 +++++++++++++++++++++++++++++++------------------
 src/mcd-connection.h |    5 +++-
 2 files changed, 40 insertions(+), 22 deletions(-)

commit 0c7a9123c308c3b1aadec395db99a74d2934b4e2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-05 12:02:57 +0200

    Version 5.0.beta52

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit fab9d49d761a285ce5944d2b960b119b96ae88ba
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-05 11:37:17 +0200

    Call AddRequest after returning from the D_Bus method

 src/mcd-account-requests.c |   12 ++++++++----
 1 files changed, 8 insertions(+), 4 deletions(-)

commit 695d91be94707bcec2b9fde24ca745828bd6e275
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-02-02 09:59:12 +0200

    Version 5.0.beta51

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8c9cabf7e370bf6ff70004582065394a1fe20076
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-30 14:42:29 +0200

    Fix a possible crash

 src/mcd-master.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 2eac83472fc3fbfd6c032a7418286fe73c079bce
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-30 14:33:36 +0200

    Change reasons for reconnection
    
    Attempt reconnection only when the disconnect reason gives some hopes for
    retrial.

 src/mcd-connection.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit d1abd36eacc91eeebc0689db74f3f5fdbc607f5d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-30 14:03:33 +0200

    Skip approval if the incoming channel is requested.
    
    If approvers have yet to be invoked when the incoming channel is requested, we
    can just skip them.

 src/mcd-dispatcher.c |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit 3f50128353ac7cd9e5a5b05b110745aaed1518b8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-30 13:48:25 +0200

    Dispatch requested channels waiting for approval
    
    If an incoming channel is waiting for approval and a client requests the same
    channel (via EnsureChannel), then the DispatchOperation must finish
    immediately.
    This patch makes it so that if the channel is found in a dispatch context and
    is waiting for approval, HandleWith() is called on the dispatch operation, so
    the channel handler will eventually be invoked.

 src/mcd-dispatcher.c |   39 +++++++++++++++++++++++++++++++++++++--
 1 files changed, 37 insertions(+), 2 deletions(-)

commit fd0b4687e6528050cb56ae419e3473c4e01d7193
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-30 13:38:56 +0200

    Add mcd_dispatch_operation_handle_with()
    
    Reimplement the HandleWith() method using the new C method.

 src/mcd-dispatch-operation.c |   59 +++++++++++++++++++++++++++---------------
 src/mcd-dispatch-operation.h |    3 ++
 2 files changed, 41 insertions(+), 21 deletions(-)

commit a6e7df000c523709b735bdc4b300dc3b9c869f30
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-30 12:30:42 +0200

    Tracking of dispatcher contexts
    
    Remove the old tracking of state machines, which was unused and not working.
    Replace it with a tracking of active contexts.

 src/mcd-dispatcher.c |   36 +++++++++---------------------------
 1 files changed, 9 insertions(+), 27 deletions(-)

commit 0b8e581679accab86856647392e71e7d2ff751bc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-30 10:05:35 +0200

    Add mc_channelrequest_get_account()
    
    Not sure whether it will be useful, but doesn't harm.

 libmcclient/mc-account-request.c |   19 +++++++++++++++++++
 libmcclient/mc-account.h         |    1 +
 2 files changed, 20 insertions(+), 0 deletions(-)

commit 51a41faccc4d31533115cdecaf749846e2895b57
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-30 09:57:15 +0200

    Emit the request Failed signal as last.
    
    The Failed signal causes the client (using libmcclient) to delete all
    references to a request; if a RemoveFailedRequest is received after that, it
    cannot be mapped anymore. This change makes it so that the client will receive
    RemoveFailedRequest before the Failed one, so that the client's request ID is
    still valid.

 src/mcd-account-requests.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 5aa3a9c4f6633f3698dcd1d851fb69749a17a7cd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 13:17:41 +0200

    Implement channel requests in a better way
    
    Don't use the pointer to the request structure as a unique id; instead, keep
    the mapping in a hash table.
    Introduce mc_channelrequest_get_path() and mc_channelrequest_get_from_path(),
    which don't require an account.

 libmcclient/mc-account-priv.h    |    4 -
 libmcclient/mc-account-request.c |  188 ++++++++++++++++++++------------------
 libmcclient/mc-account.c         |    3 -
 libmcclient/mc-account.h         |    2 +
 4 files changed, 102 insertions(+), 95 deletions(-)

commit 2f82c55739830f4c58b757e8c5d73e3296029b61
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 17:35:10 +0200

    Fix disposing of failed dispatch processes
    
    The old _drop_channel_handler function was not doing anything useful anymore.
    Rename it, and make it properly dispose the context.

 src/mcd-dispatcher.c |   46 +++++++++++++++++++++++++++++-----------------
 1 files changed, 29 insertions(+), 17 deletions(-)

commit 68746fbb5d35937bb2d339af917a66f723c43677
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 17:16:33 +0200

    Mark the context as cancelled if any of its channels are.

 src/mcd-dispatcher.c |   12 +++++++++++-
 1 files changed, 11 insertions(+), 1 deletions(-)

commit 978c746809ee9ab7f465c7893c72bba929f7874a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 16:56:44 +0200

    Get the account from the context
    
    And make sure that we are not invoking the handler with NULL object paths.

 src/mcd-dispatcher.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit b7b8bde02516036f5cc6cfd1c85221ebcca1b7fb
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 16:55:52 +0200

    Add the account to the context
    
    It might not be available later, if the channels are aborted.

 src/mcd-dispatcher.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 30bbd06799ca93d3cd89e26e7eba8f3ac3edb234
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 16:53:56 +0200

    Once the channel is failed, status cannot be changed anymore
    
    Changing the status after the McdChannel is failed is a programming error.

 src/mcd-channel.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit c11c4df5b70c9671ad07cd0a67715290a34a2d37
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 16:48:50 +0200

    Don't panic if the channel is aborted twice

 src/mcd-channel.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit d7fe1ddb315e8e2868d322d26d0756cf2de6950a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 14:27:24 +0200

    Don't release the TpChannel when aborting

 src/mcd-channel.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 8e03592e74754d97575eca51ee20d4a2399a2f3e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 14:23:27 +0200

    Move the closing of a channel in a separate function.

 src/mcd-channel.c |   25 ++++++++++++++++++-------
 1 files changed, 18 insertions(+), 7 deletions(-)

commit 53ad35bd3420ba7dd9b6677ded2e29f9e514e5b4
Merge: d8158c5 dfdd932
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-29 11:01:24 +0200

    Merge branch 'channels_list'

commit d8158c5b71ea5f80b7cbf8b9d733e5d865201a77
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-26 15:02:13 +0200

    Fix account-transport association
    
    Don't assign a transport to accounts with no conditions: they have nothing to
    do with it.

 src/mcd-master.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 80ccc268b1b1d986036758841849b83ac0aa1eba
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-26 14:57:01 +0200

    Unref the GHashTable, rather than destroy.

 src/mcd-master.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit dfdd932d5fe0497f5b4260628dbdd3a7c0d6606d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-26 13:58:04 +0200

    Remove unused code and APIs

 src/mcd-dispatcher.c |  142 +-------------------------------------------------
 src/mcd-dispatcher.h |    4 +-
 2 files changed, 2 insertions(+), 144 deletions(-)

commit 018fbb8f86835fd023152769785683c93202d60f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-26 12:45:04 +0200

    Rewrite mcd_dispatcher_get_channel_type_usage()
    
    Reimplement without using the "channels" list.

 src/mcd-dispatcher.c |   35 +++++++++++++++++++++++++++--------
 1 files changed, 27 insertions(+), 8 deletions(-)

commit dd417f04f9ef6b5dd1b6f2df0d5513df88db2985
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-26 12:11:57 +0200

    Use _mcd_dispatcher_send_channels()
    
    mcd_dispatcher_send() is going to be removed soon.

 src/mcd-connection.c |   21 ++++++++++++++++-----
 1 files changed, 16 insertions(+), 5 deletions(-)

commit bce53c36b6b965533d6c63493b4f309a24706f60
Merge: cc39c7c 01a8667
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-26 11:36:53 +0200

    Merge branch 'new_tp_api'

commit cc39c7cf43654e1efa7ce3a856ce12f96dc8e14b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-26 10:19:18 +0200

    Fix memory leak

 src/mcd-misc.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e3b2933c17d3c9b6216c52540f7192ec4c1ab662
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-26 09:59:07 +0200

    Fix tracking of clients

 src/mcd-dispatcher.c |   23 +++++++----------------
 1 files changed, 7 insertions(+), 16 deletions(-)

commit bc3188b230db0b91f3451b5e15c4d3a8b0316109
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-21 14:33:22 +0200

    Version 5.0.beta50

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d9ad34df9bc183f335928838aaa72501cfef97f7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-21 12:38:41 +0200

    Refactor accounts initialization

 src/mcd-account.c |   47 ++++++++++++++++++++++++++++++++++++-----------
 1 files changed, 36 insertions(+), 11 deletions(-)

commit aed1fb83f140ca61e935d0f73dde73193c8c90ef
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-16 14:44:07 +0200

    Check if accounts can reconnect
    
    After disconnecting an account because its transport died, check whether the
    same account can reconnect to some other transport.

 src/mcd-master.c |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit d4347b65add6efca122cc04b172f18540f4b6c72
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-16 14:26:11 +0200

    Properly close the connection
    
    When a transport dies, don't modify the requested presence. Instead, just
    disconnect the connection.

 src/mcd-master.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit 01a8667a893dd163e7825a758bf53203e8e58247
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-16 11:48:36 +0200

    Remove a few deprecated functions and properties.

 src/mcd-channel.c    |   80 --------------------------------------------------
 src/mcd-channel.h    |   17 ----------
 src/mcd-connection.c |   12 -------
 src/mcd-connection.h |    1 -
 4 files changed, 0 insertions(+), 110 deletions(-)

commit 24c08fd56c500dfe3ed7e63340bb4aaf35a9e730
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-15 16:06:48 +0200

    Check if a connection process is already ongoing

 src/mcd-account-connection.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 74eaa38a73c1d9041d7551686f7d58a3fc7cc277
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-15 13:44:09 +0200

    Delay TpProxy creation on NewChannel
    
    Delay the creation of the proxy, because we won't be able to update its
    properties.

 src/mcd-channel.c    |   53 +++++++++++++++++++------------
 src/mcd-channel.h    |    7 +++-
 src/mcd-connection.c |   84 ++++++++++++++++++++++++++++++++++++++++++-------
 3 files changed, 109 insertions(+), 35 deletions(-)

commit 19981f16ec4c2143e009e466d8098fd00dc05a86
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-15 09:36:10 +0200

    Automatic doc updates

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |   62 --------------------
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    7 --
 2 files changed, 0 insertions(+), 69 deletions(-)

commit 621f393ca2c472b653d93cd2b0546f6a38456a73
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-14 16:22:11 +0200

    Fix typo: TargetID should be InitiatorID

 src/mcd-channel.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 2f94238c92b35431f3ac559ad16bdbac798fc3a0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-14 11:17:22 +0200

    Remove some debugging lines

 src/mcd-account.c |   27 ---------------------------
 1 files changed, 0 insertions(+), 27 deletions(-)

commit 272f3a6be825e0a4dae0d807df400cc2b89b0ca5
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 18:10:42 +0200

    Version 5.0.beta49

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 417a9d3a80ac2372f32b1068496177da7f9ac335
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 18:08:53 +0200

    Fix typo

 src/mcd-dispatcher.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a059785262353420cbaca964426001baf82ed751
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 17:34:24 +0200

    Don't reconnect if offline presence was requested

 src/mcd-connection.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit c88bf31ac3bb3ad70a53d1236da12a29911598ff
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 16:08:07 +0200

    Licence change

 src/sp_timestamp.h |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 68fe13ca1ee108082d738044593c7952526bf44a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 15:55:43 +0200

    Add some debugging info

 src/mcd-channel.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 9b000bb1754e095a3bfe6287fc179bd904e04f70
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 15:25:34 +0200

    Deprecate mcd_channel_leave()

 src/mcd-channel.c |   17 -----------------
 src/mcd-channel.h |    3 ++-
 2 files changed, 2 insertions(+), 18 deletions(-)

commit e2c2ae0c85bfa758a22931686d63a21aff0e9945
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 15:22:58 +0200

    Deprecate mcd_channel_set_object_path()

 src/mcd-channel.c |   28 ++--------------------------
 src/mcd-channel.h |    3 ++-
 2 files changed, 4 insertions(+), 27 deletions(-)

commit 63b207be5d56509a510f4488f36f781889becaba
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 15:19:58 +0200

    Deprecate the get_members functions
    
    mcd_channel_get_members has been already returning NULL since a long time.

 src/mcd-channel.h            |    3 ++-
 src/mcd-dispatcher-context.h |    3 ++-
 src/mcd-dispatcher.c         |    2 +-
 3 files changed, 5 insertions(+), 3 deletions(-)

commit f106c03ffe678344f5ab0052e546a12c91aad8c7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 15:15:30 +0200

    Declare internal functions as such

 src/mcd-channel.h |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit 7a97684aae6923829e19234ee126fcc68096978a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 15:12:53 +0200

    Deprecate readiness properties, add getter for TpChannel
    
    The readiness properties don't make much sense anymore, and turn useless if we
    allow direct interaction with TpChannel.

 src/mcd-channel.c |    9 +++++++++
 src/mcd-channel.h |    1 +
 2 files changed, 10 insertions(+), 0 deletions(-)

commit ea9880f5e588747c7a00911ea8bdc64c0f1564e4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 15:04:37 +0200

    Update outgoing flag when channel is ready

 src/mcd-channel.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit 48d09af4dae73bdf4c816226bb31d754e3feaa4f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 14:55:16 +0200

    Remove leftovers of old code

 src/mcd-channel.c |   14 --------------
 1 files changed, 0 insertions(+), 14 deletions(-)

commit 2ed23147e9330d1a2b6c86244084fceefd3ab637
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 14:50:04 +0200

    Access TpChannel's immutable properties
    
    Make _mcd_channel_{get,set}_immutable_properties() access the TpChannel's
    properties.

 src/mcd-channel.c |   25 ++++++++++++-------------
 1 files changed, 12 insertions(+), 13 deletions(-)

commit d1118761dc653a3a3e96e941d801b47d46e72333
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 14:37:53 +0200

    Get the InitiatorID directly from the TpChannel

 src/mcd-channel.c |   17 +++++++++++------
 1 files changed, 11 insertions(+), 6 deletions(-)

commit dad7894abf4776cffff9d3864e45b578cb5aee93
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 14:23:28 +0200

    Set boolean members as bit fields

 src/mcd-channel.c |   13 +++++--------
 1 files changed, 5 insertions(+), 8 deletions(-)

commit bd9f9fe82b4c77a1121d1aacf2faa10004cb91ff
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 14:21:29 +0200

    Rewrite group interface handling
    
    Use the TpChannel signals and accessor methods to simplify our code.

 src/mcd-channel.c |  156 ++++++++++-------------------------------------------
 1 files changed, 29 insertions(+), 127 deletions(-)

commit 8b1d586e85eb599016ed18a49b3a84a5edbfd803
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 12:22:51 +0200

    Rewrite self-handle handling
    
    Use TpChannel's implementation of the self-handle.
    If the channel is ready and the group interface is supported, the self handle
    is already there.

 src/mcd-channel.c |   38 +++++++-------------------------------
 1 files changed, 7 insertions(+), 31 deletions(-)

commit 7a6475760eded088450a6ba5a8c327cf4733fd68
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 12:08:26 +0200

    No need to connect to the closed signal
    
    The signal will not even be received, because the proxy is invalidated at the
    same time.

 src/mcd-channel.c |   17 -----------------
 1 files changed, 0 insertions(+), 17 deletions(-)

commit 23fa7ccb27741cd7a9e3febfc10f269486d2a64e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 12:02:56 +0200

    Remove channel type related properties
    
    Remove the "type" and "channel-type" properties. Reimplement their getters in a
    different way.

 src/mcd-channel.c |   74 +++++++++++++++++++++-------------------------------
 1 files changed, 30 insertions(+), 44 deletions(-)

commit b2078a7dd3654c48e6e5b56edfd2fe03a4290ccd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 11:50:24 +0200

    Remove another useless property

 src/mcd-channel.c |   18 ++----------------
 1 files changed, 2 insertions(+), 16 deletions(-)

commit 231ef11798a7940f243298bd6cc245031efe91d3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 11:44:28 +0200

    Rewrite _mcd_channel_create_proxy()
    
    Don't use mcd_channel_set_object_path()

 src/mcd-channel.c |   25 ++++++++++++++++---------
 1 files changed, 16 insertions(+), 9 deletions(-)

commit adaa61eb8fa5eec56f7418a94ba15f903049c116
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 11:35:46 +0200

    Remove some deprecated stuff

 src/mcd-channel.c |   98 +---------------------------------------------------
 1 files changed, 2 insertions(+), 96 deletions(-)

commit 8816158867b335e98f363544df3a1e1307e556e3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 11:26:11 +0200

    Remove the handle and handle_type private members.

 src/mcd-channel.c |   83 +++++++++++++----------------------------------------
 1 files changed, 20 insertions(+), 63 deletions(-)

commit a4af280e88f5d526b729a739a1470f539dd90de0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 11:07:12 +0200

    Avoid using the handle and handle_type member
    
    Once we rewrite all the code not to use them, the handle and handle_type
    private members will be removed. This first patch modifies the get/set public
    functions, to retrieve the handle and handle type either from the TpChannel or
    from the request data.

 src/mcd-channel.c |   54 ++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 51 insertions(+), 3 deletions(-)

commit f4e98762f9413be6723bf9b547d8044b4be094c0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 10:17:47 +0200

    Removed unused members

 src/mcd-channel.c |   18 ++----------------
 1 files changed, 2 insertions(+), 16 deletions(-)

commit d0d3b57ecb7eee7fb80c6044357daff08fcee43a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 10:12:06 +0200

    Add request data as a instance member

 src/mcd-channel.c |   37 +++++++++++++++++++++++--------------
 1 files changed, 23 insertions(+), 14 deletions(-)

commit a6c9709b6bf17ccf752c251976774b0131a96d9f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-13 09:39:04 +0200

    Use new TP API
    
    Implement mcd_channel_new_from_properties() by using
    tp_channel_new_from_properties().

 configure.ac      |    2 +-
 src/mcd-channel.c |   41 ++++++++++++++---------------------------
 2 files changed, 15 insertions(+), 28 deletions(-)

commit 0d4ed22b417923b3b2553297ff52536d663a5621
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 17:00:19 +0200

    Rewrite mcd_channel_new_from_path()
    
    Reimplement mcd_channel_new_from_path() making it a convenience wrapper around
    mcd_channel_new_from_properties().

 src/mcd-channel.c |   37 +++++++++++++++++++++++++------------
 1 files changed, 25 insertions(+), 12 deletions(-)

commit d4377f6fd7ed19c2235567f74751c29dc0127832
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 16:37:02 +0200

    Add _mcd_channel_create_proxy()
    
    mcd_channel_set_object_path will eventually disappear.

 src/mcd-channel.c    |   31 +++++++++++++++++++++++++++++++
 src/mcd-channel.h    |    5 +++++
 src/mcd-connection.c |    8 ++++----
 3 files changed, 40 insertions(+), 4 deletions(-)

commit 5eb9e056d756558aa9e05134fede70c1195c0aed
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 10:34:45 +0200

    Add mcd_channel_new_from_properties()
    
    This function creates a channel with an object path and the given HT of
    properties.

 src/mcd-channel.c    |   51 ++++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-channel.h    |    4 +++
 src/mcd-connection.c |   26 ++----------------------
 3 files changed, 58 insertions(+), 23 deletions(-)

commit ee1ed0d4f1b239ce57697ab448ab59fbb2820899
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 14:02:25 +0200

    Update to new timestamps version

 src/Makefile.am      |    2 +-
 src/mcd-connection.c |    4 +-
 src/mcd-dispatcher.c |   10 ++--
 src/sp_timestamp.h   |  110 ++++++++++++++++++++++++++++++++++++++++++++++++++
 src/timestamps.h     |   69 -------------------------------
 5 files changed, 118 insertions(+), 77 deletions(-)

commit b57c553aba8ec1eb7a2ce0f41de140197c1b27d7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 11:48:15 +0200

    Version 5.0.beta48

 configure.ac                                       |    2 +-
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    2 ++
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 23729567fcf83858ad5bdbb6413eeeb8d0aafd45
Merge: da5a184 9d780c0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 11:16:12 +0200

    Merge branch 'unregister_deleted'

commit da5a184c237f7d604c419de15195356af793d31e
Merge: 56bcea4 ab55c5c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 11:12:42 +0200

    Merge branch 'bypass'

commit 56bcea4b8f64d8fea7bfc86e1de4dc7f99d594b0
Merge: 0780d77 16a3ca8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 11:07:53 +0200

    Merge branch 'cancel'

commit 0780d7766e92bb03fa41ddab4446b5dab9c54750
Merge: f6a7613 d30b7b9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-12 11:07:08 +0200

    Merge branch 'online_requests'

commit f6a7613412c2681845ab945fb8f9170c5cffe874
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:58:06 +0200

    Don't disconnect the TpConnection if the proxy is invalid
    
    Also, rewrite the function.

 src/mcd-connection.c |   17 +++++++----------
 1 files changed, 7 insertions(+), 10 deletions(-)

commit f7ea69239c3564fa6f71e9a23060ee93f614f409
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:48:10 +0200

    Use g_timeout_add_seconds()

 src/mcd-connection.c |   15 ++++++++-------
 1 files changed, 8 insertions(+), 7 deletions(-)

commit eeb6932337143b0672e4f3e42efc47476bb02273
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:43:16 +0200

    Define initial reconnection time
    
    Create a macro for the initial reconnection time, and set it to 1 second.

 src/mcd-connection.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 6964219472037189da42a485ccb7b187efa89b94
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:39:53 +0200

    Deprecate mcd_connection_restart

 src/mcd-connection.c |   11 ++---------
 src/mcd-connection.h |    2 +-
 2 files changed, 3 insertions(+), 10 deletions(-)

commit 35ea484500a84e1da450910083ddd4603b1fe45c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:36:56 +0200

    Rename auto-reconnection variable
    
    Also, change its type so it takes one bit only.

 src/mcd-connection.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit 472f96386f65793d3d2ed031fffceadb66c604d8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:32:51 +0200

    Fix auto reconnection
    
    Use the timer ID as a way to know if a timer is already install. Use the
    reconnection_requested variable to know if reconnection must happen at all, and
    add a function to manipulate it.

 src/mcd-connection.c |   44 +++++++++++++++++++++++++++++++-------------
 src/mcd-connection.h |    2 ++
 2 files changed, 33 insertions(+), 13 deletions(-)

commit 538f8125a430ca752eb9dfe63b2848ee48f18721
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-05 14:52:15 +0200

    Change prototype of a static function

 src/mcd-account.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit bdfa569ae2b2e74ff403f87f3a04ff86bed7a1f2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-05 14:12:14 +0200

    Common code for handling errors

 src/mcd-manager.c |   18 +++++++++++-------
 1 files changed, 11 insertions(+), 7 deletions(-)

commit 30a38c8f986326da757960b90f29cd8f2b8f2c7e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-05 14:05:25 +0200

    Create the TpProxy on object construction
    
    This simplifies code and logic a bit.

 src/mcd-manager.c |   44 ++++++++++++++++----------------------------
 1 files changed, 16 insertions(+), 28 deletions(-)

commit 4eb97dab7dd84dca49ce83992ddd299260e61c0a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-23 11:27:43 +0200

    Close channel on abort.
    
    This is especially important on channels in dispatching state: if filters block
    the channel, the channel must be immediately closed.

 src/mcd-channel.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 9d780c03e6ce94a214b94d1955fcd5ba7f1f6256
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 15:24:41 +0200

    Abort the connection when the account is removed
    
    This, on turn, drops the reference on the account, therefore allowing it to get
    disposed.

 src/mcd-connection.c |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit 1139914f931511abb4a291efa13e3769bcdf9a79
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 15:24:27 +0200

    Added g_debug to monitor object destruction

 src/mcd-account.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit ab55c5cf8fe5f61a51b432d148d99c2d7c3e8988
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 14:35:02 +0200

    Honour the BypassApprover flag
    
    Don't invoke approvers when the handlers want to bypass them.

 src/mcd-dispatcher.c |   22 +++++++++++++++++++++-
 1 files changed, 21 insertions(+), 1 deletions(-)

commit ed4f28de2e18bd9bb17c253944d6895932201710
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 14:07:08 +0200

    Move code into a separate function

 src/mcd-dispatcher.c |   36 ++++++++++++++++++++----------------
 1 files changed, 20 insertions(+), 16 deletions(-)

commit 5afad2e89554ce112c0934412384ed22dbf16c05
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 13:45:52 +0200

    Change struct member type from gboolean to guint

 src/mcd-dispatcher.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

commit 16a3ca83a808e7ba051081657648691709fdeb5d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 12:23:58 +0200

    Cancel channel request in the example

 examples/mc-example-3.c |   23 +++++++++++++++++++++++
 1 files changed, 23 insertions(+), 0 deletions(-)

commit bf3597e2bfc5cf15078544edd6ca164ad4b5cc70
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 11:33:55 +0200

    Implement client side of channel request cancellation

 libmcclient/mc-account-request.c |   29 ++++++++++++++++++++++++++++-
 1 files changed, 28 insertions(+), 1 deletions(-)

commit 1ee796aecc8e7efd2ba44dbf8e538a3129d03cb6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 11:31:28 +0200

    Don't process aborted channels
    
    If a channel request has been cancelled, stop processing it.

 src/mcd-connection.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 553dff9834a322758cce4fcce0f2138dd71cc890
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-09 10:39:01 +0200

    Implement server side of channel request cancellation

 src/mcd-account-requests.c |   98 ++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 94 insertions(+), 4 deletions(-)

commit 5b1622eecf62b9fba85cd0ff060f39ce30efab2e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-08 16:49:13 +0200

    Keep the channel alive in the online requests queue
    
    When putting the channel into the online_requests queue, reference it; the
    unreference will be done when the callback will be invoked.
    
    This is needed to avoid a crash that can happen if the channel is aborted while
    we are waiting for the connection; it's probably not triggered now, but it will
    happen when channel request cancellation is implemented.

 src/mcd-account-requests.c |   15 ++++++++++-----
 1 files changed, 10 insertions(+), 5 deletions(-)

commit e66c7dc460f3cf9de2b15245fdda2c16b3f1a358
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-08 14:10:11 +0200

    Export the online requests list
    
    Let other modules access the online requests list.
    It will be needed by mcd-account-requests.c to get the channel requests that
    are waiting for a connection (for implementing che cancel functionality).

 src/mcd-account-priv.h |    9 +++++++++
 src/mcd-account.c      |   13 ++++++++-----
 2 files changed, 17 insertions(+), 5 deletions(-)

commit faadebb4a1d3cdf11de8a26ad32c7e64431b7690
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-08 11:37:23 +0200

    Add a new channel status
    
    Add MCD_CHANNEL_STATUS_HANDLER_INVOKED, to know when it's too late to cancel a
    channel request.

 src/mcd-channel.c    |    3 ++-
 src/mcd-channel.h    |    1 +
 src/mcd-dispatcher.c |    8 +++++++-
 3 files changed, 10 insertions(+), 2 deletions(-)

commit 9194612274a350ebcd84281715e8ff654d25fe1d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 14:52:19 +0200

    Update the condition with the new channel status

 src/mcd-connection.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit c1ad6743507fb5f215588a94c97d3da562448a21
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 14:50:08 +0200

    Use MCD_CHANNEL_STATUS_REQUESTED
    
    Set the channel status to requested once the channel request to the CM has been
    made.

 src/mcd-connection.c |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit 6229854dfb8f029ddc6c98a4fceb0136f97d6ed9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 14:46:24 +0200

    Add a new MCD_CHANNEL_STATUS_REQUESTED

 src/mcd-channel.c |    1 +
 src/mcd-channel.h |    2 ++
 2 files changed, 3 insertions(+), 0 deletions(-)

commit d30b7b9d7d2f62c4e996aabeb46cbb2986af4b90
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-08 12:36:26 +0200

    Store online requests into a GList
    
    There is no need of storing online requests into a hash table; besides, it
    didn't allow to have different requests with the same callback but different
    userdata, meaning that some requests could get lost.

 src/mcd-account.c |   73 +++++++++++++++++++++++++---------------------------
 1 files changed, 35 insertions(+), 38 deletions(-)

commit ce9c58d5e586f82e6df0dab6947b004512fcd6fc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:58:06 +0200

    Don't disconnect the TpConnection if the proxy is invalid
    
    Also, rewrite the function.

 src/mcd-connection.c |   17 +++++++----------
 1 files changed, 7 insertions(+), 10 deletions(-)

commit 44d1f02b90d61cc4eff34c96df53ccacf9c1a109
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:48:10 +0200

    Use g_timeout_add_seconds()

 src/mcd-connection.c |   15 ++++++++-------
 1 files changed, 8 insertions(+), 7 deletions(-)

commit 4a554cadd48a4e72759e34ec204d080fc78632cd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:43:16 +0200

    Define initial reconnection time
    
    Create a macro for the initial reconnection time, and set it to 1 second.

 src/mcd-connection.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 48f5b17bd7f4e2d3a9802b71b9e8978ff165e562
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:39:53 +0200

    Deprecate mcd_connection_restart

 src/mcd-connection.c |   11 ++---------
 src/mcd-connection.h |    2 +-
 2 files changed, 3 insertions(+), 10 deletions(-)

commit 4daab88f5baf74aa485fa8d124ad874aa755fed8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:36:56 +0200

    Rename auto-reconnection variable
    
    Also, change its type so it takes one bit only.

 src/mcd-connection.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit 94882c543264b702534902a589551d1e4b1a9f31
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-07 10:32:51 +0200

    Fix auto reconnection
    
    Use the timer ID as a way to know if a timer is already install. Use the
    reconnection_requested variable to know if reconnection must happen at all, and
    add a function to manipulate it.

 src/mcd-connection.c |   44 +++++++++++++++++++++++++++++++-------------
 src/mcd-connection.h |    2 ++
 2 files changed, 33 insertions(+), 13 deletions(-)

commit 95ef0ee2c5eee9496502c65dc4ea47e5998c7252
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-05 13:55:21 +0200

    Remove unneeded variables and code

 src/mcd-manager.c |   21 ---------------------
 1 files changed, 0 insertions(+), 21 deletions(-)

commit 96cd6e65f50a752aaa31e83fd4a3ae62caf344fc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-05 13:55:21 +0200

    Remove unneeded variables and code

 src/mcd-manager.c |   21 ---------------------
 1 files changed, 0 insertions(+), 21 deletions(-)

commit d72037303d2e0990c66e656437f64b2dbb59ba93
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-05 13:37:25 +0200

    Move proxy creation into a separate function

 src/mcd-manager.c |   44 ++++++++++++++++++++++++++------------------
 1 files changed, 26 insertions(+), 18 deletions(-)

commit 77128b195d4a20bee594aca4c9c9f8371648da0c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2009-01-05 11:09:34 +0200

    Remove a semicolon to prevent an infinite loop

 src/mcd-channel.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit af0ed91753829b6b67105d8f67d1291ba12284c4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-23 09:16:04 +0200

    Version 5.0.beta47

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 767078a66a8eef3fe1de14a70f6970f9bf678908
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-23 09:15:45 +0200

    Automatic updates

 doc/reference/libmcclient/tmpl/mc-account.sgml     |    8 ++++++++
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |   17 ++++++++++++-----
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    7 +++++++
 3 files changed, 27 insertions(+), 5 deletions(-)

commit 0c670c3ed77cf8fa7122088cb16c765ec755b2dc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-23 09:09:46 +0200

    Temporarily disable -Wextra, until we figure out why the compilation fails

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bf268fc3e2d2d7f51bc9e528446141c20d61bc46
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-19 17:47:29 +0200

    Use data-driven properties update

 libmcclient/dbus-api.c         |    2 ++
 libmcclient/mc-account-stats.c |   39 ++++++++++++++++++++-------------------
 2 files changed, 22 insertions(+), 19 deletions(-)

commit 66d01c54d122a7e9380ea10864433bce2076e38f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 10:53:02 +0200

    Common code

 libmcclient/mc-account.c |  116 ++++++++++++++++++++--------------------------
 1 files changed, 50 insertions(+), 66 deletions(-)

commit dcac113b97b6d77b86db75868e0537d7025ce2b1
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 10:36:22 +0200

    Create update string function
    
    Create function for some common code

 libmcclient/mc-account.c |   49 +++++++++++++++++++--------------------------
 1 files changed, 21 insertions(+), 28 deletions(-)

commit 0ad1f0c6fbe423a4022bdfa6a3e3d7b15a648e87
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 10:23:58 +0200

    Safer update of properties
    
    Use a different approach on updating properties: look for known properties, and
    check their type before using them.
    The _mc_iface_update_props() supports updating properties which come with an
    interface prefix.

 libmcclient/dbus-api.c   |   67 ++++++++
 libmcclient/dbus-api.h   |   13 ++-
 libmcclient/mc-account.c |  410 +++++++++++++++++++++++++++------------------
 3 files changed, 324 insertions(+), 166 deletions(-)

commit 62911ab78e16c408d17fae92b24da72ae65a62f3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-19 14:06:06 +0200

    Implement client-side of account statistics interface

 libmcclient/Makefile.am        |    1 +
 libmcclient/account.xml        |    1 +
 libmcclient/mc-account-priv.h  |   19 +++++
 libmcclient/mc-account-stats.c |  172 ++++++++++++++++++++++++++++++++++++++++
 libmcclient/mc-account.c       |   14 +---
 libmcclient/mc-account.h       |    5 +
 6 files changed, 201 insertions(+), 11 deletions(-)

commit 7fa9cca5d38e080434f9365185c319867544240c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-19 11:56:46 +0200

    Server-side implementation of the account Stats interface

 src/Makefile.am         |    4 +
 src/mcd-account-stats.c |  156 +++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-account-stats.h |   43 +++++++++++++
 src/mcd-account.c       |    4 +
 src/mcd-dbusprop.c      |    2 +
 5 files changed, 209 insertions(+), 0 deletions(-)

commit 4ac108030910618ced1a5f05b77f9979fdee1967
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-19 11:56:12 +0200

    Define the Stats interface for accounts

 xml/Account_Interface_Stats.xml |   46 +++++++++++++++++++++++++++++++++++++++
 xml/Makefile.am                 |    1 +
 xml/generic-types.xml           |    6 +++++
 xml/nmc5.xml                    |    1 +
 4 files changed, 54 insertions(+), 0 deletions(-)

commit 171f993c497c6a4a09803a3eb2a3661d27fd8862
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-19 10:57:52 +0200

    Initialize variable and avoid a crash

 src/mcd-dispatcher.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3385abe01580277c3b2f4b7dbc9910f0c2d7a461
Merge: 8d75b10 b39165d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-18 09:02:41 +0200

    Merge commit 'upstream/master'

commit b39165d64f7ee245be998eef393ab0a36f5fd0ec
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-12-16 17:34:58 +0000

    Squash warnings about variable shadowing

 libmissioncontrol/mission-control.c |   24 ++++++++++++------------
 src/mcd-connection.c                |    3 ++-
 src/mcd-dispatcher.c                |   12 ++++++------
 src/mcd-service.c                   |   15 +++++++++------
 4 files changed, 29 insertions(+), 25 deletions(-)

commit 28795d684881cfabf8d2d13134a89f6c4ad073fe
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-12-16 17:28:44 +0000

    Disable pedantry when building gtkdoc scanners.
    
    They hit a bunch of warnings, which meant building with -Werror fails on code
    we don't care about.

 doc/reference/libmcclient/Makefile.am              |    4 ++++
 doc/reference/libmissioncontrol-server/Makefile.am |    4 ++++
 doc/reference/libmissioncontrol/Makefile.am        |    4 ++++
 3 files changed, 12 insertions(+), 0 deletions(-)

commit 5e76be1a42c2f5b4d4f7b687b3e87f354ecc2d3f
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-12-16 17:28:29 +0000

    Import even more pedantic compiler flags from tp-glib

 configure.ac |   37 ++++++++++++++++++++++++++-----------
 1 files changed, 26 insertions(+), 11 deletions(-)

commit 76e8008790023184e64a91507acc81b932f55771
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-12-15 17:59:57 +0000

    test-connect: remove DRAFT from Handler's bus name

 test/twisted/test-connect.py |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d477fd7413050f1578cfddb66efbcf212e977a4e
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-12-02 18:53:10 +0000

    Channel: remove a non-functional g_return_if_fail
    
    TpHandle is unsigned, so "handle >= 0" is always true.  If this was intended to
    check that "handle > 0", that would be incorrect: it's valid for a channel to
    have no handle.

 src/mcd-channel.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit ea98f6f0b1051215938511d1160fb536efe482c4
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-12-02 18:51:00 +0000

    Squash mismatched signedness warnings

 src/mcd-account.c    |    4 ++--
 src/mcd-dispatcher.c |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 4b5e4fdaa608da158109b67da00b8dca1a665dd9
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-28 06:35:30 +0800

    make clean: remove dbus-monitor logs from tests

 test/twisted/Makefile.am |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit b67c8691595638f33f6ba205601bfa5a3b13785f
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-28 05:57:11 +0800

    .gitignore: Add more test suite detritus

 .gitignore |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit de9334fe24ee9725b5128d889ade157a9ba0e12d
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-28 17:20:04 +0800

    fakecm: implement channel creation (via Requests)

 test/twisted/fakecm.py       |  112 +++++++++++++++++++++++++++++++++++++++++-
 test/twisted/test-connect.py |    4 +-
 2 files changed, 113 insertions(+), 3 deletions(-)

commit 3e29e7963d84668f392b91b7183f71c89a1cc5bd
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-26 17:56:58 +0000

    Don't crash if there are no old-style handlers for a channel type

 src/mcd-dispatcher.c |   14 ++++++++------
 1 files changed, 8 insertions(+), 6 deletions(-)

commit b4bfd5cdda3cfc0b0978f6385689dc313c9dec9a
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-26 16:45:10 +0000

    Make TP_GLIB_DEBUG control tp-glib's debug flags

 server/mc-server.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 1b89bf73d43462a50d11eccf325fa5b78319f041
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-26 14:15:31 +0000

    _mcd_deepcopy_asv: use tp_g_hash_table_update

 src/mcd-misc.c |   13 ++-----------
 1 files changed, 2 insertions(+), 11 deletions(-)

commit 16e1368659ab7b9229926d28da3bfa00a3cad8f1
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-26 13:06:32 +0000

    Requests: create_request did not use method context argument

 src/mcd-account-requests.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 81a53f3bf204d538e96327bfe95d1ead45ed7be3
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-26 12:54:59 +0000

    Remove McdRequestData which was unused

 src/mcd-account-requests.c |   30 ------------------------------
 1 files changed, 0 insertions(+), 30 deletions(-)

commit 015982132176f7f35451056b5fc71228cb7ae59f
Author: Topi Paavola <topi.paavola@digia.com>
Date:   2008-12-15 16:12:17 +0000

    Dispatcher: Fix little copy/paste error with the observer interface

 src/mcd-dispatcher.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 8655a0e5c3aa13617a58c0dd949bcbb045a35796
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-12-12 17:44:56 +0000

    Dispatcher: Fix: don't use a freed GList*

 src/mcd-dispatcher.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit 8d75b109a0593db24f3b328008b9e38a4d2dded4
Merge: c5d3bab 452a75e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-15 12:11:26 +0200

    Merge commit 'upstream/master' into bugfixes

commit c5d3bab2f1032992ce20d6c0ea5cbcfd31550132
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-12 10:07:41 +0200

    Pass all satisfied requests to channel handler.

 src/mcd-dispatcher.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit 452a75e02543d4ac4cde9a88405b065cae0559f8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-11 18:52:28 +0200

    5.0.beta46

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 229aae8ff08f2a0d52c7694b646fc1e56aa8e686
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-11 18:41:30 +0200

    Add debug output.

 src/mcd-account-requests.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 667d9c7627945d18b05d849a4953ba33152a0f9c
Merge: b1da6ce 97ad47f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-11 18:28:14 +0200

    Merge commit 'upstream/master'

commit 1ce33ad023baaed0dff0a8bcfded484993bc065f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-11 13:48:31 +0200

    Add simultaneous requests for the same channel to SatisfiedRequest

 src/mcd-channel.c |   46 ++++++++++++++++++++++++++++++++++++++++++----
 src/mcd-channel.h |    2 ++
 2 files changed, 44 insertions(+), 4 deletions(-)

commit a6ac335f7c757c04e86e4d41bd304c3c0def8659
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-11 12:24:07 +0200

    Reinvoke the channel handler with the correct request and user time.
    
    The channel handler must be invoked on the request McdChannel object, so that
    the dispatcher will extract the request object path and user action time from
    it.
    Make sure the channel request is disposed after it has succeeded (if we already
    have a McdChannel for that tp channel).
    Move the code to McdDispatcher, it seems more fit there.

 src/mcd-channel.c    |   31 ++++++++++++++++++++++++++++++-
 src/mcd-channel.h    |    2 ++
 src/mcd-connection.c |   18 ++----------------
 src/mcd-dispatcher.c |   41 ++++++++++++++++++++++++++++++++++++++++-
 src/mcd-dispatcher.h |    6 ++++--
 5 files changed, 78 insertions(+), 20 deletions(-)

commit 750cb08bc1924cc006215490231fc6386d406137
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-11 10:52:54 +0200

    Update the channel status in the signal closure.

 src/mcd-channel.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit 97ad47f3cfc0b56b7b1bd8a95eed78b0bcca1508
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-12-10 16:24:43 +0000

    McAccountManager: assume ValidAccounts and InvalidAccounts are 'ao', not 'as'
    
    Also, don't segfault if they don't have the type we expected.

 libmcclient/mc-account-manager.c |   29 +++++++++++++++++++++--------
 1 files changed, 21 insertions(+), 8 deletions(-)

commit f8b00f0099e66b9e1db316a57045f0cab50c74a4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-12-10 16:24:01 +0000

    McAccountMonitor: correctly interpret ValidAccounts as 'ao', not 'as'
    
    Also, don't segfault if it isn't the type we wanted.

 libmissioncontrol/mc-account-monitor.c |   23 +++++++++++++++++++----
 1 files changed, 19 insertions(+), 4 deletions(-)

commit e61ccc4ef57ca8cd902666403bb125741986118a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-12-10 16:22:39 +0000

    test/twisted/test-account.py: verify that ValidAccounts is an 'ao'

 test/twisted/test-account.py |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit c5edf92436ba24aa32d113755961de267e463cbf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-12-10 16:22:20 +0000

    McdAccountManager: correctly emit ValidAccounts and InvalidAccounts as 'ao'
    
    Previously they were emitted on D-Bus as type 'as', causing telepathy-qt4
    to fail.
    
    In the process, simplify accounts_to_gvalue() considerably.

 src/mcd-account-manager.c |   41 ++++++++++++++++-------------------------
 1 files changed, 16 insertions(+), 25 deletions(-)

commit 16a7aa274ac56fcfe1a5a77c344e6fa37b02c3e6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-10 16:32:54 +0200

    Fix re-dispatching of existing channels
    
    * Fix typo: get the status of the existing channel.
    * Copy the status from the existing channel into the requested one, even if it
      has already been dispatched (this will also take care of signalling that the
      request succeeded)
    * Fix reference counting.

 src/mcd-channel.c    |   12 ++++++++----
 src/mcd-connection.c |    9 +++------
 src/mcd-dispatcher.c |    2 +-
 3 files changed, 12 insertions(+), 11 deletions(-)

commit b1da6cea275be712f925515a5e3349a26286bbc7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-10 11:25:45 +0200

    Don't try to set a presence, if it was not requested.
    
    Fixes a possible crash.

 src/mcd-connection.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit a4857dc4ffdbfeca3e0a1573412f0c3e3bb96a8f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-10 10:50:23 +0200

    Version 5.0.beta45

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bfd423dd5517873912ed6ec8e92c8c5747e32740
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-09 16:35:08 +0200

    Rename enums

 src/mcd-account-compat.c   |    4 ++--
 src/mcd-account-requests.c |    4 ++--
 src/mcd-channel.c          |   20 ++++++++++----------
 src/mcd-channel.h          |   17 ++++++++++-------
 src/mcd-connection.c       |   14 ++++++++------
 src/mcd-dispatcher.c       |   22 ++++++++++++----------
 6 files changed, 44 insertions(+), 37 deletions(-)

commit 54dc9768d7f095f72c0e8f59e1abb7edf72c14b6
Merge: dba20e2 2a41e13
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-09 14:56:56 +0200

    Merge branch 'fix_asv_assertion' into fix_subclass

commit dba20e2a2d0b1167447db6195469a6e0c84aeba2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-09 14:51:58 +0200

    Avoid code duplication

 src/mcd-account-compat.c     |   11 -----------
 src/mcd-account-conditions.c |   11 -----------
 src/mcd-account-priv.h       |   11 +++++++++++
 3 files changed, 11 insertions(+), 22 deletions(-)

commit 6cacc55ce79d7e63afc6e1cfc043cc8d64e9fbbb
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-09 14:47:08 +0200

    Align to latest API from McdAccountManager

 src/mcd-account-compat.c     |   15 +++++++++++++--
 src/mcd-account-conditions.c |   13 ++++++++++++-
 2 files changed, 25 insertions(+), 3 deletions(-)

commit 2a41e136556abb091a8398b123014047a4af3260
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-09 11:23:05 +0200

    Channel requests don't have immutable properties
    
    If the channel is not yet bound to a TpChannel, the immutable properties are
    not set: the requested properties must be used, instead.

 src/mcd-dispatcher.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 675f92dfe55aca01384d88e64a98448bc3f34273
Merge: 4f717ed 0955d73
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-08 17:07:06 +0200

    Merge branch 'subclass_account'

commit 4f717ed9d5033accc26387137e52c4de6c282bf8
Merge: 510db23 c5d4646
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-08 17:01:53 +0200

    Merge branch 'bugfixes'

commit 0955d733e7fbc68ca5648c3bf6a43d8a0b620a56
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-08 16:33:18 +0200

    Let the McdAccount reference the McdAccountManager
    
    This gives a better API, and the mcd_account_new() function doesn't need the
    TpDBusDaemon and the GKeyFile anymore. For these, add getter methods to the
    McdAccountManager.

 src/mcd-account-manager.c |   27 ++++++++++----
 src/mcd-account-manager.h |    5 ++-
 src/mcd-account.c         |   87 ++++++++++++++++++++++++--------------------
 src/mcd-account.h         |    5 ++-
 4 files changed, 74 insertions(+), 50 deletions(-)

commit 510db239b9e9f6122cd781057411f7164f74546a
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-12-05 18:20:55 +0000

    DispatchOperation: don't use time() to generate the object_path

 src/mcd-dispatch-operation.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 7b7bef73c927c00b7c223777d102aa475d306c90
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 16:12:43 +0200

    Fix prototype for the account_new virtual method.

 src/mcd-account-manager.c |   14 +++++++++++---
 src/mcd-account-manager.h |    2 +-
 2 files changed, 12 insertions(+), 4 deletions(-)

commit 3b6d9e2ca674dbb9cac4edebdd047540e515aaf3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 14:07:17 +0200

    Virtualize mcd_account_set_parameter()

 src/mcd-account.c |   73 +++++++++++++++++++++++++++++------------------------
 src/mcd-account.h |    3 +-
 2 files changed, 42 insertions(+), 34 deletions(-)

commit 168c01cb74111a64a5f958b7dadc035e70fd1b89
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 14:02:04 +0200

    Add mcd_account_set_parameter()

 src/mcd-account.c |   42 +++++++++++++++++++++++++++++-------------
 src/mcd-account.h |    2 ++
 2 files changed, 31 insertions(+), 13 deletions(-)

commit a1067020febb289eb7d587e7222dd2d2cae7f959
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 12:09:01 +0200

    Virtualize mcd_account_delete()

 src/mcd-account.c |   67 +++++++++++++++++++++++++++++-----------------------
 src/mcd-account.h |    2 +-
 2 files changed, 38 insertions(+), 31 deletions(-)

commit 76b30f2bfd406ada501ae44d4182d9b16b2cfdea
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 11:48:30 +0200

    Virtualization of mcd_account_get_parameter().

 src/mcd-account.c |  125 ++++++++++++++++++++++++++++------------------------
 src/mcd-account.h |    3 +-
 2 files changed, 69 insertions(+), 59 deletions(-)

commit d5d0d87ef18ebaa2117d6aa98d8d02388027735c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 11:42:29 +0200

    Create a separate method for getting an account parameter.

 src/mcd-account.c |  145 ++++++++++++++++++++++++++++++++--------------------
 src/mcd-account.h |    2 +
 2 files changed, 91 insertions(+), 56 deletions(-)

commit c5d4646a9d2c7f0681bf0549f0c297cfa4b5aadf
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 10:13:49 +0200

    Make sure the channel list is always consistent
    
    Move the mcd_operation_get_missions() call inside the loop, because
    mcd_dispatcher_send() can cause the channel to be destroyed, and when that
    happened our list contained a finalized channel (and a crash did happen)

 src/mcd-connection.c |   10 +++++++---
 1 files changed, 7 insertions(+), 3 deletions(-)

commit 4d0a60a8f0d5c06b38695b722504f628b3e444a1
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 10:04:19 +0200

    Check for errors on callback return

 src/mcd-connection.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit f5a78bfc818ef3d1f3820affcf4840f1eeb4e04d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 10:01:43 +0200

    Allow creation of derived Account objects
    
    Allow a subclass of McdAccountManager to create Account objects by using a
    different function than mcd_account_new().

 src/mcd-account-manager.c |    8 ++++++--
 src/mcd-account-manager.h |    3 ++-
 2 files changed, 8 insertions(+), 3 deletions(-)

commit e541f757a3d6206ff2d26fd705ddaa4719f8fec8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-05 09:20:23 +0200

    Class padding
    
    This will help in having less ABI breaks in the future.

 src/mcd-account-manager.h |    7 +++++++
 src/mcd-account.h         |    7 +++++++
 2 files changed, 14 insertions(+), 0 deletions(-)

commit 9bcc0d8019eab944fe058580effb9b9f6d370f0b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-04 11:30:43 +0200

    Bump version

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 01b899b09c94c495b02224be1e801a6ba550dd9b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-04 11:29:01 +0200

    Remove wrong depencendy on libtelepathy

 mission-control.pc.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1087cd4a5de5b4297fdf1b29ba37c3409db4a5be
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-04 10:22:12 +0200

    The server is not depending on libmissioncontrol-client

 server/Makefile.am |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 6c3af6d854852bffa125a71b4338e1f59d87e867
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-03 12:05:52 +0200

    Bump version

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4f2e6259a8b1834b1ed016a59375a92deb15a656
Merge: a639d7b b8b382a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-03 11:53:20 +0200

    Merge branch 'fix_singleton'

commit b8b382a611a4606d08bb840742ef30d9a565e0e3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-03 11:41:09 +0200

    Reset static variable on singleton's death
    
    When the account manager object is disposed, reset the static pointer to NULL.

 libmcclient/mc-account-manager.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit a639d7b82b578e296c3660202d437ccae742dd7b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-03 11:35:26 +0200

    Conditional build of libmissioncontrol-client
    
    Allow this legacy library to be taken out of the build

 Makefile.am               |   13 +++++++++++--
 configure.ac              |   22 +++++++++++++++++++---
 doc/reference/Makefile.am |    6 ++++--
 test/Makefile.am          |    2 ++
 4 files changed, 36 insertions(+), 7 deletions(-)

commit bfd5566a884a8e4c4fe4164579fd068e53672c54
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-02 15:56:52 +0200

    Version number

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f93af0ca7c704a4b747fe1ed5f18bbd70224c3e1
Merge: 9476783 5b346a8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-02 15:51:54 +0200

    Merge branch 'fix_statuschanged'

commit 94767833e0621843eba53981bc15cd08c2b7d3c8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-02 15:26:10 +0200

    Indentation

 src/mcd-dispatcher.c |  204 ++++++++++++++++++++++++-------------------------
 1 files changed, 100 insertions(+), 104 deletions(-)

commit 6302499b0c91338f48f4133b7711e426568e2db9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-02 15:19:11 +0200

    Fix enumeration of activatable clients
    
    Various fixes

 src/mcd-dispatcher.c |   19 +++++++++----------
 1 files changed, 9 insertions(+), 10 deletions(-)

commit 5b346a81e4bc4f0a05aadb9da5ea7b5cbb67aec1
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-02 10:28:24 +0200

    Remove old hacks
    
    The imprecise check on the connection state was causing the RequestConnection
    method to be called twice.

 src/mcd-connection.c |   14 +-------------
 1 files changed, 1 insertions(+), 13 deletions(-)

commit d56d47bb1109e7d5dc1621ea808cbb1fca59d941
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-02 09:29:18 +0200

    Reset signal emission flag.
    
    Reset the flag for the emission of the connection-status-changed signal. It was
    being emitted whenever a property was changing.

 libmcclient/mc-account.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit caab7822e1cf31b0d9456f8d10fdaaf726e5b9c2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-01 18:48:41 +0200

    Call AddRequest in no-reply mode
    
    We don't really care about the result, we are going to call RemoveFailedRequest
    in any case. This saves some D-Bus traffic.

 src/mcd-dispatcher.c |   17 +----------------
 1 files changed, 1 insertions(+), 16 deletions(-)

commit 2d9ebe4718de22410ba0057d89876c2df942ed04
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-01 18:45:08 +0200

    Be ready to call RemoveFailedRequest in any case
    
    We can not wait for AddRequest to return, because the request might fail during
    that time, and we wouldn't notify the client. Instead, be ready to call
    RemoveFailedRequest since immediately after having called AddRequest.

 src/mcd-dispatcher.c |   25 +++++++++++++------------
 1 files changed, 13 insertions(+), 12 deletions(-)

commit 5f35d76f11c0ebd0275af2c69cf48ef328786708
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-01 18:37:13 +0200

    Fix online requests
    
    Online requests can be proceed asynchronously, so we can not expect
    priv->connection to be immediately set.
    Implement handling of asynchronous errors.

 src/mcd-account-connection.c |    9 +++++++
 src/mcd-account-priv.h       |    3 ++
 src/mcd-account.c            |   48 +++++++++++++++++++++--------------------
 3 files changed, 37 insertions(+), 23 deletions(-)

commit d8245934018f24768dfd67bbf4b5dbb1597c962a
Merge: bc607cf 54948b3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-01 17:19:58 +0200

    Merge branch 'master' of git+ssh://git.collabora.co.uk/git/telepathy-mission-control

commit bc607cff8ae22d49199cd513ebf7a73d7d46310b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-01 17:19:26 +0200

    _gen/interfaces-body.h was not linked in

 src/mcd-dbusprop.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 54948b3f1f8590dbf9cdf9f6603a283b314f46ba
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-12-01 15:09:40 +0000

    Dispatcher: remove "DRAFT" in object paths. ("DRAFT" is still used in interface names)

 src/mcd-dispatcher.c         |    2 +-
 test/twisted/test-connect.py |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 3826f394b9faf2e69b4021eec4cd99f37bbd621e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-12-01 15:55:39 +0200

    Update generator tool

 libmissioncontrol/Makefile.am |    5 +-
 tools/glib-client-gen.py      |  357 ++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 358 insertions(+), 4 deletions(-)

commit 8eea48836d009aeecf53d3e7b57e1ec09518024a
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-27 18:17:02 +0000

    libmcclient/mc-profile.c: Fix compilation error

 libmcclient/mc-profile.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 011edfc608063fd311695fbd3f60a004d310c87f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-27 17:50:51 +0200

    Check supported presence statuses before setting presence
    
    If the presence status that was requested is not support, fallback to a similar presence.

 src/mcd-connection.c |  126 ++++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 118 insertions(+), 8 deletions(-)

commit 81da791171ad5288b29d3a2855b6615a87bfa931
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-27 13:05:53 +0000

    Capabilities interface: Hooks _add_signals functions

 src/mcd-connection.c |    4 ++++
 src/mcd-dispatcher.c |    5 +++--
 2 files changed, 7 insertions(+), 2 deletions(-)

commit b7886d47cd9af8012197661e95b6b49df7f5a610
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-27 12:25:27 +0200

    Advertise new-style clients' capabilities
    
    Until the ContactCapabilities interface will be ready, advertise the clients'
    capabilities through the old Capabilities interface.

 src/mcd-dispatcher.c |   35 ++++++++++++++++++++++++++++++++---
 1 files changed, 32 insertions(+), 3 deletions(-)

commit 7501691cfba196ec92c693243a7f3aaf0aaa9775
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-27 18:17:02 +0000

    libmcclient/mc-profile.c: Fix compilation error

 libmcclient/mc-profile.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bca32ff0077b3a6873aed6188ab150408b52fa21
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-27 13:05:53 +0000

    Capabilities interface: Hooks _add_signals functions

 src/mcd-connection.c |    4 ++++
 src/mcd-dispatcher.c |    5 +++--
 2 files changed, 7 insertions(+), 2 deletions(-)

commit 5b3d4610013b1cdc97b3b3580d2f751008864ccd
Merge: 6c1889d 3913f15
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-26 14:58:35 +0000

    Merge branch 'master' into SetSelfCapabilities

commit 6c1889d567664ab5c9d3d98bf00c9dae16f35fff
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-26 14:50:53 +0000

    src/mcd-dispatcher.c: better comment for *ChannelFilters

 src/mcd-dispatcher.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 0cf6b1971f2df54c281ceca40ce41f107e985bf8
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-25 19:06:29 +0000

    Dispatcher: new_names_cb: fix string check

 src/mcd-dispatcher.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit d2c0f3738fa028f5055fe4792e900a81e1dd882a
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-25 15:47:01 +0000

    Dispatcher: Use MC_FILE_IFACE_CLIENT* for .client files and MC_FILE_IFACE_CLIENT* for D-Bus interfaces

 src/mcd-dispatcher.c         |   59 +++++++++++++++++++++++------------------
 test/twisted/test-connect.py |    4 +-
 2 files changed, 35 insertions(+), 28 deletions(-)

commit 3913f158949c34f7cbd597d643c67a1cb8e53a0f
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   2008-11-24 17:14:28 +0000

    Add more generated files to .gitignore

 .gitignore |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

commit 6a99757859185f3c0a4fb40a1a3ef9e9685a0864
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-25 12:01:12 +0200

    Add reserved members to class structures
    
    In order to have some ABI stability in the future, let's add some reserved
    members.

 src/mcd-channel.h    |    5 +++++
 src/mcd-connection.h |    6 ++++++
 src/mcd-dispatcher.h |    6 ++++++
 src/mcd-manager.h    |    6 ++++++
 src/mcd-master.h     |    6 ++++++
 5 files changed, 29 insertions(+), 0 deletions(-)

commit 7a8270ecef5ca395bdc27282edd41388d395a604
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 15:55:16 +0000

    Dispatcher: parsing .client file: also use g_get_user_data_dir()

 src/mcd-dispatcher.c |   23 +++++++++++++++++++++--
 1 files changed, 21 insertions(+), 2 deletions(-)

commit 9825dae41963808e35f68703041734e450a58ffb
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 15:25:44 +0000

    Dispatcher: match_property: use tp_asv* API

 src/mcd-dispatcher.c |  249 ++++++++++++++++++-------------------------------
 1 files changed, 92 insertions(+), 157 deletions(-)

commit 70d902e149661d76f91ef0f507d887d364538094
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 14:48:43 +0000

    Dispatcher: Fix channel_property_equals with signed/unsigned

 src/mcd-dispatcher.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit ec57079cf5ef97c0b5eadb18c5a88c650c935e39
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 14:48:19 +0000

    Dispatcher: add prototype of channel_property_equals

 src/mcd-dispatcher.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 5a2cc2f51d176f459d9d1295858db8924743a5c1
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 14:47:35 +0000

    Dispatcher: check whether g_ascii_strto[u]ll succeeded

 src/mcd-dispatcher.c |   29 +++++++++++++++++++++++++++--
 1 files changed, 27 insertions(+), 2 deletions(-)

commit 50e6180c042fad61c68ed109302394512d33604f
Merge: 48ff63d b93694b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-24 16:12:24 +0200

    Merge branch 'ensure'

commit b1d008644ce68068425b42d2e8769475639fd0b6
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 13:24:59 +0000

    Dispatcher: match_property: factorisation: use channel_property_equals()

 src/mcd-dispatcher.c |   56 +------------------------------------------------
 1 files changed, 2 insertions(+), 54 deletions(-)

commit f8d31f4d631b549be107dbd06f6f2b836c6d5288
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 13:19:45 +0000

    Dispatcher: match_property: Use "!!" to compare booleans

 src/mcd-dispatcher.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 6531dac9ad7946f8e41ee500f276f6c60687fc2e
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 13:15:48 +0000

    Dispatcher: match_property: use tp_strdiff

 src/mcd-dispatcher.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit c0356c7d832feacd4a1914bee2e0b7c3fee1e265
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-24 13:08:56 +0000

    Dispatcher: fix channel_property_equals(): use !tp_strdiff (a, b) instead of strcmp

 src/mcd-dispatcher.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 48ff63d886d0ab76c55944f367fad0764f527328
Merge: 3ecb614 bc91949
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-24 14:25:29 +0200

    Merge branch 'actions'

commit d2cca2d767fc2cdf582cecf85212b1ebf3b836d4
Merge: 56f25b7 013c79a
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-23 01:40:52 +0000

    Merge branch 'alban-twisted' into SetSelfCapabilities

commit 013c79ad938429cee0e71a36da17fdd4f2574099
Merge: faab1cf 3ecb614
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-23 01:37:46 +0000

    Merge branch 'master' into alban-twisted

commit 56f25b7f288a1cc9be6bc25b88dd468ee0e5866b
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-23 01:34:02 +0000

    Dispatcher: when a client disappear from the bus (detected by NameOwnerChanged), remove it if it was not activatable

 src/mcd-dispatcher.c |   80 ++++++++++++++++++++++++++++++++++++++++---------
 1 files changed, 65 insertions(+), 15 deletions(-)

commit 61798a271ad3be6e38cec74b369e75862cceea4e
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 17:27:04 +0000

    Tests: read test/twisted/clients/*.client in the twisted test environment

 test/twisted/clients/README            |    4 ++++
 test/twisted/tools/exec-with-log.sh.in |    1 +
 2 files changed, 5 insertions(+), 0 deletions(-)

commit 7883bb82afa40ae7a82227ae1d5c8be21898c195
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 17:22:48 +0000

    SetSelfCapabilities: remove uneeded parameter protocol

 src/mcd-connection.c |    4 +---
 src/mcd-dispatcher.c |    3 +--
 src/mcd-dispatcher.h |    3 +--
 3 files changed, 3 insertions(+), 7 deletions(-)

commit 3312e001719d64eaa4f6499f9339f5ebaaaabc65
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 16:42:21 +0000

    Dispatcher: load .client files from $MC_CLIENTS_DIR (if set) for testing purposes

 src/mcd-dispatcher.c |   32 ++++++++++++++++++++++++++++----
 1 files changed, 28 insertions(+), 4 deletions(-)

commit 31f375163521402f381a3a8f9705bea08fc6bbfb
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 16:08:44 +0000

    Dispatcher: when getting the D-Bus properties *ChannelFilter, take care of GType

 src/mcd-dispatcher.c |   32 +++++++++++++++++++++++---------
 1 files changed, 23 insertions(+), 9 deletions(-)

commit f67212376df908d930e1d52334ef2ba71252998f
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 15:38:53 +0000

    Dispatcher: parse integers in the .client files

 src/mcd-dispatcher.c |   33 ++++++++++++++++++++++++++++-----
 1 files changed, 28 insertions(+), 5 deletions(-)

commit 3ecb61461bce42bf3d6209d183a051a34f5a0abd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-21 16:54:15 +0200

    New version

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e6c5f425615f254c009e595000c9d7d4be174e25
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 14:51:26 +0000

    SetSelfCapabilities: do not advertise the same caps twice

 src/mcd-dispatcher.c |   42 +++++++++++++++++++++++++++++++++++++++---
 1 files changed, 39 insertions(+), 3 deletions(-)

commit a84a689f34c57dd03b72b5688821b118b5a1c9d3
Merge: ddcc7fc faab1cf
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 14:11:22 +0000

    Merge branch 'alban-twisted' into SetSelfCapabilities

commit faab1cfdd2ce2db145747be3bdc6d611db5cad3c
Merge: 9fa44a6 d0c7949
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 14:10:23 +0000

    Merge branch 'master' into alban-twisted

commit 3fe32ebd676bec90f0fd5c1e9cbd99e59d2dfe9a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-21 14:53:08 +0200

    Add timestamps

 src/Makefile.am      |    3 +-
 src/mcd-connection.c |    2 +
 src/mcd-dispatcher.c |    5 +++
 src/timestamps.h     |   69 ++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 78 insertions(+), 1 deletions(-)

commit ddcc7fc0c22f98dc71ba9181c6529503aa64aa39
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-21 12:49:16 +0000

    Dispatcher: handling GType (work in progress)

 src/mcd-dispatcher.c |  131 +++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 129 insertions(+), 2 deletions(-)

commit bc9194935d50f1b9963edd96ea2f79d5ce4c98f0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-21 12:08:11 +0200

    Create a macro and save some typing

 libmcclient/mc-profile.c |  215 ++++++++++++++--------------------------------
 1 files changed, 64 insertions(+), 151 deletions(-)

commit fe6e37ea460f5fbd3424eb29a4604d1d42ae9e14
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-21 11:50:24 +0200

    Move common code into a static function

 libmcclient/mc-profile.c |   59 +++++++++++++++++++++-------------------------
 1 files changed, 27 insertions(+), 32 deletions(-)

commit acb70bb5aeb50636cb706df9ec2669d2f126ea3d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-21 11:41:23 +0200

    Implement the mc_profile_action_* API

 libmcclient/dbus-api.c   |   15 +++
 libmcclient/dbus-api.h   |    2 +
 libmcclient/mc-profile.c |  212 ++++++++++++++++++++++++++++++++++++++++++++--
 3 files changed, 222 insertions(+), 7 deletions(-)

commit 5d43a003278e3c6c3f12e663944c58f76e8df4b6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-21 09:46:15 +0200

    Add API stubs for service actions.

 libmcclient/mc-profile.c |  117 ++++++++++++++++++++++++++++++++++++++++++++++
 libmcclient/mc-profile.h |   16 ++++++
 2 files changed, 133 insertions(+), 0 deletions(-)

commit 313d1e4b0e22c14f56cbdfda50197ac36935269e
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-20 17:21:10 +0000

    Test dispatcher: dispatch a tube channel

 test/twisted/fakeclient.py   |    9 +++++++
 test/twisted/fakecm.py       |   55 +++++++++++++++++++++++++++++++++++++++++-
 test/twisted/test-connect.py |   11 +++++++-
 3 files changed, 73 insertions(+), 2 deletions(-)

commit d0c79492a1b14c15a5434ee56502d1fc5053332b
Merge: 3c4fa5a 7c86d78
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-20 16:56:24 +0200

    Merge commit 'alban/alban-twisted'

commit 7f4578410dc9658e48c6a2c058a624be3fab14ab
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-20 14:32:42 +0000

    Dispatcher: move the property matching into a separate function

 src/mcd-dispatcher.c |  148 +++++++++++++++++++++++++++-----------------------
 1 files changed, 79 insertions(+), 69 deletions(-)

commit e22f342ae35bae12c580a26eaa369ddc419b27f5
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-20 12:44:32 +0000

    Dispatcher: call list_activatable_names and list_names in parallel

 src/mcd-dispatcher.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 7029a80bcfcdcd2ee0573c02250a462f459ce716
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-20 12:36:11 +0000

    Dispatcher: Fix leak: use tp_g_value_slice_free

 src/mcd-dispatcher.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 91683c5adba8baa8a5647c31abde9bd811126f16
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-20 12:23:22 +0000

    Dispatcher: read *ChannelFilter D-Bus properties: fill the new channel filter structure (GPtrArray of GHashTable)

 src/mcd-dispatcher.c |  119 ++++++++++++++++++++++++++++---------------------
 1 files changed, 68 insertions(+), 51 deletions(-)

commit b93694b2fb44896d218ce461856038144341aedc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-20 12:37:13 +0200

    Fix use_existing flag

 libmcclient/mc-account.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d752c0d6945376e0eb192995fbde51df8006318b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-20 11:29:20 +0200

    Update example to test EnsureChannel

 examples/mc-example-3.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit d47fa40ed0e488d48d9d7116ea20356dfb34c053
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-19 12:27:56 +0200

    Implement calling of EnsureChannel

 src/mcd-account-requests.c |    3 +-
 src/mcd-channel.c          |  102 ++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-channel.h          |    5 ++
 src/mcd-connection.c       |   77 +++++++++++++++++++++++++++++---
 src/mcd-dispatcher.c       |   26 +++++++++++
 src/mcd-dispatcher.h       |    2 +
 6 files changed, 205 insertions(+), 10 deletions(-)

commit c3c7c5b128786aed3225279689df23edcce9c5d5
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-19 19:53:25 +0000

    Dispatcher: .client file parsing: fill the new channel filter structure (GPtrArray of GHashTable)

 src/mcd-dispatcher.c |  225 ++++++++++++++++++++++++++++++++++---------------
 1 files changed, 156 insertions(+), 69 deletions(-)

commit 696da519231652e28b73c6d4c0d1d662c5b91347
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-19 15:50:28 +0000

    Dispatcher: don't use strlen for static strings

 src/mcd-dispatcher.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit 15163dc2945e38707ea60aa975a2261728661e00
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-19 15:11:10 +0000

    Dispatcher: Coding style: indentation

 src/mcd-dispatcher.c |   74 +++++++++++++++++++++++++-------------------------
 1 files changed, 37 insertions(+), 37 deletions(-)

commit 3fd9efbf14544039b6a1072cee23f6bf83769266
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-19 15:03:21 +0000

    Dispatcher: remove uneeded initialisation

 src/mcd-dispatcher.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 236399abe90548b5fa45fb14b392873179f19f0f
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-19 15:01:58 +0000

    Dispatcher: call tp_proxy_add_interface_by_id() for client, whatever the method to get the interfaces (.client file or D-Bus methods)

 src/mcd-dispatcher.c |   25 ++++++++++++++++++-------
 1 files changed, 18 insertions(+), 7 deletions(-)

commit 883171efce68dc037c9e768a55b1a30c8b5660f3
Merge: 4c48044 9fa44a6
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-19 12:16:07 +0000

    Merge branch 'alban-twisted' into SetSelfCapabilities

commit 9fa44a6e2fd4d4de764bb82f766ae9c268f75e4e
Merge: 82a333f 3c4fa5a
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-19 12:02:05 +0000

    Merge branch 'master' into alban-twisted

commit 3c4fa5a3565c8ad59e47f0bd6721a10e9712f363
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-19 12:29:20 +0200

    beta40

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2a334963135de65672438aeb61947889368e545d
Merge: 75ac7c3 47d4b7c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-19 12:28:25 +0200

    Merge branch 'fix_requests'

commit 47d4b7cbf5d6b8fb38b117fac7d9778cbb5563c8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-19 09:25:57 +0200

    Update channel status when dispatching starts

 src/mcd-dispatcher.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 26083f8b8142fbbb3b708d938a631776e93abe46
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-19 09:23:24 +0200

    On NewChannels, match the channel paths with the existing requests

 src/mcd-connection.c |   92 ++++++++++++++++++++++++++++++--------------------
 1 files changed, 55 insertions(+), 37 deletions(-)

commit 4c480447c7b77ca640bfbd19a68b35f4cdc1e078
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-18 16:28:37 +0000

    Telepathy.Client interface: Get the *ChannelFilter properties according to the spec
    
    Look for Telepathy.Client on the bus instead of the .client files as a
    canonical source and parse the .client file only if it exists as an
    optimisation.
    
    ListNames and ListActivatableNames are called. If the name start with
    o.f.T.Client, we create the McdClient struct and fill it with either the
    .client file if it exists or with D-Bus calls to get the Interfaces property
    and the *ChannelFilter properties
    
    HandlerChannelFilter property is saved in McdClient->caps and used to call
    SetSelfCapabilities.

 src/mcd-dispatcher.c |  359 ++++++++++++++++++++++++++++++++++++++++----------
 1 files changed, 287 insertions(+), 72 deletions(-)

commit 0a5c93879d7c146537468caa2b4658c0d6078a39
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-18 16:13:05 +0000

    Temporary workaround for telepathy-glib bug #18515: define TP_ARRAY_TYPE_CHANNEL_CLASS_LIST

 src/mcd-misc.c |    9 +++++++++
 src/mcd-misc.h |   11 +++++++++++
 2 files changed, 20 insertions(+), 0 deletions(-)

commit 94bf2178187959b3c7c25147e5989c5f9ef7d6b4
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-18 16:12:28 +0000

    Remove unused variables

 src/mcd-connection.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 0a9c8ea79ae284a6221f2351eedf47b0235e9bb1
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-18 15:55:30 +0000

    Test SetSelfCapabilities: add a fake client with a tube capability, and check MC calls SetSelfCapabilities correctly

 test/twisted/fakeclient.py   |   23 +++++++++++++++++++----
 test/twisted/test-connect.py |   19 ++++++++++++++++++-
 2 files changed, 37 insertions(+), 5 deletions(-)

commit 911c40702ecc4d3194015f0c2a3f97c23aaa317c
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-17 16:53:48 +0000

    Tests: Add fakeclient, implementing the Telepathy.Client.DRAFT interface

 test/twisted/Makefile.am   |    1 +
 test/twisted/fakeclient.py |   57 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 58 insertions(+), 0 deletions(-)

commit c7c35cbcbd38b18e32bf7e236a1411fc25bd332f
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-17 16:49:48 +0000

    Add file fakecm.py in Makefile.am

 test/twisted/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit abfd74332ea1b3a1cb79d812e4be8896a13f288f
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-14 12:18:24 +0000

    SetSelfCapabilities: call the dispatcher to get the supported caps of clients

 src/mcd-connection.c |    7 +++----
 src/mcd-dispatcher.c |   25 +++++++++++++++++++++++++
 src/mcd-dispatcher.h |    6 ++++++
 3 files changed, 34 insertions(+), 4 deletions(-)

commit 4ca11a82181395ace05aac35eed1df4736ea9d85
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 17:45:08 +0000

    test-connect.py: Check that SetSelfCapabilities is called

 test/twisted/test-connect.py |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 76625e96a11e369ddbaaced13e2f168063515122
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 17:43:23 +0000

    src/mcd-connection.c: Call SetSelfCapabilities at the right place: after TpConnection is ready

 src/mcd-connection.c |   45 +++++++++++++++++++++++++++++++++++++--------
 1 files changed, 37 insertions(+), 8 deletions(-)

commit e4b7cdd1872f9184438ff0092b71e334a10f5afe
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 14:59:28 +0000

    Call SetSelfCapabilities after the connection is established

 src/mcd-connection.c |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit 84c3e90d977345b382459b3914d90a6c8dadddb4
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 12:01:34 +0000

    Generate code for Connection_Interface_Contact_Capabilities

 src/Makefile.am              |    2 ++
 src/mcd-signals-marshal.list |    1 +
 xml/all.xml                  |    2 ++
 xml/nmc5.xml                 |    2 ++
 4 files changed, 7 insertions(+), 0 deletions(-)

commit 49d73790818a02d26e2159328087dbf3f1ec1c5f
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 11:49:50 +0000

    Add the spec Connection.Interface.ContactCapabilities.DRAFT

 xml/Connection_Interface_Contact_Capabilities.xml |  172 +++++++++++++++++++++
 xml/Makefile.am                                   |    3 +-
 2 files changed, 174 insertions(+), 1 deletions(-)

commit 82a333ffda45b4ab6db54272791c490e9a4785ba
Merge: 20763b7 3f57070
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-18 16:31:49 +0000

    Merge branch 'trivia' into alban-twisted

commit 3f57070aed7efb15adda2db7c4feb57a5436bcf3
Merge: 4eace71 ae91fa8
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-18 16:31:30 +0000

    Merge branch 'master' into trivia

commit 75ac7c35d05e47fd152b84bbc6f176179dae3fb2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 18:10:57 +0200

    Invoke the correct proxy
    
    "handler" was just a local variable initialized to NULL (the code came from a
    wild cut & paste operation). "client" is the proper proxy.

 src/mcd-dispatcher.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit e52e7d1d354077b16c162409b07d6f95c66c5cbb
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 18:08:01 +0200

    Add missing dot.

 src/mcd-dispatch-operation.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 79ce439465db7fecb9d8d8a9e0c1e3aa1b4e2064
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 18:01:11 +0200

    Make the iterator a signed int, or it will never be negative

 libmcclient/mc-dispatch-operation.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ae91fa812e7d12d152c01314f71fc9a2f046ba2e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 11:56:16 +0200

    library versioning

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 03f37bbcc0041a5839bb8d7896bb2988d8b3f5a3
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 11:56:05 +0200

    Automatic updates

 .../tmpl/mcd-connection.sgml                       |    5 -----
 .../libmissioncontrol-server/tmpl/mcd-debug.sgml   |    1 +
 2 files changed, 1 insertions(+), 5 deletions(-)

commit 70b3b48088091338a91648fc389267f5dcff5976
Merge: ae8d280 6ab9c97
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 11:27:23 +0200

    Merge branch 'fix_do'

commit 6ab9c97f4994938e748d77469e3441c6b12af3b8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 10:57:06 +0200

    Add static keyword

 libmcclient/mc-dispatch-operation.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit ae8d280151385792324815cfd10e082af49e5b99
Merge: c8c231f 3bfe2e6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-18 09:01:14 +0200

    Merge branch 'subclassable'

commit 3bfe2e62ca650222ffa2dc1cfa4769eb77503c73
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 18:41:55 +0200

    Deprecate mcd_connection_new()
    
    Deprecate mcd_connection_new(), because one parameter is redundant.
    Instead, use g_object_new() directly.

 src/mcd-connection.h |    2 +-
 src/mcd-manager.c    |   10 ++++++----
 2 files changed, 7 insertions(+), 5 deletions(-)

commit 9e877d3593afd04fdff7dfdfbe35f214a33e9ffa
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 18:30:30 +0200

    Remove useless member

 src/mcd-connection.c |   24 ------------------------
 1 files changed, 0 insertions(+), 24 deletions(-)

commit 794e105ae053e9c9165177b867faaa091f0070c9
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 18:28:35 +0200

    Alias was leaking

 src/mcd-connection.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit a2398e5e2679ec64b4ef6008763410bcd280f3b7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 18:12:32 +0200

    Add some getter functions.
    
    This functions can be useful for subclasses.

 src/mcd-manager.c |   26 ++++++++++++++++++++++++++
 src/mcd-manager.h |    2 ++
 src/mcd-master.c  |   13 +++++++++++++
 src/mcd-master.h  |    1 +
 4 files changed, 42 insertions(+), 0 deletions(-)

commit b88eec71e39750349e78edf9068ad7816c32561a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 17:30:22 +0200

    Dispatching on NewChannels signal
    
    Requested channels are no longer dispatched when the CreateChannel method
    returns, but instead we wait for the NewChannels signal (because there might be
    other channels coming along, and we try to dispatch them all together).
    
    Move the logic for determining whether a channel must be processed by MC into a
    separate function.

 src/mcd-connection.c |   80 ++++++++++++++++++++++++++++++++++++++++++-------
 src/mcd-connection.h |    2 +
 2 files changed, 70 insertions(+), 12 deletions(-)

commit c8c231faa0d9f0acbcf03c95f8563070893a03fe
Merge: ee70a81 5075877
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 15:33:51 +0200

    Merge branch 'types'

commit ee70a81af87e7f50bfe761f728ef1fb1dc23e247
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 15:32:15 +0200

    Prepare for new version

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bfb46548c37eaf9bee7e3185e69a4c30fd1eedc7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 15:31:33 +0200

    Automatic doc updates

 doc/reference/libmcclient/tmpl/gtypes-body.sgml    |    8 --------
 doc/reference/libmcclient/tmpl/gtypes.sgml         |   15 ---------------
 .../libmcclient/tmpl/libmcclient-unused.sgml       |   13 +++++++++++++
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |   14 +++++++++-----
 4 files changed, 22 insertions(+), 28 deletions(-)

commit cae8e77f7cde24d0c3f7c930a2d4b8242ff0e798
Merge: f803cb9 0cf072f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 13:34:49 +0200

    Merge commit 'alban/debug'

commit ea30392ac795e67692be1681644b5b054f7babac
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 11:44:55 +0200

    Allow derived objects to override connection creation
    
    Virtualize the creation of McdConnection objects, so that subclasses can
    reimplement it.

 src/mcd-manager.c |   19 +++++++++++++++----
 src/mcd-manager.h |    2 ++
 2 files changed, 17 insertions(+), 4 deletions(-)

commit 9add3a5e75eb3e19a12dafd762f4af2e63223710
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 11:03:30 +0200

    Let derived objects reimplement manager creation
    
    Virtualize the manager creation, so that subclasses of McdMaster can change it.

 src/mcd-master.c |   16 +++++++++++++---
 src/mcd-master.h |    2 ++
 2 files changed, 15 insertions(+), 3 deletions(-)

commit 5075877ebec8ae67cb12d8587d6538937bb7103d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-17 11:13:05 +0200

    Add includes and fix property type

 src/mcd-channel.c    |    3 ++-
 src/mcd-dispatcher.c |    1 +
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 20763b7fbb21aa3ac813a4079e957e8f741d6eb5
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 17:44:19 +0000

    fakecm.py: The fake connection manager support GetInterfaces, GetStatus, etc.

 test/twisted/fakecm.py |   41 +++++++++++++++++++++++++++++++++++++++++
 1 files changed, 41 insertions(+), 0 deletions(-)

commit 66481bc66493ec8c20be4c9b800b43fb63627ddd
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 15:56:59 +0000

    fakecm.py: Add support to test SetSelfCapabilities in the fake Connection Manager

 test/twisted/fakecm.py |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 7c86d78226fc4c6b37acd79cd6cc5d91227501b3
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 15:25:30 +0000

    test-connect.py: Check that Connect() is called

 test/twisted/fakecm.py       |    5 +++--
 test/twisted/test-connect.py |    4 ++++
 2 files changed, 7 insertions(+), 2 deletions(-)

commit c9f327c76ea62405ed57dd1046a489b88bb5b0fd
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-12 19:58:28 +0000

    test/twisted/fakecm.py: Fix RequestConnection on the fake connection manager

 test/twisted/fakecm.py |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit fced2e1629b150ed4c61da956249edd6c7a28255
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-12 00:15:19 +0000

    Tests: remove test of the old interface

 test/twisted/Makefile.am   |    1 -
 test/twisted/test-basic.py |   44 --------------------------------------------
 2 files changed, 0 insertions(+), 45 deletions(-)

commit d759436d4f99c3e5080465b11406381aed0336cb
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-12 00:01:12 +0000

    Tests: let dbus-monitor get method_return D-Bus message type.

 test/twisted/tools/tmp-session-bus.conf.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 75f1be0b9044af0ad5a1c0eafc5fb937a869365a
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-11 23:11:05 +0000

    test/twisted/test-connect.py: remove test of the old MC interface

 test/twisted/test-connect.py |    7 -------
 1 files changed, 0 insertions(+), 7 deletions(-)

commit 18e6fa6e5f634b60d882a2e0369ac7587973409b
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-04 17:45:34 +0000

    Tests: Set the 'RequestedPresence' property to go online instead of the method SetPresence on the old iface.

 test/twisted/test-connect.py |   32 ++++++++++++++++++++++++++++----
 1 files changed, 28 insertions(+), 4 deletions(-)

commit 35995210da2e96776f52da2dd8f640412bb2ec6d
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-10-29 12:39:20 +0000

    test/twisted/README: Explain how to use environment variables for testing, and add support for refdbg

 test/twisted/README                    |   17 +++++++++++++++++
 test/twisted/tools/exec-with-log.sh.in |    7 +++++++
 2 files changed, 24 insertions(+), 0 deletions(-)

commit 1e5acf79c184fee671204de603c970daceb82295
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-10-20 17:45:06 -0400

    test/twisted/test-account.py: Update the 'Connection' property

 test/twisted/test-account.py |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 641cd7796b4d28bc9fe97559a06a97e5b1f88949
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-09-17 19:14:36 +0100

    Twisted tests: test signal AccountPropertyChanged on the Account object

 test/twisted/test-connect.py |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 8d54a1a58b5d867bf64d7fbd56f51290e5e182aa
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-09-17 18:05:44 +0100

    Twisted tests: add test to set the status to online

 test/twisted/Makefile.am     |    3 +-
 test/twisted/fakecm.py       |   45 +++++++++++++++++++++++++-----
 test/twisted/test-connect.py |   61 ++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 100 insertions(+), 9 deletions(-)

commit 493641b0d84ac2c3af76a94ba6827de56bd9c284
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-09-17 15:19:02 +0100

    Twisted tests: delete accounts.cfg file for each test

 test/twisted/accounts/README           |    2 +-
 test/twisted/tools/exec-with-log.sh.in |   12 ++++++++++++
 2 files changed, 13 insertions(+), 1 deletions(-)

commit c22551ed7c1bdc0aeb36ccaaef4718f169b1e6f2
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-09-17 15:04:37 +0100

    Twisted tests: Add a test for accounts, run test in a private environment (MC_CHANDLERS_DIR, MC_MANAGER_DIR, MC_ACCOUNT_DIR), add a basic fake connection manager

 test/twisted/Makefile.am               |    1 +
 test/twisted/accounts/README           |    3 +
 test/twisted/chandlers/README          |    4 +
 test/twisted/fakecm.py                 |   32 +++++++++
 test/twisted/managers/README           |    4 +
 test/twisted/managers/fakecm.manager   |    7 ++
 test/twisted/test-account.py           |  119 ++++++++++++++++++++++++++++++++
 test/twisted/test-basic.py             |   45 +++++++-----
 test/twisted/tools/exec-with-log.sh.in |    5 ++
 9 files changed, 200 insertions(+), 20 deletions(-)

commit 74d3ef801b2ceb80adaec7d87963b0d5fedb7cc7
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-09-16 15:44:29 +0100

    Add a basic test infrastructure for Mission Control with python twisted. Details in test/twisted/README.

 configure.ac                                 |   21 ++
 test/Makefile.am                             |    2 +
 test/twisted/Makefile.am                     |   37 +++
 test/twisted/README                          |   26 ++
 test/twisted/mctest.py                       |   88 +++++
 test/twisted/servicetest.py                  |  450 ++++++++++++++++++++++++++
 test/twisted/test-basic.py                   |   39 +++
 test/twisted/tools/Makefile.am               |   32 ++
 test/twisted/tools/MissionControl.service.in |    3 +
 test/twisted/tools/exec-with-log.sh.in       |   15 +
 test/twisted/tools/tmp-session-bus.conf.in   |   30 ++
 test/twisted/tools/with-session-bus.sh       |   84 +++++
 12 files changed, 827 insertions(+), 0 deletions(-)

commit 4eace712d433ee35586060a60386fc76c025172d
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 15:32:12 +0000

    Fix typo s/ACCOUNT/CHANNEL/ on TP_STRUCT_TYPE_CHANNEL_DETAILS

 src/mcd-channel.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7b2a8336454054b4059311340c2a64d40f7e9556
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 15:31:09 +0000

    Add missing includes to <telepathy-glib/gtypes.h>

 src/mcd-channel.c    |    1 +
 src/mcd-dispatcher.c |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit 0cf072f00d8f0a07173b2432c36d344409326e03
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   2008-11-13 15:03:44 +0000

    src/mcd-debug.[ch]: Fix: Do not change the prototype of g_object_ref().

 src/mcd-debug.c |    4 ++--
 src/mcd-debug.h |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit f803cb9c347df82dcf849d5ae7bef13fb9c34ea6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-12 11:43:24 +0200

    Enable delayed emission of property-changed
    
    Enable grouping of the changed properties notification in one single
    PropertiesChanged signal.
    This will break libmissioncontrol, as it is relying on the signal to be emitted
    before its method calls return.

 src/mcd-account.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit fc024407b3434b2e7a65b46262641df3e5f6d7a7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-12 11:23:43 +0200

    Use qualified property names
    
    In the hash table we get from the caller, property names appear in their
    qualified form (interface.property). So when looking up values in the table,
    first compose the full property name.

 libmcclient/mc-dispatch-operation.c |   17 ++++++++++++++++-
 1 files changed, 16 insertions(+), 1 deletions(-)

commit 5838e215ef0dabde02d9f9d887378a01f6cbbd75
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-12 10:50:56 +0200

    Alternative way to update properties
    
    Instead of iterating the properties, only look-up those that we recognize.
    Move type-checking in a separate function, so that the update function gets
    simpler.

 libmcclient/mc-dispatch-operation.c |  143 ++++++++++++++++++++++-------------
 1 files changed, 90 insertions(+), 53 deletions(-)

commit dfc1b93dfa7dbd775d083349c2585f3c28832f57
Merge: 00428f6 644a401
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-11 19:55:50 +0200

    Merge commit 'smcv/spec-update'

commit c63cf5c940f18c60853524cc8ada4145c34f5aac
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-11 19:16:43 +0200

    Fix endless loop

 libmcclient/mc-dispatch-operation.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 644a401ff55a84c197c00f3ee90f04788e61d9fc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-11-11 17:10:04 +0000

    libmcclient, src: use telepathy-glib GTypes instead of MC equivalents

 libmcclient/mc-dispatch-operation.c |    2 +-
 src/mcd-channel.c                   |    4 ++--
 src/mcd-dispatch-operation.c        |    6 +++---
 src/mcd-dispatcher.c                |    2 +-
 4 files changed, 7 insertions(+), 7 deletions(-)

commit 2b4075dc3cbf0faeeb4b610af66b60e1db1d333e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-11-11 17:07:21 +0000

    Require a modern telepathy-glib (for SimplePresence etc.)

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d69a95dee25e6e2a9385e1275475dee85147ede3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-11-11 17:03:59 +0000

    Update ChannelDispatchOperation and Client interfaces from telepathy-spec
    
    No API changes.

 xml/Channel_Dispatch_Operation.xml |    2 +-
 xml/Client.xml                     |    2 +-
 xml/Client_Approver.xml            |    2 +-
 xml/Client_Handler.xml             |   12 ++++++------
 xml/Client_Observer.xml            |    8 ++++----
 5 files changed, 13 insertions(+), 13 deletions(-)

commit 8a284a39f0833d0b285c107d56c747b802382e67
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-11-11 16:58:40 +0000

    Update Account.Interface.Avatar with one I've proposed for spec inclusion
    
    The AvatarInfo type should have been Avatar_Info anyway, but that name
    doesn't seem to express its contents very well. It's not information
    about the avatar, it *is* the avatar.
    
    (This is technically an API and ABI break, if anyone is actually
    using it.)

 xml/Account_Interface_Avatar.xml |   17 +++++++----------
 1 files changed, 7 insertions(+), 10 deletions(-)

commit cbabb671d535fd6fd267d6b8d6990affdbfecbf8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-11-11 16:54:26 +0000

    Update Account, AccountManager from telepathy-spec git master
    
    This removes the Account_Presence type in favour of using Simple_Presence
    from the SimplePresence interface, so include some glue in dbus-api.h.
    
    (This is an ABI break - an auto-generated function was removed - but
    not an API break.)

 libmcclient/dbus-api.h   |    7 +++-
 libmcclient/mc-account.c |    2 +-
 src/mcd-account.c        |   10 ++--
 xml/Account.xml          |   92 +++++++++++++++++++--------------------------
 xml/Account_Manager.xml  |   26 ++++++++++---
 xml/all.xml              |    2 +
 6 files changed, 73 insertions(+), 66 deletions(-)

commit 00428f691cc6f1a3220c4a6d58d1edb6924ff295
Merge: d295589 3cc8ec7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-11 16:37:24 +0200

    Merge branch 'plugins'

commit 3cc8ec7cef39205536ff04ab952c5579a491d6fc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-11 14:54:55 +0200

    Add mcd_account_compat_get_mc_profile()
    
    Add a function to get the McProfile bound to the account.

 src/mcd-account-compat.c |   26 ++++++++++++++++++++++++++
 src/mcd-account-compat.h |    3 +++
 2 files changed, 29 insertions(+), 0 deletions(-)

commit 2584fe6d2aaa449cf152a21a1fcb7e1ab7ddba39
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 16:42:02 +0200

    Add mcd_channel_get_account()
    
    Convenience function for the filters.

 .../libmissioncontrol-server-sections.txt          |    1 +
 src/mcd-channel.c                                  |   19 +++++++++++++++++++
 src/mcd-channel.h                                  |    3 +++
 3 files changed, 23 insertions(+), 0 deletions(-)

commit 5e8c32c89ba269201d0b3397226c9a3a414699d7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 15:30:29 +0200

    Remove code for looking up the inviter
    
    With the new TP API, we don't need to lookup the inviter anymore: the
    InitiatorID property tells us who initiated the channel.

 src/mcd-channel.c |  103 +++-------------------------------------------------
 1 files changed, 6 insertions(+), 97 deletions(-)

commit 1fac04000606f735eccbf6a7065c5d439fd01e4e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 15:22:58 +0200

    Automatic updates

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |   16 +++++++++-------
 .../tmpl/mcd-dispatcher-context.sgml               |   10 ++++++++++
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    7 -------
 3 files changed, 19 insertions(+), 14 deletions(-)

commit 16d49740a6357c53b469dcdf1ee5349bcbf1bb4b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 15:06:54 +0200

    Add mcd_dispatcher_context_get_channel_by_type()
    
    This is a convenience function for the filters.

 .../libmissioncontrol-server-sections.txt          |    1 +
 src/mcd-dispatcher-context.h                       |    2 +
 src/mcd-dispatcher.c                               |   24 ++++++++++++++++++++
 3 files changed, 27 insertions(+), 0 deletions(-)

commit 40eab4535c0e19a669435d96db2687885766d78d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 14:34:24 +0200

    Add mcd_channel_is_requested
    
    This is going to be needed by channel filters.

 .../libmissioncontrol-server-sections.txt          |    1 +
 src/mcd-channel.c                                  |   13 +++++++++++++
 src/mcd-channel.h                                  |    1 +
 3 files changed, 15 insertions(+), 0 deletions(-)

commit da69be212f60c0187251453039d4f8f6a9b01997
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 14:09:41 +0200

    Allocate McdFilter with GSlice

 src/mcd-dispatcher.c |   13 ++++++++-----
 1 files changed, 8 insertions(+), 5 deletions(-)

commit 5cc1324d20755e26fd063321bed610154720c0e0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 13:56:48 +0200

    Add new API for registering channel filters
    
    Deprecate mcd_dispatcher_register_filters and add a similar API which doesn't
    consider the channel type or direction.

 .../libmissioncontrol-server-sections.txt          |    2 +
 .../tmpl/mcd-dispatcher.sgml                       |   20 ++++++
 src/mcd-dispatcher-context.h                       |    9 ++-
 src/mcd-dispatcher.c                               |   69 ++++++++++++++++++--
 4 files changed, 94 insertions(+), 6 deletions(-)

commit d29558901abecc169e02cde5556f84eee15cc85f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 13:55:34 +0200

    Automatic updates

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    7 -------
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    7 -------
 2 files changed, 0 insertions(+), 14 deletions(-)

commit a649fefdb7808ff26848a77a0262c6c8ff16bf5d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 11:28:48 +0200

    Shorten some property descriptions

 src/mcd-channel.c    |   10 +++++-----
 src/mcd-connection.c |   18 +++++++++---------
 src/mcd-manager.c    |    8 ++++----
 src/mcd-master.c     |   12 ++++++------
 src/mcd-mission.c    |    4 ++--
 5 files changed, 26 insertions(+), 26 deletions(-)

commit f889fcb7adad42bf30e6156ba65632ccfd4f14a0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 11:22:07 +0200

    Don't translate property descriptions

 src/mcd-account-manager.c |   12 +--
 src/mcd-account.c         |   38 ++++-----
 src/mcd-channel.c         |  212 ++++++++++++++++++++++----------------------
 src/mcd-connection.c      |   88 +++++++++----------
 src/mcd-dispatcher.c      |   26 ++----
 src/mcd-manager.c         |   59 +++++--------
 src/mcd-master.c          |   81 +++++++++---------
 src/mcd-mission.c         |   42 +++++-----
 src/mcd-proxy.c           |   14 ++--
 9 files changed, 270 insertions(+), 302 deletions(-)

commit e4f19a6c8b9964b722f7fe3d955f7d283f235c33
Merge: 03d89ac 05c2831
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 10:18:48 +0200

    Merge branch 'simplepresence'

commit 03d89ac8fc38a347807be00792541b3211dff584
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-10 09:52:12 +0200

    Fix typo
    
    Use match filters of the appropriate client type.

 src/mcd-dispatcher.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 05c2831e5fd0def4bbd5acdafc23584d46c916b5
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-07 16:45:27 +0200

    Remove unused structures

 src/mcd-connection.c |   34 ----------------------------------
 1 files changed, 0 insertions(+), 34 deletions(-)

commit 7a66137269605b39c1903159a968f96a519e9dd6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-07 16:43:45 +0200

    Don't retrieve presence statuses
    
    We are not using presence statuses at all, so don't even bother retrieving
    them.

 src/mcd-connection.c |   77 --------------------------------------------------
 1 files changed, 0 insertions(+), 77 deletions(-)

commit 4bc0c1d2787ad310c2f860ba3c0ba6190c889930
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-07 16:10:40 +0200

    Workaround missed PresencesChanged signal
    
    When we connect, we are likely to miss a PresencesChanged relative to our
    getting online. So in the SetPresence callback, assume that in case of success
    the presence requested was the one actually set.

 src/mcd-connection.c |   26 ++++++++++++++++++++++++++
 1 files changed, 26 insertions(+), 0 deletions(-)

commit 4468ce655e193787f9a1c72d11b7cfa91c6646ca
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-07 15:56:53 +0200

    Update account presence on PresencesChanged signal
    
    Rely on the emission of the PresencesChanged signal to update the account
    presence.

 src/mcd-connection.c |   69 +++++++++++++++++++++-----------------------------
 1 files changed, 29 insertions(+), 40 deletions(-)

commit 716cf7c364def8e87d1b6852e74c8b4c75309d7b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-07 14:41:58 +0200

    Drop Presence interface for SimplePresence
    
    Use the new SimplePresence connection interface instead of Presence. The old
    implementation was buggy and over complicated.

 src/mcd-connection.c |  239 +++++++++-----------------------------------------
 1 files changed, 41 insertions(+), 198 deletions(-)

commit ec9d977da83c31432c41d50e0430cc4efd72f9cc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-07 11:32:55 +0200

    Make sure the channel handle is set
    
    If there is a handle in the dictionary of channel properties we receive, store
    it.

 src/mcd-channel.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 70b9037a0262ad6cefc9057b9932f850b024005c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-07 11:25:26 +0200

    Exit on D-Bus disconnection

 src/mcd-master.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 0d90af62a32d89781d1e4c15ae14c012e183f1af
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-07 11:21:40 +0200

    Abort channels with no handlers
    
    If no handlers are found, about the channel.

 src/mcd-dispatcher.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 84f424b16ce4edecdb17207be757f2bf55efa4c4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-06 10:59:26 +0200

    Set request to failed on channel abort
    
    If a channel aborts while it is in REQUEST or DISPATCHING phase, make sure that
    the channel status is set to FAILED.
    
    Add some g_debug()s in critical places.

 src/mcd-channel.c    |   26 ++++++++++++++++++++++++++
 src/mcd-connection.c |    1 +
 src/mcd-dispatcher.c |    2 +-
 3 files changed, 28 insertions(+), 1 deletions(-)

commit 3ea267f6238e5a24729f61fb16cf13d0763d43db
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-05 11:15:44 +0200

    tag beta38

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2b9c9e7d2d4582c349ed16133cdd212b431013e0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-05 11:11:56 +0200

    Adding git ignore file

 .gitignore |   57 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 57 insertions(+), 0 deletions(-)

commit f1ff325d7dbc7047f0e574ba52bcbebcb7c7dcf5
Merge: 212221b 5c654f1
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-05 10:55:36 +0200

    Merge branch 'autoconnect'

commit 5c654f11f2982b1d1d625a3532d2401642840052
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-05 09:20:51 +0200

    Automatic presence logic belongs to McdAccount
    
    Make the _mcd_account_request_connection() available to other modules in MC
    (but still not exported), and use it in pnstead of explicitly request the
    automatic presence (which could be unset).

 src/mcd-account-priv.h |    1 +
 src/mcd-account.c      |    8 ++++----
 src/mcd-master.c       |   16 +++-------------
 3 files changed, 8 insertions(+), 17 deletions(-)

commit 4c5a4b44eea5fab4d0dcdd0af1754716e7d05921
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-05 09:11:50 +0200

    Accounts with no conditions can go online
    
    Rewrite the check for accounts that can connect when MC is started: make it so
    that if an account doesn't have any conditions, it can go online even if no
    transport is active.

 src/mcd-master.c |   82 ++++++++++++++++++++++++++++++++++++++++++++----------
 1 files changed, 67 insertions(+), 15 deletions(-)

commit 212221bf4d622e4689b0665bcbda5875e2679808
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-04 16:22:20 +0200

    Fix possible double free
    
    When emitting the channel request failed/succeeded/cancelled event, make sure
    that the channel request is still alive, before destroying it: it might have
    been already destroyed, if the client disposed its weak_object.

 libmcclient/mc-account-request.c |   19 +++++++++++++++++--
 1 files changed, 17 insertions(+), 2 deletions(-)

commit 405e4cf75a681aa8d848b74db18d096197906995
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-04 13:50:29 +0200

    Tag beta37

 configure.ac            |    2 +-
 libmcclient/Makefile.am |    2 +-
 src/Makefile.am         |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 2d76522782486b44276597c5102ce228d9b9bfdf
Merge: efbbc63 909ed2b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-04 12:29:53 +0200

    Merge branch 'request_properties'
    
    Conflicts:
    
    	src/mcd-dispatcher.h

commit efbbc635e795c0da9568941ba35cd7fbbaed364a
Merge: a73dab6 7475e75
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-04 12:12:05 +0200

    Merge branch 'dispatcher_client'

commit a73dab62d6530658ff5796c583420967e8853ba9
Merge: 7a7ae56 c561d26
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-04 12:11:52 +0200

    Merge branch 'presence'

commit 7a7ae56c0d4f6041809f99ef9c50fa1d99598d62
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-04 11:56:37 +0200

    Fix introspection
    
    Always add properties glue information to DBusGObjectInfo.
    
    branch: fix_introspection

 tools/glib-ginterface-gen.py |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit 909ed2b1dcbf8499236a35181f6686edf71f06fd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-04 10:33:37 +0200

    Add the Account and PreferredHandler props to AddRequest

 src/mcd-account-compat.c   |    2 +-
 src/mcd-account-requests.c |    2 +-
 src/mcd-channel.c          |   18 ++++++++++++++++++
 src/mcd-channel.h          |    1 +
 src/mcd-dispatcher.c       |   18 +++++++++++++++++-
 src/mcd-dispatcher.h       |    2 +-
 6 files changed, 39 insertions(+), 4 deletions(-)

commit 7e02c5b10c0d6a70301e8bba31e3bce424c47f77
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-04 09:35:54 +0200

    Cosmetic code change
    
    Reorder a line of code, and truncate lines at 80 chars.

 src/mcd-dispatcher.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit 7475e75d79b3835b45b7eb8fbd2402c742c5ffd8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-03 16:47:03 +0200

    Invoke the chosen handler
    
    If the approver has called HandleWith and specified a valid handler, try to
    honour the choice by giving higher priority to this handler.

 src/mcd-dispatcher.c |   24 +++++++++++++++++-------
 1 files changed, 17 insertions(+), 7 deletions(-)

commit a96844f8b939173887a913d9182f78d32d2b1a46
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-03 16:26:24 +0200

    Store only the handler name.
    
    We don't need the full well-known D-Bus name.

 src/mcd-dispatch-operation.c |   15 ++++++++++++++-
 1 files changed, 14 insertions(+), 1 deletions(-)

commit 173f8b38cfdd5d5d00d7d323a3393b203636bf04
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-03 15:58:12 +0200

    Invoke approvers
    
    If we have a CDO (i.e., the channels were not requested), invoke the approvers.
    If the approver calls HandleWith, the result is ignored; invoking the preferred
    handler is still to be done.

 src/mcd-dispatcher.c |  156 +++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 155 insertions(+), 1 deletions(-)

commit bb7dc7da34e4e64732a8391ed3df55bbdb8f3a1f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-03 14:57:06 +0200

    Finishing of McdDispatchOperation
    
    Implement the Claim() and HandleWith() methods, emit the Finished() signal, and
    add getter methods to get the results of the CDO (whether it was claimed or a
    handler was suggested).

 src/mcd-dispatch-operation.c |   90 +++++++++++++++++++++++++++++++++++++++++-
 src/mcd-dispatch-operation.h |    3 +
 2 files changed, 92 insertions(+), 1 deletions(-)

commit 4361f6ef64aa7f000a5ab1be85596c119eaa648c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-03 13:48:43 +0200

    Add getter methods to McdDispatchOperation
    
    Add a method to get the operation object path, and another to get the operation
    properties in a a{sv} dictionary, that can be passed as a parameter to
    AddDispatchOperation().

 src/mcd-dispatch-operation.c |   61 ++++++++++++++++++++++++++++++++++++++++++
 src/mcd-dispatch-operation.h |    4 +++
 2 files changed, 65 insertions(+), 0 deletions(-)

commit bd5b39727c5872884c5e81b95f5a20d2a579295e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-03 11:42:39 +0200

    Invoke observers
    
    Activate the observers before running the handlers. Calling the handlers is
    moved to a separate function, which is invoked in a callback as a result of a
    count (cliant_locks variable) getting back to 0.

 src/mcd-dispatcher.c |  121 +++++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 114 insertions(+), 7 deletions(-)

commit 9abd021787d7313481f52881827609b211cc0d8c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-11-03 10:28:06 +0200

    Create a DO on new unrequested channels
    
    When the NewChannels signal is emitted for unrequested channels, create a
    DispatchOperation and dispatch all the channels together.

 src/mcd-connection.c |   19 +++++++++++++++----
 src/mcd-dispatcher.c |   18 ++++++++++--------
 2 files changed, 25 insertions(+), 12 deletions(-)

commit ce09ab847b7a98a3987c7c288551abd471bdc300
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-31 18:09:44 +0200

    State machine working with multiple channels
    
    Some more changes to have multiple channels support.

 src/mcd-dispatcher.c |   60 +++++++++++++++++++++++++++++++++----------------
 1 files changed, 40 insertions(+), 20 deletions(-)

commit 2ec8841f597e1b4dea81c2816a51012a749d18c0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-31 17:39:01 +0200

    Make _mcd_dispatcher_enter_state_machine work with more channels
    
    _mcd_dispatcher_enter_state_machine() should be able to dispatch several
    channels at once. This change just addresses the function parameters, more
    changes are needed.

 src/mcd-dispatcher.c |   41 +++++++++++++++++++++++++----------------
 1 files changed, 25 insertions(+), 16 deletions(-)

commit abc9fd376237d708fc53470f78fdd2662f992eb7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-31 16:12:56 +0200

    Stub of _mcd_dispatcher_send_channels

 src/mcd-dispatcher.c |   23 +++++++++++++++++++++++
 src/mcd-dispatcher.h |    2 ++
 2 files changed, 25 insertions(+), 0 deletions(-)

commit 596abe1f10a5769575b7fee486a5688ea380234c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-31 15:51:53 +0200

    Reference the McdChannels
    
    Keep a reference to the McdChannels, and make clear in the docs that we are
    taking ownership of the GList.

 src/mcd-dispatch-operation.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit ec592ad98ff2579005fb6cdaf79eb7a80e989d1a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-31 15:41:50 +0200

    Don't export symbols if not needed
    
    As the API is far from stable, avoid exporting symbols that might not even be
    needed.

 src/mcd-dispatch-operation.c |    4 ++--
 src/mcd-dispatch-operation.h |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 602a16f04234506711b4a1e0e1b52a102a52deab
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-31 15:39:57 +0200

    Remove McdConnection from DO constructor
    
    The DispatchOperation can get the connection from any of the channels, it
    doesn't need to be passed in when constructiong it.

 src/mcd-dispatch-operation.c |   21 +++++++++------------
 src/mcd-dispatch-operation.h |    1 -
 2 files changed, 9 insertions(+), 13 deletions(-)

commit bda4ce12db7553672b6a71d088a7f60088c0ad0f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-07 10:44:50 +0300

    Implement all properties in McDispatchOperation
    
    Complete implementation of McDispatchOperation.

 libmcclient/Makefile.am             |    2 +
 libmcclient/dbus-api.h              |    3 +
 libmcclient/mc-dispatch-operation.c |  336 +++++++++++++++++++++++++++++++++++
 libmcclient/mc-dispatch-operation.h |   74 ++++++++
 4 files changed, 415 insertions(+), 0 deletions(-)

commit 5ddc657d6d57c8eae37eeda22441a18a5b8a62fc
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-07 10:06:28 +0300

    Update from tp-spec

 xml/Channel_Dispatch_Operation.xml |   13 ++++++++++++-
 xml/Client_Approver.xml            |    4 +++-
 2 files changed, 15 insertions(+), 2 deletions(-)

commit e6386a65b33968a2f9af1f061950bd13e606f26a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-06 10:53:15 +0300

    Add client code for DispatchOperation

 libmcclient/Makefile.am            |    2 ++
 libmcclient/dispatch-operation.xml |    7 +++++++
 2 files changed, 9 insertions(+), 0 deletions(-)

commit 5bfa4c7ff7e68bab2df526b5b96b1cfc60486d54
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-06 10:28:52 +0300

    Implement the "Channels" property

 src/mcd-dispatch-operation.c |   26 ++++++++++++++++++++++++--
 1 files changed, 24 insertions(+), 2 deletions(-)

commit f90d9a385d42cdbf24e5d5420cdb3282bb111d0e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-03 15:05:32 +0300

    Add initial implementation of DispatchOperation objects

 src/Makefile.am                    |    8 +-
 src/dispatch-operation.xml         |    7 +
 src/mcd-dispatch-operation.c       |  343 ++++++++++++++++++++++++++++++++++++
 src/mcd-dispatch-operation.h       |   65 +++++++
 xml/Channel_Dispatch_Operation.xml |  331 ++++++++++++++++++++++++++++++++++
 xml/nmc5.xml                       |    2 +
 6 files changed, 754 insertions(+), 2 deletions(-)

commit c561d2654e5c3106b0a94a4f6f7eeb6e8d2cb83e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-30 16:36:31 +0200

    Documentation updates

 doc/reference/libmcclient/libmcclient-sections.txt |    4 ++
 doc/reference/libmcclient/tmpl/mc-profile.sgml     |   30 ++++++++++++++++++++
 2 files changed, 34 insertions(+), 0 deletions(-)

commit 33bfb7e8f5616ed2575ee035c6f9296218b6bee7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-30 15:52:15 +0200

    Implement the McProfile presence functions
    
    The GKeyFile will be kept in memory as long as the profile is used. The
    "loaded" flag becomes redundant.

 libmcclient/mc-profile.c |   85 +++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 80 insertions(+), 5 deletions(-)

commit d17b338d6894c06c695c3d0da97206fec8cd284c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-30 11:20:24 +0200

    Add stubs of profile presences getters.

 libmcclient/mc-profile.c |   68 ++++++++++++++++++++++++++++++++++++++++++---
 libmcclient/mc-profile.h |    9 ++++++
 2 files changed, 72 insertions(+), 5 deletions(-)

commit fffff33a80162c702f7469a010376a02218fac8b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-28 12:22:57 +0200

    beta 36

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7792a3439c37ed97c03878150f4eb0c944ca3076
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-28 12:03:44 +0200

    Compute satisfied requests for HandleChannels
    
    Compute the array of the satisfied requests, when calling HandleChannels.
    Also, compute the user action time.

 src/mcd-dispatcher.c |   17 ++++++++++++++++-
 1 files changed, 16 insertions(+), 1 deletions(-)

commit dc9341aab6272653418f86b1c1e149eeff2f0279
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-28 09:57:08 +0200

    beta35

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6e2b7f46e52ca3993f017e4e63010971aac682fe
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-28 09:47:06 +0200

    Requests through the Compat interface also call AddRequest
    
    Make it so that also those channel requests issued through the Compat interface
    will be advertised to the client with AddRequest.

 src/mcd-account-compat.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit b370ccdfa3a8d62afbf2da2f1152162e5f0987d4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-28 09:43:51 +0200

    The FUTURE interface doesn't really exist
    
    The Requested channel property is not really on the FUTURE interface (which
    doesn't exist), but on the plain channel one.

 src/mcd-connection.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 4bbffca96bc3dd84a73b2ed8a4a00975a2eb0cd0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-27 14:06:14 +0200

    Bump version number and info

 configure.ac            |    2 +-
 libmcclient/Makefile.am |    2 +-
 src/Makefile.am         |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit e2141fd920bc182191be91981ae8148fd5ec1002
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-27 12:22:48 +0200

    Update to latest tools/glib-ginterfaces.py
    
    Update the interface generator tool to the latest one used by telepathy-glib.
    Add a flag to disable writing the property initialization code, as we are not
    using it in the MC service (but we need it for clients).

 libmcclient/Makefile.am      |    1 +
 src/Makefile.am              |    2 +
 tools/glib-ginterface-gen.py |  111 ++++++++++++++++++++++++++++++++++++------
 3 files changed, 98 insertions(+), 16 deletions(-)

commit 1024148094c3c1281ae87243d2a26c9bff20968a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-27 12:20:17 +0200

    Automatic doc updates

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    2 +-
 .../tmpl/mcd-connection.sgml                       |    1 -
 2 files changed, 1 insertions(+), 2 deletions(-)

commit 635ea03d053495c7f2271fb7b0dd132f56502659
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-27 11:51:04 +0200

    Invoke AddRequest and RemoveFailedRequest
    
    Notify the McdDispatcher of new channel requests, and let it invoke the
    AddRequest and (if needed) RemoveFailedRequest client methods.
    Move the creation of an object path for the channel request into mcd-channel.c

 src/mcd-account-requests.c |   31 +++-------
 src/mcd-channel.c          |   44 ++++++++++++++
 src/mcd-channel.h          |    2 +
 src/mcd-dispatcher.c       |  141 ++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-dispatcher.h       |    4 +
 src/mcd-master.c           |   14 ++++
 src/mcd-master.h           |    1 +
 7 files changed, 216 insertions(+), 21 deletions(-)

commit 7d26d661235b54e9ebae8117a2af6ecbd22155f7
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-24 09:34:57 +0300

    Allow going online even without automatic presence
    
    If the automatic presence on an account is not set, allow the account to go
    online anyway.
    (Connection will be in connected state, and presence status will be unset)

 src/mcd-account.c |   15 +++++++++++++--
 1 files changed, 13 insertions(+), 2 deletions(-)

commit 2689ac4bc85f59126916f3b23fdbc22c5a25585e
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-24 09:07:47 +0300

    Add TODO comment

 src/mcd-connection.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 85d5a1468436a299808ca324fc18cfe3a2a63205
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-24 09:03:18 +0300

    Use g_hash_table_unref, not _destroy

 src/mcd-channel.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7cffd27f5636571f844b369b715c854ad1df2fc5
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-24 08:56:50 +0300

    Call HandleChannels with all channel properties
    
    Have mcd_connection_request_channel() invoke different functions for invoking
    the old RequestChannel or the new CreateChannel based on the availability of
    the Requests interface on the connection.
    In case the new interface is used, store the channel immutable properties, so
    that they will be passed to the handler.

 src/mcd-channel.c    |   17 +++++++++
 src/mcd-channel.h    |    1 +
 src/mcd-connection.c |   93 +++++++++++++++++++++++++++++++++++++++++--------
 3 files changed, 95 insertions(+), 16 deletions(-)

commit 96b9ae440a1354d81dc09b8850795b4e001260de
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 17:34:09 +0300

    Add channel GError on dispatch failure
    
    We must set an error on the channel (this will also set the channel status to
    FAILED), as listeners of the "status-changed" signal expect to find one.

 src/mcd-dispatcher.c |    8 +++-----
 1 files changed, 3 insertions(+), 5 deletions(-)

commit 0d032fc37d14afdd0268c0662dddb6a89a620db2
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 17:20:34 +0300

    Remove obsolete code and comment

 src/mcd-connection.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit 177a75933c71500ca883641f017134772d263c4b
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 17:18:56 +0300

    Remove unused parameter.
    
    The error parameter is not useful, as errors are stored in the McdChannel
    itself.

 src/mcd-account-compat.c   |    3 +--
 src/mcd-account-requests.c |    2 +-
 src/mcd-connection.c       |    7 +++----
 src/mcd-connection.h       |    3 +--
 4 files changed, 6 insertions(+), 9 deletions(-)

commit 98ad154e3b2e3ef9b16f06ac00f2465a0efd6f2d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 17:13:26 +0300

    Don't request channels if the connection is not ready
    
    Until the CM lists all its implemented interfaces, we don't request any channel
    until the connection is ready. Once the connection becomes ready, request all
    the channels that were previously requested.

 src/mcd-connection.c |   41 ++++++++++++++++++++++++++++++++++++++---
 1 files changed, 38 insertions(+), 3 deletions(-)

commit a9f596a2b3ff67c10b95e8153b2d1fbdd951673d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 16:53:33 +0300

    Rename one channel status
    
    A channel without a proxy is a channel request.

 src/mcd-channel.c    |    4 ++--
 src/mcd-channel.h    |    2 +-
 src/mcd-connection.c |    2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit d8108608956b3add1f747855badc19edbf2b8e0c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 12:05:14 +0300

    Add documentation for the channelrequest API

 doc/reference/libmcclient/libmcclient-sections.txt |   11 ++
 doc/reference/libmcclient/tmpl/mc-account.sgml     |  127 ++++++++++++++++++++
 2 files changed, 138 insertions(+), 0 deletions(-)

commit 36e0dcf157860ac359813498d571c2f4813512eb
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 11:51:34 +0300

    Add mc_account_channelrequest_add()
    
    Add a new function, mc_account_channelrequest_add(), to monitor a request
    created by another process. As most of the code is in common with
    mc_account_channelrequest_ht(), move it into a separate function.

 libmcclient/mc-account-request.c |  119 ++++++++++++++++++++++++++++++--------
 libmcclient/mc-account.h         |    8 +++
 2 files changed, 103 insertions(+), 24 deletions(-)

commit 88f867cbd92899c19ba6fd406be16c44d9b3986c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 11:08:35 +0300

    Add a flag parameter to mc_account_channelrequest
    
    Add a flag parameter to mc_account_channelrequest(): currently the only
    supported flag is USE_EXISTING, which if set will make libmcclient use the
    EnsureChannel method.

 examples/mc-example-3.c          |    2 +-
 libmcclient/mc-account-request.c |   29 ++++++++++++++++++++---------
 libmcclient/mc-account.h         |    7 +++++++
 3 files changed, 28 insertions(+), 10 deletions(-)

commit 845dd77dd411955d484730e2e162784c399d4e67
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 11:08:09 +0300

    Automatic updates

 .../tmpl/mcd-connection.sgml                       |    2 +-
 .../tmpl/mcd-dispatcher-context.sgml               |    9 +++++++
 .../tmpl/mcd-dispatcher.sgml                       |   24 ++++++-------------
 3 files changed, 18 insertions(+), 17 deletions(-)

commit 93111982e5bbadca86341e4e26c0e9c28fe7b5b8
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 10:41:28 +0300

    Rename API prefix
    
    Change mc_account_channel_request into mc_account_channelrequest, for
    consistency with the auto-generated API. Change the example accordingly.
    (The API has not been released yet)

 examples/mc-example-3.c          |   16 ++++----
 libmcclient/mc-account-request.c |   68 +++++++++++++++++++-------------------
 libmcclient/mc-account.h         |   58 ++++++++++++++++----------------
 3 files changed, 71 insertions(+), 71 deletions(-)

commit 5c3b750e40d6f92d1adf7a01afd08a011cfbb904
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 10:30:35 +0300

    Make fields in McAccountChannelRequestData const
    
    The McAccountChannelRequestData fields are meant to be constant.
    Update also the example.

 examples/mc-example-3.c  |    2 +-
 libmcclient/mc-account.h |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b322f8c13745d70dbe135e175e06e4c2a9e0445f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 10:25:18 +0300

    Partially implement the client side of channel requests
    
    Implement the client side of the channel requests; only the cancel function is
    still unimplemented.

 libmcclient/account.xml          |    1 +
 libmcclient/mc-account-priv.h    |    6 +
 libmcclient/mc-account-request.c |  223 ++++++++++++++++++++++++++++++++++++--
 libmcclient/mc-account.c         |    5 +
 4 files changed, 226 insertions(+), 9 deletions(-)

commit 4ccea1337c1a1c6c87143e4903a03506d72b18e5
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-23 10:20:44 +0300

    Add example for channel requests

 examples/Makefile.am    |    5 +-
 examples/mc-example-3.c |  217 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 221 insertions(+), 1 deletions(-)

commit bcad40271a067725c3d85a472962b85d76388ce6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-22 09:42:34 +0300

    Implement ChannelRequests.Create and EnsureChannel
    
    Implement ChannelRequests.Create and temporarily have EnsureChannel behave in
    the same way.
    Also implement two support functions that are needed by these methods: a
    function to deep-copy a GHashTable (because dbus-glib destroys its hash-tables
    after invoking the service methods, rather then just unreferencing them) and a
    function to return the error code as D-Bus error string.

 src/mcd-account-requests.c |  144 +++++++++++++++++++++++++++++++++++++++++++-
 src/mcd-channel.c          |    2 +
 src/mcd-misc.c             |   91 ++++++++++++++++++++++++++++
 src/mcd-misc.h             |    4 +
 4 files changed, 239 insertions(+), 2 deletions(-)

commit dc58e997488a23c03a8096576d63522eb3c75a53
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 14:43:03 +0300

    Fix two memory leaks.

 src/mcd-account-compat.c |    3 +++
 src/mcd-account-compat.h |    2 +-
 2 files changed, 4 insertions(+), 1 deletions(-)

commit c2e96e9ceaac74fe53c098af11e9d4d72d20e89a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 14:37:41 +0300

    Add user_time and preferred_handler to request
    
    Add two parameters, user_time and preferred_handler to
    mcd_channel_new_request().
    They are not currently used.

 src/mcd-account-compat.c |    2 +-
 src/mcd-channel.c        |   46 +++++++++++++++++++++++++++++++++++++---------
 src/mcd-channel.h        |    4 +++-
 3 files changed, 41 insertions(+), 11 deletions(-)

commit 721e36137d92372448432e79d3da9633fa7a022d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-22 11:06:32 +0300

    Use tp-glib utility functions to handle GValues in GSlices
    
    As suggested, use tp_g_value_slice_{new,free} to allocate and destroy GValues.

 src/mcd-account-compat.c |   15 ++++++---------
 src/mcd-account.c        |    3 ++-
 src/mcd-misc.c           |    8 --------
 src/mcd-misc.h           |    2 --
 4 files changed, 8 insertions(+), 20 deletions(-)

commit c7384f5d1a8dd757af879ba7227e9f53dd295f02
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 13:37:25 +0300

    Don't copy requestor data
    
    When we find that the requested channel already exists, don't copy the new
    requestor data onto it.
    This is simply because the requestor-serial property is deprecated, but indeed
    all this code should be refactored.

 src/mcd-connection.c |   17 +++--------------
 1 files changed, 3 insertions(+), 14 deletions(-)

commit 77dcc2bf89fc1cf4d421ac0aafd30864a6e35e31
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 13:29:36 +0300

    Store the request data into a temporary struct
    
    Instead of using the deprecated requestor-serial property and
    requestor-client-id (which we might deprecate too), store these data into a
    structure embedded to the channel with g_object_set_data().
    
    Once the channel is dispatched we don't need it anymore, so free it.

 src/mcd-account-compat.c |   50 +++++++++++++++++++++++++++++++++------------
 1 files changed, 36 insertions(+), 14 deletions(-)

commit 7f8216d67b782b5b80198420d17eda6c112d7c6f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 12:07:12 +0300

    Requests errors have nothing to do with dispatcher
    
    Leave handling of errors on channel requested through the compat interface to
    mcd-account-compat.c. Don't emit channel request errors on the dispatcher.

 src/mcd-account-compat.c |   26 ++++++++++++--------------
 src/mcd-service.c        |   27 ---------------------------
 2 files changed, 12 insertions(+), 41 deletions(-)

commit 12960de8ad9bc6b9f232707af3c6380cf6908969
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 11:40:17 +0300

    Moving code around
    
    Move the implementation of channel requesting from mcd-account.c to
    mcd-account-compat.c, and deprecate mcd_account_request_channel_nmc4().
    Move the struct mcd_channel_request into mcd-account-compat.c, too.
    
    Rename the prop_value_free() function as _mcd_prop_value_free(), and move it
    into mcd-misc.c.

 src/mcd-account-compat.c |  119 ++++++++++++++++++++++++++++++++++++++++++++--
 src/mcd-account-compat.h |   15 ++++++
 src/mcd-account.c        |  112 +------------------------------------------
 src/mcd-account.h        |    3 +-
 src/mcd-channel.h        |   11 ----
 src/mcd-master.c         |    3 +-
 src/mcd-misc.c           |    7 +++
 src/mcd-misc.h           |    3 +
 src/mcd-service.c        |    1 +
 9 files changed, 148 insertions(+), 126 deletions(-)

commit 6b74a1b3f00a48d6e4fcae376038939267fa5e32
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 11:24:46 +0300

    remove static keyword from _mcd_account_online_request()
    
    We are going to use _mcd_account_online_request() from another file.

 src/mcd-account-priv.h |    7 +++++++
 src/mcd-account.c      |   34 ++++++++++++++++++++++------------
 2 files changed, 29 insertions(+), 12 deletions(-)

commit a6112bf1115f761bdc312d0ba65bdcc0ece40725
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 10:48:10 +0300

    Allocate GValues with GSlice
    
    Use g_slice_new to allocate GValues, and re-use the prop_value_free function to
    free them.

 src/mcd-account.c |   12 ++----------
 1 files changed, 2 insertions(+), 10 deletions(-)

commit 1aa6bd2f0b354c1ba0c9b6790ef4a1a16486df17
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 10:31:20 +0300

    Deprecate mcd_channel_new() and requestor-serial property

 src/mcd-channel.c |    2 ++
 src/mcd-channel.h |    3 ++-
 2 files changed, 4 insertions(+), 1 deletions(-)

commit d84c4f6f76d14f5876c613897686b4b93c5d01d0
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 10:25:01 +0300

    Try to avoid conflicts with data identifiers

 src/mcd-channel.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit 9fb7f318a097179254b4ae82e436f3300fd15348
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-21 09:12:59 +0300

    Add mcd_channel_new_request()
    
    Add function to create a channel request from a GHashTable of desired
    properties.
    Use it from mcd-account.c when requesting a channel.

 src/mcd-account.c |   57 +++++++++++++++++++++++++++++++++++++++--------
 src/mcd-channel.c |   63 ++++++++++++++++++++++++++++++++++++++++------------
 src/mcd-channel.h |    4 +-
 3 files changed, 97 insertions(+), 27 deletions(-)

commit 7c55d9d164c8bad278110d56777c366df737d047
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-20 16:57:40 +0300

    Rewrite error handling on channel requests
    
    It doesn't seem right that errors occurred while creating accounts are emitted
    on the channel dispatcher as dispatch errors. So, this patch moves handling of
    these errors to the code in McdAccount which creates the requests, by having
    the error stored in the McdChannel and inspected when the channel status
    changes to FAILED.
    Then the error on the dispatcher is issued from mcd-account.c; it's still
    wrong, but we need it if we want to behave as MC4 did.

 src/mcd-account.c    |   33 +++++++++++++++++++++++++++++++++
 src/mcd-channel.c    |   32 ++++++++++++++++++++++++++++++++
 src/mcd-channel.h    |    7 +++++--
 src/mcd-connection.c |   17 ++++-------------
 4 files changed, 74 insertions(+), 15 deletions(-)

commit 76b6b14ddf90640c032fef7201af37626be5e201
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-20 16:09:03 +0300

    Unify channel requesting code path a bit
    
    Once we get the target handle ID, we can re-call
    mcd_connection_request_channel().

 src/mcd-connection.c |   15 ++-------------
 1 files changed, 2 insertions(+), 13 deletions(-)

commit 2fab17b7eb854deb34a7f0fcda54aac4d2528f21
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-20 16:02:04 +0300

    Don't duplicate the channel_request struct
    
    Instead of duplicating the channel_request struct, instantiate the McdChannel
    earlier, and set the desired properties on it.

 src/mcd-account.c    |   37 +++++++++++++++----------------------
 src/mcd-channel.c    |   26 ++++++++++++++++++++++++++
 src/mcd-channel.h    |    4 ++++
 src/mcd-connection.c |   43 +++++++++++++++++++++----------------------
 src/mcd-connection.h |    2 +-
 5 files changed, 67 insertions(+), 45 deletions(-)

commit 1084ee51cf635540e9e3b07aadf309b4b5e9adec
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-20 11:22:21 +0300

    Add ChannelRequests interface and stub implementation
    
    Add the interface ChannelRequests to the Account object, and provide empty
    implementations of its methods.

 src/Makefile.am                           |    4 +
 src/mcd-account-requests.c                |  111 +++++++++++
 src/mcd-account-requests.h                |   41 ++++
 src/mcd-account.c                         |    4 +
 xml/Account_Interface_ChannelRequests.xml |  294 +++++++++++++++++++++++++++++
 xml/Makefile.am                           |    1 +
 xml/nmc5.xml                              |    1 +
 7 files changed, 456 insertions(+), 0 deletions(-)

commit f922b915178a93757c11f11feec6f80c2a332515
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-17 16:45:34 +0300

    Prototype the account request API
    
    Introduce the account request API, mostly stubs.

 libmcclient/Makefile.am          |    1 +
 libmcclient/mc-account-request.c |  254 ++++++++++++++++++++++++++++++++++++++
 libmcclient/mc-account.h         |   67 ++++++++++
 3 files changed, 322 insertions(+), 0 deletions(-)

commit e13e9d29996a58e8b4b1b5327c75c0b4e1c23306
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-17 10:46:40 +0300

    Rename a static variable

 src/mcd-dispatcher.c |   25 ++++++++++++-------------
 1 files changed, 12 insertions(+), 13 deletions(-)

commit def5249ee7f03ac4ae8870ea8c13162043bc90f1
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-17 10:32:19 +0300

    More work on dispatching a set of channels
    
    Add reference counting to the McdDispatcherContext structure, and set its
    lifetime to the dispatching phase (when the last channel handler returns, it
    must be freed).
    Also, deprecate the "dispatch-failed" and "dispatched" signals, and introduce a
    "dispatch-completed" signal which carries the dispatcher context and signals
    the end of the dispatching.

 src/mcd-dispatcher.c |  204 +++++++++++++++++++++++++++++++++++++++++---------
 1 files changed, 169 insertions(+), 35 deletions(-)

commit 545588bb4f4dd351822ad98ae7669d17c6a4a090
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-15 15:33:45 +0300

    Run the channel handler until there are no unhandled channels
    
    Call mcd_dispatcher_run_handler() from inside a loop, until there are no
    unhandled channels.
    Make mcd_dispatcher_run_handler() return the list of unhandled channels.

 src/mcd-dispatcher.c |  121 +++++++++++++++++++++++++++++++++++++++++++-------
 1 files changed, 105 insertions(+), 16 deletions(-)

commit 5f4623fc01756e9349c1514dd03f5035f8708954
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-15 12:20:39 +0300

    Move functions building D-Bus Channel_Detail to mcd-channel.c

 src/mcd-channel.c    |   57 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-channel.h    |    3 ++
 src/mcd-dispatcher.c |   59 +------------------------------------------------
 3 files changed, 62 insertions(+), 57 deletions(-)

commit 7e0f4aa553f460819a63734b49927a881d25097d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-15 11:03:32 +0300

    Don't export mcd_dispatcher_context_get_channels_dbus

 src/mcd-dispatcher-context.h |    3 ---
 src/mcd-dispatcher.c         |    9 ++++++---
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 0ec4f6a8f18bba71fa4d522c4f0c03afa4dc0bce
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-15 10:34:45 +0300

    Add mcd_dispatcher_context_get_channels.
    
    Add a new functions, mcd_dispatcher_context_get_channels().

 .../libmissioncontrol-server-sections.txt          |    1 +
 src/mcd-dispatcher-context.h                       |    2 ++
 src/mcd-dispatcher.c                               |   13 +++++++++++++
 3 files changed, 16 insertions(+), 0 deletions(-)

commit 42953b200a9c20e7e0000fa10f1569b666f61aae
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-15 10:23:24 +0300

    Remove unused declaration
    
    mcd_dispatcher_get_status() was never implemented.

 .../libmissioncontrol-server-sections.txt          |    1 -
 src/mcd-dispatcher.h                               |    4 ----
 2 files changed, 0 insertions(+), 5 deletions(-)

commit e56fef55765fcb3c81e215c1a648603d452b1c59
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-15 10:20:28 +0300

    Keep a pointer to private data

 src/mcd-dispatcher.c |   43 ++++++++++++++++++++++---------------------
 src/mcd-dispatcher.h |    2 ++
 2 files changed, 24 insertions(+), 21 deletions(-)

commit 8a2c83e57fc7e7fa27bca00bf1f98b4474ac66e4
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-15 13:19:34 +0300

    Declare all 1-bit booleans as "guint var : 1"

 src/mcd-connection.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit eac3cc08abb94fdb3d537510b711268869e9a89c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-14 18:04:38 +0300

    Invoke new-style channel handlers
    
    If a Client.Handler matching the HandlerChannelFilter rules is found, call
    HandleChannels on it. Currently this is limited to one channel at a time.

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    3 +-
 .../tmpl/mcd-dispatcher-context.sgml               |    2 +-
 src/mcd-dispatcher-context.h                       |    5 +-
 src/mcd-dispatcher.c                               |  304 +++++++++++++++++---
 4 files changed, 265 insertions(+), 49 deletions(-)

commit dd3d8f92546ae50878e36f2d7a09f8ec22aa8439
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-13 16:15:13 +0300

    Load .client files
    
    Scan the $XDG/telepathy/clients/ directories for .client files and parse them
    into memory structures.

 src/mcd-dispatcher.c |  249 +++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 247 insertions(+), 2 deletions(-)

commit 71058884e2ffb41b9bff1b7f98418391d8503da5
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-13 16:13:49 +0300

    Implement directory scanning function.
    
    Add a mcd-misc.c file to hold utility functions that don't pertain to any
    specific object.
    Implement a function to scan XDG data subdirectories and invoke a callback for
    any file found.

 src/Makefile.am |    4 ++-
 src/mcd-misc.c  |   90 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-misc.h  |   41 +++++++++++++++++++++++++
 3 files changed, 134 insertions(+), 1 deletions(-)

commit 7f655f8b040db3cc07136890f1ff7cbfcd05b1ed
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-10 15:27:51 +0300

    Listen for NewChannels signal
    
    If the connection implements the Requests interface, stop listening to the
    NewChannel signal and instead connect to NewChannels.
    Also, dispatch all the undispatched channels after retrieving their immutable
    properties.

 src/mcd-connection.c |  154 ++++++++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 149 insertions(+), 5 deletions(-)

commit d61f060cdd4861c061610bc31d9c760ee5eb8167
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-10 15:23:50 +0300

    Add methods to set/get a dictionary of properties
    
    Added two internal methods, to bundle the array of immutable properties to a McdChannel.

 src/mcd-channel.c |   29 +++++++++++++++++++++++++++++
 src/mcd-channel.h |    5 +++++
 2 files changed, 34 insertions(+), 0 deletions(-)

commit 88e09a4bacae26dc50546ce49748584f2b558b23
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-09 17:37:11 +0300

    Rename PENDING status to NO_PROXY
    
    This better describes what the status is about.

 src/mcd-channel.c    |    2 +-
 src/mcd-channel.h    |    2 +-
 src/mcd-connection.c |    4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)

commit d2623e16ac016c58ed8ad0cf290b73a1d5542b2c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-09 17:31:37 +0300

    Let the Dispatcher set a channel's dispatching status
    
    Remove unnecessary duplication of code.

 src/mcd-connection.c |    7 -------
 src/mcd-dispatcher.c |    3 ++-
 2 files changed, 2 insertions(+), 8 deletions(-)

commit ef987fc7ab5157d86259f2c1b072a20531c23e80
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-09 17:27:55 +0300

    Wait for connection to be ready before dispatching channels
    
    Don't dispatch incoming channels until the connection is ready.

 src/mcd-channel.h    |    2 ++
 src/mcd-connection.c |   45 ++++++++++++++++++++++++++++++++++++++++-----
 2 files changed, 42 insertions(+), 5 deletions(-)

commit d343bb79d8a374473095f25f5f16bc96ab9e2086
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-09 14:48:35 +0300

    Don't store the channel type as string
    
    McdChannel was previously storing the channel type both as string and as
    GQuark, and it some cases these two could be out of sync. This patch removes
    the string representation from the private data structure, and computes the
    string out of the GQuark, when necessary.

 src/mcd-channel.c |   23 +++++------------------
 1 files changed, 5 insertions(+), 18 deletions(-)

commit 3cfa1e2277f8eae90fe91f5bac0f34ef44e47b70
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-09 14:00:49 +0300

    Renaming of variables and changing access rights of properties
    
    In McdChannel, deprecate the properties "channel-<property>" in favor of
    "<property>"; introduce the new properties as writable construct only
    properties, as we have accessor methods for them.
    Rewrite the existing code not to use g_object{set,get} on the new properties.
    Rename some private variables to strip off the "channel_" prefix.

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |   15 +++
 src/mcd-channel.c                                  |  120 +++++++++++++-------
 src/mcd-channel.h                                  |    1 +
 src/mcd-connection.c                               |   10 +-
 src/mcd-dispatcher.c                               |    4 +-
 5 files changed, 101 insertions(+), 49 deletions(-)

commit b87d669a3e904f2abcfa7d4438b58b3c238dee2f
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-08 18:05:13 +0300

    Don't use a separate list for pending channels
    
    There's no need to use a separate list for pending channels: we can store them
    as connection's missions if we are careful to properly set their status as
    MCD_CHANNEL_PENDING.
    This simplifies a lot the mcd_connection_cancel_channel_request(), which was
    using different code for pending and taken channels.

 src/mcd-connection.c |  107 ++++++++-----------------------------------------
 1 files changed, 18 insertions(+), 89 deletions(-)

commit 22536bd1cc8d60385132c8c00671f266abb5ed59
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-08 17:37:17 +0300

    Don't use TpChannel from McdConnection
    
    Move the code that deals with TpChannel inside McdChannel only.

 src/mcd-channel.c    |   78 ++++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-channel.h    |    7 ++++
 src/mcd-connection.c |   56 ++++++++---------------------------
 3 files changed, 98 insertions(+), 43 deletions(-)

commit e424a7cc26087f1463c2a9c49317e79d29e9c036
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-08 11:32:11 +0300

    Remove McdPendingChannel structure
    
    There is no need for this structure to exist. The McdChannel already has that
    information, so let's just use it instead.
    Code gets simplified a bit.

 src/mcd-connection.c |  112 +++++++++----------------------------------------
 1 files changed, 21 insertions(+), 91 deletions(-)

commit 706eec67c9ad8062f8fe4c8ce21e553b7e1a7988
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-08 11:10:24 +0300

    Add vim and emacs modelines
    
    Add vim and emacs modelines to avoid using tabs in newly-written code.

 libmcclient/dbus-api.c              |    2 ++
 libmcclient/dbus-api.h              |    2 ++
 libmcclient/mc-account-avatar.c     |    2 ++
 libmcclient/mc-account-compat.c     |    2 ++
 libmcclient/mc-account-conditions.c |    2 ++
 libmcclient/mc-account-manager.c    |    2 ++
 libmcclient/mc-account-manager.h    |    2 ++
 libmcclient/mc-account-priv.h       |    2 ++
 libmcclient/mc-account.c            |    2 ++
 libmcclient/mc-account.h            |    2 ++
 libmcclient/mc-errors.c             |    2 ++
 libmcclient/mc-errors.h             |    3 ++-
 libmcclient/mc-profile.c            |    2 ++
 libmcclient/mc-profile.h            |    2 ++
 src/mcd-account-compat.c            |    3 ++-
 src/mcd-account-compat.h            |    2 ++
 src/mcd-account-conditions.c        |    3 ++-
 src/mcd-account-conditions.h        |    2 ++
 src/mcd-account-config.h            |    2 ++
 src/mcd-account-connection.c        |    3 ++-
 src/mcd-account-connection.h        |    3 ++-
 src/mcd-account-manager-creation.c  |    3 ++-
 src/mcd-account-manager-creation.h  |    2 ++
 src/mcd-account-manager-query.c     |    3 ++-
 src/mcd-account-manager-query.h     |    2 ++
 src/mcd-account-manager.c           |    3 ++-
 src/mcd-account-manager.h           |    2 ++
 src/mcd-account-priv.h              |    2 ++
 src/mcd-account.c                   |    3 ++-
 src/mcd-account.h                   |    2 ++
 src/mcd-chan-handler.c              |    3 ++-
 src/mcd-chan-handler.h              |    3 ++-
 src/mcd-channel.c                   |    3 ++-
 src/mcd-channel.h                   |    3 ++-
 src/mcd-connection-plugin.h         |    3 ++-
 src/mcd-connection.c                |    3 ++-
 src/mcd-connection.h                |    3 ++-
 src/mcd-controller.c                |    3 ++-
 src/mcd-controller.h                |    3 ++-
 src/mcd-dbusprop.c                  |    3 ++-
 src/mcd-dbusprop.h                  |    3 ++-
 src/mcd-debug.c                     |    3 ++-
 src/mcd-debug.h                     |    3 ++-
 src/mcd-dispatcher-context.h        |    3 ++-
 src/mcd-dispatcher.c                |    3 ++-
 src/mcd-dispatcher.h                |    3 ++-
 src/mcd-main.c                      |    3 ++-
 src/mcd-manager.c                   |    3 ++-
 src/mcd-manager.h                   |    3 ++-
 src/mcd-master.c                    |    3 ++-
 src/mcd-master.h                    |    3 ++-
 src/mcd-mission.c                   |    3 ++-
 src/mcd-mission.h                   |    3 ++-
 src/mcd-operation.c                 |    3 ++-
 src/mcd-operation.h                 |    3 ++-
 src/mcd-plugin.h                    |    2 ++
 src/mcd-presence-frame.c            |    3 ++-
 src/mcd-presence-frame.h            |    3 ++-
 src/mcd-provisioning-factory.c      |    3 ++-
 src/mcd-provisioning-factory.h      |    3 ++-
 src/mcd-provisioning.c              |    3 ++-
 src/mcd-provisioning.h              |    3 ++-
 src/mcd-proxy.c                     |    3 ++-
 src/mcd-proxy.h                     |    3 ++-
 src/mcd-service.c                   |    3 ++-
 src/mcd-service.h                   |    3 ++-
 src/mcd-transport.c                 |    3 ++-
 src/mcd-transport.h                 |    3 ++-
 68 files changed, 136 insertions(+), 46 deletions(-)

commit 0a652416e92ae4318b22cf7a57da7a30a9a76569
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-03 10:17:20 +0300

    Automatic updates

 .../libmcclient/tmpl/mc-account-manager.sgml       |   76 ++++++++++++++++++++
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    7 ++
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    7 ++
 .../libmissioncontrol-server/tmpl/mcd-service.sgml |   30 --------
 4 files changed, 90 insertions(+), 30 deletions(-)

commit c74db9e6487057ca7f3d1f7393d3abe017e8c6e6
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-03 10:12:37 +0300

    tag beta33

 configure.ac            |    2 +-
 libmcclient/Makefile.am |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit ab6a4c4c7e18ca63691218851eeba2d2d2018fe5
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-03 09:48:04 +0300

    Add mc_account_get_connection_path()
    
    Add a mc_account_get_connection_path() which behaves exactly as
    mc_account_get_connection_name(), which was badly named.
    Deprecate mc_account_get_connection_name().

 doc/reference/libmcclient/libmcclient-sections.txt |    1 +
 doc/reference/libmcclient/tmpl/mc-account.sgml     |    9 +++++++++
 libmcclient/mc-account.c                           |   16 ++++++++++++++--
 libmcclient/mc-account.h                           |    4 +++-
 util/mc-tool.c                                     |    2 +-
 5 files changed, 28 insertions(+), 4 deletions(-)

commit 56189114a881d2b6cf4423cc615df156c1be48a1
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-03 09:35:34 +0300

    Check the Connection property type
    
    Make sure that the Connection property holds an object path, before using its
    value.

 libmcclient/mc-account.c |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

commit 3af47490bbf33cab4ac186e3392c0edd122b3f0b
Merge: d3133d1 c2c2a36
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-03 09:00:51 +0300

    Merge branch 'req_client'

commit d3133d1cf6a834799010c0d9de3d272d2c6b39fd
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-02 16:56:24 +0300

    Make the Connection account property be an object path
    
    Code is simpler if the Connection account property is the connection object
    path.
    Use the value "/" for no connection.

 libmcclient/mc-account.c |    7 ++++++-
 src/mcd-account.c        |   10 +++-------
 xml/Account.xml          |   10 +++++++---
 3 files changed, 16 insertions(+), 11 deletions(-)

commit 10c202dffc64d64e9b01561823132f5fe8027314
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-02 16:55:18 +0300

    Add mc-tool
    
    This mc-tool is a more functional version of the mc-account tool.
    It was written by Pekka Pessi and uses libmcclient.

 util/Makefile.am |    5 +-
 util/mc-tool.c   | 1086 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 1090 insertions(+), 1 deletions(-)

commit a5246596a2a85db02cd2eb36553898788b453f8c
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-02 16:54:26 +0300

    Add example

 examples/Makefile.am    |    5 +-
 examples/mc-example-2.c |  319 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 323 insertions(+), 1 deletions(-)

commit 767cbe9daf42597fe9b1362eddf0e2ee2d642786
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-10-02 16:53:11 +0300

    Apply changes suggested by wjt

 libmcclient/mc-account-manager.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit 315c62122b3c172675bae937511d307e687b9a7d
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:54 +0000

    Documentation fixes
    
    Add the last introduced APIs into the documentation.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20541 64d1ce6a-1406-0410-9ac8-afed03b27183

 doc/reference/libmcclient/libmcclient-sections.txt |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 2eb669c5caf2a37c206e6a266d5e876a6e0cacb8
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:53 +0000

    Add mc_account_monitor_list_accounts()
    
    Add a function to list and filter accounts present in the McAccountManager
    cache.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20540 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/mc-account-manager.c |   48 ++++++++++++++++++++++++++++++++++++++
 libmcclient/mc-account-manager.h |    5 ++++
 2 files changed, 53 insertions(+), 0 deletions(-)

commit 6f62808c2da27131d61f90efbcacde26f082c190
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:51 +0000

    Make McAccountManager a singleton
    
    Always return the previous instance. If this is not always desirable, we might
    later introduce some API to disable this behaviour.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20539 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/mc-account-manager.c |   20 ++++++++++++++++++++
 1 files changed, 20 insertions(+), 0 deletions(-)

commit 452ee8d7ab9c60dd6882e52dd3ef9e5c06ec5994
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:50 +0000

    Add account-ready signal to McAccountManager
    
    When a new account appears, request the desired interfaces and once they are
    ready emit the "account-ready" signal.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20538 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/mc-account-manager.c |   66 +++++++++++++++++++++++++++++++++++++-
 1 files changed, 65 insertions(+), 1 deletions(-)

commit 07f96ad059e8a06b67b31d9d828deab4d1805403
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:49 +0000

    Unreference invalidated accounts
    
    Listen to accounts' "invalidated" signal, and remove them from the cache when
    it's emitted.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20537 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/mc-account-manager.c |   23 ++++++++++++++++++++++-
 1 files changed, 22 insertions(+), 1 deletions(-)

commit 39c8dc39dadc0d28c30eb1b9a88a053048159526
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:47 +0000

    Invalidate proxy when account removed
    
    When an account is removed, invalidate the TpProxy.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20536 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/mc-account.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 3c1d13846ec3df96d09f6f7f5c35d25382d2ad88
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:46 +0000

    Account cache in McAccountManager and call_when_ready_with_accounts
    
    Implement an cache (as GHashTable) of McAccounts into McAccountManager.
    Add mc_account_manager_get_account() to get an account from the cache,
    instantiating a new object in case it was not there.
    Add mc_account_manager_call_when_ready_with_accounts(), which calls a callback
    when the account manager and all the known accounts are ready.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20535 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/mc-account-manager.c |  267 ++++++++++++++++++++++++++++++++++++++
 libmcclient/mc-account-manager.h |   11 ++
 2 files changed, 278 insertions(+), 0 deletions(-)

commit 53e4e2095987f326780323270568f7c0f617a638
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:45 +0000

    Define MC_ACCOUNT_DBUS_OBJECT_BASE_LEN
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20534 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/dbus-api.h   |    2 ++
 libmcclient/mc-account.c |    3 +--
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 39ef59f0cad6ec2605f2b169da955332bec00566
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:43 +0000

    Implement _mc_iface_call_when_all_readyv()
    
    _mc_iface_call_when_all_readyv() is like _mc_iface_call_when_all_ready(), but
    accepts the interfaces to be listed in an array instead of a va_list.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20533 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/dbus-api.c |   29 +++++++++++++++++++++++++++++
 libmcclient/dbus-api.h |    6 ++++++
 2 files changed, 35 insertions(+), 0 deletions(-)

commit bc893e7dc60d13ca9158f30e9749090c8cbe750f
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:42 +0000

    Implement mc_account_manager_call_when_iface_ready()
    
    Implement mc_account_manager_call_when_iface_ready(), that unlike
    mc_account_manager_call_when_ready() accepts a weak_object as a sentilen on
    when to cancel the call.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20532 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/mc-account-manager.c |   71 ++++++++++++++++++++++++++++++++++++++
 libmcclient/mc-account-manager.h |   13 +++++++
 2 files changed, 84 insertions(+), 0 deletions(-)

commit df9367598fe70b733842918f19099f9f0a6256b9
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:41 +0000

    Add private data structure to McAccountManager
    
    Add McAccountManagerPrivate; we need it because we are going to use the
    interface retrieving facilities in dbus-prop.c, which assume that the interface
    property data is located in the private data structure.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20531 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/mc-account-manager.c |   38 ++++++++++++++++++++++++++------------
 1 files changed, 26 insertions(+), 12 deletions(-)

commit 65fb3fa0a71168ddd36df35a49ffc44abacb671b
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-02 13:49:39 +0000

    Fix possible crash happening when interfaces are already ready
    
    If _mc_iface_call_when_all_ready() was crashing if called when the interfaces
    where already ready. So, keep a reference to the structure while the call is
    being executed.
    Rename a struct member for better readability.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20530 64d1ce6a-1406-0410-9ac8-afed03b27183

 libmcclient/dbus-api.c |   12 +++++++-----
 1 files changed, 7 insertions(+), 5 deletions(-)

commit 189e21a0e79d037f19d1852775327b343e0e4f03
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-10-01 06:23:13 +0000

    Complete account setup even if manager is not there
    
    If the manager is absent, accounts should appear as invalid, but still behave
    correctly.
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20431 64d1ce6a-1406-0410-9ac8-afed03b27183

 src/mcd-account.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit c2c2a366e4d3c9c2f6c409bafeef2e52971eb47a
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-09-30 14:53:10 +0300

    Define prefix for client bus names and object paths.

 libmcclient/dbus-api.h |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 5ec2f564acd976a8087fe94dd59b5a3346f1ef9d
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-09-30 13:23:46 +0300

    Client code to be used by the ChannelDispatcher

 src/Makefile.am |   12 +++++++++++-
 src/client.xml  |   10 ++++++++++
 2 files changed, 21 insertions(+), 1 deletions(-)

commit b8f2b52691391d4263665e84fe3b2efe17cd5a96
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-09-30 11:35:43 +0300

    Add Client, Approver, Handler, Observer to libmcclient

 libmcclient/Makefile.am |   12 ++
 libmcclient/client.xml  |   10 ++
 xml/Client.xml          |  123 ++++++++++++++++++++++
 xml/Client_Approver.xml |  135 ++++++++++++++++++++++++
 xml/Client_Handler.xml  |  268 +++++++++++++++++++++++++++++++++++++++++++++++
 xml/Client_Observer.xml |  230 ++++++++++++++++++++++++++++++++++++++++
 xml/Makefile.am         |    7 +-
 xml/all.xml             |    1 +
 xml/generic-types.xml   |   61 ++++++++++-
 xml/nmc5.xml            |    5 +
 xml/telepathy-types.xml |   96 +++++++++++++++++
 11 files changed, 945 insertions(+), 3 deletions(-)

commit f4510a45e09472fe315a4922bf06bbcf4b1a1546
Author: mardy <mardy@64d1ce6a-1406-0410-9ac8-afed03b27183>
Date:   2008-09-18 14:28:37 +0000

    Update changelog
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20117 64d1ce6a-1406-0410-9ac8-afed03b27183

 ChangeLog |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 6e32b92f45dd2e5c67bc0fefd4f256a6714a1c45
Author: Alberto Mardegan <alberto.mardegan@nokia.com>
Date:   2008-09-18 16:42:46 +0300

    Update changelog, we are now using git
    
    git-svn-id: https://projects.maemo.org/svn/chavo/trunk/framework/open/telepathy-mission-control@20116 64d1ce6a-1406-0410-9ac8-afed03b27183

 ChangeLog |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit d005fc78de4090abca641c56f3a2bafa10b1b3c0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-09-16 09:10:20 +0000

    tag beta32
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@540 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 +++-
 configure.ac |    2 +-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 26d8e25425cbe775e12db15b974c7fd18e89ff3f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-09-16 08:51:13 +0000

    Don't call any methods on the McdManager if construction fails;
    instead, call the from the constructor.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@539 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    6 ++++++
 src/mcd-manager.c |    3 ++-
 2 files changed, 8 insertions(+), 1 deletions(-)

commit 12894e7a3eecc9c68214c1a177aadfef79b878be
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-09-05 11:46:45 +0000

    Tag beta31
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@537 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 44961932e7f7db0c7efec8923636c500bdd7806f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-09-05 11:45:15 +0000

    Emit the PropertiesChanged signal when the Telepathy connection is
    created and destroyed.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@536 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-account.c    |   10 ++++++++++
 src/mcd-account.h    |    3 +++
 src/mcd-connection.c |    2 ++
 4 files changed, 21 insertions(+), 0 deletions(-)

commit 1fc5f874095119158d3f9b3a7d77d97d1b248ebf
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-09-04 09:15:27 +0000

    .
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@535 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

commit ed9be19abf4fc2f7164c6750f5e9055187228f74
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-09-02 12:30:24 +0000

    tag beta30
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@533 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 445b5e66b25ece6c4952444372f78bbfb72bc92c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-09-02 12:28:14 +0000

    Make the constructor return a NULL object if the manager file is not
    found.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@532 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    6 ++++++
 src/mcd-manager.c |   37 +++++++++++++++++++++++++++++++++----
 2 files changed, 39 insertions(+), 4 deletions(-)

commit 3c3c6792eb90afc9f288ca72b856e2bbba3410d1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-27 14:26:52 +0000

    Chain up to the parent's constructed method
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@531 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-service.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 683b4112b9e1ab8a530936dca6f9e88114500aae
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-27 14:04:29 +0000

    tag beta29
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@529 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit d67e7efb29db09fdcdd7ea7d708073b67c1c56ae
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-27 14:02:57 +0000

    Cancel the _call_when_ready() callback if che connection object is
    deleted.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@528 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    4 ++++
 src/mcd-connection.c |   22 +++++++++++++++++++---
 2 files changed, 23 insertions(+), 3 deletions(-)

commit 8fbb5fbcd40284f9d88b5fd640a78439060fe601
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-27 13:41:25 +0000

    Change the order in which objects are instantiated, so that
    McdDispatcher is available when McdManagers need it.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@527 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    6 ++++++
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |   10 ++++++++++
 src/Makefile.am                                    |    2 +-
 src/mcd-master.c                                   |    6 ++++--
 4 files changed, 21 insertions(+), 3 deletions(-)

commit e161f676cc942cc841acfb6828d5beb2fe37696b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-26 12:13:17 +0000

    tag beta28
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@525 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 412b4561da4061eaa56468ef9426da6a3025d232
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-26 12:09:50 +0000

    Allow the McdAccountManager to be subclassed; rework the
    initialization process of some objects to make it more sane.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@524 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                 |    4 +
 src/mcd-account-manager.c |   28 +++++++--
 src/mcd-account-manager.h |    3 +
 src/mcd-master.c          |  155 ++++++++++++++++++++++++++++-----------------
 src/mcd-service.c         |   50 +++++++++++----
 5 files changed, 163 insertions(+), 77 deletions(-)

commit 44c36ebd138adb22307b07c179f5f62a982de28b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-26 12:06:22 +0000

    Make derived objects work
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@523 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                            |   10 +++++++
 src/mcd-dbusprop.c                   |   47 ++++++++++++++++++---------------
 xml/Account_Interface_Conditions.xml |    3 +-
 3 files changed, 38 insertions(+), 22 deletions(-)

commit 022e9c1877f6d0b474456e5a6d2f7d7ade8cd827
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-25 13:33:08 +0000

    Remove duplicate properties
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@522 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 xml/Account.xml |   34 ----------------------------------
 1 files changed, 0 insertions(+), 34 deletions(-)

commit d1f87bb2f9fe816b62979b47ffc3f504529b5037
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-22 13:06:08 +0000

    Add missing struct types.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@520 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                        |    4 ++++
 xml/Account_Interface_Avatar.xml |   14 +++++++++++++-
 xml/Makefile.am                  |    5 +++++
 xml/MissionControl.xml           |   29 ++++++++++++++++++++++++++++-
 xml/all.xml                      |    4 ++++
 5 files changed, 54 insertions(+), 2 deletions(-)

commit ff7b9b82893785d1575f39be091a80ecba4dc319
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-22 12:17:22 +0000

    Tag beta27
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@519 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit e480baf56a5a8cc2b8441aee993b79287fbcc406
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-22 07:27:52 +0000

    Cancel the _call_when_ready() callback if che channel object is
    deleted.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@518 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |   15 ++
 .../libmcclient/tmpl/mc-account-manager.sgml       |  139 --------------------
 src/mcd-account-compat.c                           |    2 +
 src/mcd-account.c                                  |    6 +-
 src/mcd-channel.c                                  |   21 +++-
 5 files changed, 38 insertions(+), 145 deletions(-)

commit 5ab86c8dbc3e803554e6c7eb0f71277c623e84ec
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-18 14:00:33 +0000

    Add forgotten file
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@516 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/mc-quark.list |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 6236d3410271bcd94778caa3ec1b0fccf3f716df
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-18 13:37:31 +0000

    Tag beta26
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@515 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 561524196ca84551c56399f73579657daf783eb2
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-18 13:34:25 +0000

    Bump soname of libmissioncontrol-server.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@514 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e57cda074e91e022eea60efd8932781fb4e648c9
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-08-18 13:20:49 +0000

    Lots of cleanup, most made by smcv.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@513 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |  114 ++++++++++++++++++++
 Makefile.am                                        |    4 +-
 autogen.sh                                         |   37 ++++++-
 configure.ac                                       |   67 ++++++++----
 doc/reference/libmcclient/tmpl/dummy.sgml          |    1 +
 .../libmissioncontrol-server/tmpl/dummy.sgml       |    1 +
 doc/reference/libmissioncontrol/tmpl/dummy.sgml    |    1 +
 examples/Makefile.am                               |    2 +-
 examples/mc-example.c                              |   17 ++--
 libmcclient.pc.in                                  |    5 +-
 libmcclient/Makefile.am                            |   18 ++-
 libmcclient/mc-profile.c                           |    5 +-
 libmissioncontrol.pc.in                            |    5 +-
 libmissioncontrol/Makefile.am                      |   30 ++++--
 libmissioncontrol/mc-account-manager-proxy.c       |    6 +-
 libmissioncontrol/mc-account-monitor.c             |    2 +-
 libmissioncontrol/mc-account.c                     |   28 +++--
 libmissioncontrol/mc-manager.c                     |    9 +-
 libmissioncontrol/mc-profile.c                     |   17 ++--
 libmissioncontrol/mc-protocol.c                    |   24 +++--
 libmissioncontrol/mission-control.c                |   26 +++--
 libmissioncontrol/test.c                           |  114 ++++++--------------
 m4/Makefile.am                                     |    3 +
 m4/as-compiler-flag.m4                             |   33 ++++++
 mission-control.pc.in                              |    2 +-
 src/Makefile.am                                    |   34 +++++--
 src/mcd-account-conditions.c                       |    2 +-
 src/mcd-account-manager-query.c                    |    7 +-
 src/mcd-account-manager.c                          |    4 +-
 src/mcd-account.c                                  |   54 ++++++----
 src/mcd-chan-handler.c                             |    2 +-
 src/mcd-channel.c                                  |   10 +-
 src/mcd-connection.c                               |   14 ++--
 src/mcd-controller.c                               |   16 ++--
 src/mcd-dbusprop.c                                 |    4 +-
 src/mcd-dbusprop.h                                 |    2 +-
 src/mcd-debug.h                                    |    4 +-
 src/mcd-dispatcher.c                               |   15 ++--
 src/mcd-manager.c                                  |   17 ++--
 src/mcd-master.c                                   |   10 +-
 src/mcd-operation.c                                |    9 +-
 src/mcd-presence-frame.c                           |   10 +-
 src/mcd-service.c                                  |   32 ++----
 src/mcd-signals-marshal.list                       |    5 +-
 src/mcd-transport.c                                |    2 +-
 test/Makefile.am                                   |    4 +-
 test/mc-client.c                                   |    3 +-
 util/mc-account-convert.c                          |   23 +++--
 48 files changed, 541 insertions(+), 313 deletions(-)

commit 493f306d9b93cc1fcfbfa58bc3b1820e5b6b9b5d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-28 08:08:01 +0000

    Beta25
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@512 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog               |    2 ++
 configure.ac            |    2 +-
 libmcclient/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 4601277dbdc51bc69f26fe65816c668f597b0261
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-28 07:57:51 +0000

    Add a mc_profile_get_filename() function, to retrive the pathname of
    the .profile file. Applications can therefore parse the profiles
    themselves, and look for application specific data.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@511 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    7 +++++++
 doc/reference/libmcclient/libmcclient-sections.txt |    1 +
 doc/reference/libmcclient/tmpl/mc-profile.sgml     |    9 +++++++++
 libmcclient/mc-profile.c                           |   18 ++++++++++++++++++
 libmcclient/mc-profile.h                           |    1 +
 5 files changed, 36 insertions(+), 0 deletions(-)

commit fbfd1db81214e9467e8eb826fb5608635bffc8f1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-21 07:57:44 +0000

    Tag beta24
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@510 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog               |    2 ++
 configure.ac            |    2 +-
 libmcclient/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 43a825d09cd8ca1e446e98f81552e0b7266bc9ce
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-21 07:53:09 +0000

    Allow the various *_get_presence() methods to pass NULL for those
    fields the caller is not interested in.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@509 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    4 +++
 libmcclient/mc-account.c |   51 ++++++++++++++++++++++++++++++++-------------
 2 files changed, 40 insertions(+), 15 deletions(-)

commit 8da57097accf8ed50b636e476d6fd51c20c6eeb1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-21 06:27:49 +0000

    Free the Manager properties on finalization, that were being leaked.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@508 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                        |    5 +++++
 libmcclient/mc-account-manager.c |   22 ++++++++++++++++++++++
 2 files changed, 27 insertions(+), 0 deletions(-)

commit e6b91bc9db3ad2504ac3725fee0b643980be5883
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-11 08:13:35 +0000

    Tag beta23
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@502 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog               |    2 ++
 configure.ac            |    2 +-
 libmcclient/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 568dc61cd6cde568b227a5263b1ee132efc7e0bd
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-11 08:03:41 +0000

    Remove the const modifier when returning a GHashTable, since all GLib
    functions would require a cast to use it.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@501 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    4 ++++
 libmcclient/mc-account-conditions.c |    2 +-
 libmcclient/mc-account.c            |    2 +-
 libmcclient/mc-account.h            |    4 ++--
 4 files changed, 8 insertions(+), 4 deletions(-)

commit 17af423a500d27699af97a3b7ec68e1056b65845
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-11 07:57:57 +0000

    Rename mc_account_set_conditions() to mc_account_conditions_set(), as
    it should have been since the beginning.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@500 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    4 ++++
 doc/reference/libmcclient/libmcclient-sections.txt |    2 +-
 .../libmcclient/tmpl/libmcclient-unused.sgml       |   13 +++++++++++++
 doc/reference/libmcclient/tmpl/mc-account.sgml     |    2 +-
 libmcclient/mc-account-conditions.c                |    2 +-
 libmcclient/mc-account.h                           |    2 +-
 6 files changed, 21 insertions(+), 4 deletions(-)

commit b3e71c783ac2d64fe19ff7da24ec620938d363de
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-11 07:48:14 +0000

    Add missing documentation.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@499 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    4 ++
 libmcclient/mc-account-compat.c     |   66 ++++++++++++++++++++++++++++++++++-
 libmcclient/mc-account-conditions.c |   39 ++++++++++++++++++++
 3 files changed, 108 insertions(+), 1 deletions(-)

commit 1f0a172e4179ad007b36938f20d4c4d77c28adf5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-11 07:25:41 +0000

    Don't automatically attempt reconnecting after a connection error.
    Instead, unset the requested presence so that it can be set again.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@498 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-connection.c |   16 ++++++++++------
 2 files changed, 16 insertions(+), 6 deletions(-)

commit b1857887ed66de1c4734351d72a7ff7ea929bfb8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-09 09:01:29 +0000

    Tag beta22
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@497 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 67d80b59b9315f1f02664c8d90f5a326d2fb4822
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-09 08:44:31 +0000

    Bump revisions
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@496 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit fd5cac58a7955e72a5f281362961e489b7c3ff34
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-09 08:39:23 +0000

    Update example
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@495 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 examples/mc-example.c |   91 ++++++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 87 insertions(+), 4 deletions(-)

commit 8cc592c586d0f5a5257103dac429477617e44e17
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-09 08:36:59 +0000

    Add mc_account_call_when_iface_ready() and
    mc_account_call_when_all_ready().
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@494 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    8 ++
 doc/reference/libmcclient/libmcclient-sections.txt |    3 +
 doc/reference/libmcclient/tmpl/mc-account.sgml     |   37 +++++++
 libmcclient/mc-account-avatar.c                    |   24 +++++
 libmcclient/mc-account-compat.c                    |   16 +++
 libmcclient/mc-account-conditions.c                |   16 +++
 libmcclient/mc-account-priv.h                      |    2 +
 libmcclient/mc-account.c                           |  109 ++++++++++++++++++++
 libmcclient/mc-account.h                           |   17 +++
 9 files changed, 232 insertions(+), 0 deletions(-)

commit 942f7d2918eaddb10159099a316156b540f75ad3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-09 08:01:37 +0000

    Add an internal API to let a single callback be invoked when a set of
    interfaces are ready.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@493 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog              |    4 +++
 libmcclient/dbus-api.c |   71 ++++++++++++++++++++++++++++++++++++++++++++++++
 libmcclient/dbus-api.h |    4 +++
 3 files changed, 79 insertions(+), 0 deletions(-)

commit ae4b292a7185752e168a6d359782f6326e851fba
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-09 06:43:37 +0000

    When monitoring an interface, allow the interface to be specified by a
    GQuark, rather than have a separate API for each one.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@492 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog              |    6 ++++++
 libmcclient/dbus-api.c |   42 ++++++++++++++++++++++++++++++++++++++++++
 libmcclient/dbus-api.h |   14 ++++++++++++++
 3 files changed, 62 insertions(+), 0 deletions(-)

commit 9f7dd5b0ea616b721330c672a330c31b105734da
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-08 13:02:30 +0000

    Add code to allow the call_when_ready family of function to be
    cancelled when a weakly-referenced GObject is destroyed.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@491 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog              |    8 ++++
 configure.ac           |    2 +-
 libmcclient/dbus-api.c |   84 ++++++++++++++++++++++++++++++++++++-----------
 libmcclient/dbus-api.h |   11 ++++++-
 4 files changed, 83 insertions(+), 22 deletions(-)

commit 6913705b25083865882a6a1122bf804f889552d8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-07 11:36:13 +0000

    libmissioncontrol is the only module depending on libtelepathy.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@490 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    5 +++++
 configure.ac                  |    6 +++++-
 libmissioncontrol/Makefile.am |    4 +++-
 3 files changed, 13 insertions(+), 2 deletions(-)

commit 2dbf9db50a64b5dfb645049660542f372482e5ba
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-07 09:17:23 +0000

    tag beta20
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@486 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 9811cea979178b734c831317d4d98ce642421ac6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-07 08:33:48 +0000

    Add telepathy-glib compilation flags and libraries.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@485 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    5 +++++
 libmcclient.pc.in |    4 ++--
 2 files changed, 7 insertions(+), 2 deletions(-)

commit d17d7fd79f4cd3d36fac80caf1c0b51fa72f7e35
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-04 05:29:39 +0000

    tag beta19
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@483 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 30548c92d52f9f4702d089aff053655d95d048a0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-04 05:28:19 +0000

    Implement mcd_service_get_connection().
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@482 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    5 +++
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    1 +
 src/mcd-master.c                                   |   29 +++++++++++++++++--
 src/mcd-master.h                                   |    3 +-
 src/mcd-service.c                                  |    3 +-
 5 files changed, 36 insertions(+), 5 deletions(-)

commit f2fb4c6be3758131598d88182efc13ea1b0d697f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-01 09:25:49 +0000

    Doc updates
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@481 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 doc/reference/libmcclient/libmcclient-sections.txt |    3 +-
 libmcclient/mc-account-avatar.c                    |   48 +++++++++++++++
 libmcclient/mc-account-manager.c                   |   62 ++++++++++++++++---
 libmcclient/mc-account.c                           |   18 ++++--
 4 files changed, 114 insertions(+), 17 deletions(-)

commit efe6758aed3ac1b7f28a014e8a6e1bd4089f2cc0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-01 08:34:14 +0000

    Remove mc_account_set_current_presence(), which should have never been
    existed as the property is read-only.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@480 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    6 +++++
 .../libmcclient/tmpl/libmcclient-unused.sgml       |   15 +++++++++++++
 doc/reference/libmcclient/tmpl/mc-account.sgml     |   16 --------------
 libmcclient/mc-account.c                           |   22 --------------------
 libmcclient/mc-account.h                           |    9 --------
 5 files changed, 21 insertions(+), 47 deletions(-)

commit 893b086d5dd66ffe3e2b74e56c39660bf09b45a6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-01 08:06:56 +0000

    Tag beta18
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@479 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 3d0a81b3ac3f82cd45326b12c3d924f5adff6e82
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-01 07:40:27 +0000

    Implemented a workaround for gtkdoc to recognize the DBus specialized
    types. McAccount signal documentation is now generated.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@478 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                      |    4 ++++
 doc/reference/libmcclient/Makefile.am          |    3 ++-
 doc/reference/libmcclient/tmpl/mc-account.sgml |    9 +++++++++
 3 files changed, 15 insertions(+), 1 deletions(-)

commit fd3045675712fc1393ec1875c5f38db963f3b101
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-01 06:36:36 +0000

    Add required file
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@477 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 0 files changed, 0 insertions(+), 0 deletions(-)

commit 0721d51a153652a58ce26a55d4e721d1bb83f830
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-07-01 06:35:14 +0000

    Re-enable signal documentation for McAccount; it doesn't work, but
    it's not the reason why the build was failing.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@476 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                   |    6 ++++++
 doc/reference/libmcclient/libmcclient.types |    1 +
 2 files changed, 7 insertions(+), 0 deletions(-)

commit 7b679258bdfe29b1478f98ae157941c48f23ca43
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-30 15:17:16 +0000

    Tag beta17
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@475 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 83c29ffa2dd376002c227f500343a308886add1d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-30 15:15:52 +0000

    Disable generation of McAccount signal documentation as it breaks the
    build for yet unknown reasons.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@474 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                   |    4 ++++
 doc/reference/libmcclient/libmcclient.types |    1 -
 2 files changed, 4 insertions(+), 1 deletions(-)

commit ed9a5da33cc8a7d6bcf69d06d2310dc15de84fd0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-30 13:54:48 +0000

    Add documentation for the base interface of McAccount.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@473 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    5 +
 doc/reference/libmcclient/libmcclient-sections.txt |    2 -
 .../libmcclient/tmpl/mc-account-manager.sgml       |  145 ++++++++-
 doc/reference/libmcclient/tmpl/mc-account.sgml     |   10 +-
 libmcclient/mc-account.c                           |  335 +++++++++++++++++++-
 libmcclient/mc-account.h                           |    3 +-
 6 files changed, 474 insertions(+), 26 deletions(-)

commit e8c6acbd1b9eb8492dbb189b1f95912f7be1d4a3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-30 12:29:05 +0000

    Add Creation interface.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@471 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 .../libmcclient/tmpl/libmcclient-unused.sgml       |   48 +++++++
 .../libmcclient/tmpl/mc-account-manager.sgml       |  139 ++++++++++++++++++++
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    7 -
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    7 -
 xml/Makefile.am                                    |    1 +
 5 files changed, 188 insertions(+), 14 deletions(-)

commit f77c9873c0b0f5e659376f877c3c69c0ea33d2b0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-30 12:22:09 +0000

    Tag beta16
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@470 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 14b69275aee74e7dbba4f1ed16d23e7673e2c183
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-30 12:19:03 +0000

    Build documentation for libmcclient
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@469 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    7 +
 configure.ac                                       |    5 +
 doc/reference/Makefile.am                          |    2 +-
 doc/reference/libmcclient/Makefile.am              |   94 +++
 doc/reference/libmcclient/libmcclient-docs.sgml    |   23 +
 doc/reference/libmcclient/libmcclient-sections.txt |  246 +++++++
 doc/reference/libmcclient/libmcclient.types        |    7 +
 .../libmcclient/tmpl/cli-account-body.sgml         |   21 +
 .../libmcclient/tmpl/cli-account-manager-body.sgml |   19 +
 .../libmcclient/tmpl/cli-account-manager.sgml      |  158 +++++
 doc/reference/libmcclient/tmpl/cli-account.sgml    |  230 +++++++
 doc/reference/libmcclient/tmpl/enums.sgml          |   19 +
 doc/reference/libmcclient/tmpl/gtypes-body.sgml    |   27 +
 doc/reference/libmcclient/tmpl/gtypes.sgml         |   34 +
 .../libmcclient/tmpl/interfaces-body.sgml          |   83 +++
 doc/reference/libmcclient/tmpl/interfaces.sgml     |  195 ++++++
 .../libmcclient/tmpl/libmcclient-unused.sgml       |   48 ++
 .../libmcclient/tmpl/mc-account-manager.sgml       |   75 +++
 doc/reference/libmcclient/tmpl/mc-account.sgml     |  699 ++++++++++++++++++++
 doc/reference/libmcclient/tmpl/mc-errors.sgml      |   54 ++
 doc/reference/libmcclient/tmpl/mc-profile.sgml     |  274 ++++++++
 doc/reference/libmcclient/tmpl/mc-quark.sgml       |  169 +++++
 .../libmcclient/tmpl/mc-signals-marshal.sgml       |  123 ++++
 .../tmpl/register-dbus-glib-marshallers-body.sgml  |   19 +
 .../libmcclient/tmpl/signals-marshal.sgml          |   19 +
 tools/Makefile.am                                  |    3 +
 tools/doc-generator.xsl                            |  172 ++++--
 tools/glib-client-gen.py                           |  110 +++-
 tools/libglibcodegen.py                            |  166 +-----
 tools/libtpcodegen.py                              |  194 ++++++
 xml/Makefile.am                                    |    1 +
 xml/all.xml                                        |    2 +
 xml/generic-types.xml                              |   43 ++
 33 files changed, 3110 insertions(+), 231 deletions(-)

commit 6d006efafbcdc8004013819690f1eef3406570c1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-30 07:59:34 +0000

    Implement the old channel request APIs in the Compat interface, so
    that it's possible to request channels from libmcclient.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@468 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                        |    6 +++-
 src/mcd-account-compat.c         |   73 ++++++++++++++++++++++++++++++++++++++
 xml/Account_Interface_Compat.xml |   51 ++++++++++++++++++++++++++
 3 files changed, 129 insertions(+), 1 deletions(-)

commit 6343706f6e9910186133323375bacc6d98c0dff7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-30 06:51:50 +0000

    When dealing with the channel type, use its GQuark rather than the
    full string.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@467 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-connection.c |   30 ++++++++++++------------------
 2 files changed, 18 insertions(+), 18 deletions(-)

commit 173202d20d0e7600ad84a11db1a44605299b2b86
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-27 13:50:20 +0000

    Don't return the same channel when a second call is requested to the
    same contact.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@466 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-connection.c |    4 ++++
 2 files changed, 10 insertions(+), 0 deletions(-)

commit 844c4d29380bc5d80ebee2e8a1ae24b3fd39ff9a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-27 12:45:31 +0000

    Tag beta15
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@465 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit d1a5ac08593c5db911bafe3ec90f41b483be7118
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-27 12:36:20 +0000

    Ensure _gen/ directory is created before using it (fixes compilation).
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@464 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    5 +++++
 .../libmissioncontrol/tmpl/mc-account.sgml         |    2 ++
 .../libmissioncontrol/tmpl/mc-profile.sgml         |    2 ++
 libmcclient/Makefile.am                            |    1 +
 4 files changed, 10 insertions(+), 0 deletions(-)

commit 1114e56aa801654148523bbe4a7200d1b07784ee
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-27 12:34:56 +0000

    Tag beta14
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@463 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit f4778412394f4209ac5f2b9cae5db904553d043d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-27 06:46:16 +0000

    Rename GTypes that were conflicting with libmcclient.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@461 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                    |    5 +++++
 libmissioncontrol/mc-remap.h |    5 +++++
 2 files changed, 10 insertions(+), 0 deletions(-)

commit 8b1054f6ac4c60f3d980eeea3285a94ecba0e98d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-26 12:45:27 +0000

    Support the new interface in libmcclient.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@460 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                        |    3 +++
 libmcclient/account-manager.xml  |    1 +
 libmcclient/mc-account-manager.c |    2 ++
 3 files changed, 6 insertions(+), 0 deletions(-)

commit f08d83f94cc92d3f9eaa1edd9bfd188d01e426b5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-26 11:56:34 +0000

    Add a new BDus interface to the AccountManager to request the creation
    of an account and atomic setting of properties.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@459 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                  |    6 ++
 src/Makefile.am                            |    4 +
 src/mcd-account-manager-creation.c         |  122 ++++++++++++++++++++++++++++
 src/mcd-account-manager-creation.h         |   40 +++++++++
 src/mcd-account-manager.c                  |   23 +++--
 src/mcd-account-manager.h                  |    8 ++
 xml/Account_Manager_Interface_Creation.xml |   76 +++++++++++++++++
 xml/nmc5.xml                               |    1 +
 8 files changed, 271 insertions(+), 9 deletions(-)

commit 31563e5f549f646e68aeb7fc80cceef9e7a96963
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-26 11:50:00 +0000

    Update example
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@458 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 examples/mc-example.c |   88 ++++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 83 insertions(+), 5 deletions(-)

commit 072cd8277741ce4e355af64fb15dc6d1ec236063
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-26 11:47:48 +0000

    Add API to internally set a property.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@457 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog          |    5 +++++
 src/mcd-dbusprop.c |   43 ++++++++++++++++++++++++++++---------------
 src/mcd-dbusprop.h |    5 +++++
 3 files changed, 38 insertions(+), 15 deletions(-)

commit 8be3b97a6b04664461421551debebfa05d96bc8f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-26 10:10:29 +0000

    Unset the data even if an error occurs.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@456 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/dbus-api.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ae373d6620cb817681fa11388e3266b094c036fe
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-24 09:21:41 +0000

    Add mc_profile_get_default_setting().
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@452 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    3 +++
 libmcclient/mc-profile.c |   28 ++++++++++++++++++++++++++++
 libmcclient/mc-profile.h |    2 ++
 3 files changed, 33 insertions(+), 0 deletions(-)

commit 292b2c98a92d06c841692ddacb68f1a61a31067b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-24 08:18:19 +0000

    Add mc_account_compat_set_profile(), and rename
    mc_account_set_secondary_vcard_fields() into the more consistent
    mc_account_compat_set_secondary_vcard_fields().
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@451 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                       |    5 +++++
 libmcclient/mc-account-compat.c |   29 +++++++++++++++++++++++------
 libmcclient/mc-account.h        |   18 ++++++++++++------
 3 files changed, 40 insertions(+), 12 deletions(-)

commit 32a82e1c24009c16ce8c16de19f34e74bf800110
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-24 07:56:39 +0000

    Add mc_profile_get_manager_name().
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@450 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    3 +++
 libmcclient/mc-profile.c |   21 +++++++++++++++++++++
 libmcclient/mc-profile.h |    1 +
 3 files changed, 25 insertions(+), 0 deletions(-)

commit 6b479b3efe2e32de2d53d04b3944f36b329c4e76
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-24 06:29:07 +0000

    Emit a GObject signal when a new account is created.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@449 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                        |    5 +++++
 libmcclient/mc-account-manager.c |   32 +++++++++++++++++++++++++++++---
 2 files changed, 34 insertions(+), 3 deletions(-)

commit 12626bb659271c167e72ae44000f67197b319b28
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-23 13:20:46 +0000

    Move the mc-quark.[hc] files into _gen/.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@448 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    3 +++
 libmcclient/Makefile.am  |    8 ++++----
 libmcclient/mc-account.h |    2 +-
 3 files changed, 8 insertions(+), 5 deletions(-)

commit 344e3d8699dc5dbb9914e0e01fce51f9824660c5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-23 10:52:40 +0000

    Add methods for setting Account properties.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@447 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    6 ++
 libmcclient/mc-account-avatar.c     |   33 +++++++
 libmcclient/mc-account-compat.c     |   18 ++++
 libmcclient/mc-account-conditions.c |   18 ++++
 libmcclient/mc-account.c            |  165 +++++++++++++++++++++++++++++++++++
 libmcclient/mc-account.h            |   79 ++++++++++++++++-
 6 files changed, 318 insertions(+), 1 deletions(-)

commit 382dd70ca40b75621bc7752756458f8fbb1e06e3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-23 04:55:46 +0000

    Tag beta13
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@446 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit cc987c097e49704de4e4fcc8396ac0ed45c35a08
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-23 04:53:47 +0000

    Rename symbols potentially conflicting with libmcclient: change the prefix
    from `mc_' to `omc_'.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@445 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                    |    6 +
 libmissioncontrol/Makefile.am                |    9 +-
 libmissioncontrol/dbus-api.h                 |    2 +
 libmissioncontrol/mc-account-manager-proxy.h |    1 +
 libmissioncontrol/mc-account-proxy.h         |    1 +
 libmissioncontrol/mc-account.h               |    2 +
 libmissioncontrol/mc-manager.h               |    2 +
 libmissioncontrol/mc-remap.h                 |  154 ++++++++++++++++++++++++++
 libmissioncontrol/mc.h                       |    1 +
 9 files changed, 175 insertions(+), 3 deletions(-)

commit e8c06781aa5c6476af78927df63ee361e0d850f3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-19 13:27:40 +0000

    Refactor example app a bit.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@444 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 examples/mc-example.c |   71 ++++++++++++++++++++++++++++++++++++++----------
 1 files changed, 56 insertions(+), 15 deletions(-)

commit 58d377bb214abd52d0051174c5e063eefbbcc7af
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-18 11:18:38 +0000

    Tag beta12.
    Remove generation of reentrant blocking calls.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@443 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    7 ++
 configure.ac             |    2 +-
 tools/glib-client-gen.py |  220 ----------------------------------------------
 3 files changed, 8 insertions(+), 221 deletions(-)

commit ce8b59458713d32bbcec49bb6f623e605ab5de09
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-18 08:35:18 +0000

    Correct pointer casting so that no warning are emitted when GCC 4.2 is used.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@442 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    6 ++++++
 libmcclient/mc-account-avatar.c     |    2 +-
 libmcclient/mc-account-compat.c     |    2 +-
 libmcclient/mc-account-conditions.c |    2 +-
 libmcclient/mc-account-manager.c    |    2 +-
 libmcclient/mc-account.c            |    2 +-
 6 files changed, 11 insertions(+), 5 deletions(-)

commit f783d0b6b4a9968d8e102e44fddd2b85e651760b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-18 07:37:46 +0000

    Explicitly link to DBus libraries. Fixes: #1988768.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@440 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog       |    5 +++++
 src/Makefile.am |    4 ++--
 2 files changed, 7 insertions(+), 2 deletions(-)

commit cea4c5b99a754949d082aa9863109ce203f04c12
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-18 06:19:41 +0000

    Fix distribution of gquark-gen.py
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@439 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 tools/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 14e72907ce682c85058495fac4fcd459417e55e1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-17 12:53:53 +0000

    Tag beta11
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@438 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 7c04356a6686cbade91d21d662bd835f32b169c1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-17 11:54:11 +0000

    Update example to make use of new MC APIs.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@437 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog             |    3 +
 examples/mc-example.c |  168 +++++++++++++++++++++++++------------------------
 2 files changed, 89 insertions(+), 82 deletions(-)

commit bc6f8cef8f814106638ad83a354b3fdea45499a7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-17 08:04:57 +0000

    Remove the "validity-changed" signal, as it didn't bring any benefit over the
    autogenerated TpProxy equivalent.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@436 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/mc-account-manager.c |   21 ---------------------
 1 files changed, 0 insertions(+), 21 deletions(-)

commit 4b136e2b848553fdfa48ee854257e76cd23018bb
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-17 08:02:42 +0000

    Update the account lists when an account is removed.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@435 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/mc-account-manager.c |   38 +++++++++++++++++++++++++++++++-------
 1 files changed, 31 insertions(+), 7 deletions(-)

commit ed3dc37cceb573bef72d91df1cbc2c03d03698b9
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-17 07:38:44 +0000

    Implement getting/monitoring of AccountManager properties.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@434 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    4 +
 libmcclient/mc-account-manager.c    |  175 ++++++++++++++++++++++++++++++++++-
 libmcclient/mc-account-manager.h    |   12 +++
 libmcclient/mc-signals-marshal.list |    1 +
 4 files changed, 191 insertions(+), 1 deletions(-)

commit 252116f3de913e023952e36cf051c8145f9858ff
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-17 04:47:17 +0000

    Watch for properties changes in the Avatar interface.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@433 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    6 +++
 libmcclient/mc-account-avatar.c     |   86 ++++++++++++++++++++++++++++++-----
 libmcclient/mc-account-priv.h       |    2 +
 libmcclient/mc-account.c            |    2 +
 libmcclient/mc-signals-marshal.list |    1 +
 5 files changed, 85 insertions(+), 12 deletions(-)

commit f9d58d270dda1d810599df1299bed0713933e69c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-16 13:20:37 +0000

    Watch for properties changes in the Account interface, and emit proper
    signal.
    Added a script to generate GQuark function helpers from a text file.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@432 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    9 ++
 libmcclient/Makefile.am             |    9 ++
 libmcclient/mc-account-priv.h       |   12 +++
 libmcclient/mc-account.c            |  156 +++++++++++++++++++++++++++++++++-
 libmcclient/mc-account.h            |    3 +
 libmcclient/mc-signals-marshal.list |    5 +
 tools/gquark-gen.py                 |  115 ++++++++++++++++++++++++++
 7 files changed, 304 insertions(+), 5 deletions(-)

commit 1bf730975f05fa637f6aa99cb0ed840337fcaa5c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-16 12:26:29 +0000

    Add return value to _mc_iface_call_when_ready(), to know if this was the first
    invocation.
    Add a function to ask if an interface is ready.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@431 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/dbus-api.c |   16 ++++++++++++++--
 libmcclient/dbus-api.h |   10 ++++++----
 2 files changed, 20 insertions(+), 6 deletions(-)

commit 836f96d303b153f4df4c192501f38dface952f67
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-13 15:11:43 +0000

    Make interface properties code more generic so that it can be used for
    any TpProxy object.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@430 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    8 ++
 examples/mc-example.c               |   98 +++++++++++++++++++++++++++-
 libmcclient/dbus-api.c              |  110 ++++++++++++++++++++++++++++++
 libmcclient/dbus-api.h              |   25 +++++++
 libmcclient/mc-account-avatar.c     |    9 ++-
 libmcclient/mc-account-compat.c     |    9 ++-
 libmcclient/mc-account-conditions.c |    9 ++-
 libmcclient/mc-account-priv.h       |   20 ------
 libmcclient/mc-account.c            |  126 ++---------------------------------
 9 files changed, 263 insertions(+), 151 deletions(-)

commit fae46a468a8c3cc2e6b610794d0a4cf735c576d6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-12 12:49:15 +0000

    Make only one DBus call per interface, regardless of the number of callbacks registered.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@429 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/mc-account-avatar.c     |    2 +-
 libmcclient/mc-account-compat.c     |    2 +-
 libmcclient/mc-account-conditions.c |    2 +-
 libmcclient/mc-account-priv.h       |   14 ++---
 libmcclient/mc-account.c            |   90 ++++++++++++++++++++++++++++-------
 5 files changed, 81 insertions(+), 29 deletions(-)

commit 44063001f756e8ee8247f4887ff653b129ee675c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-12 06:51:20 +0000

    Add Conditions interface.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@428 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    6 ++
 libmcclient/Makefile.am             |    1 +
 libmcclient/mc-account-conditions.c |   90 +++++++++++++++++++++++++++++++++++
 libmcclient/mc-account-priv.h       |    4 ++
 libmcclient/mc-account.c            |    3 +
 libmcclient/mc-account.h            |    7 +++
 6 files changed, 111 insertions(+), 0 deletions(-)

commit 72e3be147953ea8b2b0b6a06950051753fee1753
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-11 14:24:26 +0000

    Move away shared code
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@427 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/dbus-api.c          |   13 +++++++++++++
 libmcclient/dbus-api.h          |    2 ++
 libmcclient/mc-account-avatar.c |    6 +-----
 libmcclient/mc-account-compat.c |    6 +-----
 libmcclient/mc-account.c        |    6 +-----
 5 files changed, 18 insertions(+), 15 deletions(-)

commit 28b8d9a5b03086954719c76a2c7bf2a752e58f94
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-11 14:10:54 +0000

    Remove useless g_debug()
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@426 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/mc-account-avatar.c |    1 -
 libmcclient/mc-account-compat.c |    1 -
 2 files changed, 0 insertions(+), 2 deletions(-)

commit b80cf4dcea8d1b7716e0d6bd69a22d9f8e6e861d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-11 14:08:49 +0000

    Fix some leaks
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@425 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/mc-account-avatar.c |    1 +
 libmcclient/mc-account-compat.c |    1 +
 libmcclient/mc-account.c        |    1 +
 3 files changed, 3 insertions(+), 0 deletions(-)

commit aa76c025b14c768d820225163cde77b871f94c0c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-11 14:04:58 +0000

    Add Compat interface
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@424 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                       |    4 +
 libmcclient/Makefile.am         |    1 +
 libmcclient/mc-account-compat.c |  123 +++++++++++++++++++++++++++++++++++++++
 libmcclient/mc-account-priv.h   |    6 ++
 libmcclient/mc-account.c        |    6 ++
 libmcclient/mc-account.h        |    9 +++
 6 files changed, 149 insertions(+), 0 deletions(-)

commit 28b7faf4118461802d74fea66fdb70666127f2bf
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-11 12:17:15 +0000

    Remove unused macro
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@423 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmcclient/mc-account-avatar.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit b35edc10319f166aad5fb1212f5e56060a48e995
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-11 11:53:10 +0000

    Add getters for all the Account properties.
    Refactor the code to easy plugging in interfaces.
    Add Avatar interface.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@422 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                       |    8 ++
 libmcclient/Makefile.am         |    4 +
 libmcclient/mc-account-avatar.c |  113 ++++++++++++++++++++++
 libmcclient/mc-account-priv.h   |   62 ++++++++++++
 libmcclient/mc-account.c        |  199 +++++++++++++++++++++++++++++++++++----
 libmcclient/mc-account.h        |   31 ++++++
 6 files changed, 399 insertions(+), 18 deletions(-)

commit 9e24ac5bcc527dd9d73112c528c352ef755ffed9
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-11 11:51:03 +0000

    Add code to retrieve the basic Account properties.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@421 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    5 +
 libmcclient/mc-account.c |  216 +++++++++++++++++++++++++++++++++++++++++++++-
 libmcclient/mc-account.h |   10 ++
 3 files changed, 230 insertions(+), 1 deletions(-)

commit 029f3c2f2fab1840411c16c290e2a8f70be7bb52
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-03 08:13:48 +0000

    Tag beta10
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@419 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 5449a52e1a28fb8bf5ca913d8612974da541bfa6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-03 07:46:00 +0000

    Automatic changes
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@418 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 .../tmpl/mcd-connection.sgml                       |    8 --------
 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |   11 -----------
 2 files changed, 0 insertions(+), 19 deletions(-)

commit 6ea46be68ac4f92a0175f53e654f8bce6d899d30
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-03 06:43:34 +0000

    Remove some unused code.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@417 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    5 +
 src/mcd-channel.c |  151 -----------------------------------
 src/mcd-manager.c |  228 -----------------------------------------------------
 src/mcd-manager.h |    4 -
 src/mcd-master.c  |   73 -----------------
 5 files changed, 5 insertions(+), 456 deletions(-)

commit 68ac0ef41406a42bdec8a69f8e6d007b10b94050
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-06-02 07:44:04 +0000

    Properly change Nickname on the connection, when it's changed on the
    account.
    Remove an unused function and optimize some code.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@416 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    7 ++++
 src/mcd-account.c    |    9 +++--
 src/mcd-connection.c |   79 +++++++++++++++----------------------------------
 src/mcd-connection.h |    1 -
 4 files changed, 36 insertions(+), 60 deletions(-)

commit 722a613c02d4ff6668fd77798d8604cacedb4061
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-30 12:01:16 +0000

    Rewrite mapping of TpErrors to McErrors, fixing a crash.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@415 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |   18 ++++++++----------
 2 files changed, 13 insertions(+), 10 deletions(-)

commit 5564c7943228133ac5f2d1bde6f97e888e86472d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-29 13:26:39 +0000

    Use the new tp_XXX_call_when_ready() APIs.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@414 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    3 +++
 src/mcd-channel.c    |   32 +++++++++-----------------------
 src/mcd-connection.c |   25 +++++++++++--------------
 3 files changed, 23 insertions(+), 37 deletions(-)

commit 43c32f0d956be4aa55caca512d7bc6b42a799484
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-29 08:46:36 +0000

    Update example program.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@413 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog             |    3 +++
 examples/mc-example.c |   34 ++++++++++++++++++++++++++++++++--
 2 files changed, 35 insertions(+), 2 deletions(-)

commit c7aaf596726cfabe9f29e3f299fa67a1a857144f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-29 08:44:53 +0000

    Add McProfile APIs to access profiles.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@412 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    5 +
 libmcclient/Makefile.am  |    2 +
 libmcclient/mc-profile.c | 1006 ++++++++++++++++++++++++++++++++++++++++++++++
 libmcclient/mc-profile.h |  115 ++++++
 4 files changed, 1128 insertions(+), 0 deletions(-)

commit 9eae9415d43274029ae937b439efc3b53122f7be
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-28 08:39:25 +0000

    Make libmissioncontrol-server not depend on libmissioncontrol-client
    (dpend on libmcclient, instead).
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@411 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    6 +
 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |   16 ---
 .../tmpl/mcd-presence-frame.sgml                   |    2 +-
 libmcclient/Makefile.am                            |    2 +
 libmcclient/mc-errors.c                            |   30 +++++
 libmcclient/mc-errors.h                            |   49 ++++++++
 src/Makefile.am                                    |    2 +-
 src/mcd-account.c                                  |    2 +
 src/mcd-connection.c                               |   69 ++++++------
 src/mcd-connection.h                               |    1 -
 src/mcd-dispatcher.c                               |    3 +-
 src/mcd-dispatcher.h                               |    2 -
 src/mcd-manager.c                                  |  121 ++------------------
 src/mcd-manager.h                                  |    5 -
 src/mcd-master.c                                   |   86 ++++----------
 src/mcd-master.h                                   |    8 +-
 src/mcd-presence-frame.c                           |   30 +++---
 src/mcd-presence-frame.h                           |   14 +--
 src/mcd-service.c                                  |   27 +++--
 19 files changed, 208 insertions(+), 267 deletions(-)

commit a777ae9589297354ec0a0aa28fb38f7a3550cfd5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-27 13:17:27 +0000

    Fix builddir
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@409 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 examples/Makefile.am |    2 +-
 util/Makefile.am     |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 93ae81fa54883ed110fd35a020a19aa52189e9aa
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-27 12:52:40 +0000

    Tag beta9
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@408 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 13220b6ab74bff7cafe2ac9e0193fb06f41cf292
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-27 12:18:19 +0000

    Add account conversion tool from accounts created with MC < 5.0.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@407 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                 |    4 +
 Makefile.am               |    2 +-
 configure.ac              |    1 +
 util/Makefile.am          |    6 +
 util/mc-account-convert.c |  750 +++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 762 insertions(+), 1 deletions(-)

commit 454683d71c991c8741e1124be1eb2533ab555d15
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-27 12:02:24 +0000

    Remove references to accounts when they are deleted.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@406 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    3 +++
 src/mcd-presence-frame.c |   17 +++++++++++++++++
 2 files changed, 20 insertions(+), 0 deletions(-)

commit 4378ddbce07975d5c7151c775388c47ecdf81d6c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-27 07:25:10 +0000

    Register signal marshallers, and avoid using the name ``unique_name''
    inside the library, as it has a special meaning in DBus terminology.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@405 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                        |    7 +++++++
 libmcclient/dbus-api.h           |    2 ++
 libmcclient/mc-account-manager.c |    4 ++++
 libmcclient/mc-account.c         |    8 +++++---
 libmcclient/mc-account.h         |    2 +-
 5 files changed, 19 insertions(+), 4 deletions(-)

commit 65b44ab5aa8824e6dab0d60294731fd5e714e6ee
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-23 13:12:55 +0000

    Move the Avatar property into a separate interface; add it to
    libmcclient and modify libmissioncontrol to continue to work properly.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@404 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                            |   11 +++++
 libmcclient/account.xml              |    1 +
 libmcclient/mc-account.c             |    2 +
 libmissioncontrol/Makefile.am        |    2 +
 libmissioncontrol/mc-account-proxy.c |    4 ++
 libmissioncontrol/mc-account-proxy.h |    1 +
 libmissioncontrol/mc-account.c       |   24 ++++++++--
 src/Makefile.am                      |    2 +
 src/mcd-account.c                    |   23 +++++++++-
 src/mcd-account.h                    |    1 +
 src/mcd-connection.c                 |    2 +-
 xml/Account.xml                      |   77 ++++++++++++++++++++-------------
 xml/Account_Interface_Avatar.xml     |   65 ++++++++++++++++++++++++++++
 xml/Makefile.am                      |    1 +
 xml/nmc5.xml                         |    1 +
 15 files changed, 178 insertions(+), 39 deletions(-)

commit 7933f7aadb171cdfe505dff6665cf5c83e724697
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-20 08:22:43 +0000

    Add call to FindAccounts.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@403 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 examples/mc-example.c |   41 ++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 40 insertions(+), 1 deletions(-)

commit 3b20db3c40d62b06c35cc575306afbd1d4a1d881
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-20 07:36:18 +0000

    Automatically compute the value of the ``Interfaces'' DBus property.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@402 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                 |    5 +++++
 src/mcd-account-manager.c |    1 +
 src/mcd-account.c         |   26 +-------------------------
 src/mcd-dbusprop.c        |   28 ++++++++++++++++++++++++++++
 src/mcd-dbusprop.h        |    4 ++++
 5 files changed, 39 insertions(+), 25 deletions(-)

commit 73b369ec615d1eef861d07f3ac764c15e6bb4641
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-19 13:54:13 +0000

    prop
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@401 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

commit 659ecec95e8a88fb06a749fe7ddf8c394fe29488
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-19 13:53:07 +0000

    Rewrite generation of code so that interfaces are correctly
    implemented.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@400 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                        |    6 ++++++
 libmcclient/Makefile.am          |   27 +++++++--------------------
 libmcclient/account-manager.xml  |    8 ++++++++
 libmcclient/account.xml          |    9 +++++++++
 libmcclient/mc-account-manager.c |    6 ++++--
 libmcclient/mc-account-manager.h |    2 +-
 libmcclient/mc-account.c         |    9 +++++++--
 libmcclient/mc-account.h         |    2 +-
 8 files changed, 43 insertions(+), 26 deletions(-)

commit 9877fc5f7c66eecd76391a95a32250e4b39510fb
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-19 13:45:06 +0000

    Fix demarshalling of DBus type "ao".
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@399 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog               |    3 +++
 tools/libglibcodegen.py |    3 ++-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit 9bb93110e204db7fa0f7bd997c621fb06c3cee0c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-19 08:33:06 +0000

    Add support for all known interfaces.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@398 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog               |    3 +++
 libmcclient/Makefile.am |    6 ++++++
 2 files changed, 9 insertions(+), 0 deletions(-)

commit 24eef20229f698311eeb1a3403a7847053bf7461
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-19 07:57:12 +0000

    Move the post-initialization code inside the constructor.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@397 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    3 +++
 libmcclient/mc-account.c |   23 ++++++++++++++++++++---
 libmcclient/mc-account.h |    6 ------
 3 files changed, 23 insertions(+), 9 deletions(-)

commit b016b9eb00f26f19f5b5fbbe2c0c1128fa1fd6b7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-19 07:54:06 +0000

    Update to current libmcclient
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@396 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 examples/mc-example.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit ffd6a65dadd31ca0e9f0f1125bb46a9ff5c2b453
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-19 06:14:51 +0000

    Remove the property retrival/monitoring code: the same functionality
    will be implemented in telepathy-glib.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@395 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    6 +
 libmcclient/mc-account.c |  245 ----------------------------------------------
 2 files changed, 6 insertions(+), 245 deletions(-)

commit bd7abcdcb2cbbbdb5b16ee43fd310a14a510fb63
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-16 12:55:04 +0000

    Add a few APIs for retrieving DBus properties.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@394 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    5 +
 libmcclient/mc-account.c |  258 +++++++++++++++++++++++++++++++++++++++++++++-
 libmcclient/mc-account.h |    8 ++-
 3 files changed, 268 insertions(+), 3 deletions(-)

commit ee4a91971b5511dabe042078d7ca723db66808a9
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-14 12:03:34 +0000

    Parse manager and protocol name.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@393 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 examples/mc-example.c    |    3 ++-
 libmcclient/mc-account.c |   40 +++++++++++++++++++++++++++++++++++++---
 libmcclient/mc-account.h |    2 ++
 3 files changed, 41 insertions(+), 4 deletions(-)

commit ee9db21f9c925417a2da979e8432dba13423a3de
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-14 08:58:47 +0000

    Conditionally enable examples
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@392 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 Makefile.am  |    6 +++++-
 configure.ac |   15 +++++++++++++++
 2 files changed, 20 insertions(+), 1 deletions(-)

commit fb354a01b1ff3eb1ba779bb03056ce00b326e681
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-14 08:51:58 +0000

    	* Makefile.am, configure.ac, examples/Makefile.am,
    	examples/mc-example.c:
    	Add a directory for examples.
    
    	* libmcclient/dbus-api.h, libmcclient/mc-account-manager.c,
    	libmcclient/mc-account.[hc]:
    	Fix creation of TpProxies.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@391 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                        |   10 ++++
 Makefile.am                      |    2 +-
 configure.ac                     |    1 +
 examples/Makefile.am             |    6 +++
 examples/mc-example.c            |   88 ++++++++++++++++++++++++++++++++++++++
 libmcclient/dbus-api.h           |    6 +-
 libmcclient/mc-account-manager.c |   10 ++--
 libmcclient/mc-account.c         |   31 ++++++++-----
 libmcclient/mc-account.h         |    9 +++-
 9 files changed, 141 insertions(+), 22 deletions(-)

commit 87c2bf45fa3089505c8d46f332738d08b02f395a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-13 12:26:27 +0000

    Add missing file
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@390 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account-priv.h |   46 ++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 46 insertions(+), 0 deletions(-)

commit 1f083ebd3f39226131a40f2be97f6768b6930d75
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-13 12:19:46 +0000

    Tag beta8
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@389 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |   12 ++
 configure.ac                                       |    2 +-
 .../tmpl/mcd-dispatcher.sgml                       |    5 -
 src/Makefile.am                                    |    4 +
 src/mcd-account-config.h                           |  106 +++++++++++++++++
 src/mcd-account-connection.c                       |  123 ++++++++++++++++++++
 src/mcd-account-connection.h                       |   40 +++++++
 src/mcd-account-manager-query.c                    |    1 -
 src/mcd-account-manager.c                          |    2 +-
 src/mcd-account-priv.h                             |   53 ---------
 src/mcd-account.c                                  |   62 ++++++-----
 src/mcd-connection-plugin.h                        |   49 ++++++++
 src/mcd-connection.c                               |   14 ++-
 src/mcd-connection.h                               |    2 +-
 src/mcd-manager.c                                  |    1 -
 src/mcd-master.c                                   |   51 ++++++++
 src/mcd-master.h                                   |    5 +
 src/mcd-plugin.h                                   |    6 +-
 18 files changed, 440 insertions(+), 98 deletions(-)

commit 20f255a3571e381e05749a7b3f5da4d056104336
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-09 10:43:44 +0000

    Handle disconnection.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@388 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-master.c |   65 +++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 64 insertions(+), 1 deletions(-)

commit 84e4bc3900cb7b513d296c9169b3c9a0272779f0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-09 10:41:43 +0000

    Missing declaration.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@387 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-transport.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 861f84779c3770d72b5b19ea5944316e532ca92b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-09 10:40:46 +0000

    Read ConnectAutomatically property.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@386 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit c758de6257c63ec5f5ea00c58b5eb28701ce383d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-08 09:27:19 +0000

    When a transport gets connected, check account conditions and connect
    the account if they are satisfied.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@385 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                    |    6 +++
 src/mcd-account-conditions.c |   38 ++++++++++------
 src/mcd-account-conditions.h |    2 +
 src/mcd-master.c             |   98 ++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 129 insertions(+), 15 deletions(-)

commit 26aeec842e583008aa07b61e5681997addc39c59
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-08 09:26:42 +0000

    Implement get_transport_status()
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@384 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-transport.c |   18 ++++++++++++++++++
 src/mcd-transport.h |    4 ++++
 2 files changed, 22 insertions(+), 0 deletions(-)

commit 93403343be58ddac792b2c0be0a7e4178bfb3e98
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-08 09:25:35 +0000

    Give access to some account properties.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@383 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account.c |   36 ++++++++++++++++++++++++++++++++++++
 src/mcd-account.h |    8 ++++++++
 2 files changed, 44 insertions(+), 0 deletions(-)

commit dd1e4ed57188543b35e15c0967be73df99386c69
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-05-08 09:23:16 +0000

    Implement get_transport_name()
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@382 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-transport.c |   18 ++++++++++++++++++
 src/mcd-transport.h |    2 ++
 2 files changed, 20 insertions(+), 0 deletions(-)

commit 1833476f4b3090cbe327205358deb2223cf01086
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-29 13:28:25 +0000

    id
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@381 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

commit 279615461e3e74607c4c15ce3e487aecbef14b57
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-29 13:27:28 +0000

    Implement McdTransportPlugin interface.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@380 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                    |    4 +
 src/Makefile.am              |    4 +-
 src/mcd-master.c             |   33 +++++++++
 src/mcd-plugin.h             |    4 +
 src/mcd-signals-marshal.list |    1 +
 src/mcd-transport.c          |  159 ++++++++++++++++++++++++++++++++++++++++++
 src/mcd-transport.h          |   77 ++++++++++++++++++++
 7 files changed, 281 insertions(+), 1 deletions(-)

commit 11b17dad6ffbafee9c7a120cb5a849f0e2aa5c4e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-29 07:44:34 +0000

    Move plugin loading mechanism into McdMaster and make it generic for
    more types of plugins.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@379 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                    |    7 +++
 src/Makefile.am              |    1 +
 src/mcd-dispatcher-context.h |    2 -
 src/mcd-dispatcher.c         |  124 ++----------------------------------------
 src/mcd-master.c             |   93 +++++++++++++++++++++++++++++++-
 src/mcd-plugin.h             |   38 +++++++++++++
 6 files changed, 143 insertions(+), 122 deletions(-)

commit 13bcf0a16305d0ab22387c590f760a863900f86a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-16 10:24:23 +0000

    Use tp_strdiff() to avoid crashes when one of the strings is NULL.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@378 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                       |    5 +++++
 src/mcd-account-manager-query.c |    4 ++--
 2 files changed, 7 insertions(+), 2 deletions(-)

commit fb242a45495ae6c956fbd44e63ed492fbaac21bc
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-16 08:24:38 +0000

    tag beta7
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@376 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 5468d05d8411fcb98464adb3787bd5174062dab4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-16 08:19:22 +0000

    Implement two hacks to make the presence signal behave as they did in
    MC4.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@375 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    4 ++++
 src/mcd-service.c |   13 ++++++++++++-
 2 files changed, 16 insertions(+), 1 deletions(-)

commit d175d2883011186a8f0847617d19e4f6a7200857
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-16 08:17:32 +0000

    Use the actual-status signal instead of the removed presence-stable.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@374 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    5 +++++
 src/mcd-manager.c |   12 ++++++------
 2 files changed, 11 insertions(+), 6 deletions(-)

commit 55d9e229d7e79fee95005bdba085de29ee928f40
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-15 12:19:20 +0000

    Tag beta6
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@373 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 87e35dc85928298c1236dfc5ca74d8d5aef66dc0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-15 12:17:12 +0000

    Fix a bug with display name clearing in the previous release.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@372 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    5 +++++
 libmissioncontrol/mc-account.c |   10 ++++------
 2 files changed, 9 insertions(+), 6 deletions(-)

commit 9cc803c21308a23231e1c77c626693ab3599a0a3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-15 11:36:01 +0000

    Tag beta5
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@371 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit f86b8840f040c5c7233b62b6c75865289aa86f97
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-15 11:34:22 +0000

    automatic update
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@370 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 .../tmpl/mcd-presence-frame.sgml                   |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b98454fdab3a24a6c81b986ec9c0203b034dde9d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-15 11:21:21 +0000

    If the display name is set to an empty string, consider it NULL.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@369 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    3 +++
 libmissioncontrol/mc-account.c |   10 ++++++++--
 2 files changed, 11 insertions(+), 2 deletions(-)

commit 8efd801aeb8a840bf798952cb2fc3dd4d9f19e05
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-15 11:13:05 +0000

    Properly report presence and status signals.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@368 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    5 ++++
 src/mcd-presence-frame.c |   52 ++++++++++++++++++++++++++++++++++++++-------
 src/mcd-service.c        |   32 ++++++++++++++++-----------
 3 files changed, 68 insertions(+), 21 deletions(-)

commit 75834eb2de829e1f9949576930b986dec52616b6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-14 12:09:28 +0000

    Prevent disabled accounts from going online.
    When an account gets disabled, put it offline.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@367 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    6 ++++++
 src/mcd-account.c |    8 ++++++++
 2 files changed, 14 insertions(+), 0 deletions(-)

commit 89dac39f1c9a010208cc903e700d928a7175c8c2
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-11 13:39:23 +0000

    Tag beta4
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@365 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 5bdc1f720861cc4397f7e7dbbf63b60c625a5910
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-11 13:25:08 +0000

    Have the McAccountMonitor emit the Enabled and Disabled signals as
    appropriate.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@364 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    4 ++++
 libmissioncontrol/mc-account.c |   13 ++++++++++++-
 2 files changed, 16 insertions(+), 1 deletions(-)

commit d41750e1c0641291a61ff4e82d690d6d7dfa96f4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-11 13:02:18 +0000

    Forgive the caller.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@363 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-account.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit afe1e1421cfa5070501ca8781badefdb1df7a499
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-11 12:57:39 +0000

    Rewrite the interface registration mechanism. Implement the
    ''Interfaces'' property for the Account class.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@362 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                       |    6 +++
 src/mcd-account-compat.c        |   12 ++-----
 src/mcd-account-compat.h        |    5 ++-
 src/mcd-account-conditions.c    |   12 ++-----
 src/mcd-account-conditions.h    |    7 ++--
 src/mcd-account-manager-query.c |    6 ++--
 src/mcd-account-manager-query.h |    7 ++--
 src/mcd-account-manager.c       |   28 ++++++++------
 src/mcd-account.c               |   58 +++++++++++++++++++++--------
 src/mcd-dbusprop.c              |   77 ++++++++++++++++++++++++++++++++-------
 src/mcd-dbusprop.h              |   39 ++++++++++++++++++--
 11 files changed, 182 insertions(+), 75 deletions(-)

commit f0b31381d7129dc2eaf601ef17241a309dc06b1a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-11 08:28:46 +0000

    Implement the Account Conditions interface (set/get properties only,
    no real functionality yet).
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@361 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                            |    7 ++
 src/Makefile.am                      |    4 +
 src/mcd-account-conditions.c         |  127 ++++++++++++++++++++++++++++++++++
 src/mcd-account-conditions.h         |   39 ++++++++++
 src/mcd-account.c                    |    6 ++
 xml/Account_Interface_Conditions.xml |   98 ++++++++++++++++++++++++++
 xml/Makefile.am                      |    3 +-
 xml/nmc5.xml                         |    1 +
 8 files changed, 284 insertions(+), 1 deletions(-)

commit 1aa68a55e79efeb6326b2766c3d809727d08d648
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-11 07:08:19 +0000

    Change modifier to static const
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@360 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account-compat.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8a87111ccead017c3a5eb2517df0f925c7b828e0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 14:38:36 +0000

    Tag beta3
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@358 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit ee9f338df590c91381b5788b78d9c87e4b8914d7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 14:35:17 +0000

    Don't require any parameters on account creation.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@357 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                          |    5 +++--
 libmissioncontrol/mc-account-cli.c |    4 ++--
 2 files changed, 5 insertions(+), 4 deletions(-)

commit 30767cf63dd92865febf3994050d5ee37d2d498e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 14:31:42 +0000

    Implement the account query API.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@356 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                               |    6 +
 src/mcd-account-manager-query.c         |  290 +++++++++++++++++++++++++++++++
 xml/Account_Manager_Interface_Query.xml |    2 +-
 3 files changed, 297 insertions(+), 1 deletions(-)

commit 10dd8c9c5ff92445ecdca9074990873304a323ee
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 14:30:02 +0000

    Cosmetic changes.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@355 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account-manager.c |    1 -
 src/mcd-account-manager.h |    5 +++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit babfe941d74ebd9249e50786ff362040a263775a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 14:29:14 +0000

    Add get_manager_name API
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@354 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account.c |   10 ++++++++++
 src/mcd-account.h |    1 +
 2 files changed, 11 insertions(+), 0 deletions(-)

commit 8d6bea1a80c84323198eac7b410f1700242cf55b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 14:21:50 +0000

    Make the "ao" DBus type map to a C GPtrArray.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@353 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog               |    3 +++
 tools/libglibcodegen.py |    2 +-
 2 files changed, 4 insertions(+), 1 deletions(-)

commit 054d7495f71cb94a3760f1459fd03bf5a0148f60
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 14:20:40 +0000

    Implement a DBus independent function for getting interface
    properties.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@352 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog          |    6 ++++++
 src/mcd-dbusprop.c |   45 +++++++++++++++++++++++++++++----------------
 src/mcd-dbusprop.h |    6 ++++++
 3 files changed, 41 insertions(+), 16 deletions(-)

commit 999717b2b7c02b998f06417882c8698cbb451c9e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 08:06:47 +0000

    Ship interface definition
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@350 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 xml/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 4fc563b90f3dcb00db449029034d66e89ade78b3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 07:49:39 +0000

    Tag beta2
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@349 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit d92c67101f5f9b4500f67b929ca4ee89b993f0f6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 07:21:37 +0000

    Fix the mc-account tool so that accounts can be created.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@346 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                          |    3 +++
 libmissioncontrol/mc-account-cli.c |    8 ++++++--
 2 files changed, 9 insertions(+), 2 deletions(-)

commit 69abba5f35a1adff39e6c4703d323817697e265e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 07:05:35 +0000

    Mark the end of output arguments of the DBus call.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@345 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog              |    5 +++++
 libmissioncontrol/mc.c |    3 ++-
 2 files changed, 7 insertions(+), 1 deletions(-)

commit c0b4709eec48e58ef611f09bf3076e7018c5df15
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 06:53:49 +0000

    prop
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@344 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

commit 1da1ef6d377e5e767f3433857a0cefd3c152ac5b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-10 06:52:56 +0000

    Add partial implementation of Query interface
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@343 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/Makefile.am                         |    8 ++-
 src/mcd-account-manager-query.c         |   72 ++++++++++++++++++++++++++++
 src/mcd-account-manager-query.h         |   39 +++++++++++++++
 src/mcd-account-manager.c               |    6 ++
 xml/Account_Manager_Interface_Query.xml |   79 +++++++++++++++++++++++++++++++
 xml/nmc5.xml                            |    1 +
 6 files changed, 203 insertions(+), 2 deletions(-)

commit 8a889f429d3609809c0fdca9ec187d5650f12ad5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-09 11:08:48 +0000

    Fix compilation of server
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@340 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 server/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit d9dc061793cbdd37cafd3b9bb92e10bde358bcd7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-09 10:29:09 +0000

    Tag 5.0.beta1
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@338 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 128d5b8e08fa837c6889d7e49908732f0185dc6e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-09 10:02:21 +0000

    Properly create a GArray.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@337 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 67ed100bf821047d9d692240ce7ec7d8b8292ba8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-09 07:29:05 +0000

    Function succeeds
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@336 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-master.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bdc1e297ddeaa526df39c8c045c17d479f00281f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 14:47:57 +0000

    Update version
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@334 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 54dc6f258b2773decd3a617c0dab9d15f73e544e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 14:46:57 +0000

    Create the account configuration file, if it does not exist.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@333 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                 |    3 +++
 src/mcd-account-manager.c |   11 +++++++++++
 2 files changed, 14 insertions(+), 0 deletions(-)

commit e0e91fcee2a6392af7507e4df5308a148323a13b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 14:45:19 +0000

    Remove unused function
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@332 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-service.c |    7 -------
 1 files changed, 0 insertions(+), 7 deletions(-)

commit ad036e7cbceb73261eaa37be49dad121ba93e553
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 13:30:26 +0000

    Remove connection to non-existing signal.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@331 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-service.c |   24 ------------------------
 1 files changed, 0 insertions(+), 24 deletions(-)

commit 0060eaef653fe0c1872ccd70a0cc5c664ea37ec8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 12:38:03 +0000

    Return if getting accounts fails.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@329 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-account-monitor.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit d2f7113d4fb354917257292062fc4c86d22343c1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 12:07:09 +0000

    Implement get_connection_names().
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@328 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog        |    7 ++++-
 src/mcd-master.c |   81 +++++++++++++++--------------------------------------
 2 files changed, 29 insertions(+), 59 deletions(-)

commit dc8ef1eeb3f551192828e23e8eaccbb20163611d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 10:56:35 +0000

    Update telepathy-glib version
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@325 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4e2458b92c6a54aa451d0ee6759e15951b3f7b18
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 10:44:25 +0000

    Remove excessive debug
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@324 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-account-monitor.c |    4 ----
 libmissioncontrol/mc-account.c         |    4 ----
 2 files changed, 0 insertions(+), 8 deletions(-)

commit 15114dae6e6ae721db7f6094bab32a9e92251579
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 10:41:40 +0000

    .
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@323 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

commit 14533942c63e05d809ee14e6f25e047a15695d14
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-04-08 10:39:40 +0000

    Implement libmissioncontrol's McAccount and McAccountMonitor using the new DBus API (called in blocking mode).
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@322 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/Makefile.am                |   12 +-
 libmissioncontrol/mc-account-manager-proxy.c |   60 +
 libmissioncontrol/mc-account-manager-proxy.h |   56 +
 libmissioncontrol/mc-account-monitor-priv.h  |    5 +
 libmissioncontrol/mc-account-monitor.c       |  305 +++---
 libmissioncontrol/mc-account-priv.h          |   26 +-
 libmissioncontrol/mc-account-proxy.c         |   57 +
 libmissioncontrol/mc-account-proxy.h         |   56 +
 libmissioncontrol/mc-account.c               | 1588 ++++++++++----------------
 libmissioncontrol/mc.c                       |  112 ++
 libmissioncontrol/mc.h                       |   26 +
 src/Makefile.am                              |    4 +
 src/mcd-account-compat.c                     |  153 +++
 src/mcd-account-compat.h                     |   39 +
 src/mcd-account-manager.c                    |   41 +-
 src/mcd-account-manager.h                    |    2 +
 src/mcd-account.c                            |   83 ++-
 src/mcd-account.h                            |    6 +
 src/mcd-master.c                             |   11 +-
 src/mcd-presence-frame.c                     |   13 +-
 src/mcd-presence-frame.h                     |    1 +
 src/mcd-service.c                            |   21 +-
 tools/Makefile.am                            |    1 +
 tools/glib-blocking-client-gen.py            | 1014 ++++++++++++++++
 xml/Account.xml                              |    2 +-
 xml/Account_Interface_Compat.xml             |   46 +
 xml/Makefile.am                              |    4 +-
 xml/nmc5.xml                                 |    1 +
 28 files changed, 2562 insertions(+), 1183 deletions(-)

commit b1c0b7df486c9f92a0f37dfad8d6d40582b2234e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-31 14:20:41 +0000

    Forgot service file
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@321 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ...freedesktop.Telepathy.AccountManager.service.in |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 5d7c50f93d5c194a76bcda859ddd753623b54df8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-31 13:48:47 +0000

    Fix presence compatibility with old MC
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@320 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 .../tmpl/mcd-connection.sgml                       |    6 -
 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |   68 +-------
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |   11 +-
 .../tmpl/mcd-presence-frame.sgml                   |   78 --------
 server/Makefile.am                                 |    9 +-
 src/mcd-account-priv.h                             |    4 +-
 src/mcd-account.c                                  |   60 ++++++
 src/mcd-connection.c                               |    3 +
 src/mcd-master.c                                   |    8 -
 src/mcd-master.h                                   |    2 -
 src/mcd-presence-frame.c                           |  192 ++------------------
 src/mcd-presence-frame.h                           |   25 ---
 src/mcd-service.c                                  |   18 +-
 xml/Account.xml                                    |   68 +++++++
 14 files changed, 170 insertions(+), 382 deletions(-)

commit e8e756cb7118d6d89b3c84647561a313a93b31f4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-28 15:01:44 +0000

    Properly emit AccountStatusChanged
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@319 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account.c        |    7 +++++++
 src/mcd-account.h        |    1 +
 src/mcd-master.c         |   14 +++++++++-----
 src/mcd-presence-frame.c |   40 ++++++----------------------------------
 src/mcd-presence-frame.h |    4 ++--
 src/mcd-service.c        |   13 +++++++++----
 6 files changed, 34 insertions(+), 45 deletions(-)

commit e78750d65598894905e60a9d5fdf4098d9708e29
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-28 14:42:41 +0000

    removed unused code
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@318 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-presence-frame.c |   49 ----------------------------------------------
 1 files changed, 0 insertions(+), 49 deletions(-)

commit f395223ccd0c2a35b73ac3639a743de0cad12793
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-28 14:41:50 +0000

    Object is McdAccount
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@317 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-presence-frame.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7df27afac6125ee4241c5b6c1df47d0a032e2ec2
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-28 14:41:12 +0000

    Better debug
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@316 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit d9b6ef4d09a2243dd4abe612ee2a5a87557bd9f6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-28 14:40:48 +0000

    Prop
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@315 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

commit 3199be2423e3b76e1c0a973b4db04f2e518945c6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-28 14:03:05 +0000

    Start implementing new McdAccount and McdAccountManager object as per the
    specifications.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@314 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/Makefile.am              |    2 +
 src/mcd-account-manager.c    |  463 +++++++++++-
 src/mcd-account-manager.h    |   10 +
 src/mcd-account-priv.h       |   10 +-
 src/mcd-account.c            | 1865 +++++++++++++++++++++++++++++++++++++++++-
 src/mcd-account.h            |   64 ++-
 src/mcd-connection.c         |  544 ++++---------
 src/mcd-connection.h         |    9 +-
 src/mcd-dbusprop.c           |  183 +++++
 src/mcd-dbusprop.h           |   64 ++
 src/mcd-dispatcher.c         |    7 +-
 src/mcd-manager.c            |  580 ++++++++------
 src/mcd-manager.h            |   56 +-
 src/mcd-master.c             |  458 ++---------
 src/mcd-master.h             |    8 +-
 src/mcd-presence-frame.c     |  330 ++++-----
 src/mcd-presence-frame.h     |   20 +-
 src/mcd-signals-marshal.list |    2 +
 18 files changed, 3404 insertions(+), 1271 deletions(-)

commit ade92f2417281a1e9ddbb9623c5b401658c48e03
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-18 07:43:39 +0000

    Don't try to close the channel, if the proxy is already invalidated.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@312 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    5 +++++
 src/mcd-channel.c |    5 ++---
 2 files changed, 7 insertions(+), 3 deletions(-)

commit c7baed327f27bbc9866ece126b73ff457e1e36f5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-17 07:57:55 +0000

    Add missing file.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@311 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-account.h |   55 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 55 insertions(+), 0 deletions(-)

commit cf99ee1e30905bcc28783b423e95f32a999c36c3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-12 12:53:36 +0000

    Tag 4.64
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@309 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit cf51504d1b182c5a35f8a7899a9a005a59b8c5b0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-12 12:46:13 +0000

    Fix a crash when dispatching a channel to external filters.
    Fixes: #1912653, bugs.freedesktop.org#14968.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@308 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    6 ++++++
 src/mcd-service.c |    4 ++--
 2 files changed, 8 insertions(+), 2 deletions(-)

commit 391ad943d2f10858d107966e5ca6a9725549ac1b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-10 11:37:01 +0000

    Tag 4.63
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@306 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 88f3d5965b107df2b80280f2d3e24b7350043c3f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-10 11:28:46 +0000

    Fix version info
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@305 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 968f9b5da893ccf210fce39ec24b3caec658515d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-10 09:51:26 +0000

    Patch from Sjoerd <sjoerd.simons@collabora.co.uk>:
    * src/mcd-channel.c:
    Make the "on_close" function static, as it should always have been.
    Fixes: #1910142.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@304 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    5 +++++
 src/mcd-channel.c |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 596f2d9316ece3e8c60fc7404ebfe7a0f477913e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-10 09:33:39 +0000

    	* libmissioncontrol/Makefile.am:
    	Revert unnecessary version bump.
    
    	* src/mcd-account-manager.[hc]:
    	Register object with DBus.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@303 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    8 +++++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 src/mcd-account-manager.c     |   71 +++++++++++++++++++++++++++++++++++++++-
 src/mcd-account-manager.h     |   63 ++++++++++++++++++++++++++++++++++++
 5 files changed, 142 insertions(+), 4 deletions(-)

commit 44512f518acc272e72ed4350922a44a429fb60c8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-07 15:06:39 +0000

    Stub implementation of McdAccount and McdAccountManager.
    Reorganize the xml tree.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@302 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/Makefile.am           |    7 ++-
 src/mcd-account-manager.c |  100 ++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-account-priv.h    |   49 ++++++++++++++++++++++
 src/mcd-account.c         |  101 +++++++++++++++++++++++++++++++++++++++++++++
 xml/Makefile.am           |    1 +
 xml/all.xml               |    3 +-
 xml/nmc5.xml              |   10 ++++
 7 files changed, 267 insertions(+), 4 deletions(-)

commit aaa0f8f16e771b9c8977664b920ba093b24c25c5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-07 14:47:52 +0000

    	* src/Makefile.am, src/mcd-account-manager.h, src/mcd-account.h:
    	Implement server-side stubs.
    
    	* Makefile.am, configure.ac, libmcclient.pc.in, libmcclient/*,
    	libmissioncontrol/dbus-api.h, xml/Account.xml,
    	xml/Account_Manager.xml, xml/Makefile.am, xml/all.xml:
    	Add Account and AccountManager specifications, and implement stubs in
    	libmcclient.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@301 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |   11 +
 Makefile.am                                        |    4 +-
 configure.ac                                       |    2 +
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    2 +-
 .../tmpl/mcd-connection.sgml                       |    1 -
 .../tmpl/mcd-controller.sgml                       |    1 -
 .../tmpl/mcd-dispatcher.sgml                       |    1 -
 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |    1 -
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |   21 +-
 .../libmissioncontrol-server/tmpl/mcd-mission.sgml |   60 +++-
 .../tmpl/mcd-operation.sgml                        |   17 +-
 .../tmpl/mcd-presence-frame.sgml                   |   55 +++-
 .../libmissioncontrol-server/tmpl/mcd-proxy.sgml   |    6 +-
 .../libmissioncontrol-server/tmpl/mcd-service.sgml |   87 ++++-
 .../libmissioncontrol/tmpl/mission-control.sgml    |    1 +
 libmcclient.pc.in                                  |   12 +
 libmcclient/Makefile.am                            |  146 +++++++
 libmcclient/dbus-api.c                             |   26 ++
 libmcclient/dbus-api.h                             |   38 ++
 libmcclient/mc-account-manager.c                   |  110 +++++
 libmcclient/mc-account-manager.h                   |   59 +++
 libmcclient/mc-account.c                           |  109 +++++
 libmcclient/mc-account.h                           |   58 +++
 libmcclient/mc-signals-marshal.list                |    1 +
 libmissioncontrol/dbus-api.h                       |    3 +
 src/Makefile.am                                    |  106 +++++-
 xml/Account.xml                                    |  423 ++++++++++++++++++++
 xml/Account_Manager.xml                            |  165 ++++++++
 xml/Makefile.am                                    |    4 +-
 xml/all.xml                                        |   13 +-
 30 files changed, 1526 insertions(+), 17 deletions(-)

commit f02ee511f5ffacd0f6044bf872c1de792afd586e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-07 14:03:22 +0000

    Automatic updates
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@300 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |   11 ++--
 .../tmpl/mcd-connection.sgml                       |   37 ++++++++++++++-
 .../tmpl/mcd-dispatcher.sgml                       |   50 +++++++++++++++++++-
 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |   43 ++++++++++++++++-
 4 files changed, 132 insertions(+), 9 deletions(-)

commit 3570ae892cf8efa34d7c6e4ad5df7eae926ccf6f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-06 12:46:09 +0000

    Tag 4.62
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@298 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 07d3a1b7e793f3739a91177c2f6ad200715bbda6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-06 12:41:38 +0000

    Rewrite the loop break condition to avoid a warning.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@297 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    5 +++++
 src/mcd-channel.c |    6 +++++-
 2 files changed, 10 insertions(+), 1 deletions(-)

commit 6425df9cf5cef169ed11014ac7d6328c9298869c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-03-06 09:03:54 +0000

    Complete migration to tp-glib.
    Revert fix on register param.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@295 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |   17 ++-
 configure.ac                        |    4 +-
 libmissioncontrol/mission-control.c |  145 ++++++++++++++++++-
 libmissioncontrol/mission-control.h |   16 ++-
 src/mcd-channel.c                   |  266 +++++++++++++++++++++++++----------
 src/mcd-channel.h                   |    3 +-
 src/mcd-connection.c                |   47 +++----
 src/mcd-connection.h                |    2 +-
 src/mcd-dispatcher.c                |   52 +++----
 src/mcd-dispatcher.h                |    2 +-
 src/mcd-manager.c                   |   53 +++-----
 src/mcd-manager.h                   |    2 +-
 src/mcd-master.c                    |   37 +++--
 tools/glib-client-gen.py            |    1 +
 14 files changed, 447 insertions(+), 200 deletions(-)

commit 3d4a626756fad093ec305fe8f201dfcda576cb1a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-28 14:20:56 +0000

    Patch from Xavier Claessens <zdra@users.sourceforge.net>:
    * libmissioncontrol/mission-control.h:
    Fix typo (outcoming -> outgoing). Fixes: #1903876.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@294 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    4 ++++
 libmissioncontrol/mission-control.h |    3 ++-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 6c732f087b023c0791cf731ae95631f5593ce227
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-28 14:02:21 +0000

    Patch from Xavier Claessens <zdra@users.sourceforge.net>:
    Unset the `register' parameter once successfully connected.
    Fixes: #1763775.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@293 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |    4 ++++
 2 files changed, 9 insertions(+), 0 deletions(-)

commit 1dfd658f3507060fa8d2c3178fd132540b265651
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-28 13:29:17 +0000

    Remove every dependency on libtelepathy
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@292 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 configure.ac                                       |    2 +-
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |   79 ++++++++++++++++++++
 libmissioncontrol/Makefile.am                      |    2 +-
 libmissioncontrol/mission-control.c                |   79 ++++++--------------
 libmissioncontrol/mission-control.h                |   14 ++--
 src/Makefile.am                                    |    2 +-
 src/mcd-chan-handler.c                             |    4 +-
 src/mcd-chan-handler.h                             |    4 +-
 src/mcd-channel.c                                  |   14 +--
 src/mcd-channel.h                                  |    9 +-
 src/mcd-connection.c                               |   26 +++---
 src/mcd-connection.h                               |    3 +-
 src/mcd-dispatcher-context.h                       |    4 +-
 src/mcd-dispatcher.c                               |   32 +++++++--
 src/mcd-dispatcher.h                               |    2 -
 src/mcd-manager.c                                  |    5 +-
 src/mcd-master.c                                   |   10 +-
 src/mcd-master.h                                   |    4 +-
 src/mcd-presence-frame.c                           |   72 +++++++++---------
 src/mcd-presence-frame.h                           |   15 ++--
 src/mcd-service.c                                  |   17 ++---
 21 files changed, 227 insertions(+), 172 deletions(-)

commit 7856e0621b3e1a80a7f49a89d4aeb3b6348ae914
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-28 11:38:47 +0000

    Migrate from libtelepathy to telepathy-glib.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@291 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 +
 libmissioncontrol/mc-manager.c |   25 +++
 libmissioncontrol/mc-manager.h |    1 +
 src/mcd-channel.c              |  332 ++++++++++++++++++++++++++--------------
 src/mcd-channel.h              |    4 +-
 src/mcd-connection.c           |  139 +++++++++--------
 src/mcd-connection.h           |    4 +-
 src/mcd-manager.c              |   36 +++--
 8 files changed, 350 insertions(+), 197 deletions(-)

commit ff3c79a991c570c030e23b611c7b1d5884f96b8e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-27 06:59:53 +0000

    Remove Zeeshan, as per his request.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@290 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 AUTHORS |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 6e4d0d0584c3fca82c57002c5811f8799519e08b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-26 12:07:59 +0000

    Port the telepathy connections from libtp to tp-glib
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@289 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-connection.c | 1104 ++++++++++++++++++++++++++------------------------
 src/mcd-connection.h |    2 +
 src/mcd-dispatcher.c |   16 +-
 src/mcd-manager.c    |    4 +-
 4 files changed, 591 insertions(+), 535 deletions(-)

commit 7f265f825a1096baba1ad41b3faa5f5cd4021821
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-21 12:58:24 +0000

    Remove non-GObjects
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@288 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 .../libmissioncontrol-server.types                 |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit 7880b97d1c330c6651d6e820fd442251d5bd4ced
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-02-18 14:32:22 +0000

    * libmissioncontrol.pc.in: require newer libtelepathy, telepathy-glib
    
    * libmissioncontrol/dbus-api.[ch], libmissioncontrol/mission-control.h:
    move MissionControl D-Bus interface constants into a new shared header,
    and auto-generate GTypes and enums from XML (in theory - currently
    there are none)
    
    * libmissioncontrol/cli-nmc4.[ch]: add McCliNMC4, a TpProxy subclass
    representing the MC 4.x D-Bus API
    
    * libmissioncontrol/svc-nmc4.[ch]: add McSvcNMC4, a GInterface
    representing the MC 4.x D-Bus API
    
    * libmissioncontrol/Makefile.am: auto-generate stuff for McCliNMC4,
    McSvcNMC4 and dbus-api.h
    
    * xml/, doc/Makefile.am: move mcd-dbus-services.xml to nmc4.xml,
    add all.xml (this is to fit in better with telepathy-glib code-gen)
    
    * configure.ac: check for mkdir -p
    
    * doc/reference/libmissioncontrol/Makefile.am: fix out-of-tree build
    against generated headers
    
    * doc/reference/libmissioncontrol-server/libmissioncontrol-server.types:
    reconstruct missing file which broke distcheck
    
    * Makefile.am: use --enable-gtk-doc when running distcheck
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@287 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |   31 +++++
 Makefile.am                                        |    1 +
 configure.ac                                       |    1 +
 doc/Makefile.am                                    |    4 +-
 doc/reference/libmissioncontrol-server/Makefile.am |   15 ++-
 .../libmissioncontrol-server.types                 |   32 ++++++
 doc/reference/libmissioncontrol/Makefile.am        |   13 ++-
 libmissioncontrol.pc.in                            |    2 +-
 libmissioncontrol/Makefile.am                      |  118 +++++++++++++++++++-
 libmissioncontrol/cli-nmc4.c                       |  111 ++++++++++++++++++
 libmissioncontrol/cli-nmc4.h                       |   58 ++++++++++
 libmissioncontrol/dbus-api.c                       |   26 +++++
 libmissioncontrol/dbus-api.h                       |   35 ++++++
 libmissioncontrol/mission-control.h                |   15 +--
 libmissioncontrol/svc-nmc4.h                       |   28 +++++
 tools/Makefile.am                                  |    3 +-
 xml/Makefile.am                                    |   19 ++--
 xml/MissionControl.xml                             |    2 +-
 xml/all.xml                                        |    9 ++
 xml/mcd-dbus-services.xml                          |    9 --
 xml/nmc4.xml                                       |    9 ++
 21 files changed, 502 insertions(+), 39 deletions(-)

commit a7a591133887897bf6eb4e8afa18e3e421008c64
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-02-15 15:17:59 +0000

    Remove extensions from top Makefile.am again
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@286 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 200e3c08ca51450d37bbd8c1e7e93f6fc803adc5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-02-15 13:21:54 +0000

    Remove extensions/ (unintentionally checked in)
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@285 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 extensions/Account.xml             |    1 -
 extensions/Account_Manager.xml     |    1 -
 extensions/Makefile.am             |  141 ------------------------------------
 extensions/all-account-manager.xml |    9 ---
 extensions/all-account.xml         |    9 ---
 extensions/all-nmc4.xml            |    9 ---
 extensions/all.xml                 |   11 ---
 extensions/extensions-cli.c        |   27 -------
 extensions/extensions.c            |    6 --
 extensions/extensions.h            |   24 ------
 10 files changed, 0 insertions(+), 238 deletions(-)

commit 14d16cfccd1540a46890daed97bb1eaa0aefb434
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-02-15 13:13:56 +0000

    * tools/: update from telepathy-glib/telepathy-spec and pull in
    a fairly complete set of code-gen tools (which will actually be used
    in a follow-up patch)
    
    * configure.ac: Check for Python (the code-gen tools use it).
    Require telepathy-glib 0.7.1 and libtelepathy 0.3.2
    
    * xml/MissionControl.xml: Use tp: namespace prefix in preparation for
    extending use of telepathy-glib code generation tools
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@284 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                |   17 +-
 Makefile.am                              |    2 +-
 configure.ac                             |    8 +-
 extensions/Account.xml                   |    1 +
 extensions/Account_Manager.xml           |    1 +
 extensions/Makefile.am                   |  141 ++++
 extensions/all-account-manager.xml       |    9 +
 extensions/all-account.xml               |    9 +
 extensions/all-nmc4.xml                  |    9 +
 extensions/all.xml                       |   11 +
 extensions/extensions-cli.c              |   27 +
 extensions/extensions.c                  |    6 +
 extensions/extensions.h                  |   24 +
 tools/Makefile.am                        |   35 +-
 tools/c-constants-generator.xsl          |  299 ++++++++
 tools/c-interfaces-generator.xsl         |   84 +++
 tools/doc-generator.xsl                  |  475 +++++++++++--
 tools/glib-client-gen.py                 | 1113 ++++++++++++++++++++++++++++++
 tools/glib-client-marshaller-gen.py      |   59 ++
 tools/glib-ginterface-gen.py             |  654 ++++++++++++++++++
 tools/glib-gtypes-generator.py           |  227 ++++++
 tools/glib-interfaces-body-generator.xsl |   47 ++
 tools/glib-interfaces-generator.xsl      |   55 ++
 tools/glib-signals-marshal-gen.py        |   55 ++
 tools/identity.xsl                       |    7 +
 tools/libglibcodegen.py                  |  315 +++++++++
 26 files changed, 3615 insertions(+), 75 deletions(-)

commit 3a56a953d4012a1a19288844821d802f021e1d4b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-11 12:45:25 +0000

    Tag 4.60
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@281 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog       |    2 ++
 configure.ac    |    2 +-
 src/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 3433d02a1265b16905ef23e585f5b03f1e67de40
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-11 12:42:09 +0000

    Fix the comparison of pending channels (the condition on the channel
    type was inverted).
    Fixes: http://bugzilla.gnome.org/show_bug.cgi?id=511063
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@280 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    7 +++++++
 src/mcd-connection.c |   10 +++++++---
 2 files changed, 14 insertions(+), 3 deletions(-)

commit 5a45c3b780d097e3f51a766f89b361b9eec314b8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-02-08 13:33:57 +0000

    Update ChangeLog
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@275 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 16a5e650d2cf801711ed8d37949bf0517a96a6b6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-02-08 13:27:57 +0000

    Set svn:ignore on tools, .
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@274 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

commit 83741fd9be6ec8dc350414e9de53a3691609b0a3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-02-08 13:26:01 +0000

    Set svn:ignore for doc, server, libmissioncontrol, xml, test, src
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@273 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

commit 30215187e4c23cd42a800d9af67c8a6a529853f4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   2008-02-08 13:23:58 +0000

    Change the mc: prefix in MissionControl.xml to tp:
    This is what the telepathy-glib code generation tools expect (it shouldn't
    matter, but some of them aren't fully XMLNS-aware).
    Also remove tabs from the XML file.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@272 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 xml/Makefile.am        |    2 +-
 xml/MissionControl.xml |  360 ++++++++++++++++++++++++------------------------
 2 files changed, 181 insertions(+), 181 deletions(-)

commit 67b7d1cd55d2b8e794baba30f401cd6c388a3a9e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-08 09:41:53 +0000

    Tag 4.59
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@270 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 4 files changed, 5 insertions(+), 3 deletions(-)

commit a421fb827888b3742faa6dafd7ece38de3c2a943
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-08 09:38:11 +0000

    Introduce a HandlerVersion parameter in the .chandler files, that
    makes MC call a HandleChannel2 method on them; this provides a boolean
    indicating the channel direction, and the same request_id as returned
    by mission_control_request_channel().
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@269 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog              |    6 +++
 src/mcd-chan-handler.c |   11 ++++-
 src/mcd-chan-handler.h |    1 +
 src/mcd-dispatcher.c   |   96 ++++++++++++++++++++++++++++++++++++++++-------
 4 files changed, 97 insertions(+), 17 deletions(-)

commit 83747f15f797cb37ab4708d6cd67433f03e018d9
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-06 10:03:26 +0000

    Don't update the avatar while we are setting it.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@268 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    3 +++
 src/mcd-connection.c |   19 +++++++++++++++++--
 2 files changed, 20 insertions(+), 2 deletions(-)

commit 608cadcc554ba241a7ce94652974bf7d4eda016c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-06 10:02:27 +0000

    Invoke the callback from an idle function, so that the clients can get
    their request ID before the callback gets executed.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@267 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    6 +++
 libmissioncontrol/mission-control.c |   59 ++++++++++++++++++++++++++++++++++-
 libmissioncontrol/mission-control.h |    1 +
 3 files changed, 65 insertions(+), 1 deletions(-)

commit b5e399d15166aa43ec35fbbcbfb521d77559f6ad
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-05 11:11:22 +0000

    It's not a const
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@266 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-dispatcher.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 995518cbd47162a5ee87bee206bf84ffff8a1eea
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-02-05 11:09:24 +0000

    Watch for every channel handler's lifetime, and not only for stream
    channels.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@265 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-dispatcher.c |    5 +----
 2 files changed, 7 insertions(+), 4 deletions(-)

commit 2ed86f5af70de75ec94967bd920da741d0c5a0bc
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-31 09:23:17 +0000

    Tag 4.58
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@263 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 2734e5379e90281d5f22bd279ad12c6883f6aaaf
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-31 09:19:30 +0000

    Introduce videp-p2p capability.
    Add a DefaultAccountName setting.
    Add a Priority setting.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@262 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    7 +++
 .../libmissioncontrol/tmpl/mc-profile.sgml         |    1 +
 libmissioncontrol/mc-profile.c                     |   51 ++++++++++++++++++++
 libmissioncontrol/mc-profile.h                     |    3 +
 4 files changed, 62 insertions(+), 0 deletions(-)

commit da6ce624257b9e52a4bdd78b58918c7b33a8b529
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-24 14:20:54 +0000

    Tag 4.57
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@260 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 4 files changed, 5 insertions(+), 3 deletions(-)

commit f4e054033d0231a6821819c0661c1be5fd252dbe
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-24 14:17:40 +0000

    Use new API for requesting avatars.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@259 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    4 ++
 src/mcd-connection.c |   88 +++++++++++++++++++++++++++++++++-----------------
 2 files changed, 62 insertions(+), 30 deletions(-)

commit d69355f365760418ae2c65722769ac1c9a766b9a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-24 12:16:26 +0000

    Avoid requesting the avatars interface more than once.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@258 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |   23 +++++++++++++----------
 2 files changed, 18 insertions(+), 10 deletions(-)

commit e160f589af0ab7a42700f04b9def73478a8501b5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-22 11:32:34 +0000

    If a GConf key is deleted, report its value as NULL.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@257 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    5 +++++
 libmissioncontrol/mc-account-monitor.c |   17 +++++++++--------
 2 files changed, 14 insertions(+), 8 deletions(-)

commit 552b8a72e4d683a9a753dc8c1e4174f95ac76fcf
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-17 10:05:10 +0000

    Tag 4.56
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@254 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit c29fd8272577b85a4eabf6c6cb5ca27b1758c0fb
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-17 09:58:59 +0000

    #include <telepathy-glib/util.h> to suppress a warning.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@253 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    5 +++++
 src/mcd-presence-frame.c |    1 +
 2 files changed, 6 insertions(+), 0 deletions(-)

commit 42fed402b7604826754785d8935da3e8a64f7a3f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-15 09:30:47 +0000

    Clean the generated file.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@248 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 server/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 06d6a4825f7ed417fd94d2e76ef0d54b8370b954
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-15 09:17:14 +0000

    Tag 4.55
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@247 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 856845d65a89cc1cb0b5e796d527a78463f00906
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-15 09:15:02 +0000

    Since recursive variable expansion is troublesome for configure.ac,
    have the Makefile generate the DBus service file. Fixes: #1871127.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@246 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog          |    7 +++++++
 configure.ac       |    1 -
 server/Makefile.am |    5 +++++
 3 files changed, 12 insertions(+), 1 deletions(-)

commit c91a4f0f712f6404afd1c5b61842c8baac2c900b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 15:16:20 +0000

    Tag 4.54
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@244 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit c852f96a4412ea79a3a58afcb265c4077cfa9833
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 15:14:18 +0000

    Updated to find mission-control in @libexecdir@. Fixes: #1871127.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@243 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    5 +++++
 ...freedesktop.Telepathy.MissionControl.service.in |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 6bcfec88c65fc349f6834e0f9599e947f5a0b460
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 09:28:23 +0000

    Tag 4.53
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@241 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 4 files changed, 5 insertions(+), 3 deletions(-)

commit 53ce606bf6ecdff82d0ea50d5a2ccb696383978e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 09:11:30 +0000

    Add credits
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@240 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 4aeaa47f6fe10edbe58a2fd5c63fef1b7f4f4b89
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 09:09:12 +0000

    Emit presence signals when the status message is changed.
    Fixes: #1864568.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@239 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    4 ++++
 src/mcd-presence-frame.c |   13 ++++++++-----
 2 files changed, 12 insertions(+), 5 deletions(-)

commit e65dc0da301a47f67e59f804121957665cb41724
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 09:05:07 +0000

    Register the PresenceChanged and ActualPresenceChanged signals.
    Fixes: 31862760.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@238 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    5 +++++
 .../mission-control-signals-marshal.list           |    2 ++
 libmissioncontrol/mission-control.c                |   18 ++++++++++++++++++
 3 files changed, 25 insertions(+), 0 deletions(-)

commit 8fdf2d725035c579363c7948b9cf526aa9445158
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 09:00:37 +0000

    Remove auto-generated file.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@237 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 INSTALL |  234 ---------------------------------------------------------------
 1 files changed, 0 insertions(+), 234 deletions(-)

commit 50412c3270a4e8d7e020ed2493a4d6fdfcf9b7d0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 08:37:24 +0000

    Move mission-control binary to $libexecdir. Fixes: #1827691.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@236 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog          |    3 +++
 server/Makefile.am |    2 +-
 2 files changed, 4 insertions(+), 1 deletions(-)

commit a28a892cd1694b7e7b8b7b40925e18643fa686b2
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-14 08:05:04 +0000

    Duplicate the channel_type string, because the original one might be
    freed while we are still using it. Fixes: #1849202.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@235 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-connection.c |    7 ++++---
 2 files changed, 10 insertions(+), 3 deletions(-)

commit f0b07454fa1f3bcdb225ae5e8f258fd13a8de349
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2008-01-11 13:15:09 +0000

    If the server doesn't store the avatar, we must set it everytime we
    connect. Fixes: #1825366.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@234 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 +++
 src/mcd-connection.c |  107 +++++++++++++++++++++++++++++++++++++------------
 2 files changed, 87 insertions(+), 26 deletions(-)

commit bee33288bc2b5556f1adee1053f2c2573cc2b648
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-12-18 13:16:29 +0000

    Tag 4.52
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@215 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 82ff172170d68c435a04588c9d5aefa3a20ced37
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-12-18 13:13:26 +0000

    Use a timestamp as avatar ID, instead of a random number (which is not
    necessarily unique).
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@214 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 ++++++
 libmissioncontrol/mc-account.c |    4 ++--
 2 files changed, 8 insertions(+), 2 deletions(-)

commit add285396b2bad20c611bbcdd7f69e17a44d24ae
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-12-17 09:07:19 +0000

    Don't leak avatar data on mc_account_set_avatar().
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@213 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    5 +++++
 libmissioncontrol/mc-account.c |    5 ++++-
 2 files changed, 9 insertions(+), 1 deletions(-)

commit 19917e6b2be74f8b8ad9f1cb0e8b05fe6e2f0dda
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-12-11 15:32:11 +0000

    Tag 4.51
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@205 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 4 files changed, 5 insertions(+), 3 deletions(-)

commit 98f0e93a06df9d2e7c8bf09a3b09653317b90433
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-12-11 15:27:30 +0000

    Do not use deprecated libtp symbols. Fixes: #1831105.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@204 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    7 +++++++
 configure.ac                        |    2 +-
 libmissioncontrol/mission-control.c |    4 +++-
 libmissioncontrol/mission-control.h |   10 +++++-----
 src/mcd-channel.c                   |    2 +-
 5 files changed, 17 insertions(+), 8 deletions(-)

commit ef5c2a701f40b031216aa4eb9fe9e122539ab49e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-11-23 15:39:45 +0000

    Use a list of structures to keep track of the pending channels: in
    this way we take into account also the handle type and the channel
    type.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@194 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    7 +++
 configure.ac         |    5 ++
 src/mcd-connection.c |  145 ++++++++++++++++++++++++++++++++++---------------
 3 files changed, 112 insertions(+), 45 deletions(-)

commit d97d250810d53d3250b9aaa2d128e1671930cefa
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-11-08 13:06:43 +0000

    Tag 4.50
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@185 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog       |    2 ++
 configure.ac    |    2 +-
 src/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 5ab20e894d4aa4763472eb1353e4b5d2a8ac72dc
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-11-08 13:02:59 +0000

    Compare also the channel handle type, before asserting that two
    channels are the same.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@184 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-connection.c |    1 +
 2 files changed, 7 insertions(+), 0 deletions(-)

commit 647396a8b05ff2909acd3d996755a44325623b8a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-11-06 07:16:12 +0000

    Fix an error in a for cycle enumerating accounts and a GCC warning.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@182 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    5 +++++
 libmissioncontrol/mission-control.c |    4 ++--
 2 files changed, 7 insertions(+), 2 deletions(-)

commit 2f64ad626efd87bac7f9fddba15ffb653016d991
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-25 10:57:43 +0000

    Tag 4.49.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@180 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog       |    2 ++
 configure.ac    |    2 +-
 src/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit f446a6022c23314230d62c1c5e8f7f7728dc8aa7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-25 10:45:39 +0000

    When removing the last account, unset the requested presence.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@179 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    3 +++
 src/mcd-presence-frame.c |    8 ++++++++
 2 files changed, 11 insertions(+), 0 deletions(-)

commit d0fbe707e8b8ccd4a7bb620bb84a32575896ed8c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-25 07:46:11 +0000

    When an account gets enabled, check for the requested presence, not
    for the actual.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@178 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    6 ++++++
 src/mcd-manager.c |   10 +++++-----
 2 files changed, 11 insertions(+), 5 deletions(-)

commit efb53aa97e0b134af39fc5bf04977926adfb7435
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-17 12:17:23 +0000

    Tag 4.48
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@176 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 4 files changed, 5 insertions(+), 3 deletions(-)

commit db2e22dfb8acef2c353e56a5f4ddac0a31bda39c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-17 12:08:24 +0000

    Create the connection manager proxy just before actually using it;
    fixes a potential crash.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@175 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    4 ++++
 src/mcd-manager.c |   48 ++++++++++++------------------------------------
 2 files changed, 16 insertions(+), 36 deletions(-)

commit 033c5cc75127531ab4661e546f4c8c78dd2e2c5b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-17 12:07:52 +0000

    Add mc_profile_get_avatar_mime_type() for getting the preferred avatar
    MIME type.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@174 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 ++++++
 libmissioncontrol/mc-profile.c |   25 +++++++++++++++++++++++++
 libmissioncontrol/mc-profile.h |    1 +
 3 files changed, 32 insertions(+), 0 deletions(-)

commit 0ce7d66b0b7906c602f26c3c0ef23fd944db9d85
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-12 10:32:54 +0000

    Fix typo: allow requesting channels with handle_type = 0.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@173 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit d58a6ea35e6ecf15a77f2cfa132ab2d79c102d5c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-08 07:09:11 +0000

    Tag 4.47
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@171 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 39428eff350bd353b726d1dcaa1c28abeaf0729e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-08 06:55:22 +0000

    When an account changes, update internal data before emitting the
    account-changed signal.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@170 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    6 ++++++
 libmissioncontrol/mc-account-monitor.c |   14 +++++++-------
 2 files changed, 13 insertions(+), 7 deletions(-)

commit baa96e886d44f66033f41fe6e714257ec9d5ad2e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-05 07:31:13 +0000

    Tag 4.46
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@168 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog       |    2 ++
 configure.ac    |    2 +-
 src/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit f68c720f7c93e2e918bd73b6b73bd2971340cec1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-05 07:21:15 +0000

    Handle possible error from DBus.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@167 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    5 +++++
 src/mcd-channel.c |    9 ++++++++-
 2 files changed, 13 insertions(+), 1 deletions(-)

commit 30b988b720c26ef2b85ddbc287ea0982bb477218
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-04 06:11:29 +0000

    Tag 4.45
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@165 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit bad97f60a68517f9cf968a28d6459f278c4e562a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-04 06:02:23 +0000

    Remove unused variable
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@163 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-account-monitor.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 55ee04821d03048992f1eeaab1b6b4b787aaa16e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-04 06:01:52 +0000

    Fix a crash: strcmp could be called with NULL parameters.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@162 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    3 +++
 libmissioncontrol/mc-account.c |   10 +++++++++-
 2 files changed, 12 insertions(+), 1 deletions(-)

commit f859ee668d2b337def957a723fd48a9e74228333
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-10-04 05:48:58 +0000

    Unref the GConf client.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@161 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    5 +++++
 libmissioncontrol/mc-account-monitor.c |    1 +
 2 files changed, 6 insertions(+), 0 deletions(-)

commit 7c0421a1364f7f4800740040148c593da6f2ca68
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-28 11:16:30 +0000

    Tag 4.44
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@159 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit afd537fc7fd65097768160614a3f6a63a2a44c0d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-28 11:14:30 +0000

    Fix so versions
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@158 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 7cd0f708b38e3e1bb917199364e829703a789619
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-28 11:09:21 +0000

    Add mcd_master_add_connection_parameter() API for passing connection
    parameters to all the connection managers that support them, for all
    accounts.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@157 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++
 src/mcd-connection.c |   81 ++++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-master.c     |   67 +++++++++++++++++++++++++++++++++++++++++
 src/mcd-master.h     |    4 ++
 4 files changed, 157 insertions(+), 0 deletions(-)

commit 0cce6f34d547d98e786e9986c4772c6190b8231e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-28 08:04:12 +0000

    2007-09-28  Alberto Mardegan  <alberto.mardegan@nokia.com>
    
    	* src/mcd-connection.[hc], src/mcd-manager.c:
    	Add the mcd_connection_connect() API (renaming the static one that was
    	already using that name) and call it explicitly after the connection
    	is created.
    
    2007-09-26  Alberto Mardegan  <alberto.mardegan@nokia.com>
    
    	* libmissioncontrol/mission-control.c:
    	Fix a memory leak.
    
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@156 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |   12 ++++++++++++
 libmissioncontrol/mission-control.c |    8 ++++----
 src/mcd-connection.c                |   19 +++++++++++++++----
 src/mcd-connection.h                |    1 +
 src/mcd-manager.c                   |    1 +
 5 files changed, 33 insertions(+), 8 deletions(-)

commit 5e1c0857d2810446138a274b55119547b3633a21
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-26 07:08:08 +0000

    Tag 4.43
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@154 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit cd1b1868f59a222eddff03cbc1cb1fb1655cd5ff
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-26 07:01:10 +0000

    Fix a memory leak.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@153 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |    3 ++-
 2 files changed, 7 insertions(+), 1 deletions(-)

commit 043615a440efee214592a32137680e7b6aeb0c2a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-25 11:05:09 +0000

    Store a copy of the presence message string, since it could be freed
    anytime. Possibly fixes a crash.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@152 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog        |    6 ++++++
 src/mcd-master.c |   14 +++++++++-----
 2 files changed, 15 insertions(+), 5 deletions(-)

commit 3036d5fbfa6816220f46793b12b175c2ba6c720d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-24 14:57:11 +0000

    Tag 4.42
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@150 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 1eae9ec7a0b64e3e550c4017705346ecb01abcac
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-24 14:52:52 +0000

    Fix mapping of Telepathy channel full/inviteonly/banned errors.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@149 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    3 +++
 src/mcd-connection.c |    6 +++---
 2 files changed, 6 insertions(+), 3 deletions(-)

commit d3b25470f050d4b790bddba5ac7d07e5facf4efa
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-24 13:38:12 +0000

    Immediately update display/normalized name, without waiting for GConf
    notification. Fixes: #1797819.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@148 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    4 ++++
 libmissioncontrol/mc-account.c |   22 +++++++++++++++++-----
 2 files changed, 21 insertions(+), 5 deletions(-)

commit b693df4893e8e247a96b65f91f67872302df0538
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-24 12:27:41 +0000

    Fix possible crash happening when alias is NULL.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@147 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 3077faaf62348b71107e0e8558db979b3b2388da
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-20 13:01:09 +0000

    Tag 4.41
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@145 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 4eb90de2322f79eab04cfe2942d8a95bbb7ce4b4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-20 12:54:09 +0000

    Fix library version information.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@144 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 5c9ad15ae7594bfd8b1f55076e0303f40c308fb4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-20 12:51:03 +0000

    Add signals with an additional the presence message parameter, and
    deprecate old ones.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@143 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    6 ++
 .../tmpl/mcd-presence-frame.sgml                   |   10 ----
 src/mcd-service.c                                  |   58 ++++++++++++++++++++
 xml/MissionControl.xml                             |   45 +++++++++++++++
 4 files changed, 109 insertions(+), 10 deletions(-)

commit cfab395086c8b28b9767aea9da4bee56e5dc40e7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-20 12:42:18 +0000

    Had wrong name!
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@142 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-presence-frame.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a4b01d093c38de98348b7f3b689e6477c6ab752d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-20 07:48:35 +0000

    Tag 4.40
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@140 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 65bf090673dae46aa12b565af026fd5156ea256b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-20 07:46:47 +0000

    Set the account enabled flag to FALSE, before emitting the
    account-disabled signal.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@139 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    6 ++++++
 libmissioncontrol/mc-account-monitor.c |    1 +
 2 files changed, 7 insertions(+), 0 deletions(-)

commit 5530836c4633bae1839b02f0b4d517c9e13c408c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-17 08:00:31 +0000

    Tag 4.39
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@137 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit baec0934c66f9d1735055c213450f693604e9bce
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-17 07:47:38 +0000

    Check for glib tools only after testing for glib itself.
    Fixes: #1795921.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@136 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 ++++
 configure.ac |   16 ++++++++--------
 2 files changed, 12 insertions(+), 8 deletions(-)

commit e5b1733522718da3a9370db607f7dc3516f229dc
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-17 07:36:27 +0000

    Add signal marshallers list file to EXTRA_DIST.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@135 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    5 +++++
 libmissioncontrol/Makefile.am |    5 ++++-
 2 files changed, 9 insertions(+), 1 deletions(-)

commit 0777460aee70a844a3bbd76b5534c249ac665406
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-14 11:57:47 +0000

    Cache normalized and display name, instead of always retrieving them
    from GConf.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@134 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    5 ++
 libmissioncontrol/mc-account-monitor.c |   12 ++++
 libmissioncontrol/mc-account-priv.h    |    2 +
 libmissioncontrol/mc-account.c         |   95 +++++++++++++++++++-------------
 4 files changed, 76 insertions(+), 38 deletions(-)

commit ef00de1bcbc692a3b20a2f1d2709ec20eeadba05
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-14 09:24:24 +0000

    Move account enabledness related code to McAccount, avoiding some
    GConf lookups.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@133 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    5 +++++
 libmissioncontrol/mc-account-monitor.c |   21 +++++----------------
 libmissioncontrol/mc-account-priv.h    |    1 +
 libmissioncontrol/mc-account.c         |   25 +++++++++++++++++--------
 4 files changed, 28 insertions(+), 24 deletions(-)

commit 5f54008a4f29816ce9cf78bca389fdafc9777508
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-14 08:29:13 +0000

    Cache the profile name, since it's not going to change.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@132 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    5 +++++
 libmissioncontrol/mc-account.c |   21 +++++++++++----------
 2 files changed, 16 insertions(+), 10 deletions(-)

commit e0393487d3099752246c7fed596e929fb5b8864a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-10 13:39:58 +0000

    Fix possible crash when trying to display a NULL GError.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@131 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |    9 ++++++---
 2 files changed, 11 insertions(+), 3 deletions(-)

commit a08ca5bf8a254e4972ee458dff41cc547c5943f5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-06 05:38:44 +0000

    Tag 4.38
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@129 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit f080a19699d9eb1212bd04f394eee2a25ef6c298
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-09-05 08:16:20 +0000

    Add some more checks to the
    mission_control_request_channel_with_string_handle_and_vcard_field
    function, and fix a reference leak.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@128 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    7 ++++
 libmissioncontrol/mission-control.c |   65 ++++++++++++++++++++---------------
 2 files changed, 44 insertions(+), 28 deletions(-)

commit b61872993a0f8979990a17c9849d4aed028bfa2c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-31 09:26:55 +0000

    Tag 4.37
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@126 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 4 files changed, 5 insertions(+), 3 deletions(-)

commit b5df7a2fd101bee3d8a473c5236de8ca0720c6c8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-31 09:19:15 +0000

    Listen to the AvatarUpdated signal, instead of relying on eds-sync
    doing that. With a compile-time switch, old behaviour is still
    possible. Fixes: #1763009.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@125 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 ++++
 src/mcd-connection.c |   66 +++++++++++++++++++++++++++++++++++++-------------
 2 files changed, 54 insertions(+), 17 deletions(-)

commit 4b52d3f01edd4e4aa0c6d06799a1971c3643737b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-31 08:47:17 +0000

    Add mc_account_set_avatar_from_data() API. Partially fixes #1763009.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@124 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    3 +
 libmissioncontrol/mc-account.c |   85 ++++++++++++++++++++--------------------
 libmissioncontrol/mc-account.h |    2 +
 3 files changed, 48 insertions(+), 42 deletions(-)

commit 38b1e6af9653e7e7dee5824e7f00bf7833254d3b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-31 07:37:27 +0000

    Increase timeout for receiving capabilities.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@123 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 00e8441f9944b62897fd3d6689ac15f66c36e224
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-28 09:26:18 +0000

    Tag 4.36
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@121 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    2 ++
 configure.ac                  |    2 +-
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 4 files changed, 5 insertions(+), 3 deletions(-)

commit 5a44d0f2bf63012ab9bfa2086e46c5e84a123a4c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-28 09:17:33 +0000

    Add mc_account_set_secondary_vcard_fields() API to set all secondary
    VCard fields at once.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@120 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 +++++
 libmissioncontrol/mc-account.c |   41 ++++++++++++++++++++++++++++++++++++++++
 libmissioncontrol/mc-account.h |    3 +-
 3 files changed, 49 insertions(+), 1 deletions(-)

commit d922812bdf2bc25e7e3615bb01a4f56a75fd08b5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-27 12:23:03 +0000

    When an account parameter changes, perform reconnection only if
    requested presence is online.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@119 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog        |    6 ++++++
 src/mcd-master.c |    4 ++++
 2 files changed, 10 insertions(+), 0 deletions(-)

commit ea40de54799f539466f047c2575d3f43c2d34619
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-21 10:17:14 +0000

    Tag 4.35
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@117 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit b78902e476b1464350996da238cae703d7d1a376
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-21 09:18:56 +0000

    Remove compilation flags, they are to be specified in configure.ac or
    in debian/rules. Fixes: #1772178.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@116 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog       |    4 ++++
 src/Makefile.am |    3 +--
 2 files changed, 5 insertions(+), 2 deletions(-)

commit d410e9df401303f39b98ac3ace855f4149d1d7c2
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-21 08:39:01 +0000

    Strip spaces from presence names. Fixes: #1772539.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@115 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    3 +++
 libmissioncontrol/mc-profile.c |    6 ++++--
 2 files changed, 7 insertions(+), 2 deletions(-)

commit 87de1f14e96eccff1e65b084badd2733922d2837
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-21 08:29:26 +0000

    Allow requesting a channel with handle 0 if channel handle type is
    also 0. Turn a g_assert into a g_return_val_if_fail.
    Fixes: #1772597.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@114 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    7 +++++++
 src/mcd-connection.c |    4 ++--
 2 files changed, 9 insertions(+), 2 deletions(-)

commit a7e8666fc7f1ae3f75e3030836ce182116d21df7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-21 07:03:58 +0000

    Merge libmissioncontrol and libmissioncontrol-config into a single
    library, called libmissioncontrol-client.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@113 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    7 +++
 .../tmpl/mcd-dispatcher.sgml                       |    1 +
 doc/reference/libmissioncontrol/Makefile.am        |    2 +-
 libmissioncontrol.pc.in                            |    2 +-
 libmissioncontrol/Makefile.am                      |   49 ++++++++-----------
 server/Makefile.am                                 |    2 +-
 src/Makefile.am                                    |    2 +-
 test/Makefile.am                                   |    2 +-
 8 files changed, 34 insertions(+), 33 deletions(-)

commit 4153f7dea7ea4767b884e7269f219eb005786a1c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-14 12:26:31 +0000

    Tag 4.34.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@111 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 3b7061c14811f5bfb0495a81978f216117708ef5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-14 12:24:52 +0000

    Allow per protocol channel handlers.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@110 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                    |    6 ++
 src/mcd-chan-handler.c       |   36 +++++++++++--
 src/mcd-connection.c         |   17 ++++++-
 src/mcd-dispatcher-context.h |    2 +
 src/mcd-dispatcher.c         |  116 +++++++++++++++++++++++++++++++++---------
 src/mcd-dispatcher.h         |    3 +-
 6 files changed, 149 insertions(+), 31 deletions(-)

commit a950295edae13934aca9ded0677abbc39614f228
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-13 05:10:55 +0000

    Use soname version properly.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@109 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    6 ++++++
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 3 files changed, 8 insertions(+), 2 deletions(-)

commit 7db71f8bfaad01908ffda060cb3805f643f046be
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-09 07:02:14 +0000

    Tag 4.33
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@107 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 0d890ffe35dc825849fa4337a5cae51193df4b34
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-09 06:47:42 +0000

    Remove mcd-enum-types.c from the installed files.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@106 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog       |    3 +++
 src/Makefile.am |    1 -
 2 files changed, 3 insertions(+), 1 deletions(-)

commit ee39b960407a034c626e23fc7e0d44968e5e84d9
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-09 06:26:55 +0000

    Add mc-enum-types.h to the list of headers to be installed.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@105 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    3 +++
 libmissioncontrol/Makefile.am |    1 +
 2 files changed, 4 insertions(+), 0 deletions(-)

commit 9309341f9e3851963f393b412070bbf44eea8f3f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-09 06:22:43 +0000

    Add mc_profiles_list_by_protocol() API.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@104 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    5 ++++
 libmissioncontrol/mc-profile.c |   47 ++++++++++++++++++++++++++++++++++++++++
 libmissioncontrol/mc-profile.h |    1 +
 3 files changed, 53 insertions(+), 0 deletions(-)

commit 6f66122d8be14000f4c92657a7ab2cd7f012f67c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-06 13:05:50 +0000

    Tag 4.32
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@102 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit dc1e820db7dd42c34bb3750b35d4d0844b37b2b1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-06 13:05:02 +0000

    * libmissioncontrol.pc.in, mission-control.pc.in:
    Update required version of libtelepathy.
    
    * src/Makefile.am:
    Bump libmissioncontrol-server soname, to resolve ABI breakage.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@101 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog               |    8 ++++++++
 libmissioncontrol.pc.in |    2 +-
 mission-control.pc.in   |    2 +-
 src/Makefile.am         |    3 ++-
 4 files changed, 12 insertions(+), 3 deletions(-)

commit ac70e1cae57108c7a8a0651407fc73ab4cb9b38b
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-03 11:37:43 +0000

    Correct version dependency for libtelepathy. Thanks to Ross Burton for
    pointing this out.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@100 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 ++++
 configure.ac |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit 14f0e5194015305c1f710152b4b3c92eb6ba1c62
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-03 06:40:53 +0000

    Commit auto-modified sgml files.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@99 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 .../tmpl/mcd-dispatcher-context.sgml               |    3 +++
 .../libmissioncontrol/tmpl/mc-account.sgml         |   19 +++++++++++++++++++
 .../libmissioncontrol/tmpl/mc-profile.sgml         |    9 ---------
 3 files changed, 22 insertions(+), 9 deletions(-)

commit 08a0215ae63be6f0aeac3a33417b8378f30c3954
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-03 06:38:24 +0000

    Add documentation for mc_account_{set,get}_alias. Fixes: #1763010.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@98 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    3 +++
 .../libmissioncontrol-sections.txt                 |    2 ++
 2 files changed, 5 insertions(+), 0 deletions(-)

commit 2c9abb2f8fe53e206ef17f2e734e761e865a1db0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-03 06:35:54 +0000

    Bump libmissioncontrol-config soname, to resolve ABI breakage.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@97 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |    5 +++++
 libmissioncontrol/Makefile.am |    4 +++-
 2 files changed, 8 insertions(+), 1 deletions(-)

commit 82a7667f3a04cd44e6298e6b508726a4e76fe929
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-02 10:47:51 +0000

    Tag 4.31
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@95 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit ccbf1c56218d805f8efd90860e6661db81861176
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-02 10:16:30 +0000

    Properly scan the list nodes.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@94 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 ++++++
 libmissioncontrol/mc-manager.c |    2 +-
 2 files changed, 7 insertions(+), 1 deletions(-)

commit a8162661aa4e7f768f6dc9ea1166d4c5eea0b1da
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-08-01 06:33:56 +0000

    Correctly report telepathy's InvalidHandle error.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@93 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |    4 ++++
 2 files changed, 9 insertions(+), 0 deletions(-)

commit 2dee3a233a3d3603915119a01056cbdc10e7974a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-07-16 11:35:10 +0000

    Tag release.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@91 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit c2a861e6dd1ee9e5dee5397cdb759e031bd348d0
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-07-16 11:31:23 +0000

    If an account parameter changes when a corresponding connection is not
    there, create the connection and try to connect it.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@90 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    6 ++++++
 src/mcd-manager.c |   25 +++++++++++++++++++++++++
 src/mcd-manager.h |    1 +
 src/mcd-master.c  |    8 +-------
 4 files changed, 33 insertions(+), 7 deletions(-)

commit 5ab5f552eb4cf2cf24a05d894417897fb2db375e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-07-13 10:34:45 +0000

    Tag next version
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@86 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 07670eab3be2d99e6b05abc9d1b5f1f1d10ffdfd
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-07-10 13:54:07 +0000

    	Don't strip the '+' out of the TEL field.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@85 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    3 +++
 libmissioncontrol/mission-control.c |    2 +-
 2 files changed, 4 insertions(+), 1 deletions(-)

commit 47bc108067f9964c53a48156f61216358afc31b8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-07-10 10:44:42 +0000

    New mcd_channel_leave() API for removing the self handle from a
    channel.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@84 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    4 ++++
 src/mcd-channel.c |   36 ++++++++++++++++++++++++++++++++++++
 src/mcd-channel.h |    2 ++
 3 files changed, 42 insertions(+), 0 deletions(-)

commit 91082693861b307bab361b87dd18cd9005a90754
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-07-10 10:42:22 +0000

    Use a synchronous call for getting the self handle.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@83 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    5 +++++
 src/mcd-channel.c |   23 +++++------------------
 2 files changed, 10 insertions(+), 18 deletions(-)

commit 1cb4220218b9f9407ee6042eb879dafc53e8a23f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-07-09 10:45:51 +0000

    Remove mc.c file documentation.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@82 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    4 ++++
 .../libmissioncontrol/libmissioncontrol-docs.sgml  |    1 -
 .../libmissioncontrol-sections.txt                 |    5 -----
 3 files changed, 4 insertions(+), 6 deletions(-)

commit f698a7500a9cacb1106732aa9832035b15d07949
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-07-09 05:20:57 +0000

    Use asynchronous call to connect the connection.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@81 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    5 +++++
 src/mcd-connection.c |   46 ++++++++++++++++++++++++++++++++++------------
 2 files changed, 39 insertions(+), 12 deletions(-)

commit bb425ac3f37869b16b7f3647c24bcaeea3693ce1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-29 13:51:43 +0000

    Tag 4.28
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@79 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 678a6e6c2116efc62b173bdc584876d7d8caa884
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-29 09:20:36 +0000

    Set the account status to CONNECTING as soon as connection process
    start. Fix some memory leaks.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@78 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-connection.c |    9 +++++++++
 2 files changed, 15 insertions(+), 0 deletions(-)

commit 19e20025748cb83ebc306ee8c1df64b1a4a6fac6
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-28 14:01:04 +0000

    Use g_str_{hash,equal} for the services hash table.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@77 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    1 +
 src/mcd-provisioning-factory.c |    2 +-
 2 files changed, 2 insertions(+), 1 deletions(-)

commit 8fd7b34a7c1574e0793f5f16d9ac91d232679708
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-28 13:45:38 +0000

    Fix function name: mcd_provisioning_factory_add instead of
    mcd_provisioning_factory_add_provisioning.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@76 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 ++++++
 src/mcd-provisioning-factory.c |    8 ++++----
 2 files changed, 10 insertions(+), 4 deletions(-)

commit 4742ef82a07638658d5d77b557771ff4d5bf689f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-27 12:55:29 +0000

    Fix indentation and function placement in the source.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@75 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-connection.c |  185 ++++++++++++++++++++++++-------------------------
 1 files changed, 91 insertions(+), 94 deletions(-)

commit 6a1c9a11e53211c4bce2695aec57ac06c541ac80
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-27 12:53:05 +0000

    Implement getting of connection parameters through a provisioning
    service.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@74 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    4 ++
 src/mcd-connection.c |  143 ++++++++++++++++++++++++++++++++++++++++++-------
 2 files changed, 126 insertions(+), 21 deletions(-)

commit 403a24c82de8f24e3d93b4ab8e3680bfe3f55ba8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-27 11:50:12 +0000

    Add mcd_provisioning_cancel_request() API.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@73 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog              |    5 +++++
 src/mcd-provisioning.c |   19 +++++++++++++++++++
 src/mcd-provisioning.h |    7 +++++++
 3 files changed, 31 insertions(+), 0 deletions(-)

commit be1d0b9363ce4afe16e4574e93d4a5985b8bc9dd
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-26 13:08:45 +0000

    Tagging 4.27
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@71 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 5619e8ac39c79cf93551f6f6181d8f3cfa0495c5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-26 11:59:10 +0000

    When requesting a channel from offline presence, monitor the requestor
    process's lifetime to eventually reset the presence back to offline.
    Fixes: NB#57390.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@70 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog        |    7 +++++++
 src/mcd-master.c |    2 +-
 2 files changed, 8 insertions(+), 1 deletions(-)

commit 03f9bdc42819dd928f62a20943886506301ace0d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-25 12:17:39 +0000

    Implement D-Bus API for channel filtering.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@69 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    9 ++-
 libmissioncontrol/mission-control.c |   16 ++++
 libmissioncontrol/mission-control.h |   21 ++++++
 src/mcd-connection.c                |    2 +-
 src/mcd-connection.h                |    2 +-
 src/mcd-dispatcher-context.h        |    6 +-
 src/mcd-dispatcher.c                |   18 +++--
 src/mcd-service.c                   |  135 +++++++++++++++++++++++++++++++++++
 src/mcd-signals-marshal.list        |    1 +
 xml/MissionControl.xml              |   21 ++++++
 10 files changed, 220 insertions(+), 11 deletions(-)

commit 9482edc2138ab15ba8a907583fec1e9ea118256f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-25 10:55:20 +0000

    Remove the const keyword from the values returned by the getter
    functions, as these objects are not supposed to be constant.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@68 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                    |    4 ++++
 src/mcd-dispatcher-context.h |    6 +++---
 src/mcd-dispatcher.c         |    6 +++---
 3 files changed, 10 insertions(+), 6 deletions(-)

commit d351e10407c5321990de80b36a36b1dce3282554
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-25 09:58:34 +0000

    Set the correct type for the McdSystemFlags parameter in the
    flags-changed signal.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@65 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    7 +++++++
 src/mcd-mission.c |    2 +-
 2 files changed, 8 insertions(+), 1 deletions(-)

commit 9c0570255b1031d8727c6475de67692cea74d250
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-25 09:58:03 +0000

    Remove mc_profile_new()
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@64 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-profile.h |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit f843fb7b152ba9c4f79677eb0170ef2c6860f338
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-19 07:24:43 +0000

    Releasing 4.26.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@63 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 72747446f15bc016258d4dc49ccc061d8dbf4473
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-19 07:22:06 +0000

    Revert the fix for McAccountMonitor reference counting: the object
    must never be disposed, or invocations of mc_account_lookup() might
    return different objects for the same account.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@62 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    7 +++++++
 libmissioncontrol/mc-account-monitor.c |    5 +++--
 2 files changed, 10 insertions(+), 2 deletions(-)

commit 09045fe475162afcff765740d80f97f93a57cb00
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-15 11:11:06 +0000

    Releasing 4.25.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@61 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 ++++
 configure.ac |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit 99129ada8841bf39380ad6dbb370a12a818c5beb
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-15 10:27:28 +0000

    Turn a (wrong) assertion into a runtime check. Fixes: NB#54826.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@60 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    5 ++++-
 libmissioncontrol/mc-account-monitor.c |    3 ++-
 2 files changed, 6 insertions(+), 2 deletions(-)

commit 60acc82936f8ab9fcdb832169444277814a2e8f2
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-15 08:38:17 +0000

    Don't crash if we fail to retrieve account or profile data.
    Fixes: NB#59649.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@59 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    4 ++++
 src/mcd-connection.c |    8 ++++++++
 src/mcd-master.c     |   11 ++++++++---
 3 files changed, 20 insertions(+), 3 deletions(-)

commit 46f7c3a0ea9b3225f3ebf07157c8d9cd9aa7b249
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-15 08:07:39 +0000

    Fix reference leaks.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@58 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    5 +++++
 libmissioncontrol/mc-account.c |    5 +++++
 2 files changed, 10 insertions(+), 0 deletions(-)

commit 322bbddf4719f818cfb846e18d47d1ae78fde4c5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-14 13:44:22 +0000

    Don't let libtelepathy connect the connection by itself; this ensure
    we don't lose any status changed signal.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@57 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    4 ++
 src/mcd-connection.c |   86 +++++++++++++++++++++++++++++---------------------
 2 files changed, 54 insertions(+), 36 deletions(-)

commit 2f26d2da37935763b9d37575aadf361d2882afec
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-14 13:42:36 +0000

    Check for the group interface, before using it.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@56 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    5 +++++
 .../libmissioncontrol/tmpl/mc-account-monitor.sgml |    9 +++++++++
 src/mcd-channel.c                                  |    4 ++++
 3 files changed, 18 insertions(+), 0 deletions(-)

commit 4ee4b03a1e00a98e971b4ca2491d6f026691b1c9
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-08 07:29:29 +0000

    Let the object be actually destroyed, sometimes.
    Fixes: #1729826.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@55 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    6 ++++++
 libmissioncontrol/mc-account-monitor.c |    4 ++--
 2 files changed, 8 insertions(+), 2 deletions(-)

commit d68d81c413332fa8b2415206d137c187c17d97e1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-08 06:22:53 +0000

    Tagging 4.24.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@54 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 ++++
 configure.ac |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit 869ac3effac23b1a61417e935c7a934aa99489c4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-08 06:05:06 +0000

    Add virtual method request_parameters() to McdProvisioning interface.
    Add docstrings.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@53 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog              |    6 ++++++
 src/mcd-provisioning.c |   30 ++++++++++++++++++++++++++++++
 src/mcd-provisioning.h |   15 +++++++++++----
 3 files changed, 47 insertions(+), 4 deletions(-)

commit d083845c99fb1a608ceaedc015a5dd025ccc4360
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-07 14:06:05 +0000

    Added docstrings.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@52 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-provisioning-factory.c |   27 +++++++++++++++++++++++++++
 1 files changed, 27 insertions(+), 0 deletions(-)

commit f4f0f4b99c927364faf957f67efd7ff99847cffd
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-06-07 13:31:33 +0000

    Start implementation of provisioning.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@51 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    8 +++
 src/Makefile.am                |   10 +++-
 src/mcd-provisioning-factory.c |  107 ++++++++++++++++++++++++++++++++++++++++
 src/mcd-provisioning-factory.h |   64 ++++++++++++++++++++++++
 src/mcd-provisioning.c         |   72 +++++++++++++++++++++++++++
 src/mcd-provisioning.h         |   67 +++++++++++++++++++++++++
 6 files changed, 325 insertions(+), 3 deletions(-)

commit 822d79b543f13ac86cabbf1582ecc75f537e5121
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-31 15:43:17 +0000

    Normalized name is not a parameter!
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@50 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-account.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a04a5985c61c5b7d365f018bda1547d38adc09b4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-31 14:43:21 +0000

    Forgot signals list.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@49 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-signals-marshal.list |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8fc54d271de2537ddf438920b57bd8bdc8a959f7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-31 14:28:47 +0000

    * src/mcd-connection.[hc], src/mcd-master.c:
      If an account parameter change, disconnect and reconnect it.
    
    * libmissioncontrol/Makefile.am,
      libmissioncontrol/mc-account-monitor.c:
      Add param-changed signal on McAccountMonitor: will be emitted whenever
      a connection parameter changes for an account.
    
    * libmissioncontrol/mc-account.c:
      When looking up an account, also accept the normalized name as a key.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@48 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |   13 ++++++++
 libmissioncontrol/Makefile.am          |    6 +++-
 libmissioncontrol/mc-account-monitor.c |   50 ++++++++++++++++++++++++++++----
 libmissioncontrol/mc-account.c         |   14 ++++++++-
 src/mcd-connection.c                   |   25 +++++++++++++++-
 src/mcd-connection.h                   |    1 +
 src/mcd-master.c                       |   30 +++++++++++++++++++
 7 files changed, 130 insertions(+), 9 deletions(-)

commit c2a20b950977db08ca529c700c3a7448c39c5f06
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-30 10:58:41 +0000

    Tagging 4.23.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@47 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    6 ++++++
 configure.ac |    2 +-
 2 files changed, 7 insertions(+), 1 deletions(-)

commit a19718a94ef6252ed583915f03fd630882f9ab0c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-30 10:48:22 +0000

    Avoid possible crashes/critical warnings.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@46 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    3 +++
 .../libmissioncontrol/tmpl/mc-profile.sgml         |    1 +
 libmissioncontrol/mc-profile.c                     |    6 ++++--
 3 files changed, 8 insertions(+), 2 deletions(-)

commit 737b7e28d4af8ad6c2e55934727f1d99bafb3285
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-30 10:42:54 +0000

    Removed unused variable.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@45 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mission-control.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 2ea34a859b487a9619f7712f5a5a7533f03a764f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-30 10:12:40 +0000

    Add "supports-roster" capability.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@44 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    3 +++
 libmissioncontrol/mc-profile.c |    1 +
 libmissioncontrol/mc-profile.h |    1 +
 3 files changed, 5 insertions(+), 0 deletions(-)

commit 2ee51eca1d8cc6527929f397fe2f57ed55812573
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-30 10:09:00 +0000

    Modify TEL mangling again, just strip out special chars, then pass it
    verbatim
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@43 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    8 ++++++++
 libmissioncontrol/mission-control.c |    5 -----
 2 files changed, 8 insertions(+), 5 deletions(-)

commit 6ba2798fdf5319497b4ce05984606fc7ef2fb802
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-30 09:30:18 +0000

    Fix usage of gint/gsize types for AMD64. Fixes #1718949.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@42 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-connection.c |   18 +++++++++++-------
 2 files changed, 17 insertions(+), 7 deletions(-)

commit 9a37339aedf37fc63a6e33d41d7ba242a9ca33af
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-30 09:29:20 +0000

    * libmissioncontrol/mc-profile.c: (mc_profile_finalize),
    (_mc_profile_load), (mc_profile_get_default_setting):
    * libmissioncontrol/mc-profile.h:
    * libmissioncontrol/mission-control.c:
    (mission_control_request_channel_with_string_handle_and_vcard_field
    ):
      Added support for Mangle-TEL and other fields
      TEL field is handled specially if no Mangle-TEL is defined
    
    * libmissioncontrol/mission-control.c:
    (mission_control_request_channel_with_string_handle_and_vcard_field
    ):
    * libmissioncontrol/mission-control.h:
      add request_channel with string handle and vcard field, to give mission
      control a way to mangle e.g. TEL to tel:number
    
      the old request_cannel_with_string_handle calls the new function with NULL
      vcard field
    
      TODO: provisioning, or the profiles should turn the mangling into
      something configurable at one point.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@41 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |   26 +++++++++++
 libmissioncontrol/mc-profile.c      |   47 +++++++++++++++++++
 libmissioncontrol/mc-profile.h      |    1 +
 libmissioncontrol/mission-control.c |   86 +++++++++++++++++++++++++++++++++--
 libmissioncontrol/mission-control.h |    9 ++++
 5 files changed, 164 insertions(+), 5 deletions(-)

commit 2c24047ce25381e17e814d567381985db0c2a13f
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-11 08:01:07 +0000

    Tagging 4.22.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@40 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 ++++
 configure.ac |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit 9fd90b992f08a24f6c6efacdd3240848bf7a10f5
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-11 07:53:43 +0000

    Let AccountStatusChanges signal be emitted even on connecting.
    Fixes: #1716701.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@39 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    4 ++++
 src/mcd-service.c |   26 ++++++++++----------------
 2 files changed, 14 insertions(+), 16 deletions(-)

commit c40025d3b98760620393aaca8784391aed6303ad
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-11 07:35:00 +0000

    Fix pkg-config requirements. Fixes: #1713514.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@38 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog               |    4 ++++
 libmissioncontrol.pc.in |    2 +-
 mission-control.pc.in   |    1 +
 3 files changed, 6 insertions(+), 1 deletions(-)

commit ca9838ba07df0f549260401a6cff2ba1a69bd819
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-11 07:18:53 +0000

    * src/mcd-channel.[hc]:
      Add mcd_channel_is_missed() method to know if a channel has been
      accepted by the local user.
    
    * src/mcd-dispatcher.c:
      If a channel is aborted right before the channel handle starts, report
      a dispatch failure.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@37 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |   10 +++++++++
 src/mcd-channel.c    |   53 ++++++++++++++++++++++++++++++++++++++++++++++++++
 src/mcd-channel.h    |    1 +
 src/mcd-dispatcher.c |   43 +++++++++++++++++++++++++++++++---------
 4 files changed, 97 insertions(+), 10 deletions(-)

commit c7aff163edf4c419b417d6fcf8b91d70d017a953
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-11 07:15:32 +0000

    Support for secondary vcard fields.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@36 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |   17 ++++++++
 libmissioncontrol/mc-account-priv.h |    1 +
 libmissioncontrol/mc-account.c      |   74 +++++++++++++++++++++++++++++++++++
 libmissioncontrol/mc-account.h      |    7 +++
 4 files changed, 99 insertions(+), 0 deletions(-)

commit ae0b220cdd669294c01ab267420971ff785353e9
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-04 08:18:10 +0000

    Make sure the connection status is retrieved every time a connection
    is created.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@35 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    6 ++++++
 src/mcd-connection.c |   33 ++++++++++++++++++---------------
 2 files changed, 24 insertions(+), 15 deletions(-)

commit 157c58405d7f9beb7a8c7dddc3cdc25a8383ec6d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-02 12:19:20 +0000

    Add methods for retrieving the actual and requested presence messages.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@34 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                           |    4 ++
 libmissioncontrol/mission-control.c |   67 +++++++++++++++++++++++++++++++++++
 libmissioncontrol/mission-control.h |    4 ++
 src/mcd-master.c                    |   18 +++++++++
 src/mcd-master.h                    |    2 +
 src/mcd-service.c                   |   15 ++++++++
 xml/MissionControl.xml              |   16 ++++++++
 7 files changed, 126 insertions(+), 0 deletions(-)

commit 7d67540a9c10038fb31fa96dfc8d99aeb3787875
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-05-02 11:57:06 +0000

    * src/mcd-connection.c:
      Don't set account status to CONNECTING if we don't have a Telepathy
      connection.
    
    * src/mcd-service.c:
      Make sure only valid presence values can be requested. Fixes #1711163.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@33 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog            |    9 +++++++++
 src/mcd-connection.c |    9 +++++----
 src/mcd-service.c    |    7 +++++++
 3 files changed, 21 insertions(+), 4 deletions(-)

commit 37a837788ef6335e202ce0f74144343427b942a7
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-25 16:23:26 +0000

    Ops...
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@32 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 server/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 81886b264f14eabe68b8639d4b75e126af9fc361
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-25 16:20:55 +0000

    Fix server build: use local libmissioncontrol-config.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@31 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog          |    5 +++++
 server/Makefile.am |    3 ++-
 2 files changed, 7 insertions(+), 1 deletions(-)

commit a1aaad5b8c2365fb9c98617de8f6f5a024de1b29
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-24 06:54:43 +0000

    Patch from shiyee:
    * libmissioncontrol/mc-manager.c:
    Add GError initialization. Fixes #1705225.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@30 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 ++++++
 libmissioncontrol/mc-manager.c |    2 +-
 2 files changed, 7 insertions(+), 1 deletions(-)

commit cbd295d720150687197ac9055ac2fd5756d56d49
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-19 11:18:21 +0000

    Tagging 4.21.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@29 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 ++++
 configure.ac |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit b4ddf42816e4d3549ac76867385e5577f8c76695
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-19 10:44:21 +0000

    Docstring fixes.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@28 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-account.c      |    2 +-
 libmissioncontrol/mission-control.c |    3 +--
 2 files changed, 2 insertions(+), 3 deletions(-)

commit e940b4de2bdc17bba6d55ad07c069baa1290837d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-19 10:39:04 +0000

    * libmissioncontrol/mc-account-priv.h:
    * libmissioncontrol/mc-account.[hc]:
    * libmissioncontrol/mc-profile.[hc]:
      Ability to set/get the account alias.
    
    * src/mcd-connection.c:
      Set the account alias upon connection, and listen to its changes.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@27 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |   10 ++
 .../libmissioncontrol/tmpl/mc-profile.sgml         |    1 +
 libmissioncontrol/mc-account-priv.h                |    1 +
 libmissioncontrol/mc-account.c                     |   39 ++++++
 libmissioncontrol/mc-account.h                     |    3 +
 libmissioncontrol/mc-profile.c                     |    1 +
 libmissioncontrol/mc-profile.h                     |    1 +
 src/mcd-connection.c                               |  127 ++++++++++++++++++--
 8 files changed, 171 insertions(+), 12 deletions(-)

commit 20edfafe914801c551d5075e7eb0cb8b4025fffa
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-16 13:43:47 +0000

    Unset the account properties when the passed string is NULL. Also,
    unset the display name if the passed value is the empty string.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@26 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 ++++++
 libmissioncontrol/mc-account.c |   10 +++++++---
 2 files changed, 13 insertions(+), 3 deletions(-)

commit 1289210b83d02be47f61b85105f05ae5a22d2484
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-02 11:51:38 +0000

    Invert the order of scanning of the .chandlers files, to give them the
    correct priority.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@25 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog              |    6 ++++++
 src/mcd-chan-handler.c |   16 ++++++++--------
 2 files changed, 14 insertions(+), 8 deletions(-)

commit d8d01bb3fbb5be36e11b3e8282b196cadcc62749
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-04-02 11:48:44 +0000

    Template changes...
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@24 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 .../tmpl/mcd-chan-handler.sgml                     |    3 +++
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    3 +++
 .../tmpl/mcd-connection.sgml                       |    3 +++
 .../tmpl/mcd-controller.sgml                       |    3 +++
 .../libmissioncontrol-server/tmpl/mcd-debug.sgml   |    3 +++
 .../tmpl/mcd-dispatcher-context.sgml               |    3 +++
 .../tmpl/mcd-dispatcher.sgml                       |    3 +++
 .../tmpl/mcd-enum-types.sgml                       |    3 +++
 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |    3 +++
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    3 +++
 .../libmissioncontrol-server/tmpl/mcd-mission.sgml |    3 +++
 .../tmpl/mcd-operation.sgml                        |    3 +++
 .../tmpl/mcd-presence-frame.sgml                   |    3 +++
 .../libmissioncontrol-server/tmpl/mcd-proxy.sgml   |    3 +++
 .../libmissioncontrol-server/tmpl/mcd-service.sgml |    3 +++
 .../libmissioncontrol/tmpl/mc-account-monitor.sgml |    3 +++
 .../libmissioncontrol/tmpl/mc-account.sgml         |    9 ++-------
 .../libmissioncontrol/tmpl/mc-manager.sgml         |    3 +++
 .../libmissioncontrol/tmpl/mc-profile.sgml         |    3 +++
 .../libmissioncontrol/tmpl/mc-protocol.sgml        |    5 +++--
 doc/reference/libmissioncontrol/tmpl/mc.sgml       |    3 +++
 .../libmissioncontrol/tmpl/mission-control.sgml    |    5 +++--
 22 files changed, 65 insertions(+), 11 deletions(-)

commit ba75e019d29bf1b95e176cc50b3d640808c30629
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-28 11:06:12 +0000

    Tagging 4.20
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@23 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 ++++
 configure.ac |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit 2c811238b3e8d8e69477c48fb47448286e8cade4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-28 06:28:32 +0000

    On "account-deleted", let the account object live while the signal is
    emitted. Fixes #1688539.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@22 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    4 ++++
 libmissioncontrol/mc-account-monitor.c |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit c8ec9d76a9e5f75178349937b988ee2ffdd1df1a
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-28 06:24:57 +0000

    * libmissioncontrol/mc-manager.c, libmissioncontrol/mc-profile.c:
      Fix file existance test.  Pass missing NULL to g_build_filename()...
    
    * src/mcd-connection.c:
      Make sure we don't access the presence array with index -1.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@21 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |   13 +++++++++++++
 libmissioncontrol/mc-manager.c |    4 ++--
 libmissioncontrol/mc-profile.c |    4 ++--
 src/mcd-connection.c           |    1 +
 4 files changed, 18 insertions(+), 4 deletions(-)

commit 7d8ced98ba3cfc9e44f04710d5c234a9bef70ef1
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-27 12:11:09 +0000

    Fixes for "make distcheck".
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@20 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 Makefile.am                                        |    2 +-
 configure.ac                                       |    5 +++--
 doc/reference/libmissioncontrol-server/Makefile.am |    2 +-
 doc/reference/libmissioncontrol/Makefile.am        |    2 +-
 libmissioncontrol/Makefile.am                      |    3 +--
 server/Makefile.am                                 |    2 +-
 src/Makefile.am                                    |    1 -
 7 files changed, 8 insertions(+), 9 deletions(-)

commit 6a924614e9ff10a19eec6ae6bf82fb342199ca0c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-23 13:09:30 +0000

    Rename package and tag version 4.19.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@19 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    4 ++++
 configure.ac |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit 048563a4ccc74272bcadbac0f239889abc18a66d
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-23 12:13:17 +0000

    Get the manager files in a way analog to .profiles.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@18 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    2 +-
 configure.ac                   |   10 ++++++
 libmissioncontrol/mc-manager.c |   71 +++++++++++++++++++++++++++++++++------
 3 files changed, 71 insertions(+), 12 deletions(-)

commit 030f85c0b627724aebfb25d3c109bf16e882c022
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-23 12:02:06 +0000

    Fix possible memory leak.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@17 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 libmissioncontrol/mc-profile.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 8eeef507bdaac4e6c2bacf863602eea5bd8ecbac
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-23 10:12:02 +0000

    Automatic update.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@16 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    3 ++
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |    7 ++++++
 .../tmpl/mcd-connection.sgml                       |    7 ++++++
 .../tmpl/mcd-controller.sgml                       |    7 ++++++
 .../tmpl/mcd-dispatcher.sgml                       |    7 ++++++
 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |    7 ++++++
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |    7 ++++++
 .../libmissioncontrol-server/tmpl/mcd-mission.sgml |    7 ++++++
 .../tmpl/mcd-operation.sgml                        |    7 ++++++
 .../tmpl/mcd-presence-frame.sgml                   |    7 ++++++
 .../libmissioncontrol-server/tmpl/mcd-proxy.sgml   |    7 ++++++
 .../libmissioncontrol-server/tmpl/mcd-service.sgml |   22 ++-----------------
 12 files changed, 76 insertions(+), 19 deletions(-)

commit 093b0cdc2b8f73d24cb4bf3100f9ecdc37479f9c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-23 10:07:25 +0000

    Move to XDG compliant directory location for Telepathy data files.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@15 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    6 ++
 configure.ac                   |    4 +-
 libmissioncontrol/mc-profile.c |  131 ++++++++++++++++++++++++++++------------
 src/mcd-chan-handler.c         |   43 +++++++++++--
 4 files changed, 135 insertions(+), 49 deletions(-)

commit c785986a4ddf04993bc132f52a042d0b915dc5d3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-21 14:34:47 +0000

    Make clear in documentation that the account name passed with the
    McAccountMonitor signals is not the display name.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@14 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                              |    4 ++++
 libmissioncontrol/mc-account-monitor.c |   15 ++++++++++-----
 2 files changed, 14 insertions(+), 5 deletions(-)

commit 9ab76222e9882f41a736afdcd71e5cc033a04667
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-21 13:57:12 +0000

    Fix possible critical messages.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@13 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog         |    3 +++
 INSTALL           |   50 ++++++++++++++++++++++++--------------------------
 src/mcd-manager.c |    2 ++
 3 files changed, 29 insertions(+), 26 deletions(-)

commit 3700420403d8dbf88d73ad82e71142da85323891
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-21 13:47:56 +0000

    * Makefile.am, configure.ac, doc/Makefile.am,
      libmissioncontrol/Makefile.am, src/Makefile.am, tools/*, xml/*:
      Build MissionControl D-Bus interface documentation from the embedded
      docstrings found in D-Bus service XML file.
    
    * autogen.sh: Added autogen script
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@12 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                     |   11 +
 INSTALL                       |  236 +++++++++++++++++++++++
 Makefile.am                   |    2 +-
 autogen.sh                    |    5 +
 configure.ac                  |    8 +
 doc/Makefile.am               |   10 +
 doc/mc-dbus-iface.html        |  296 -----------------------------
 libmissioncontrol/Makefile.am |    2 +-
 src/Makefile.am               |    2 +-
 tools/Makefile.am             |    4 +
 tools/doc-generator.xsl       |  410 +++++++++++++++++++++++++++++++++++++++++
 tools/spec-to-introspect.xsl  |   26 +++
 xml/Makefile.am               |   22 ++-
 xml/MissionControl.xml        |  297 +++++++++++++++++++++++++++++
 xml/mcd-dbus-services.xml     |  106 +----------
 15 files changed, 1039 insertions(+), 398 deletions(-)

commit 3609036ff1c656a4ed5bec06959a6217db44c52e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-16 13:45:29 +0000

    Gracefully handle the lack of a Capabilities field in the .profile
    config file.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@11 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                      |    4 ++++
 libmissioncontrol/mc-profile.c |   11 ++++++++---
 2 files changed, 12 insertions(+), 3 deletions(-)

commit aefbebec7815d5d53254cdecdf77c4f2021f65f8
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-16 12:54:14 +0000

    Macro for full recursive expansion of variables.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@10 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 configure.ac |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit 78cb97a17297d58a6b92026547c38ccd450bf3b3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-16 08:27:30 +0000

    Use the autotools' "datadir" variable to determine the location of the
    profiles.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@9 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    6 ++++++
 configure.ac |    5 +++--
 2 files changed, 9 insertions(+), 2 deletions(-)

commit 042cde5f55d9bbaafce7665775756a1e6c269af4
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-15 09:26:05 +0000

    Forgot to move Makefile.am
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@8 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 doc/reference/libmissioncontrol/Makefile.am |   74 +++++++++++++++++++++++++++
 1 files changed, 74 insertions(+), 0 deletions(-)

commit eecdf05329867be8d5a207f2b3b6c8997fbde7e3
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-15 09:15:15 +0000

    Move libmissioncontrol documentation to a subdirectory and setup a
    tree for libmissioncontrol-server docs.
    Some minor gtk-doc fixes to McdConnection.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@7 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                                          |    7 +
 configure.ac                                       |    2 +
 doc/reference/Makefile.am                          |   74 +----
 doc/reference/libmissioncontrol-server/Makefile.am |   72 ++++
 .../libmissioncontrol-server-docs.sgml             |   29 ++
 .../libmissioncontrol-server-sections.txt          |  301 ++++++++++++++++
 .../tmpl/mcd-chan-handler.sgml                     |   24 ++
 .../libmissioncontrol-server/tmpl/mcd-channel.sgml |  154 +++++++++
 .../tmpl/mcd-connection.sgml                       |  109 ++++++
 .../tmpl/mcd-controller.sgml                       |   41 +++
 .../libmissioncontrol-server/tmpl/mcd-debug.sgml   |   67 ++++
 .../tmpl/mcd-dispatcher-context.sgml               |  200 +++++++++++
 .../tmpl/mcd-dispatcher.sgml                       |   71 ++++
 .../tmpl/mcd-enum-types.sgml                       |   61 ++++
 .../libmissioncontrol-server/tmpl/mcd-manager.sgml |  120 +++++++
 .../libmissioncontrol-server/tmpl/mcd-master.sgml  |  183 ++++++++++
 .../libmissioncontrol-server/tmpl/mcd-mission.sgml |  160 +++++++++
 .../tmpl/mcd-operation.sgml                        |   61 ++++
 .../tmpl/mcd-presence-frame.sgml                   |  179 ++++++++++
 .../libmissioncontrol-server/tmpl/mcd-proxy.sgml   |   34 ++
 .../tmpl/mcd-service-gen.sgml                      |  313 +++++++++++++++++
 .../libmissioncontrol-server/tmpl/mcd-service.sgml |   56 +++
 .../tmpl/stamp-mcd-enum-types.sgml                 |   16 +
 .../libmissioncontrol/libmissioncontrol-docs.sgml  |   19 +
 .../libmissioncontrol-sections.txt                 |  182 ++++++++++
 .../libmissioncontrol/libmissioncontrol.types      |    9 +
 .../tmpl/mc-account-monitor-priv.sgml              |   16 +
 .../libmissioncontrol/tmpl/mc-account-monitor.sgml |   70 ++++
 .../libmissioncontrol/tmpl/mc-account-priv.sgml    |   16 +
 .../libmissioncontrol/tmpl/mc-account.sgml         |  361 ++++++++++++++++++++
 .../libmissioncontrol/tmpl/mc-client-lib-gen.sgml  |   16 +
 .../libmissioncontrol/tmpl/mc-manager-priv.sgml    |   16 +
 .../libmissioncontrol/tmpl/mc-manager.sgml         |   92 +++++
 .../libmissioncontrol/tmpl/mc-profile.sgml         |  219 ++++++++++++
 .../libmissioncontrol/tmpl/mc-protocol-priv.sgml   |   16 +
 .../libmissioncontrol/tmpl/mc-protocol.sgml        |  112 ++++++
 doc/reference/libmissioncontrol/tmpl/mc.sgml       |   23 ++
 .../tmpl/mission-control-signals-marshal.sgml      |   16 +
 .../tmpl/mission-control-unused.sgml               |  256 ++++++++++++++
 .../libmissioncontrol/tmpl/mission-control.sgml    |  316 +++++++++++++++++
 doc/reference/mission-control-docs.sgml            |   19 -
 doc/reference/mission-control-sections.txt         |  182 ----------
 doc/reference/mission-control.types                |    9 -
 doc/reference/tmpl/mc-account-monitor-priv.sgml    |   16 -
 doc/reference/tmpl/mc-account-monitor.sgml         |   70 ----
 doc/reference/tmpl/mc-account-priv.sgml            |   16 -
 doc/reference/tmpl/mc-account.sgml                 |  361 --------------------
 doc/reference/tmpl/mc-client-lib-gen.sgml          |   16 -
 doc/reference/tmpl/mc-manager-priv.sgml            |   16 -
 doc/reference/tmpl/mc-manager.sgml                 |   92 -----
 doc/reference/tmpl/mc-profile.sgml                 |  219 ------------
 doc/reference/tmpl/mc-protocol-priv.sgml           |   16 -
 doc/reference/tmpl/mc-protocol.sgml                |  112 ------
 doc/reference/tmpl/mc.sgml                         |   23 --
 .../tmpl/mission-control-signals-marshal.sgml      |   16 -
 doc/reference/tmpl/mission-control-unused.sgml     |  256 --------------
 doc/reference/tmpl/mission-control.sgml            |  316 -----------------
 src/mcd-connection.c                               |    3 +-
 src/mcd-connection.h                               |   12 +-
 59 files changed, 4026 insertions(+), 1833 deletions(-)

commit f4156335dbb0437ab57e1f5cca0beb38246c1e72
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-14 13:01:29 +0000

    Tagging 4.18.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@6 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog    |    2 ++
 configure.ac |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit e4ad7e82218f9a0c3bbcb4cd70a220128f84d79c
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-14 12:21:25 +0000

    Rewrite filter API to allow single filter registration and execution
    priority.
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@5 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                    |    6 ++
 src/mcd-dispatcher-context.h |   82 ++++++-----------
 src/mcd-dispatcher.c         |  195 +++++++++++++++++++++++++++---------------
 3 files changed, 161 insertions(+), 122 deletions(-)

commit 92ceaf7a78c73bd165dfe6322215f20fd785e27e
Author: Alberto Mardegan <mardy@users.sourceforge.net>
Date:   2007-03-13 12:15:17 +0000

    Turning a g_warning() into a g_debug().
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@4 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 src/mcd-master.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 9058b6290cf297e8b0df909390c06e7dc8bd2dd5
Author: Naba Kumar <kh_naba@users.sourceforge.net>
Date:   2007-03-13 12:05:09 +0000

    	* src/mcd-mission.c, src/mcd-controller.c, src/mcd-chan-handler.c,
    	src/mcd-connection.c, src/mcd-operation.c, src/mcd-service.c,
    	src/mcd-channel.c, src/mcd-manager.c, src/mcd-proxy.c,
    	src/mcd-dispatcher.c, src/mcd-debug.c,
    	src/mcd-master.c, src/mcd-presence-frame.c: Added API section docs.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@3 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                |    9 +++++++++
 src/mcd-chan-handler.c   |   11 +++++++++++
 src/mcd-channel.c        |   11 +++++++++++
 src/mcd-connection.c     |   11 +++++++++++
 src/mcd-controller.c     |   19 +++++++++++++------
 src/mcd-debug.c          |   11 +++++++++++
 src/mcd-dispatcher.c     |   11 +++++++++++
 src/mcd-manager.c        |   11 +++++++++++
 src/mcd-master.c         |   41 ++++++++++++++++++++++++-----------------
 src/mcd-mission.c        |   25 ++++++++++++++++---------
 src/mcd-operation.c      |   23 +++++++++++++++--------
 src/mcd-presence-frame.c |   11 +++++++++++
 src/mcd-proxy.c          |   17 ++++++++++++-----
 src/mcd-service.c        |   21 ++++++++++++++-------
 14 files changed, 180 insertions(+), 52 deletions(-)

commit fbea3bfc1e6aa72571e3de8bf9ddd98339289dcc
Author: Naba Kumar <kh_naba@users.sourceforge.net>
Date:   2007-03-13 09:25:12 +0000

    	* src/mcd-channel.c, src/mcd-connection.c:
    	Apply patch from Xavier Claessens to make MC server build with
    	gcc 4.x.
    
    	* libmissioncontrol/mc-account-cli.c,
    	libmissioncontrol/mc-account.[hc], libmissioncontrol/mc-manager.[hc],
    	libmissioncontrol/mc-profile.[hc], libmissioncontrol/mc-protocol.[hc],
    	libmissioncontrol/test.c:
    	Deprecate mc_{account,profile,protocol,manager}_free() and substitute
    	them with g_object_unref().
    
    	* libmissioncontrol/mc-account.c:
    	Correct documentation: mc_account_lookup*() does increment the
    	reference count.
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@2 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 ChangeLog                          |   19 +++++++++++++++++++
 libmissioncontrol/mc-account-cli.c |   10 +++++-----
 libmissioncontrol/mc-account.c     |   23 ++++++++++++-----------
 libmissioncontrol/mc-account.h     |    4 ++--
 libmissioncontrol/mc-manager.c     |    1 +
 libmissioncontrol/mc-manager.h     |    2 ++
 libmissioncontrol/mc-profile.c     |   13 +++++++------
 libmissioncontrol/mc-profile.h     |    2 ++
 libmissioncontrol/mc-protocol.c    |    3 ++-
 libmissioncontrol/mc-protocol.h    |    2 ++
 libmissioncontrol/test.c           |   28 ++++++++++++++--------------
 src/mcd-channel.c                  |   18 ++++++++++--------
 src/mcd-connection.c               |    8 ++++----
 13 files changed, 82 insertions(+), 51 deletions(-)

commit 56d5d75f3ae3b9c0dc362363935510b1b2d4c8a2
Author: Naba Kumar <kh_naba@users.sourceforge.net>
Date:   2007-03-09 15:45:27 +0000

    	Initial import of mission-control (starting from version 4.17)
    
    
    
    git-svn-id: https://mission-control.svn.sourceforge.net/svnroot/mission-control/trunk@1 d91c8aed-3f2b-0410-a83d-924a1c20a0ba

 AUTHORS                                            |    3 +
 COPYING                                            |  515 ++++
 ChangeLog                                          | 2923 ++++++++++++++++++++
 Makefile.am                                        |    5 +
 configure.ac                                       |  134 +
 doc/Makefile.am                                    |    2 +
 doc/mc-dbus-iface.html                             |  296 ++
 doc/reference/Makefile.am                          |   74 +
 doc/reference/mission-control-docs.sgml            |   19 +
 doc/reference/mission-control-sections.txt         |  182 ++
 doc/reference/mission-control.types                |    9 +
 doc/reference/tmpl/mc-account-monitor-priv.sgml    |   16 +
 doc/reference/tmpl/mc-account-monitor.sgml         |   70 +
 doc/reference/tmpl/mc-account-priv.sgml            |   16 +
 doc/reference/tmpl/mc-account.sgml                 |  361 +++
 doc/reference/tmpl/mc-client-lib-gen.sgml          |   16 +
 doc/reference/tmpl/mc-manager-priv.sgml            |   16 +
 doc/reference/tmpl/mc-manager.sgml                 |   92 +
 doc/reference/tmpl/mc-profile.sgml                 |  219 ++
 doc/reference/tmpl/mc-protocol-priv.sgml           |   16 +
 doc/reference/tmpl/mc-protocol.sgml                |  112 +
 doc/reference/tmpl/mc.sgml                         |   23 +
 .../tmpl/mission-control-signals-marshal.sgml      |   16 +
 doc/reference/tmpl/mission-control-unused.sgml     |  256 ++
 doc/reference/tmpl/mission-control.sgml            |  316 +++
 libmissioncontrol.pc.in                            |   12 +
 libmissioncontrol/Makefile.am                      |  101 +
 libmissioncontrol/mc-account-cli.c                 |  359 +++
 libmissioncontrol/mc-account-monitor-priv.h        |   31 +
 libmissioncontrol/mc-account-monitor.c             |  440 +++
 libmissioncontrol/mc-account-monitor.h             |   72 +
 libmissioncontrol/mc-account-priv.h                |   42 +
 libmissioncontrol/mc-account.c                     | 2136 ++++++++++++++
 libmissioncontrol/mc-account.h                     |  182 ++
 libmissioncontrol/mc-manager-priv.h                |   32 +
 libmissioncontrol/mc-manager.c                     |  388 +++
 libmissioncontrol/mc-manager.h                     |   79 +
 libmissioncontrol/mc-profile.c                     |  837 ++++++
 libmissioncontrol/mc-profile.h                     |  119 +
 libmissioncontrol/mc-protocol-priv.h               |   32 +
 libmissioncontrol/mc-protocol.c                    |  367 +++
 libmissioncontrol/mc-protocol.h                    |  103 +
 libmissioncontrol/mc.c                             |   50 +
 libmissioncontrol/mc.h                             |   29 +
 .../mission-control-signals-marshal.list           |    5 +
 libmissioncontrol/mission-control.c                | 1110 ++++++++
 libmissioncontrol/mission-control.h                |  208 ++
 libmissioncontrol/test.c                           |  491 ++++
 mission-control.pc.in                              |   12 +
 server/Makefile.am                                 |   15 +
 server/mc-server.c                                 |   62 +
 ...freedesktop.Telepathy.MissionControl.service.in |    3 +
 src/Makefile.am                                    |  110 +
 src/mcd-chan-handler.c                             |  158 ++
 src/mcd-chan-handler.h                             |   42 +
 src/mcd-channel.c                                  |  796 ++++++
 src/mcd-channel.h                                  |  106 +
 src/mcd-connection.c                               | 1980 +++++++++++++
 src/mcd-connection.h                               |   91 +
 src/mcd-controller.c                               |  129 +
 src/mcd-controller.h                               |   62 +
 src/mcd-debug.c                                    |  115 +
 src/mcd-debug.h                                    |   47 +
 src/mcd-dispatcher-context.h                       |  138 +
 src/mcd-dispatcher.c                               | 1185 ++++++++
 src/mcd-dispatcher.h                               |   95 +
 src/mcd-filtering-int.h                            |   17 +
 src/mcd-main.c                                     |   41 +
 src/mcd-manager.c                                  | 1065 +++++++
 src/mcd-manager.h                                  |   92 +
 src/mcd-master.c                                   | 1150 ++++++++
 src/mcd-master.h                                   |  106 +
 src/mcd-mission.c                                  |  482 ++++
 src/mcd-mission.h                                  |  125 +
 src/mcd-operation.c                                |  313 +++
 src/mcd-operation.h                                |   76 +
 src/mcd-presence-frame.c                           |  884 ++++++
 src/mcd-presence-frame.h                           |  133 +
 src/mcd-proxy.c                                    |  226 ++
 src/mcd-proxy.h                                    |   58 +
 src/mcd-service.c                                  |  789 ++++++
 src/mcd-service.h                                  |   72 +
 src/mcd-signals-marshal.list                       |   15 +
 test/Makefile.am                                   |   12 +
 test/mc-client.c                                   |   83 +
 xml/Makefile.am                                    |    1 +
 xml/mcd-dbus-services.xml                          |   99 +
 87 files changed, 23917 insertions(+), 0 deletions(-)
